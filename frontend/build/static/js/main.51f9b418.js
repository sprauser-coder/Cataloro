/*! For license information please see main.51f9b418.js.LICENSE.txt */
(()=>{var e={14:e=>{e.exports=function(){return!1}},438:(e,t,r)=>{var n=r(2622);e.exports=function(e){return n(this,e).get(e)}},579:(e,t,r)=>{"use strict";e.exports=r(1153)},705:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},793:e=>{e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},1143:(e,t,r)=>{var n=r(3028)(Object.keys,Object);e.exports=n},1153:(e,t,r)=>{"use strict";var n=r(5043),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,s={},c=null,d=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,n)&&!l.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:a,type:e,key:c,ref:d,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},1268:(e,t,r)=>{var n=r(5428),a=r(7574),s=r(6832),i=s&&s.isTypedArray,o=i?a(i):n;e.exports=o},1340:(e,t,r)=>{var n=r(3211);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},1629:(e,t,r)=>{var n=r(6913),a=r(6686);e.exports=function(e){if(!a(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1714:(e,t,r)=>{var n=r(1340);e.exports=function(e,t){var r=this.__data__,a=n(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this}},1946:(e,t,r)=>{var n=r(1340);e.exports=function(e){return n(this.__data__,e)>-1}},2070:(e,t,r)=>{var n=r(7937)(r(6552),"Set");e.exports=n},2074:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}},2154:(e,t,r)=>{var n=r(5575),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return a.call(t,e)?t[e]:void 0}},2555:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}function s(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}r.d(t,{A:()=>o})},2587:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},2622:(e,t,r)=>{var n=r(705);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},2662:(e,t,r)=>{var n=r(5575);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},2730:(e,t,r)=>{"use strict";var n=r(5043),a=r(8853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},f={};function p(e,t,r,n,a,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,r,n){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,a,n)&&(r=null),n||null===a?function(e){return!!u.call(f,e)||!u.call(m,e)&&(h.test(e)?f[e]=!0:(m[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=null===r?3!==a.type&&"":r:(t=a.attributeName,n=a.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(a=a.type)||4===a&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(x,y);g[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(x,y);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(x,y);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var v=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),j=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),E=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var D,I=Object.assign;function F(e){if(void 0===D)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var B=!1;function U(e,t){if(!e||B)return"";B=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),s=n.stack.split("\n"),i=a.length-1,o=s.length-1;1<=i&&0<=o&&a[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==s[o]){if(1!==i||1!==o)do{if(i--,0>--o||a[i]!==s[o]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{B=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?F(e):""}function q(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case j:return"Portal";case _:return"Profiler";case N:return"StrictMode";case C:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(r){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=W(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var r=t.checked;return I({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function J(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=H(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){Q(e,t);var r=H(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&Y(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+H(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return I({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(s(92));if(te(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:H(r)}}function se(e,t){var r=H(t.value),n=H(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function pe(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function ge(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),a=pe(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}Object.keys(me).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var xe=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,ke=null,Ne=null;function _e(e){if(e=ba(e)){if("function"!==typeof je)throw Error(s(280));var t=e.stateNode;t&&(t=wa(t),je(e.stateNode,e.type,t))}}function Se(e){ke?Ne?Ne.push(e):Ne=[e]:ke=e}function Ee(){if(ke){var e=ke,t=Ne;if(Ne=ke=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ae(e,t){return e(t)}function Ce(){}var Oe=!1;function Te(e,t,r){if(Oe)return e(t,r);Oe=!0;try{return Ae(e,t,r)}finally{Oe=!1,(null!==ke||null!==Ne)&&(Ce(),Ee())}}function Pe(e,t){var r=e.stateNode;if(null===r)return null;var n=wa(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(s(231,t,typeof r));return r}var Le=!1;if(d)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Le=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(de){Le=!1}function Re(e,t,r,n,a,s,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var De=!1,Ie=null,Fe=!1,Be=null,Ue={onError:function(e){De=!0,Ie=e}};function qe(e,t,r,n,a,s,i,o,l){De=!1,Ie=null,Re.apply(Ue,arguments)}function ze(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(ze(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(n=a.return)){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return He(a),e;if(i===n)return He(a),t;i=i.sibling}throw Error(s(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(s(189))}}if(r.alternate!==n)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=a.unstable_scheduleCallback,Ye=a.unstable_cancelCallback,$e=a.unstable_shouldYield,Je=a.unstable_requestPaint,Qe=a.unstable_now,Ze=a.unstable_getCurrentPriorityLevel,Xe=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,rt=a.unstable_LowPriority,nt=a.unstable_IdlePriority,at=null,st=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,a=e.suspendedLanes,s=e.pingedLanes,i=268435455&r;if(0!==i){var o=i&~a;0!==o?n=ut(o):0!==(s&=i)&&(n=ut(s))}else 0!==(i=r&~a)?n=ut(i):0!==s&&(n=ut(s));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&a)&&((a=n&-n)>=(s=t&-t)||16===a&&0!==(4194240&s)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)a=1<<(r=31-it(t)),n|=e[r],t&=~a;return n}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function xt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=r}function yt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-it(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var bt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,jt,kt,Nt,_t,St=!1,Et=[],At=null,Ct=null,Ot=null,Tt=new Map,Pt=new Map,Lt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Dt(e,t,r,n,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&jt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function It(e){var t=ya(e.target);if(null!==t){var r=ze(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Ve(r)))return e.blockedOn=t,void _t(e.priority,function(){kt(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=ba(r))&&jt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);ve=n,r.target.dispatchEvent(n),ve=null,t.shift()}return!0}function Bt(e,t,r){Ft(e)&&r.delete(t)}function Ut(){St=!1,null!==At&&Ft(At)&&(At=null),null!==Ct&&Ft(Ct)&&(Ct=null),null!==Ot&&Ft(Ot)&&(Ot=null),Tt.forEach(Bt),Pt.forEach(Bt)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ut)))}function zt(e){function t(t){return qt(t,e)}if(0<Et.length){qt(Et[0],e);for(var r=1;r<Et.length;r++){var n=Et[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==At&&qt(At,e),null!==Ct&&qt(Ct,e),null!==Ot&&qt(Ot,e),Tt.forEach(t),Pt.forEach(t),r=0;r<Lt.length;r++)(n=Lt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Lt.length&&null===(r=Lt[0]).blockedOn;)It(r),null===r.blockedOn&&Lt.shift()}var Vt=v.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,r,n){var a=bt,s=Vt.transition;Vt.transition=null;try{bt=1,Gt(e,t,r,n)}finally{bt=a,Vt.transition=s}}function Kt(e,t,r,n){var a=bt,s=Vt.transition;Vt.transition=null;try{bt=4,Gt(e,t,r,n)}finally{bt=a,Vt.transition=s}}function Gt(e,t,r,n){if(Ht){var a=$t(e,t,r,n);if(null===a)Hn(e,t,n,Yt,r),Rt(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return At=Dt(At,e,t,r,n,a),!0;case"dragenter":return Ct=Dt(Ct,e,t,r,n,a),!0;case"mouseover":return Ot=Dt(Ot,e,t,r,n,a),!0;case"pointerover":var s=a.pointerId;return Tt.set(s,Dt(Tt.get(s)||null,e,t,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,Pt.set(s,Dt(Pt.get(s)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(Rt(e,n),4&t&&-1<Mt.indexOf(e)){for(;null!==a;){var s=ba(a);if(null!==s&&wt(s),null===(s=$t(e,t,r,n))&&Hn(e,t,n,Yt,r),s===a)break;a=s}null!==a&&n.stopPropagation()}else Hn(e,t,n,null,r)}}var Yt=null;function $t(e,t,r,n){if(Yt=null,null!==(e=ya(e=we(n))))if(null===(t=ze(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Xe:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Qt=null,Zt=null,Xt=null;function er(){if(Xt)return Xt;var e,t,r=Zt,n=r.length,a="value"in Qt?Qt.value:Qt.textContent,s=a.length;for(e=0;e<n&&r[e]===a[e];e++);var i=n-e;for(t=1;t<=i&&r[n-t]===a[s-t];t++);return Xt=a.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ar(e){function t(t,r,n,a,s){for(var i in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return I(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var sr,ir,or,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=ar(lr),dr=I({},lr,{view:0,detail:0}),ur=ar(dr),hr=I({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&"mousemove"===e.type?(sr=e.screenX-or.screenX,ir=e.screenY-or.screenY):ir=sr=0,or=e),sr)},movementY:function(e){return"movementY"in e?e.movementY:ir}}),mr=ar(hr),fr=ar(I({},hr,{dataTransfer:0})),pr=ar(I({},dr,{relatedTarget:0})),gr=ar(I({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),xr=I({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yr=ar(xr),br=ar(I({},lr,{data:0})),vr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=jr[e])&&!!t[e]}function Nr(){return kr}var _r=I({},dr,{key:function(e){if(e.key){var t=vr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sr=ar(_r),Er=ar(I({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ar=ar(I({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nr})),Cr=ar(I({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Or=I({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tr=ar(Or),Pr=[9,13,27,32],Lr=d&&"CompositionEvent"in window,Mr=null;d&&"documentMode"in document&&(Mr=document.documentMode);var Rr=d&&"TextEvent"in window&&!Mr,Dr=d&&(!Lr||Mr&&8<Mr&&11>=Mr),Ir=String.fromCharCode(32),Fr=!1;function Br(e,t){switch(e){case"keyup":return-1!==Pr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ur(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qr=!1;var zr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zr[e.type]:"textarea"===t}function Hr(e,t,r,n){Se(n),0<(t=Kn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Wr=null,Kr=null;function Gr(e){Fn(e,0)}function Yr(e){if(G(va(e)))return e}function $r(e,t){if("change"===e)return t}var Jr=!1;if(d){var Qr;if(d){var Zr="oninput"in document;if(!Zr){var Xr=document.createElement("div");Xr.setAttribute("oninput","return;"),Zr="function"===typeof Xr.oninput}Qr=Zr}else Qr=!1;Jr=Qr&&(!document.documentMode||9<document.documentMode)}function en(){Wr&&(Wr.detachEvent("onpropertychange",tn),Kr=Wr=null)}function tn(e){if("value"===e.propertyName&&Yr(Kr)){var t=[];Hr(t,Kr,e,we(e)),Te(Gr,t)}}function rn(e,t,r){"focusin"===e?(en(),Kr=r,(Wr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yr(Kr)}function an(e,t){if("click"===e)return Yr(t)}function sn(e,t){if("input"===e||"change"===e)return Yr(t)}var on="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(on(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!u.call(t,a)||!on(e[a],t[a]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function un(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?un(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hn(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=Y((e=t.contentWindow).document)}return t}function mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fn(e){var t=hn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&un(r.ownerDocument.documentElement,r)){if(null!==n&&mn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=void 0===n.end?s:Math.min(n.end,a),!e.extend&&s>n&&(a=n,n=s,s=a),a=dn(r,s);var i=dn(r,n);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pn=d&&"documentMode"in document&&11>=document.documentMode,gn=null,xn=null,yn=null,bn=!1;function vn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;bn||null==gn||gn!==Y(n)||("selectionStart"in(n=gn)&&mn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},yn&&ln(yn,n)||(yn=n,0<(n=Kn(xn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=gn)))}function wn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var jn={animationend:wn("Animation","AnimationEnd"),animationiteration:wn("Animation","AnimationIteration"),animationstart:wn("Animation","AnimationStart"),transitionend:wn("Transition","TransitionEnd")},kn={},Nn={};function _n(e){if(kn[e])return kn[e];if(!jn[e])return e;var t,r=jn[e];for(t in r)if(r.hasOwnProperty(t)&&t in Nn)return kn[e]=r[t];return e}d&&(Nn=document.createElement("div").style,"AnimationEvent"in window||(delete jn.animationend.animation,delete jn.animationiteration.animation,delete jn.animationstart.animation),"TransitionEvent"in window||delete jn.transitionend.transition);var Sn=_n("animationend"),En=_n("animationiteration"),An=_n("animationstart"),Cn=_n("transitionend"),On=new Map,Tn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pn(e,t){On.set(e,t),l(t,[e])}for(var Ln=0;Ln<Tn.length;Ln++){var Mn=Tn[Ln];Pn(Mn.toLowerCase(),"on"+(Mn[0].toUpperCase()+Mn.slice(1)))}Pn(Sn,"onAnimationEnd"),Pn(En,"onAnimationIteration"),Pn(An,"onAnimationStart"),Pn("dblclick","onDoubleClick"),Pn("focusin","onFocus"),Pn("focusout","onBlur"),Pn(Cn,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rn));function In(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,a,i,o,l,c){if(qe.apply(this,arguments),De){if(!De)throw Error(s(198));var d=Ie;De=!1,Ie=null,Fe||(Fe=!0,Be=d)}}(n,t,void 0,e),e.currentTarget=null}function Fn(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var i=n.length-1;0<=i;i--){var o=n[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&a.isPropagationStopped())break e;In(a,o,c),s=l}else for(i=0;i<n.length;i++){if(l=(o=n[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&a.isPropagationStopped())break e;In(a,o,c),s=l}}}if(Fe)throw e=Be,Fe=!1,Be=null,e}function Bn(e,t){var r=t[pa];void 0===r&&(r=t[pa]=new Set);var n=e+"__bubble";r.has(n)||(Vn(t,e,2,!1),r.add(n))}function Un(e,t,r){var n=0;t&&(n|=4),Vn(r,e,n,t)}var qn="_reactListening"+Math.random().toString(36).slice(2);function zn(e){if(!e[qn]){e[qn]=!0,i.forEach(function(t){"selectionchange"!==t&&(Dn.has(t)||Un(t,!1,e),Un(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qn]||(t[qn]=!0,Un("selectionchange",!1,t))}}function Vn(e,t,r,n){switch(Jt(t)){case 1:var a=Wt;break;case 4:a=Kt;break;default:a=Gt}r=a.bind(null,t,r,e),a=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Hn(e,t,r,n,a){var s=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var i=n.tag;if(3===i||4===i){var o=n.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===i)for(i=n.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==o;){if(null===(i=ya(o)))return;if(5===(l=i.tag)||6===l){n=s=i;continue e}o=o.parentNode}}n=n.return}Te(function(){var n=s,a=we(r),i=[];e:{var o=On.get(e);if(void 0!==o){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Sr;break;case"focusin":c="focus",l=pr;break;case"focusout":c="blur",l=pr;break;case"beforeblur":case"afterblur":l=pr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ar;break;case Sn:case En:case An:l=gr;break;case Cn:l=Cr;break;case"scroll":l=ur;break;case"wheel":l=Tr;break;case"copy":case"cut":case"paste":l=yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Er}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var m,f=n;null!==f;){var p=(m=f).stateNode;if(5===m.tag&&null!==p&&(m=p,null!==h&&(null!=(p=Pe(f,h))&&d.push(Wn(f,p,m)))),u)break;f=f.return}0<d.length&&(o=new l(o,c,null,r,a),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===ve||!(c=r.relatedTarget||r.fromElement)||!ya(c)&&!c[fa])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?ya(c):null)&&(c!==(u=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(d=mr,p="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=Er,p="onPointerLeave",h="onPointerEnter",f="pointer"),u=null==l?o:va(l),m=null==c?o:va(c),(o=new d(p,f+"leave",l,r,a)).target=u,o.relatedTarget=m,p=null,ya(a)===n&&((d=new d(h,f+"enter",c,r,a)).target=m,d.relatedTarget=u,p=d),u=p,l&&c)e:{for(h=c,f=0,m=d=l;m;m=Gn(m))f++;for(m=0,p=h;p;p=Gn(p))m++;for(;0<f-m;)d=Gn(d),f--;for(;0<m-f;)h=Gn(h),m--;for(;f--;){if(d===h||null!==h&&d===h.alternate)break e;d=Gn(d),h=Gn(h)}d=null}else d=null;null!==l&&Yn(i,o,l,d,!1),null!==c&&null!==u&&Yn(i,u,c,d,!0)}if("select"===(l=(o=n?va(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=$r;else if(Vr(o))if(Jr)g=sn;else{g=nn;var x=rn}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=an);switch(g&&(g=g(e,n))?Hr(i,g,r,a):(x&&x(e,o,n),"focusout"===e&&(x=o._wrapperState)&&x.controlled&&"number"===o.type&&ee(o,"number",o.value)),x=n?va(n):window,e){case"focusin":(Vr(x)||"true"===x.contentEditable)&&(gn=x,xn=n,yn=null);break;case"focusout":yn=xn=gn=null;break;case"mousedown":bn=!0;break;case"contextmenu":case"mouseup":case"dragend":bn=!1,vn(i,r,a);break;case"selectionchange":if(pn)break;case"keydown":case"keyup":vn(i,r,a)}var y;if(Lr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qr?Br(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(Dr&&"ko"!==r.locale&&(qr||"onCompositionStart"!==b?"onCompositionEnd"===b&&qr&&(y=er()):(Zt="value"in(Qt=a)?Qt.value:Qt.textContent,qr=!0)),0<(x=Kn(n,b)).length&&(b=new br(b,e,null,r,a),i.push({event:b,listeners:x}),y?b.data=y:null!==(y=Ur(r))&&(b.data=y))),(y=Rr?function(e,t){switch(e){case"compositionend":return Ur(t);case"keypress":return 32!==t.which?null:(Fr=!0,Ir);case"textInput":return(e=t.data)===Ir&&Fr?null:e;default:return null}}(e,r):function(e,t){if(qr)return"compositionend"===e||!Lr&&Br(e,t)?(e=er(),Xt=Zt=Qt=null,qr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Kn(n,"onBeforeInput")).length&&(a=new br("onBeforeInput","beforeinput",null,r,a),i.push({event:a,listeners:n}),a.data=y))}Fn(i,t)})}function Wn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Kn(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=Pe(e,r))&&n.unshift(Wn(e,s,a)),null!=(s=Pe(e,t))&&n.push(Wn(e,s,a))),e=e.return}return n}function Gn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yn(e,t,r,n,a){for(var s=t._reactName,i=[];null!==r&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(null!==l&&l===n)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=Pe(r,s))&&i.unshift(Wn(r,l,o)):a||null!=(l=Pe(r,s))&&i.push(Wn(r,l,o))),r=r.return}0!==i.length&&e.push({event:t,listeners:i})}var $n=/\r\n?/g,Jn=/\u0000|\uFFFD/g;function Qn(e){return("string"===typeof e?e:""+e).replace($n,"\n").replace(Jn,"")}function Zn(e,t,r){if(t=Qn(t),Qn(e)!==t&&r)throw Error(s(425))}function Xn(){}var ea=null,ta=null;function ra(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var na="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,sa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sa?function(e){return sa.resolve(null).then(e).catch(oa)}:na;function oa(e){setTimeout(function(){throw e})}function la(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType)if("/$"===(r=a.data)){if(0===n)return e.removeChild(a),void zt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=a}while(r);zt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function da(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var ua=Math.random().toString(36).slice(2),ha="__reactFiber$"+ua,ma="__reactProps$"+ua,fa="__reactContainer$"+ua,pa="__reactEvents$"+ua,ga="__reactListeners$"+ua,xa="__reactHandles$"+ua;function ya(e){var t=e[ha];if(t)return t;for(var r=e.parentNode;r;){if(t=r[fa]||r[ha]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=da(e);null!==e;){if(r=e[ha])return r;e=da(e)}return t}r=(e=r).parentNode}return null}function ba(e){return!(e=e[ha]||e[fa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function va(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wa(e){return e[ma]||null}var ja=[],ka=-1;function Na(e){return{current:e}}function _a(e){0>ka||(e.current=ja[ka],ja[ka]=null,ka--)}function Sa(e,t){ka++,ja[ka]=e.current,e.current=t}var Ea={},Aa=Na(Ea),Ca=Na(!1),Oa=Ea;function Ta(e,t){var r=e.type.contextTypes;if(!r)return Ea;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in r)s[a]=t[a];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function La(){_a(Ca),_a(Aa)}function Ma(e,t,r){if(Aa.current!==Ea)throw Error(s(168));Sa(Aa,t),Sa(Ca,r)}function Ra(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var a in n=n.getChildContext())if(!(a in t))throw Error(s(108,V(e)||"Unknown",a));return I({},r,n)}function Da(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ea,Oa=Aa.current,Sa(Aa,e),Sa(Ca,Ca.current),!0}function Ia(e,t,r){var n=e.stateNode;if(!n)throw Error(s(169));r?(e=Ra(e,t,Oa),n.__reactInternalMemoizedMergedChildContext=e,_a(Ca),_a(Aa),Sa(Aa,e)):_a(Ca),Sa(Ca,r)}var Fa=null,Ba=!1,Ua=!1;function qa(e){null===Fa?Fa=[e]:Fa.push(e)}function za(){if(!Ua&&null!==Fa){Ua=!0;var e=0,t=bt;try{var r=Fa;for(bt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Fa=null,Ba=!1}catch(a){throw null!==Fa&&(Fa=Fa.slice(e+1)),Ge(Xe,za),a}finally{bt=t,Ua=!1}}return null}var Va=[],Ha=0,Wa=null,Ka=0,Ga=[],Ya=0,$a=null,Ja=1,Qa="";function Za(e,t){Va[Ha++]=Ka,Va[Ha++]=Wa,Wa=e,Ka=t}function Xa(e,t,r){Ga[Ya++]=Ja,Ga[Ya++]=Qa,Ga[Ya++]=$a,$a=e;var n=Ja;e=Qa;var a=32-it(n)-1;n&=~(1<<a),r+=1;var s=32-it(t)+a;if(30<s){var i=a-a%5;s=(n&(1<<i)-1).toString(32),n>>=i,a-=i,Ja=1<<32-it(t)+a|r<<a|n,Qa=s+e}else Ja=1<<s|r<<a|n,Qa=e}function es(e){null!==e.return&&(Za(e,1),Xa(e,1,0))}function ts(e){for(;e===Wa;)Wa=Va[--Ha],Va[Ha]=null,Ka=Va[--Ha],Va[Ha]=null;for(;e===$a;)$a=Ga[--Ya],Ga[Ya]=null,Qa=Ga[--Ya],Ga[Ya]=null,Ja=Ga[--Ya],Ga[Ya]=null}var rs=null,ns=null,as=!1,ss=null;function is(e,t){var r=Tc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function os(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,ns=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,ns=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==$a?{id:Ja,overflow:Qa}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Tc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,rs=e,ns=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(as){var t=ns;if(t){var r=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ca(r.nextSibling);var n=rs;t&&os(e,t)?is(n,r):(e.flags=-4097&e.flags|2,as=!1,rs=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,as=!1,rs=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function us(e){if(e!==rs)return!1;if(!as)return ds(e),as=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ra(e.type,e.memoizedProps)),t&&(t=ns)){if(ls(e))throw hs(),Error(s(418));for(;t;)is(e,t),t=ca(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ns=ca(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ns=null}}else ns=rs?ca(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=ns;e;)e=ca(e.nextSibling)}function ms(){ns=rs=null,as=!1}function fs(e){null===ss?ss=[e]:ss.push(e)}var ps=v.ReactCurrentBatchConfig;function gs(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(s(309));var n=r.stateNode}if(!n)throw Error(s(147,e));var a=n,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function xs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function bs(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function i(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Ic(r,e.mode,n)).return=e,t):((t=a(t,r)).return=e,t)}function c(e,t,r,n){var s=r.type;return s===k?u(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&ys(s)===t.type)?((n=a(t,r.props)).ref=gs(e,t,r),n.return=e,n):((n=Mc(r.type,r.key,r.props,null,e.mode,n)).ref=gs(e,t,r),n.return=e,n)}function d(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Fc(r,e.mode,n)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function u(e,t,r,n,s){return null===t||7!==t.tag?((t=Rc(r,e.mode,n,s)).return=e,t):((t=a(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ic(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(r=Mc(t.type,t.key,t.props,null,e.mode,r)).ref=gs(e,null,t),r.return=e,r;case j:return(t=Fc(t,e.mode,r)).return=e,t;case P:return h(e,(0,t._init)(t._payload),r)}if(te(t)||R(t))return(t=Rc(t,e.mode,r,null)).return=e,t;xs(e,t)}return null}function m(e,t,r,n){var a=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==a?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return r.key===a?c(e,t,r,n):null;case j:return r.key===a?d(e,t,r,n):null;case P:return m(e,t,(a=r._init)(r._payload),n)}if(te(r)||R(r))return null!==a?null:u(e,t,r,n,null);xs(e,r)}return null}function f(e,t,r,n,a){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(r)||null,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return c(t,e=e.get(null===n.key?r:n.key)||null,n,a);case j:return d(t,e=e.get(null===n.key?r:n.key)||null,n,a);case P:return f(e,t,r,(0,n._init)(n._payload),a)}if(te(n)||R(n))return u(t,e=e.get(r)||null,n,a,null);xs(t,n)}return null}function p(a,s,o,l){for(var c=null,d=null,u=s,p=s=0,g=null;null!==u&&p<o.length;p++){u.index>p?(g=u,u=null):g=u.sibling;var x=m(a,u,o[p],l);if(null===x){null===u&&(u=g);break}e&&u&&null===x.alternate&&t(a,u),s=i(x,s,p),null===d?c=x:d.sibling=x,d=x,u=g}if(p===o.length)return r(a,u),as&&Za(a,p),c;if(null===u){for(;p<o.length;p++)null!==(u=h(a,o[p],l))&&(s=i(u,s,p),null===d?c=u:d.sibling=u,d=u);return as&&Za(a,p),c}for(u=n(a,u);p<o.length;p++)null!==(g=f(u,a,p,o[p],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?p:g.key),s=i(g,s,p),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(a,e)}),as&&Za(a,p),c}function g(a,o,l,c){var d=R(l);if("function"!==typeof d)throw Error(s(150));if(null==(l=d.call(l)))throw Error(s(151));for(var u=d=null,p=o,g=o=0,x=null,y=l.next();null!==p&&!y.done;g++,y=l.next()){p.index>g?(x=p,p=null):x=p.sibling;var b=m(a,p,y.value,c);if(null===b){null===p&&(p=x);break}e&&p&&null===b.alternate&&t(a,p),o=i(b,o,g),null===u?d=b:u.sibling=b,u=b,p=x}if(y.done)return r(a,p),as&&Za(a,g),d;if(null===p){for(;!y.done;g++,y=l.next())null!==(y=h(a,y.value,c))&&(o=i(y,o,g),null===u?d=y:u.sibling=y,u=y);return as&&Za(a,g),d}for(p=n(a,p);!y.done;g++,y=l.next())null!==(y=f(p,a,g,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?g:y.key),o=i(y,o,g),null===u?d=y:u.sibling=y,u=y);return e&&p.forEach(function(e){return t(a,e)}),as&&Za(a,g),d}return function e(n,s,i,l){if("object"===typeof i&&null!==i&&i.type===k&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,d=s;null!==d;){if(d.key===c){if((c=i.type)===k){if(7===d.tag){r(n,d.sibling),(s=a(d,i.props.children)).return=n,n=s;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&ys(c)===d.type){r(n,d.sibling),(s=a(d,i.props)).ref=gs(n,d,i),s.return=n,n=s;break e}r(n,d);break}t(n,d),d=d.sibling}i.type===k?((s=Rc(i.props.children,n.mode,l,i.key)).return=n,n=s):((l=Mc(i.type,i.key,i.props,null,n.mode,l)).ref=gs(n,s,i),l.return=n,n=l)}return o(n);case j:e:{for(d=i.key;null!==s;){if(s.key===d){if(4===s.tag&&s.stateNode.containerInfo===i.containerInfo&&s.stateNode.implementation===i.implementation){r(n,s.sibling),(s=a(s,i.children||[])).return=n,n=s;break e}r(n,s);break}t(n,s),s=s.sibling}(s=Fc(i,n.mode,l)).return=n,n=s}return o(n);case P:return e(n,s,(d=i._init)(i._payload),l)}if(te(i))return p(n,s,i,l);if(R(i))return g(n,s,i,l);xs(n,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==s&&6===s.tag?(r(n,s.sibling),(s=a(s,i)).return=n,n=s):(r(n,s),(s=Ic(i,n.mode,l)).return=n,n=s),o(n)):r(n,s)}}var vs=bs(!0),ws=bs(!1),js=Na(null),ks=null,Ns=null,_s=null;function Ss(){_s=Ns=ks=null}function Es(e){var t=js.current;_a(js),e._currentValue=t}function As(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Cs(e,t){ks=e,_s=Ns=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Os(e){var t=e._currentValue;if(_s!==e)if(e={context:e,memoizedValue:t,next:null},null===Ns){if(null===ks)throw Error(s(308));Ns=e,ks.dependencies={lanes:0,firstContext:e}}else Ns=Ns.next=e;return t}var Ts=null;function Ps(e){null===Ts?Ts=[e]:Ts.push(e)}function Ls(e,t,r,n){var a=t.interleaved;return null===a?(r.next=r,Ps(t)):(r.next=a.next,a.next=r),t.interleaved=r,Ms(e,n)}function Ms(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Rs=!1;function Ds(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Is(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bs(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Al)){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Ms(e,r)}return null===(a=n.interleaved)?(t.next=t,Ps(n)):(t.next=a.next,a.next=t),n.interleaved=t,Ms(e,r)}function Us(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,yt(e,r)}}function qs(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===s?a=s=i:s=s.next=i,r=r.next}while(null!==r);null===s?a=s=t:s=s.next=t}else a=s=t;return r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function zs(e,t,r,n){var a=e.updateQueue;Rs=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==s){var u=a.baseState;for(i=0,d=c=l=null,o=s;;){var h=o.lane,m=o.eventTime;if((n&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,p=o;switch(h=t,m=r,p.tag){case 1:if("function"===typeof(f=p.payload)){u=f.call(m,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=p.payload)?f.call(m,u,h):f)||void 0===h)break e;u=I({},u,h);break e;case 2:Rs=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,i|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(h=o).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===d&&(l=u),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);Dl|=i,e.lanes=i,e.memoizedState=u}}function Vs(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(null!==a){if(n.callback=null,n=r,"function"!==typeof a)throw Error(s(191,a));a.call(n)}}}var Hs={},Ws=Na(Hs),Ks=Na(Hs),Gs=Na(Hs);function Ys(e){if(e===Hs)throw Error(s(174));return e}function $s(e,t){switch(Sa(Gs,t),Sa(Ks,e),Sa(Ws,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_a(Ws),Sa(Ws,t)}function Js(){_a(Ws),_a(Ks),_a(Gs)}function Qs(e){Ys(Gs.current);var t=Ys(Ws.current),r=le(t,e.type);t!==r&&(Sa(Ks,e),Sa(Ws,r))}function Zs(e){Ks.current===e&&(_a(Ws),_a(Ks))}var Xs=Na(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ri(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ni=v.ReactCurrentDispatcher,ai=v.ReactCurrentBatchConfig,si=0,ii=null,oi=null,li=null,ci=!1,di=!1,ui=0,hi=0;function mi(){throw Error(s(321))}function fi(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!on(e[r],t[r]))return!1;return!0}function pi(e,t,r,n,a,i){if(si=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ni.current=null===e||null===e.memoizedState?Zi:Xi,e=r(n,a),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(s(301));i+=1,li=oi=null,t.updateQueue=null,ni.current=eo,e=r(n,a)}while(di)}if(ni.current=Qi,t=null!==oi&&null!==oi.next,si=0,li=oi=ii=null,ci=!1,t)throw Error(s(300));return e}function gi(){var e=0!==ui;return ui=0,e}function xi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function yi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function bi(e,t){return"function"===typeof t?t(e):t}function vi(e){var t=yi(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=oi,a=n.baseQueue,i=r.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(null!==a){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((si&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=n):c=c.next=h,ii.lanes|=u,Dl|=u}d=d.next}while(null!==d&&d!==i);null===c?o=n:c.next=l,on(n,t.memoizedState)||(bo=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){a=e;do{i=a.lane,ii.lanes|=i,Dl|=i,a=a.next}while(a!==e)}else null===a&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function wi(e){var t=yi(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(null!==a){r.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);on(i,t.memoizedState)||(bo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function ji(){}function ki(e,t){var r=ii,n=yi(),a=t(),i=!on(n.memoizedState,a);if(i&&(n.memoizedState=a,bo=!0),n=n.queue,Ri(Si.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(r.flags|=2048,Oi(9,_i.bind(null,r,n,a,t),void 0,null),null===Cl)throw Error(s(349));0!==(30&si)||Ni(r,t,a)}return a}function Ni(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function _i(e,t,r,n){t.value=r,t.getSnapshot=n,Ei(t)&&Ai(e)}function Si(e,t,r){return r(function(){Ei(t)&&Ai(e)})}function Ei(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!on(e,r)}catch(n){return!0}}function Ai(e){var t=Ms(e,1);null!==t&&rc(t,e,1,-1)}function Ci(e){var t=xi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[t.memoizedState,e]}function Oi(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Ti(){return yi().memoizedState}function Pi(e,t,r,n){var a=xi();ii.flags|=e,a.memoizedState=Oi(1|t,r,void 0,void 0===n?null:n)}function Li(e,t,r,n){var a=yi();n=void 0===n?null:n;var s=void 0;if(null!==oi){var i=oi.memoizedState;if(s=i.destroy,null!==n&&fi(n,i.deps))return void(a.memoizedState=Oi(t,r,s,n))}ii.flags|=e,a.memoizedState=Oi(1|t,r,s,n)}function Mi(e,t){return Pi(8390656,8,e,t)}function Ri(e,t){return Li(2048,8,e,t)}function Di(e,t){return Li(4,2,e,t)}function Ii(e,t){return Li(4,4,e,t)}function Fi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bi(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Li(4,4,Fi.bind(null,t,e),r)}function Ui(){}function qi(e,t){var r=yi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&fi(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function zi(e,t){var r=yi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&fi(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Vi(e,t,r){return 0===(21&si)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=r):(on(r,t)||(r=pt(),ii.lanes|=r,Dl|=r,e.baseState=!0),t)}function Hi(e,t){var r=bt;bt=0!==r&&4>r?r:4,e(!0);var n=ai.transition;ai.transition={};try{e(!1),t()}finally{bt=r,ai.transition=n}}function Wi(){return yi().memoizedState}function Ki(e,t,r){var n=tc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Yi(e))$i(t,r);else if(null!==(r=Ls(e,t,r,n))){rc(r,e,n,ec()),Ji(r,t,n)}}function Gi(e,t,r){var n=tc(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Yi(e))$i(t,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,r);if(a.hasEagerState=!0,a.eagerState=o,on(o,i)){var l=t.interleaved;return null===l?(a.next=a,Ps(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(r=Ls(e,t,a,n))&&(rc(r,e,n,a=ec()),Ji(r,t,n))}}function Yi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function $i(e,t){di=ci=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ji(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,yt(e,r)}}var Qi={readContext:Os,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},Zi={readContext:Os,useCallback:function(e,t){return xi().memoizedState=[e,void 0===t?null:t],e},useContext:Os,useEffect:Mi,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Pi(4194308,4,Fi.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Pi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pi(4,2,e,t)},useMemo:function(e,t){var r=xi();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=xi();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Ki.bind(null,ii,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},xi().memoizedState=e},useState:Ci,useDebugValue:Ui,useDeferredValue:function(e){return xi().memoizedState=e},useTransition:function(){var e=Ci(!1),t=e[0];return e=Hi.bind(null,e[1]),xi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ii,a=xi();if(as){if(void 0===r)throw Error(s(407));r=r()}else{if(r=t(),null===Cl)throw Error(s(349));0!==(30&si)||Ni(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Mi(Si.bind(null,n,i,e),[e]),n.flags|=2048,Oi(9,_i.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=xi(),t=Cl.identifierPrefix;if(as){var r=Qa;t=":"+t+"R"+(r=(Ja&~(1<<32-it(Ja)-1)).toString(32)+r),0<(r=ui++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xi={readContext:Os,useCallback:qi,useContext:Os,useEffect:Ri,useImperativeHandle:Bi,useInsertionEffect:Di,useLayoutEffect:Ii,useMemo:zi,useReducer:vi,useRef:Ti,useState:function(){return vi(bi)},useDebugValue:Ui,useDeferredValue:function(e){return Vi(yi(),oi.memoizedState,e)},useTransition:function(){return[vi(bi)[0],yi().memoizedState]},useMutableSource:ji,useSyncExternalStore:ki,useId:Wi,unstable_isNewReconciler:!1},eo={readContext:Os,useCallback:qi,useContext:Os,useEffect:Ri,useImperativeHandle:Bi,useInsertionEffect:Di,useLayoutEffect:Ii,useMemo:zi,useReducer:wi,useRef:Ti,useState:function(){return wi(bi)},useDebugValue:Ui,useDeferredValue:function(e){var t=yi();return null===oi?t.memoizedState=e:Vi(t,oi.memoizedState,e)},useTransition:function(){return[wi(bi)[0],yi().memoizedState]},useMutableSource:ji,useSyncExternalStore:ki,useId:Wi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var r in t=I({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ro(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:I({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var no={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),s=Fs(n,a);s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Bs(e,s,a))&&(rc(t,e,a,n),Us(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ec(),a=tc(e),s=Fs(n,a);s.tag=1,s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Bs(e,s,a))&&(rc(t,e,a,n),Us(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),n=tc(e),a=Fs(r,n);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Bs(e,a,n))&&(rc(t,e,n,r),Us(t,e,n))}};function ao(e,t,r,n,a,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!ln(r,n)||!ln(a,s))}function so(e,t,r){var n=!1,a=Ea,s=t.contextType;return"object"===typeof s&&null!==s?s=Os(s):(a=Pa(t)?Oa:Aa.current,s=(n=null!==(n=t.contextTypes)&&void 0!==n)?Ta(e,a):Ea),t=new t(r,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=no,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function io(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&no.enqueueReplaceState(t,t.state,null)}function oo(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Ds(e);var s=t.contextType;"object"===typeof s&&null!==s?a.context=Os(s):(s=Pa(t)?Oa:Aa.current,a.context=Ta(e,s)),a.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ro(e,t,s,r),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&no.enqueueReplaceState(a,a.state,null),zs(e,r,a,n),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var r="",n=t;do{r+=q(n),n=n.return}while(n);var a=r}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a,digest:null}}function co(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ho="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,r){(r=Fs(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Hl||(Hl=!0,Wl=n),uo(0,t)},r}function fo(e,t,r){(r=Fs(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(r.callback=function(){uo(0,t),"function"!==typeof n&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function po(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new ho;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=_c.bind(null,e,t,r),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function xo(e,t,r,n,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Fs(-1,1)).tag=2,Bs(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var yo=v.ReactCurrentOwner,bo=!1;function vo(e,t,r,n){t.child=null===e?ws(t,null,r,n):vs(t,e.child,r,n)}function wo(e,t,r,n,a){r=r.render;var s=t.ref;return Cs(t,a),n=pi(e,t,r,n,s,a),r=gi(),null===e||bo?(as&&r&&es(t),t.flags|=1,vo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ho(e,t,a))}function jo(e,t,r,n,a){if(null===e){var s=r.type;return"function"!==typeof s||Pc(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Mc(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ko(e,t,s,n,a))}if(s=e.child,0===(e.lanes&a)){var i=s.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(i,n)&&e.ref===t.ref)return Ho(e,t,a)}return t.flags|=1,(e=Lc(s,n)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,r,n,a){if(null!==e){var s=e.memoizedProps;if(ln(s,n)&&e.ref===t.ref){if(bo=!1,t.pendingProps=n=s,0===(e.lanes&a))return t.lanes=e.lanes,Ho(e,t,a);0!==(131072&e.flags)&&(bo=!0)}}return So(e,t,r,n,a)}function No(e,t,r){var n=t.pendingProps,a=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sa(Ll,Pl),Pl|=r;else{if(0===(1073741824&r))return e=null!==s?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Sa(Ll,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:r,Sa(Ll,Pl),Pl|=n}else null!==s?(n=s.baseLanes|r,t.memoizedState=null):n=r,Sa(Ll,Pl),Pl|=n;return vo(e,t,a,r),t.child}function _o(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,r,n,a){var s=Pa(r)?Oa:Aa.current;return s=Ta(t,s),Cs(t,a),r=pi(e,t,r,n,s,a),n=gi(),null===e||bo?(as&&n&&es(t),t.flags|=1,vo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ho(e,t,a))}function Eo(e,t,r,n,a){if(Pa(r)){var s=!0;Da(t)}else s=!1;if(Cs(t,a),null===t.stateNode)Vo(e,t),so(t,r,n),oo(t,r,n,a),n=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=r.contextType;"object"===typeof c&&null!==c?c=Os(c):c=Ta(t,c=Pa(r)?Oa:Aa.current);var d=r.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==n||l!==c)&&io(t,i,n,c),Rs=!1;var h=t.memoizedState;i.state=h,zs(t,n,i,a),l=t.memoizedState,o!==n||h!==l||Ca.current||Rs?("function"===typeof d&&(ro(t,r,d,n),l=t.memoizedState),(o=Rs||ao(t,r,o,n,h,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),i.props=n,i.state=l,i.context=c,n=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,Is(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(l=r.contextType)&&null!==l?l=Os(l):l=Ta(t,l=Pa(r)?Oa:Aa.current);var m=r.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==u||h!==l)&&io(t,i,n,l),Rs=!1,h=t.memoizedState,i.state=h,zs(t,n,i,a);var f=t.memoizedState;o!==u||h!==f||Ca.current||Rs?("function"===typeof m&&(ro(t,r,m,n),f=t.memoizedState),(c=Rs||ao(t,r,c,n,h,f,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(n,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(n,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),i.props=n,i.state=f,i.context=l,n=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Ao(e,t,r,n,s,a)}function Ao(e,t,r,n,a,s){_o(e,t);var i=0!==(128&t.flags);if(!n&&!i)return a&&Ia(t,r,!1),Ho(e,t,s);n=t.stateNode,yo.current=t;var o=i&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&i?(t.child=vs(t,e.child,null,s),t.child=vs(t,null,o,s)):vo(e,t,o,s),t.memoizedState=n.state,a&&Ia(t,r,!0),t.child}function Co(e){var t=e.stateNode;t.pendingContext?Ma(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ma(0,t.context,!1),$s(e,t.containerInfo)}function Oo(e,t,r,n,a){return ms(),fs(a),t.flags|=256,vo(e,t,r,n),t.child}var To,Po,Lo,Mo,Ro={dehydrated:null,treeContext:null,retryLane:0};function Do(e){return{baseLanes:e,cachePool:null,transitions:null}}function Io(e,t,r){var n,a=t.pendingProps,i=Xs.current,o=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&i)),n?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Sa(Xs,1&i),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Dc(l,a,0,null),e=Rc(e,a,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Do(r),t.memoizedState=Ro,e):Fo(t,l));if(null!==(i=e.memoizedState)&&null!==(n=i.dehydrated))return function(e,t,r,n,a,i,o){if(r)return 256&t.flags?(t.flags&=-257,Bo(e,t,o,n=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Dc({mode:"visible",children:n.children},a,0,null),(i=Rc(i,a,o,null)).flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,0!==(1&t.mode)&&vs(t,e.child,null,o),t.child.memoizedState=Do(o),t.memoizedState=Ro,i);if(0===(1&t.mode))return Bo(e,t,o,null);if("$!"===a.data){if(n=a.nextSibling&&a.nextSibling.dataset)var l=n.dgst;return n=l,Bo(e,t,o,n=co(i=Error(s(419)),n,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(n=Cl)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(n.suspendedLanes|o))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Ms(e,a),rc(n,e,a,-1))}return pc(),Bo(e,t,o,n=co(Error(s(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ns=ca(a.nextSibling),rs=t,as=!0,ss=null,null!==e&&(Ga[Ya++]=Ja,Ga[Ya++]=Qa,Ga[Ya++]=$a,Ja=e.id,Qa=e.overflow,$a=t),t=Fo(t,n.children),t.flags|=4096,t)}(e,t,l,a,n,i,r);if(o){o=a.fallback,l=t.mode,n=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Lc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==n?o=Lc(n,o):(o=Rc(o,l,r,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Do(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~r,t.memoizedState=Ro,a}return e=(o=e.child).sibling,a=Lc(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=r),a.return=t,a.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Fo(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bo(e,t,r,n){return null!==n&&fs(n),vs(t,e.child,null,r),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),As(e.return,t,r)}function qo(e,t,r,n,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function zo(e,t,r){var n=t.pendingProps,a=n.revealOrder,s=n.tail;if(vo(e,t,n.children,r),0!==(2&(n=Xs.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,r,t);else if(19===e.tag)Uo(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Sa(Xs,n),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===ei(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),qo(t,!1,a,r,s);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ei(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}qo(t,!0,r,null,s);break;case"together":qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(r=Lc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Lc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Wo(e,t){if(!as)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=14680064&a.subtreeFlags,n|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Go(e,t,r){var n=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return Pa(t.type)&&La(),Ko(t),null;case 3:return n=t.stateNode,Js(),_a(Ca),_a(Aa),ri(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ic(ss),ss=null))),Po(e,t),Ko(t),null;case 5:Zs(t);var a=Ys(Gs.current);if(r=t.type,null!==e&&null!=t.stateNode)Lo(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(s(166));return Ko(t),null}if(e=Ys(Ws.current),us(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ha]=t,n[ma]=i,e=0!==(1&t.mode),r){case"dialog":Bn("cancel",n),Bn("close",n);break;case"iframe":case"object":case"embed":Bn("load",n);break;case"video":case"audio":for(a=0;a<Rn.length;a++)Bn(Rn[a],n);break;case"source":Bn("error",n);break;case"img":case"image":case"link":Bn("error",n),Bn("load",n);break;case"details":Bn("toggle",n);break;case"input":J(n,i),Bn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Bn("invalid",n);break;case"textarea":ae(n,i),Bn("invalid",n)}for(var l in ye(r,i),a=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?n.textContent!==c&&(!0!==i.suppressHydrationWarning&&Zn(n.textContent,c,e),a=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Zn(n.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Bn("scroll",n)}switch(r){case"input":K(n),X(n,i,!0);break;case"textarea":K(n),ie(n);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(n.onclick=Xn)}n=a,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),"select"===r&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[ha]=t,e[ma]=n,To(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(r,n),r){case"dialog":Bn("cancel",e),Bn("close",e),a=n;break;case"iframe":case"object":case"embed":Bn("load",e),a=n;break;case"video":case"audio":for(a=0;a<Rn.length;a++)Bn(Rn[a],e);a=n;break;case"source":Bn("error",e),a=n;break;case"img":case"image":case"link":Bn("error",e),Bn("load",e),a=n;break;case"details":Bn("toggle",e),a=n;break;case"input":J(e,n),a=$(e,n),Bn("invalid",e);break;case"option":default:a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=I({},n,{value:void 0}),Bn("invalid",e);break;case"textarea":ae(e,n),a=ne(e,n),Bn("invalid",e)}for(i in ye(r,a),c=a)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?ge(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==r||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Bn("scroll",e):null!=d&&b(e,i,d,l))}switch(r){case"input":K(e),X(e,n,!1);break;case"textarea":K(e),ie(e);break;case"option":null!=n.value&&e.setAttribute("value",""+H(n.value));break;case"select":e.multiple=!!n.multiple,null!=(i=n.value)?re(e,!!n.multiple,i,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Xn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Mo(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(s(166));if(r=Ys(Gs.current),Ys(Ws.current),us(t)){if(n=t.stateNode,r=t.memoizedProps,n[ha]=t,(i=n.nodeValue!==r)&&null!==(e=rs))switch(e.tag){case 3:Zn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zn(n.nodeValue,r,0!==(1&e.mode))}i&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[ha]=t,t.stateNode=n}return Ko(t),null;case 13:if(_a(Xs),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(as&&null!==ns&&0!==(1&t.mode)&&0===(128&t.flags))hs(),ms(),t.flags|=98560,i=!1;else if(i=us(t),null!==n&&null!==n.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[ha]=t}else ms(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),i=!1}else null!==ss&&(ic(ss),ss=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Xs.current)?0===Ml&&(Ml=3):pc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return Js(),Po(e,t),null===e&&zn(t.stateNode.containerInfo),Ko(t),null;case 10:return Es(t.type._context),Ko(t),null;case 19:if(_a(Xs),null===(i=t.memoizedState))return Ko(t),null;if(n=0!==(128&t.flags),null===(l=i.rendering))if(n)Wo(i,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Wo(i,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(i=r).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Sa(Xs,1&Xs.current|2),t.child}e=e.sibling}null!==i.tail&&Qe()>zl&&(t.flags|=128,n=!0,Wo(i,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ei(l))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Wo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!as)return Ko(t),null}else 2*Qe()-i.renderingStartTime>zl&&1073741824!==r&&(t.flags|=128,n=!0,Wo(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=i.last)?r.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Qe(),t.sibling=null,r=Xs.current,Sa(Xs,n?1&r|2:1&r),t):(Ko(t),null);case 22:case 23:return uc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Yo(e,t){switch(ts(t),t.tag){case 1:return Pa(t.type)&&La(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Js(),_a(Ca),_a(Aa),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zs(t),null;case 13:if(_a(Xs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ms()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _a(Xs),null;case 4:return Js(),null;case 10:return Es(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}To=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Po=function(){},Lo=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Ys(Ws.current);var s,i=null;switch(r){case"input":a=$(e,a),n=$(e,n),i=[];break;case"select":a=I({},a,{value:void 0}),n=I({},n,{value:void 0}),i=[];break;case"textarea":a=ne(e,a),n=ne(e,n),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof n.onClick&&(e.onclick=Xn)}for(d in ye(r,n),r=null,a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var l=a[d];for(s in l)l.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=null!=a?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(i||(i=[]),i.push(d,r)),r=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Bn("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Mo=function(e,t,r,n){r!==n&&(t.flags|=4)};var $o=!1,Jo=!1,Qo="function"===typeof WeakSet?WeakSet:Set,Zo=null;function Xo(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){Nc(e,t,n)}else r.current=null}function el(e,t,r){try{r()}catch(n){Nc(e,t,n)}}var tl=!1;function rl(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var a=n=n.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&el(t,r,s)}a=a.next}while(a!==n)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function al(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[ma],delete t[pa],delete t[ga],delete t[xa])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Xn));else if(4!==n&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var dl=null,ul=!1;function hl(e,t,r){for(r=r.child;null!==r;)ml(e,t,r),r=r.sibling}function ml(e,t,r){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(at,r)}catch(o){}switch(r.tag){case 5:Jo||Xo(r,t);case 6:var n=dl,a=ul;dl=null,hl(e,t,r),ul=a,null!==(dl=n)&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):dl.removeChild(r.stateNode));break;case 18:null!==dl&&(ul?(e=dl,r=r.stateNode,8===e.nodeType?la(e.parentNode,r):1===e.nodeType&&la(e,r),zt(e)):la(dl,r.stateNode));break;case 4:n=dl,a=ul,dl=r.stateNode.containerInfo,ul=!0,hl(e,t,r),dl=n,ul=a;break;case 0:case 11:case 14:case 15:if(!Jo&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){a=n=n.next;do{var s=a,i=s.destroy;s=s.tag,void 0!==i&&(0!==(2&s)||0!==(4&s))&&el(r,t,i),a=a.next}while(a!==n)}hl(e,t,r);break;case 1:if(!Jo&&(Xo(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Nc(r,t,o)}hl(e,t,r);break;case 21:hl(e,t,r);break;case 22:1&r.mode?(Jo=(n=Jo)||null!==r.memoizedState,hl(e,t,r),Jo=n):hl(e,t,r);break;default:hl(e,t,r)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Qo),t.forEach(function(t){var n=Ac.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function pl(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(s(160));ml(i,o,a),dl=null,ul=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(d){Nc(a,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),xl(e),4&n){try{rl(3,e,e.return),nl(3,e)}catch(g){Nc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Nc(e,e.return,g)}}break;case 1:pl(t,e),xl(e),512&n&&null!==r&&Xo(r,r.return);break;case 5:if(pl(t,e),xl(e),512&n&&null!==r&&Xo(r,r.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(g){Nc(e,e.return,g)}}if(4&n&&null!=(a=e.stateNode)){var i=e.memoizedProps,o=null!==r?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&Q(a,i),be(l,o);var d=be(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?ge(a,h):"dangerouslySetInnerHTML"===u?ue(a,h):"children"===u?he(a,h):b(a,u,h,d)}switch(l){case"input":Z(a,i);break;case"textarea":se(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var f=i.value;null!=f?re(a,!!i.multiple,f,!1):m!==!!i.multiple&&(null!=i.defaultValue?re(a,!!i.multiple,i.defaultValue,!0):re(a,!!i.multiple,i.multiple?[]:"",!1))}a[ma]=i}catch(g){Nc(e,e.return,g)}}break;case 6:if(pl(t,e),xl(e),4&n){if(null===e.stateNode)throw Error(s(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Nc(e,e.return,g)}}break;case 3:if(pl(t,e),xl(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Nc(e,e.return,g)}break;case 4:default:pl(t,e),xl(e);break;case 13:pl(t,e),xl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(ql=Qe())),4&n&&fl(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(Jo=(d=Jo)||u,pl(t,e),Jo=d):pl(t,e),xl(e),8192&n){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Zo=e,u=e.child;null!==u;){for(h=Zo=u;null!==Zo;){switch(f=(m=Zo).child,m.tag){case 0:case 11:case 14:case 15:rl(4,m,m.return);break;case 1:Xo(m,m.return);var p=m.stateNode;if("function"===typeof p.componentWillUnmount){n=m,r=m.return;try{t=n,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Nc(n,r,g)}}break;case 5:Xo(m,m.return);break;case 22:if(null!==m.memoizedState){wl(h);continue}}null!==f?(f.return=m,Zo=f):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{a=h.stateNode,d?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(g){Nc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Nc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pl(t,e),xl(e),4&n&&fl(e);case 21:}}function xl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(il(r)){var n=r;break e}r=r.return}throw Error(s(160))}switch(n.tag){case 5:var a=n.stateNode;32&n.flags&&(he(a,""),n.flags&=-33),cl(e,ol(e),a);break;case 3:case 4:var i=n.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(s(161))}}catch(o){Nc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,r){Zo=e,bl(e,t,r)}function bl(e,t,r){for(var n=0!==(1&e.mode);null!==Zo;){var a=Zo,s=a.child;if(22===a.tag&&n){var i=null!==a.memoizedState||$o;if(!i){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Jo;o=$o;var c=Jo;if($o=i,(Jo=l)&&!c)for(Zo=a;null!==Zo;)l=(i=Zo).child,22===i.tag&&null!==i.memoizedState?jl(a):null!==l?(l.return=i,Zo=l):jl(a);for(;null!==s;)Zo=s,bl(s,t,r),s=s.sibling;Zo=a,$o=o,Jo=c}vl(e)}else 0!==(8772&a.subtreeFlags)&&null!==s?(s.return=a,Zo=s):vl(e)}}function vl(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jo||nl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Jo)if(null===r)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:to(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Vs(t,i,n);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Vs(t,o,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(s(163))}Jo||512&t.flags&&al(t)}catch(m){Nc(t,t.return,m)}}if(t===e){Zo=null;break}if(null!==(r=t.sibling)){r.return=t.return,Zo=r;break}Zo=t.return}}function wl(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Zo=r;break}Zo=t.return}}function jl(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nl(4,t)}catch(l){Nc(t,r,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var a=t.return;try{n.componentDidMount()}catch(l){Nc(t,a,l)}}var s=t.return;try{al(t)}catch(l){Nc(t,s,l)}break;case 5:var i=t.return;try{al(t)}catch(l){Nc(t,i,l)}}}catch(l){Nc(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var kl,Nl=Math.ceil,_l=v.ReactCurrentDispatcher,Sl=v.ReactCurrentOwner,El=v.ReactCurrentBatchConfig,Al=0,Cl=null,Ol=null,Tl=0,Pl=0,Ll=Na(0),Ml=0,Rl=null,Dl=0,Il=0,Fl=0,Bl=null,Ul=null,ql=0,zl=1/0,Vl=null,Hl=!1,Wl=null,Kl=null,Gl=!1,Yl=null,$l=0,Jl=0,Ql=null,Zl=-1,Xl=0;function ec(){return 0!==(6&Al)?Qe():-1!==Zl?Zl:Zl=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Tl?Tl&-Tl:null!==ps.transition?(0===Xl&&(Xl=pt()),Xl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function rc(e,t,r,n){if(50<Jl)throw Jl=0,Ql=null,Error(s(185));xt(e,r,n),0!==(2&Al)&&e===Cl||(e===Cl&&(0===(2&Al)&&(Il|=r),4===Ml&&oc(e,Tl)),nc(e,n),1===r&&0===Al&&0===(1&t.mode)&&(zl=Qe()+500,Ba&&za()))}function nc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-it(s),o=1<<i,l=a[i];-1===l?0!==(o&r)&&0===(o&n)||(a[i]=mt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var n=ht(e,e===Cl?Tl:0);if(0===n)null!==r&&Ye(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Ye(r),1===t)0===e.tag?function(e){Ba=!0,qa(e)}(lc.bind(null,e)):qa(lc.bind(null,e)),ia(function(){0===(6&Al)&&za()}),r=null;else{switch(vt(n)){case 1:r=Xe;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Cc(r,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ac(e,t){if(Zl=-1,Xl=0,0!==(6&Al))throw Error(s(327));var r=e.callbackNode;if(jc()&&e.callbackNode!==r)return null;var n=ht(e,e===Cl?Tl:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=gc(e,n);else{t=n;var a=Al;Al|=2;var i=fc();for(Cl===e&&Tl===t||(Vl=null,zl=Qe()+500,hc(e,t));;)try{yc();break}catch(l){mc(e,l)}Ss(),_l.current=i,Al=a,null!==Ol?t=0:(Cl=null,Tl=0,t=Ml)}if(0!==t){if(2===t&&(0!==(a=ft(e))&&(n=a,t=sc(e,a))),1===t)throw r=Rl,hc(e,0),oc(e,n),nc(e,Qe()),r;if(6===t)oc(e,n);else{if(a=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!on(s(),a))return!1}catch(o){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,n))&&(0!==(i=ft(e))&&(n=i,t=sc(e,i))),1===t))throw r=Rl,hc(e,0),oc(e,n),nc(e,Qe()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Ul,Vl);break;case 3:if(oc(e,n),(130023424&n)===n&&10<(t=ql+500-Qe())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=na(wc.bind(null,e,Ul,Vl),t);break}wc(e,Ul,Vl);break;case 4:if(oc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-it(n);i=1<<o,(o=t[o])>a&&(a=o),n&=~i}if(n=a,10<(n=(120>(n=Qe()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Nl(n/1960))-n)){e.timeoutHandle=na(wc.bind(null,e,Ul,Vl),n);break}wc(e,Ul,Vl);break;default:throw Error(s(329))}}}return nc(e,Qe()),e.callbackNode===r?ac.bind(null,e):null}function sc(e,t){var r=Bl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=r,null!==t&&ic(t)),e}function ic(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~Fl,t&=~Il,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-it(t),n=1<<r;e[r]=-1,t&=~n}}function lc(e){if(0!==(6&Al))throw Error(s(327));jc();var t=ht(e,0);if(0===(1&t))return nc(e,Qe()),null;var r=gc(e,t);if(0!==e.tag&&2===r){var n=ft(e);0!==n&&(t=n,r=sc(e,n))}if(1===r)throw r=Rl,hc(e,0),oc(e,t),nc(e,Qe()),r;if(6===r)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Ul,Vl),nc(e,Qe()),null}function cc(e,t){var r=Al;Al|=1;try{return e(t)}finally{0===(Al=r)&&(zl=Qe()+500,Ba&&za())}}function dc(e){null!==Yl&&0===Yl.tag&&0===(6&Al)&&jc();var t=Al;Al|=1;var r=El.transition,n=bt;try{if(El.transition=null,bt=1,e)return e()}finally{bt=n,El.transition=r,0===(6&(Al=t))&&za()}}function uc(){Pl=Ll.current,_a(Ll)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,aa(r)),null!==Ol)for(r=Ol.return;null!==r;){var n=r;switch(ts(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&La();break;case 3:Js(),_a(Ca),_a(Aa),ri();break;case 5:Zs(n);break;case 4:Js();break;case 13:case 19:_a(Xs);break;case 10:Es(n.type._context);break;case 22:case 23:uc()}r=r.return}if(Cl=e,Ol=e=Lc(e.current,null),Tl=Pl=t,Ml=0,Rl=null,Fl=Il=Dl=0,Ul=Bl=null,null!==Ts){for(t=0;t<Ts.length;t++)if(null!==(n=(r=Ts[t]).interleaved)){r.interleaved=null;var a=n.next,s=r.pending;if(null!==s){var i=s.next;s.next=a,n.next=i}r.pending=n}Ts=null}return e}function mc(e,t){for(;;){var r=Ol;try{if(Ss(),ni.current=Qi,ci){for(var n=ii.memoizedState;null!==n;){var a=n.queue;null!==a&&(a.pending=null),n=n.next}ci=!1}if(si=0,li=oi=ii=null,di=!1,ui=0,Sl.current=null,null===r||null===r.return){Ml=1,Rl=t,Ol=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Tl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=go(o);if(null!==f){f.flags&=-257,xo(f,o,l,0,t),1&f.mode&&po(i,d,t),c=d;var p=(t=f).updateQueue;if(null===p){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}if(0===(1&t)){po(i,d,t),pc();break e}c=Error(s(426))}else if(as&&1&l.mode){var x=go(o);if(null!==x){0===(65536&x.flags)&&(x.flags|=256),xo(x,o,l,0,t),fs(lo(c,l));break e}}i=c=lo(c,l),4!==Ml&&(Ml=2),null===Bl?Bl=[i]:Bl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,qs(i,mo(0,c,t));break e;case 1:l=c;var y=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Kl||!Kl.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,qs(i,fo(i,l,t));break e}}i=i.return}while(null!==i)}vc(r)}catch(v){t=v,Ol===r&&null!==r&&(Ol=r=r.return);continue}break}}function fc(){var e=_l.current;return _l.current=Qi,null===e?Qi:e}function pc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Cl||0===(268435455&Dl)&&0===(268435455&Il)||oc(Cl,Tl)}function gc(e,t){var r=Al;Al|=2;var n=fc();for(Cl===e&&Tl===t||(Vl=null,hc(e,t));;)try{xc();break}catch(a){mc(e,a)}if(Ss(),Al=r,_l.current=n,null!==Ol)throw Error(s(261));return Cl=null,Tl=0,Ml}function xc(){for(;null!==Ol;)bc(Ol)}function yc(){for(;null!==Ol&&!$e();)bc(Ol)}function bc(e){var t=kl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?vc(e):Ol=t,Sl.current=null}function vc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Go(r,t,Pl)))return void(Ol=r)}else{if(null!==(r=Yo(r,t)))return r.flags&=32767,void(Ol=r);if(null===e)return Ml=6,void(Ol=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ol=t);Ol=t=e}while(null!==t);0===Ml&&(Ml=5)}function wc(e,t,r){var n=bt,a=El.transition;try{El.transition=null,bt=1,function(e,t,r,n){do{jc()}while(null!==Yl);if(0!==(6&Al))throw Error(s(327));r=e.finishedWork;var a=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-it(r),s=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~s}}(e,i),e===Cl&&(Ol=Cl=null,Tl=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Gl||(Gl=!0,Cc(tt,function(){return jc(),null})),i=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||i){i=El.transition,El.transition=null;var o=bt;bt=1;var l=Al;Al|=4,Sl.current=null,function(e,t){if(ea=Ht,mn(e=hn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch(w){r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var f;h!==r||0!==a&&3!==h.nodeType||(l=o+a),h!==i||0!==n&&3!==h.nodeType||(c=o+n),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)m=h,h=f;for(;;){if(h===e)break t;if(m===r&&++d===a&&(l=o),m===i&&++u===n&&(c=o),null!==(f=h.nextSibling))break;m=(h=m).parentNode}h=f}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ta={focusedElem:e,selectionRange:r},Ht=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,x=p.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),x);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(s(163))}}catch(w){Nc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}p=tl,tl=!1}(e,r),gl(r,e),fn(ta),Ht=!!ea,ta=ea=null,e.current=r,yl(r,e,a),Je(),Al=l,bt=o,El.transition=i}else e.current=r;if(Gl&&(Gl=!1,Yl=e,$l=a),i=e.pendingLanes,0===i&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),nc(e,Qe()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;0!==(1&$l)&&0!==e.tag&&jc(),i=e.pendingLanes,0!==(1&i)?e===Ql?Jl++:(Jl=0,Ql=e):Jl=0,za()}(e,t,r,n)}finally{El.transition=a,bt=n}return null}function jc(){if(null!==Yl){var e=vt($l),t=El.transition,r=bt;try{if(El.transition=null,bt=16>e?16:e,null===Yl)var n=!1;else{if(e=Yl,Yl=null,$l=0,0!==(6&Al))throw Error(s(331));var a=Al;for(Al|=4,Zo=e.current;null!==Zo;){var i=Zo,o=i.child;if(0!==(16&Zo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Zo=d;null!==Zo;){var u=Zo;switch(u.tag){case 0:case 11:case 15:rl(8,u,i)}var h=u.child;if(null!==h)h.return=u,Zo=h;else for(;null!==Zo;){var m=(u=Zo).sibling,f=u.return;if(sl(u),u===d){Zo=null;break}if(null!==m){m.return=f,Zo=m;break}Zo=f}}}var p=i.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(null!==g)}}Zo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(i=Zo).flags))switch(i.tag){case 0:case 11:case 15:rl(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Zo=y;break e}Zo=i.return}}var b=e.current;for(Zo=b;null!==Zo;){var v=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==v)v.return=o,Zo=v;else e:for(o=b;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(j){Nc(l,l.return,j)}if(l===o){Zo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Zo=w;break e}Zo=l.return}}if(Al=a,za(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(at,e)}catch(j){}n=!0}return n}finally{bt=r,El.transition=t}}return!1}function kc(e,t,r){e=Bs(e,t=mo(0,t=lo(r,t),1),1),t=ec(),null!==e&&(xt(e,1,t),nc(e,t))}function Nc(e,t,r){if(3===e.tag)kc(e,e,r);else for(;null!==t;){if(3===t.tag){kc(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Kl||!Kl.has(n))){t=Bs(t,e=fo(t,e=lo(r,e),1),1),e=ec(),null!==t&&(xt(t,1,e),nc(t,e));break}}t=t.return}}function _c(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,Cl===e&&(Tl&r)===r&&(4===Ml||3===Ml&&(130023424&Tl)===Tl&&500>Qe()-ql?hc(e,0):Fl|=r),nc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var r=ec();null!==(e=Ms(e,t))&&(xt(e,t,r),nc(e,r))}function Ec(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Sc(e,r)}function Ac(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(s(314))}null!==n&&n.delete(t),Sc(e,r)}function Cc(e,t){return Ge(e,t)}function Oc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(e,t,r,n){return new Oc(e,t,r,n)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var r=e.alternate;return null===r?((r=Tc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Mc(e,t,r,n,a,i){var o=2;if(n=e,"function"===typeof e)Pc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Rc(r.children,a,i,t);case N:o=8,a|=8;break;case _:return(e=Tc(12,r,t,2|a)).elementType=_,e.lanes=i,e;case C:return(e=Tc(13,r,t,a)).elementType=C,e.lanes=i,e;case O:return(e=Tc(19,r,t,a)).elementType=O,e.lanes=i,e;case L:return Dc(r,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case E:o=9;break e;case A:o=11;break e;case T:o=14;break e;case P:o=16,n=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Tc(o,r,t,a)).elementType=e,t.type=n,t.lanes=i,t}function Rc(e,t,r,n){return(e=Tc(7,e,n,t)).lanes=r,e}function Dc(e,t,r,n){return(e=Tc(22,e,n,t)).elementType=L,e.lanes=r,e.stateNode={isHidden:!1},e}function Ic(e,t,r){return(e=Tc(6,e,null,t)).lanes=r,e}function Fc(e,t,r){return(t=Tc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Uc(e,t,r,n,a,s,i,o,l){return e=new Bc(e,t,r,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Tc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ds(s),e}function qc(e){if(!e)return Ea;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var r=e.type;if(Pa(r))return Ra(e,r,t)}return t}function zc(e,t,r,n,a,s,i,o,l){return(e=Uc(r,n,!0,e,0,s,0,o,l)).context=qc(null),r=e.current,(s=Fs(n=ec(),a=tc(r))).callback=void 0!==t&&null!==t?t:null,Bs(r,s,a),e.current.lanes=a,xt(e,a,n),nc(e,n),e}function Vc(e,t,r,n){var a=t.current,s=ec(),i=tc(a);return r=qc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Fs(s,i)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Bs(a,t,i))&&(rc(e,a,i,s),Us(e,a,i)),i}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Kc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}kl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ca.current)bo=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return bo=!1,function(e,t,r){switch(t.tag){case 3:Co(t),ms();break;case 5:Qs(t);break;case 1:Pa(t.type)&&Da(t);break;case 4:$s(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Sa(js,n._currentValue),n._currentValue=a;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Sa(Xs,1&Xs.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Io(e,t,r):(Sa(Xs,1&Xs.current),null!==(e=Ho(e,t,r))?e.sibling:null);Sa(Xs,1&Xs.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return zo(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Sa(Xs,Xs.current),n)break;return null;case 22:case 23:return t.lanes=0,No(e,t,r)}return Ho(e,t,r)}(e,t,r);bo=0!==(131072&e.flags)}else bo=!1,as&&0!==(1048576&t.flags)&&Xa(t,Ka,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Vo(e,t),e=t.pendingProps;var a=Ta(t,Aa.current);Cs(t,r),a=pi(null,t,n,e,a,r);var i=gi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pa(n)?(i=!0,Da(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ds(t),a.updater=no,t.stateNode=a,a._reactInternals=t,oo(t,n,e,r),t=Ao(null,t,n,!0,i,r)):(t.tag=0,as&&i&&es(t),vo(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Vo(e,t),e=t.pendingProps,n=(a=n._init)(n._payload),t.type=n,a=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===T)return 14}return 2}(n),e=to(n,e),a){case 0:t=So(null,t,n,e,r);break e;case 1:t=Eo(null,t,n,e,r);break e;case 11:t=wo(null,t,n,e,r);break e;case 14:t=jo(null,t,n,to(n.type,e),r);break e}throw Error(s(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,So(e,t,n,a=t.elementType===n?a:to(n,a),r);case 1:return n=t.type,a=t.pendingProps,Eo(e,t,n,a=t.elementType===n?a:to(n,a),r);case 3:e:{if(Co(t),null===e)throw Error(s(387));n=t.pendingProps,a=(i=t.memoizedState).element,Is(e,t),zs(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated){if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Oo(e,t,n,r,a=lo(Error(s(423)),t));break e}if(n!==a){t=Oo(e,t,n,r,a=lo(Error(s(424)),t));break e}for(ns=ca(t.stateNode.containerInfo.firstChild),rs=t,as=!0,ss=null,r=ws(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ms(),n===a){t=Ho(e,t,r);break e}vo(e,t,n,r)}t=t.child}return t;case 5:return Qs(t),null===e&&cs(t),n=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,o=a.children,ra(n,a)?o=null:null!==i&&ra(n,i)&&(t.flags|=32),_o(e,t),vo(e,t,o,r),t.child;case 6:return null===e&&cs(t),null;case 13:return Io(e,t,r);case 4:return $s(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=vs(t,null,n,r):vo(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,wo(e,t,n,a=t.elementType===n?a:to(n,a),r);case 7:return vo(e,t,t.pendingProps,r),t.child;case 8:case 12:return vo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Sa(js,n._currentValue),n._currentValue=o,null!==i)if(on(i.value,o)){if(i.children===a.children&&!Ca.current){t=Ho(e,t,r);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===i.tag){(c=Fs(-1,r&-r)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,null!==(c=i.alternate)&&(c.lanes|=r),As(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=r,null!==(l=o.alternate)&&(l.lanes|=r),As(o,r,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}vo(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Cs(t,r),n=n(a=Os(a)),t.flags|=1,vo(e,t,n,r),t.child;case 14:return a=to(n=t.type,t.pendingProps),jo(e,t,n,a=to(n.type,a),r);case 15:return ko(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:to(n,a),Vo(e,t),t.tag=1,Pa(n)?(e=!0,Da(t)):e=!1,Cs(t,r),so(t,n,a),oo(t,n,a,r),Ao(null,t,n,!0,e,r);case 19:return zo(e,t,r);case 22:return No(e,t,r)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function Xc(e,t,r,n,a){var s=r._reactRootContainer;if(s){var i=s;if("function"===typeof a){var o=a;a=function(){var e=Hc(i);o.call(e)}}Vc(t,i,e,a)}else i=function(e,t,r,n,a){if(a){if("function"===typeof n){var s=n;n=function(){var e=Hc(i);s.call(e)}}var i=zc(t,n,e,0,null,!1,0,"",Zc);return e._reactRootContainer=i,e[fa]=i.current,zn(8===e.nodeType?e.parentNode:e),dc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof n){var o=n;n=function(){var e=Hc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[fa]=l.current,zn(8===e.nodeType?e.parentNode:e),dc(function(){Vc(t,l,r,n)}),l}(r,t,e,a,n);return Hc(i)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Vc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Vc(null,e,null,null)}),t[fa]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Lt.length&&0!==t&&t<Lt[r].priority;r++);Lt.splice(r,0,e),0===r&&It(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ut(t.pendingLanes);0!==r&&(yt(t,1|r),nc(t,Qe()),0===(6&Al)&&(zl=Qe()+500,za()))}break;case 13:dc(function(){var t=Ms(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}}),Kc(e,1)}},jt=function(e){if(13===e.tag){var t=Ms(e,134217728);if(null!==t)rc(t,e,134217728,ec());Kc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),r=Ms(e,t);if(null!==r)rc(r,e,t,ec());Kc(e,t)}},Nt=function(){return bt},_t=function(e,t){var r=bt;try{return bt=e,t()}finally{bt=r}},je=function(e,t,r){switch(t){case"input":if(Z(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=wa(n);if(!a)throw Error(s(90));G(n),Z(n,a)}}}break;case"textarea":se(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ae=cc,Ce=dc;var ed={usingClientEntryPoint:!1,Events:[ba,va,wa,Se,Ee,cc]},td={findFiberByHostInstance:ya,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{at=nd.inject(rd),st=nd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var r=!1,n="",a=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Uc(e,1,!1,null,0,r,0,n,a),e[fa]=t.current,zn(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,r){if(!Qc(t))throw Error(s(200));return Xc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Jc(e))throw Error(s(405));var n=null!=r&&r.hydratedSources||null,a=!1,i="",o=Gc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(i=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=zc(t,null,e,1,null!=r?r:null,a,0,i,o),e[fa]=t.current,zn(e),n)for(e=0;e<n.length;e++)a=(a=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new $c(t)},t.render=function(e,t,r){if(!Qc(t))throw Error(s(200));return Xc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc(function(){Xc(null,null,e,!1,function(){e._reactRootContainer=null,e[fa]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Qc(r))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Xc(e,t,r,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},2761:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},2777:(e,t,r)=>{var n=r(5193),a=r(2761),s=Object.prototype,i=s.hasOwnProperty,o=s.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return a(e)&&i.call(e,"callee")&&!o.call(e,"callee")};e.exports=l},2823:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},a.apply(this,arguments)},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<r;t++)for(var s=arguments[t],i=0,o=s.length;i<o;i++,a++)n[a]=s[i];return n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=i(r(5043)),l=i(r(7950)),c=i(r(9853)),d=i(r(7680)),u=function(e){function t(t){var r=e.call(this,t)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(e,t,n,a){var s,i,o,l;"text-change"===e?null===(i=(s=r).onEditorChangeText)||void 0===i||i.call(s,r.editor.root.innerHTML,t,a,r.unprivilegedEditor):"selection-change"===e&&(null===(l=(o=r).onEditorChangeSelection)||void 0===l||l.call(o,t,a,r.unprivilegedEditor))};var n=r.isControlled()?t.value:t.defaultValue;return r.value=null!==n&&void 0!==n?n:"",r}return n(t,e),t.prototype.validateProps=function(e){var t;if(o.default.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(o.default.Children.count(e.children)&&"textarea"===(null===(t=o.default.Children.only(e.children))||void 0===t?void 0:t.type))throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(e,t){var r,n=this;if(this.validateProps(e),!this.editor||this.state.generation!==t.generation)return!0;if("value"in e){var a=this.getEditorContents(),i=null!==(r=e.value)&&void 0!==r?r:"";this.isEqualValue(i,a)||this.setEditorContents(this.editor,i)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),s(this.cleanProps,this.dirtyProps).some(function(t){return!c.default(e[t],n.props[t])})},t.prototype.shouldComponentRegenerate=function(e){var t=this;return this.dirtyProps.some(function(r){return!c.default(e[r],t.props[r])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(e,t){var r=this;if(this.editor&&this.shouldComponentRegenerate(e)){var n=this.editor.getContents(),a=this.editor.getSelection();this.regenerationSnapshot={delta:n,selection:a},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==t.generation){var s=this.regenerationSnapshot,i=(n=s.delta,s.selection);delete this.regenerationSnapshot,this.instantiateEditor();var o=this.editor;o.setContents(n),h(function(){return r.setEditorSelection(o,i)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(e,t){var r=new d.default(e,t);return null!=t.tabIndex&&this.setEditorTabIndex(r,t.tabIndex),this.hookEditor(r),r},t.prototype.hookEditor=function(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(e){e.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(e){return e&&e.ops},t.prototype.isEqualValue=function(e,t){return this.isDelta(e)&&this.isDelta(t)?c.default(e.ops,t.ops):c.default(e,t)},t.prototype.setEditorContents=function(e,t){var r=this;this.value=t;var n=this.getEditorSelection();"string"===typeof t?e.setContents(e.clipboard.convert(t)):e.setContents(t),h(function(){return r.setEditorSelection(e,n)})},t.prototype.setEditorSelection=function(e,t){if(this.selection=t,t){var r=e.getLength();t.index=Math.max(0,Math.min(t.index,r-1)),t.length=Math.max(0,Math.min(t.length,r-1-t.index)),e.setSelection(t)}},t.prototype.setEditorTabIndex=function(e,t){var r,n;(null===(n=null===(r=e)||void 0===r?void 0:r.scroll)||void 0===n?void 0:n.domNode)&&(e.scroll.domNode.tabIndex=t)},t.prototype.setEditorReadOnly=function(e,t){t?e.disable():e.enable()},t.prototype.makeUnprivilegedEditor=function(e){var t=e;return{getHTML:function(){return t.root.innerHTML},getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var e=l.default.findDOMNode(this.editingArea);if(!e)throw new Error("Cannot find element for editing area");if(3===e.nodeType)throw new Error("Editing area cannot be a text node");return e},t.prototype.renderEditingArea=function(){var e=this,t=this.props,r=t.children,n=t.preserveWhitespace,s={key:this.state.generation,ref:function(t){e.editingArea=t}};return o.default.Children.count(r)?o.default.cloneElement(o.default.Children.only(r),s):n?o.default.createElement("pre",a({},s)):o.default.createElement("div",a({},s))},t.prototype.render=function(){var e;return o.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(e=this.props.className,null!==e&&void 0!==e?e:""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(e,t,r,n){var a,s;if(this.editor){var i=this.isDelta(this.value)?n.getContents():n.getHTML();i!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=i,null===(s=(a=this.props).onChange)||void 0===s||s.call(a,e,t,r,n))}},t.prototype.onEditorChangeSelection=function(e,t,r){var n,a,s,i,o,l;if(this.editor){var d=this.getEditorSelection(),u=!d&&e,h=d&&!e;c.default(e,d)||(this.selection=e,null===(a=(n=this.props).onChangeSelection)||void 0===a||a.call(n,e,t,r),u?null===(i=(s=this.props).onFocus)||void 0===i||i.call(s,e,t,r):h&&(null===(l=(o=this.props).onBlur)||void 0===l||l.call(o,d,t,r)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=d.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(o.default.Component);function h(e){Promise.resolve().then(e)}e.exports=u},2929:(e,t,r)=>{var n=r(6552).Uint8Array;e.exports=n},3028:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},3204:(e,t,r)=>{var n=r(3343),a=r(2777),s=r(4052),i=r(4543),o=r(9194),l=r(1268),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=s(e),d=!r&&a(e),u=!r&&!d&&i(e),h=!r&&!d&&!u&&l(e),m=r||d||u||h,f=m?n(e.length,String):[],p=f.length;for(var g in e)!t&&!c.call(e,g)||m&&("length"==g||u&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||o(g,p))||f.push(g);return f}},3211:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},3343:e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},3440:(e,t,r)=>{var n=r(6552)["__core-js_shared__"];e.exports=n},3536:function(e,t,r){var n;e=r.nmd(e),function(){var a,s="Expected a function",i="__lodash_hash_undefined__",o="__lodash_placeholder__",l=16,c=32,d=64,u=128,h=256,m=1/0,f=9007199254740991,p=NaN,g=4294967295,x=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",c],["partialRight",d],["rearg",h]],y="[object Arguments]",b="[object Array]",v="[object Boolean]",w="[object Date]",j="[object Error]",k="[object Function]",N="[object GeneratorFunction]",_="[object Map]",S="[object Number]",E="[object Object]",A="[object Promise]",C="[object RegExp]",O="[object Set]",T="[object String]",P="[object Symbol]",L="[object WeakMap]",M="[object ArrayBuffer]",R="[object DataView]",D="[object Float32Array]",I="[object Float64Array]",F="[object Int8Array]",B="[object Int16Array]",U="[object Int32Array]",q="[object Uint8Array]",z="[object Uint8ClampedArray]",V="[object Uint16Array]",H="[object Uint32Array]",W=/\b__p \+= '';/g,K=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Y=/&(?:amp|lt|gt|quot|#39);/g,$=/[&<>"']/g,J=RegExp(Y.source),Q=RegExp($.source),Z=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,re=/^\w*$/,ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ae=/[\\^$.*+?()[\]{}|]/g,se=RegExp(ae.source),ie=/^\s+/,oe=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,de=/,? & /,ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/[()=,{}\[\]\/\s]/,me=/\\(\\)?/g,fe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,ge=/^[-+]0x[0-9a-f]+$/i,xe=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,ve=/^(?:0|[1-9]\d*)$/,we=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,je=/($^)/,ke=/['\n\r\u2028\u2029\\]/g,Ne="\\ud800-\\udfff",_e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Se="\\u2700-\\u27bf",Ee="a-z\\xdf-\\xf6\\xf8-\\xff",Ae="A-Z\\xc0-\\xd6\\xd8-\\xde",Ce="\\ufe0e\\ufe0f",Oe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Te="['\u2019]",Pe="["+Ne+"]",Le="["+Oe+"]",Me="["+_e+"]",Re="\\d+",De="["+Se+"]",Ie="["+Ee+"]",Fe="[^"+Ne+Oe+Re+Se+Ee+Ae+"]",Be="\\ud83c[\\udffb-\\udfff]",Ue="[^"+Ne+"]",qe="(?:\\ud83c[\\udde6-\\uddff]){2}",ze="[\\ud800-\\udbff][\\udc00-\\udfff]",Ve="["+Ae+"]",He="\\u200d",We="(?:"+Ie+"|"+Fe+")",Ke="(?:"+Ve+"|"+Fe+")",Ge="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ye="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",$e="(?:"+Me+"|"+Be+")"+"?",Je="["+Ce+"]?",Qe=Je+$e+("(?:"+He+"(?:"+[Ue,qe,ze].join("|")+")"+Je+$e+")*"),Ze="(?:"+[De,qe,ze].join("|")+")"+Qe,Xe="(?:"+[Ue+Me+"?",Me,qe,ze,Pe].join("|")+")",et=RegExp(Te,"g"),tt=RegExp(Me,"g"),rt=RegExp(Be+"(?="+Be+")|"+Xe+Qe,"g"),nt=RegExp([Ve+"?"+Ie+"+"+Ge+"(?="+[Le,Ve,"$"].join("|")+")",Ke+"+"+Ye+"(?="+[Le,Ve+We,"$"].join("|")+")",Ve+"?"+We+"+"+Ge,Ve+"+"+Ye,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Re,Ze].join("|"),"g"),at=RegExp("["+He+Ne+_e+Ce+"]"),st=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,it=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ot=-1,lt={};lt[D]=lt[I]=lt[F]=lt[B]=lt[U]=lt[q]=lt[z]=lt[V]=lt[H]=!0,lt[y]=lt[b]=lt[M]=lt[v]=lt[R]=lt[w]=lt[j]=lt[k]=lt[_]=lt[S]=lt[E]=lt[C]=lt[O]=lt[T]=lt[L]=!1;var ct={};ct[y]=ct[b]=ct[M]=ct[R]=ct[v]=ct[w]=ct[D]=ct[I]=ct[F]=ct[B]=ct[U]=ct[_]=ct[S]=ct[E]=ct[C]=ct[O]=ct[T]=ct[P]=ct[q]=ct[z]=ct[V]=ct[H]=!0,ct[j]=ct[k]=ct[L]=!1;var dt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ut=parseFloat,ht=parseInt,mt="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,ft="object"==typeof self&&self&&self.Object===Object&&self,pt=mt||ft||Function("return this")(),gt=t&&!t.nodeType&&t,xt=gt&&e&&!e.nodeType&&e,yt=xt&&xt.exports===gt,bt=yt&&mt.process,vt=function(){try{var e=xt&&xt.require&&xt.require("util").types;return e||bt&&bt.binding&&bt.binding("util")}catch(t){}}(),wt=vt&&vt.isArrayBuffer,jt=vt&&vt.isDate,kt=vt&&vt.isMap,Nt=vt&&vt.isRegExp,_t=vt&&vt.isSet,St=vt&&vt.isTypedArray;function Et(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function At(e,t,r,n){for(var a=-1,s=null==e?0:e.length;++a<s;){var i=e[a];t(n,i,r(i),e)}return n}function Ct(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function Ot(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function Tt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function Pt(e,t){for(var r=-1,n=null==e?0:e.length,a=0,s=[];++r<n;){var i=e[r];t(i,r,e)&&(s[a++]=i)}return s}function Lt(e,t){return!!(null==e?0:e.length)&&Vt(e,t,0)>-1}function Mt(e,t,r){for(var n=-1,a=null==e?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}function Rt(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}function Dt(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}function It(e,t,r,n){var a=-1,s=null==e?0:e.length;for(n&&s&&(r=e[++a]);++a<s;)r=t(r,e[a],a,e);return r}function Ft(e,t,r,n){var a=null==e?0:e.length;for(n&&a&&(r=e[--a]);a--;)r=t(r,e[a],a,e);return r}function Bt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Ut=Gt("length");function qt(e,t,r){var n;return r(e,function(e,r,a){if(t(e,r,a))return n=r,!1}),n}function zt(e,t,r,n){for(var a=e.length,s=r+(n?1:-1);n?s--:++s<a;)if(t(e[s],s,e))return s;return-1}function Vt(e,t,r){return t===t?function(e,t,r){var n=r-1,a=e.length;for(;++n<a;)if(e[n]===t)return n;return-1}(e,t,r):zt(e,Wt,r)}function Ht(e,t,r,n){for(var a=r-1,s=e.length;++a<s;)if(n(e[a],t))return a;return-1}function Wt(e){return e!==e}function Kt(e,t){var r=null==e?0:e.length;return r?Jt(e,t)/r:p}function Gt(e){return function(t){return null==t?a:t[e]}}function Yt(e){return function(t){return null==e?a:e[t]}}function $t(e,t,r,n,a){return a(e,function(e,a,s){r=n?(n=!1,e):t(r,e,a,s)}),r}function Jt(e,t){for(var r,n=-1,s=e.length;++n<s;){var i=t(e[n]);i!==a&&(r=r===a?i:r+i)}return r}function Qt(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Zt(e){return e?e.slice(0,pr(e)+1).replace(ie,""):e}function Xt(e){return function(t){return e(t)}}function er(e,t){return Rt(t,function(t){return e[t]})}function tr(e,t){return e.has(t)}function rr(e,t){for(var r=-1,n=e.length;++r<n&&Vt(t,e[r],0)>-1;);return r}function nr(e,t){for(var r=e.length;r--&&Vt(t,e[r],0)>-1;);return r}var ar=Yt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),sr=Yt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ir(e){return"\\"+dt[e]}function or(e){return at.test(e)}function lr(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function cr(e,t){return function(r){return e(t(r))}}function dr(e,t){for(var r=-1,n=e.length,a=0,s=[];++r<n;){var i=e[r];i!==t&&i!==o||(e[r]=o,s[a++]=r)}return s}function ur(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function hr(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}function mr(e){return or(e)?function(e){var t=rt.lastIndex=0;for(;rt.test(e);)++t;return t}(e):Ut(e)}function fr(e){return or(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.split("")}(e)}function pr(e){for(var t=e.length;t--&&oe.test(e.charAt(t)););return t}var gr=Yt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var xr=function e(t){var r=(t=null==t?pt:xr.defaults(pt.Object(),t,xr.pick(pt,it))).Array,n=t.Date,oe=t.Error,Ne=t.Function,_e=t.Math,Se=t.Object,Ee=t.RegExp,Ae=t.String,Ce=t.TypeError,Oe=r.prototype,Te=Ne.prototype,Pe=Se.prototype,Le=t["__core-js_shared__"],Me=Te.toString,Re=Pe.hasOwnProperty,De=0,Ie=function(){var e=/[^.]+$/.exec(Le&&Le.keys&&Le.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Fe=Pe.toString,Be=Me.call(Se),Ue=pt._,qe=Ee("^"+Me.call(Re).replace(ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ze=yt?t.Buffer:a,Ve=t.Symbol,He=t.Uint8Array,We=ze?ze.allocUnsafe:a,Ke=cr(Se.getPrototypeOf,Se),Ge=Se.create,Ye=Pe.propertyIsEnumerable,$e=Oe.splice,Je=Ve?Ve.isConcatSpreadable:a,Qe=Ve?Ve.iterator:a,Ze=Ve?Ve.toStringTag:a,Xe=function(){try{var e=us(Se,"defineProperty");return e({},"",{}),e}catch(t){}}(),rt=t.clearTimeout!==pt.clearTimeout&&t.clearTimeout,at=n&&n.now!==pt.Date.now&&n.now,dt=t.setTimeout!==pt.setTimeout&&t.setTimeout,mt=_e.ceil,ft=_e.floor,gt=Se.getOwnPropertySymbols,xt=ze?ze.isBuffer:a,bt=t.isFinite,vt=Oe.join,Ut=cr(Se.keys,Se),Yt=_e.max,yr=_e.min,br=n.now,vr=t.parseInt,wr=_e.random,jr=Oe.reverse,kr=us(t,"DataView"),Nr=us(t,"Map"),_r=us(t,"Promise"),Sr=us(t,"Set"),Er=us(t,"WeakMap"),Ar=us(Se,"create"),Cr=Er&&new Er,Or={},Tr=Is(kr),Pr=Is(Nr),Lr=Is(_r),Mr=Is(Sr),Rr=Is(Er),Dr=Ve?Ve.prototype:a,Ir=Dr?Dr.valueOf:a,Fr=Dr?Dr.toString:a;function Br(e){if(eo(e)&&!Vi(e)&&!(e instanceof Vr)){if(e instanceof zr)return e;if(Re.call(e,"__wrapped__"))return Fs(e)}return new zr(e)}var Ur=function(){function e(){}return function(t){if(!Xi(t))return{};if(Ge)return Ge(t);e.prototype=t;var r=new e;return e.prototype=a,r}}();function qr(){}function zr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=a}function Vr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function Hr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Wr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Kr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Gr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Kr;++t<r;)this.add(e[t])}function Yr(e){var t=this.__data__=new Wr(e);this.size=t.size}function $r(e,t){var r=Vi(e),n=!r&&zi(e),a=!r&&!n&&Gi(e),s=!r&&!n&&!a&&lo(e),i=r||n||a||s,o=i?Qt(e.length,Ae):[],l=o.length;for(var c in e)!t&&!Re.call(e,c)||i&&("length"==c||a&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ys(c,l))||o.push(c);return o}function Jr(e){var t=e.length;return t?e[Yn(0,t-1)]:a}function Qr(e,t){return Ms(Ca(e),on(t,0,e.length))}function Zr(e){return Ms(Ca(e))}function Xr(e,t,r){(r!==a&&!Bi(e[t],r)||r===a&&!(t in e))&&an(e,t,r)}function en(e,t,r){var n=e[t];Re.call(e,t)&&Bi(n,r)&&(r!==a||t in e)||an(e,t,r)}function tn(e,t){for(var r=e.length;r--;)if(Bi(e[r][0],t))return r;return-1}function rn(e,t,r,n){return hn(e,function(e,a,s){t(n,e,r(e),s)}),n}function nn(e,t){return e&&Oa(t,To(t),e)}function an(e,t,r){"__proto__"==t&&Xe?Xe(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function sn(e,t){for(var n=-1,s=t.length,i=r(s),o=null==e;++n<s;)i[n]=o?a:So(e,t[n]);return i}function on(e,t,r){return e===e&&(r!==a&&(e=e<=r?e:r),t!==a&&(e=e>=t?e:t)),e}function ln(e,t,r,n,s,i){var o,l=1&t,c=2&t,d=4&t;if(r&&(o=s?r(e,n,s,i):r(e)),o!==a)return o;if(!Xi(e))return e;var u=Vi(e);if(u){if(o=function(e){var t=e.length,r=new e.constructor(t);t&&"string"==typeof e[0]&&Re.call(e,"index")&&(r.index=e.index,r.input=e.input);return r}(e),!l)return Ca(e,o)}else{var h=fs(e),m=h==k||h==N;if(Gi(e))return ka(e,l);if(h==E||h==y||m&&!s){if(o=c||m?{}:gs(e),!l)return c?function(e,t){return Oa(e,ms(e),t)}(e,function(e,t){return e&&Oa(t,Po(t),e)}(o,e)):function(e,t){return Oa(e,hs(e),t)}(e,nn(o,e))}else{if(!ct[h])return s?e:{};o=function(e,t,r){var n=e.constructor;switch(t){case M:return Na(e);case v:case w:return new n(+e);case R:return function(e,t){var r=t?Na(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case D:case I:case F:case B:case U:case q:case z:case V:case H:return _a(e,r);case _:return new n;case S:case T:return new n(e);case C:return function(e){var t=new e.constructor(e.source,pe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case O:return new n;case P:return a=e,Ir?Se(Ir.call(a)):{}}var a}(e,h,l)}}i||(i=new Yr);var f=i.get(e);if(f)return f;i.set(e,o),so(e)?e.forEach(function(n){o.add(ln(n,t,r,n,e,i))}):to(e)&&e.forEach(function(n,a){o.set(a,ln(n,t,r,a,e,i))});var p=u?a:(d?c?as:ns:c?Po:To)(e);return Ct(p||e,function(n,a){p&&(n=e[a=n]),en(o,a,ln(n,t,r,a,e,i))}),o}function cn(e,t,r){var n=r.length;if(null==e)return!n;for(e=Se(e);n--;){var s=r[n],i=t[s],o=e[s];if(o===a&&!(s in e)||!i(o))return!1}return!0}function dn(e,t,r){if("function"!=typeof e)throw new Ce(s);return Os(function(){e.apply(a,r)},t)}function un(e,t,r,n){var a=-1,s=Lt,i=!0,o=e.length,l=[],c=t.length;if(!o)return l;r&&(t=Rt(t,Xt(r))),n?(s=Mt,i=!1):t.length>=200&&(s=tr,i=!1,t=new Gr(t));e:for(;++a<o;){var d=e[a],u=null==r?d:r(d);if(d=n||0!==d?d:0,i&&u===u){for(var h=c;h--;)if(t[h]===u)continue e;l.push(d)}else s(t,u,n)||l.push(d)}return l}Br.templateSettings={escape:Z,evaluate:X,interpolate:ee,variable:"",imports:{_:Br}},Br.prototype=qr.prototype,Br.prototype.constructor=Br,zr.prototype=Ur(qr.prototype),zr.prototype.constructor=zr,Vr.prototype=Ur(qr.prototype),Vr.prototype.constructor=Vr,Hr.prototype.clear=function(){this.__data__=Ar?Ar(null):{},this.size=0},Hr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hr.prototype.get=function(e){var t=this.__data__;if(Ar){var r=t[e];return r===i?a:r}return Re.call(t,e)?t[e]:a},Hr.prototype.has=function(e){var t=this.__data__;return Ar?t[e]!==a:Re.call(t,e)},Hr.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ar&&t===a?i:t,this},Wr.prototype.clear=function(){this.__data__=[],this.size=0},Wr.prototype.delete=function(e){var t=this.__data__,r=tn(t,e);return!(r<0)&&(r==t.length-1?t.pop():$e.call(t,r,1),--this.size,!0)},Wr.prototype.get=function(e){var t=this.__data__,r=tn(t,e);return r<0?a:t[r][1]},Wr.prototype.has=function(e){return tn(this.__data__,e)>-1},Wr.prototype.set=function(e,t){var r=this.__data__,n=tn(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Kr.prototype.clear=function(){this.size=0,this.__data__={hash:new Hr,map:new(Nr||Wr),string:new Hr}},Kr.prototype.delete=function(e){var t=cs(this,e).delete(e);return this.size-=t?1:0,t},Kr.prototype.get=function(e){return cs(this,e).get(e)},Kr.prototype.has=function(e){return cs(this,e).has(e)},Kr.prototype.set=function(e,t){var r=cs(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Gr.prototype.add=Gr.prototype.push=function(e){return this.__data__.set(e,i),this},Gr.prototype.has=function(e){return this.__data__.has(e)},Yr.prototype.clear=function(){this.__data__=new Wr,this.size=0},Yr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Yr.prototype.get=function(e){return this.__data__.get(e)},Yr.prototype.has=function(e){return this.__data__.has(e)},Yr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Wr){var n=r.__data__;if(!Nr||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Kr(n)}return r.set(e,t),this.size=r.size,this};var hn=La(vn),mn=La(wn,!0);function fn(e,t){var r=!0;return hn(e,function(e,n,a){return r=!!t(e,n,a)}),r}function pn(e,t,r){for(var n=-1,s=e.length;++n<s;){var i=e[n],o=t(i);if(null!=o&&(l===a?o===o&&!oo(o):r(o,l)))var l=o,c=i}return c}function gn(e,t){var r=[];return hn(e,function(e,n,a){t(e,n,a)&&r.push(e)}),r}function xn(e,t,r,n,a){var s=-1,i=e.length;for(r||(r=xs),a||(a=[]);++s<i;){var o=e[s];t>0&&r(o)?t>1?xn(o,t-1,r,n,a):Dt(a,o):n||(a[a.length]=o)}return a}var yn=Ma(),bn=Ma(!0);function vn(e,t){return e&&yn(e,t,To)}function wn(e,t){return e&&bn(e,t,To)}function jn(e,t){return Pt(t,function(t){return Ji(e[t])})}function kn(e,t){for(var r=0,n=(t=ba(t,e)).length;null!=e&&r<n;)e=e[Ds(t[r++])];return r&&r==n?e:a}function Nn(e,t,r){var n=t(e);return Vi(e)?n:Dt(n,r(e))}function _n(e){return null==e?e===a?"[object Undefined]":"[object Null]":Ze&&Ze in Se(e)?function(e){var t=Re.call(e,Ze),r=e[Ze];try{e[Ze]=a;var n=!0}catch(i){}var s=Fe.call(e);n&&(t?e[Ze]=r:delete e[Ze]);return s}(e):function(e){return Fe.call(e)}(e)}function Sn(e,t){return e>t}function En(e,t){return null!=e&&Re.call(e,t)}function An(e,t){return null!=e&&t in Se(e)}function Cn(e,t,n){for(var s=n?Mt:Lt,i=e[0].length,o=e.length,l=o,c=r(o),d=1/0,u=[];l--;){var h=e[l];l&&t&&(h=Rt(h,Xt(t))),d=yr(h.length,d),c[l]=!n&&(t||i>=120&&h.length>=120)?new Gr(l&&h):a}h=e[0];var m=-1,f=c[0];e:for(;++m<i&&u.length<d;){var p=h[m],g=t?t(p):p;if(p=n||0!==p?p:0,!(f?tr(f,g):s(u,g,n))){for(l=o;--l;){var x=c[l];if(!(x?tr(x,g):s(e[l],g,n)))continue e}f&&f.push(g),u.push(p)}}return u}function On(e,t,r){var n=null==(e=Es(e,t=ba(t,e)))?e:e[Ds($s(t))];return null==n?a:Et(n,e,r)}function Tn(e){return eo(e)&&_n(e)==y}function Pn(e,t,r,n,s){return e===t||(null==e||null==t||!eo(e)&&!eo(t)?e!==e&&t!==t:function(e,t,r,n,s,i){var o=Vi(e),l=Vi(t),c=o?b:fs(e),d=l?b:fs(t),u=(c=c==y?E:c)==E,h=(d=d==y?E:d)==E,m=c==d;if(m&&Gi(e)){if(!Gi(t))return!1;o=!0,u=!1}if(m&&!u)return i||(i=new Yr),o||lo(e)?ts(e,t,r,n,s,i):function(e,t,r,n,a,s,i){switch(r){case R:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case M:return!(e.byteLength!=t.byteLength||!s(new He(e),new He(t)));case v:case w:case S:return Bi(+e,+t);case j:return e.name==t.name&&e.message==t.message;case C:case T:return e==t+"";case _:var o=lr;case O:var l=1&n;if(o||(o=ur),e.size!=t.size&&!l)return!1;var c=i.get(e);if(c)return c==t;n|=2,i.set(e,t);var d=ts(o(e),o(t),n,a,s,i);return i.delete(e),d;case P:if(Ir)return Ir.call(e)==Ir.call(t)}return!1}(e,t,c,r,n,s,i);if(!(1&r)){var f=u&&Re.call(e,"__wrapped__"),p=h&&Re.call(t,"__wrapped__");if(f||p){var g=f?e.value():e,x=p?t.value():t;return i||(i=new Yr),s(g,x,r,n,i)}}if(!m)return!1;return i||(i=new Yr),function(e,t,r,n,s,i){var o=1&r,l=ns(e),c=l.length,d=ns(t),u=d.length;if(c!=u&&!o)return!1;var h=c;for(;h--;){var m=l[h];if(!(o?m in t:Re.call(t,m)))return!1}var f=i.get(e),p=i.get(t);if(f&&p)return f==t&&p==e;var g=!0;i.set(e,t),i.set(t,e);var x=o;for(;++h<c;){var y=e[m=l[h]],b=t[m];if(n)var v=o?n(b,y,m,t,e,i):n(y,b,m,e,t,i);if(!(v===a?y===b||s(y,b,r,n,i):v)){g=!1;break}x||(x="constructor"==m)}if(g&&!x){var w=e.constructor,j=t.constructor;w==j||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof j&&j instanceof j||(g=!1)}return i.delete(e),i.delete(t),g}(e,t,r,n,s,i)}(e,t,r,n,Pn,s))}function Ln(e,t,r,n){var s=r.length,i=s,o=!n;if(null==e)return!i;for(e=Se(e);s--;){var l=r[s];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<i;){var c=(l=r[s])[0],d=e[c],u=l[1];if(o&&l[2]){if(d===a&&!(c in e))return!1}else{var h=new Yr;if(n)var m=n(d,u,c,e,t,h);if(!(m===a?Pn(u,d,3,n,h):m))return!1}}return!0}function Mn(e){return!(!Xi(e)||(t=e,Ie&&Ie in t))&&(Ji(e)?qe:ye).test(Is(e));var t}function Rn(e){return"function"==typeof e?e:null==e?nl:"object"==typeof e?Vi(e)?qn(e[0],e[1]):Un(e):hl(e)}function Dn(e){if(!ks(e))return Ut(e);var t=[];for(var r in Se(e))Re.call(e,r)&&"constructor"!=r&&t.push(r);return t}function In(e){if(!Xi(e))return function(e){var t=[];if(null!=e)for(var r in Se(e))t.push(r);return t}(e);var t=ks(e),r=[];for(var n in e)("constructor"!=n||!t&&Re.call(e,n))&&r.push(n);return r}function Fn(e,t){return e<t}function Bn(e,t){var n=-1,a=Wi(e)?r(e.length):[];return hn(e,function(e,r,s){a[++n]=t(e,r,s)}),a}function Un(e){var t=ds(e);return 1==t.length&&t[0][2]?_s(t[0][0],t[0][1]):function(r){return r===e||Ln(r,e,t)}}function qn(e,t){return vs(e)&&Ns(t)?_s(Ds(e),t):function(r){var n=So(r,e);return n===a&&n===t?Eo(r,e):Pn(t,n,3)}}function zn(e,t,r,n,s){e!==t&&yn(t,function(i,o){if(s||(s=new Yr),Xi(i))!function(e,t,r,n,s,i,o){var l=As(e,r),c=As(t,r),d=o.get(c);if(d)return void Xr(e,r,d);var u=i?i(l,c,r+"",e,t,o):a,h=u===a;if(h){var m=Vi(c),f=!m&&Gi(c),p=!m&&!f&&lo(c);u=c,m||f||p?Vi(l)?u=l:Ki(l)?u=Ca(l):f?(h=!1,u=ka(c,!0)):p?(h=!1,u=_a(c,!0)):u=[]:no(c)||zi(c)?(u=l,zi(l)?u=xo(l):Xi(l)&&!Ji(l)||(u=gs(c))):h=!1}h&&(o.set(c,u),s(u,c,n,i,o),o.delete(c));Xr(e,r,u)}(e,t,o,r,zn,n,s);else{var l=n?n(As(e,o),i,o+"",e,t,s):a;l===a&&(l=i),Xr(e,o,l)}},Po)}function Vn(e,t){var r=e.length;if(r)return ys(t+=t<0?r:0,r)?e[t]:a}function Hn(e,t,r){t=t.length?Rt(t,function(e){return Vi(e)?function(t){return kn(t,1===e.length?e[0]:e)}:e}):[nl];var n=-1;t=Rt(t,Xt(ls()));var a=Bn(e,function(e,r,a){var s=Rt(t,function(t){return t(e)});return{criteria:s,index:++n,value:e}});return function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(a,function(e,t){return function(e,t,r){var n=-1,a=e.criteria,s=t.criteria,i=a.length,o=r.length;for(;++n<i;){var l=Sa(a[n],s[n]);if(l)return n>=o?l:l*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)})}function Wn(e,t,r){for(var n=-1,a=t.length,s={};++n<a;){var i=t[n],o=kn(e,i);r(o,i)&&Xn(s,ba(i,e),o)}return s}function Kn(e,t,r,n){var a=n?Ht:Vt,s=-1,i=t.length,o=e;for(e===t&&(t=Ca(t)),r&&(o=Rt(e,Xt(r)));++s<i;)for(var l=0,c=t[s],d=r?r(c):c;(l=a(o,d,l,n))>-1;)o!==e&&$e.call(o,l,1),$e.call(e,l,1);return e}function Gn(e,t){for(var r=e?t.length:0,n=r-1;r--;){var a=t[r];if(r==n||a!==s){var s=a;ys(a)?$e.call(e,a,1):ua(e,a)}}return e}function Yn(e,t){return e+ft(wr()*(t-e+1))}function $n(e,t){var r="";if(!e||t<1||t>f)return r;do{t%2&&(r+=e),(t=ft(t/2))&&(e+=e)}while(t);return r}function Jn(e,t){return Ts(Ss(e,t,nl),e+"")}function Qn(e){return Jr(Uo(e))}function Zn(e,t){var r=Uo(e);return Ms(r,on(t,0,r.length))}function Xn(e,t,r,n){if(!Xi(e))return e;for(var s=-1,i=(t=ba(t,e)).length,o=i-1,l=e;null!=l&&++s<i;){var c=Ds(t[s]),d=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(s!=o){var u=l[c];(d=n?n(u,c,l):a)===a&&(d=Xi(u)?u:ys(t[s+1])?[]:{})}en(l,c,d),l=l[c]}return e}var ea=Cr?function(e,t){return Cr.set(e,t),e}:nl,ta=Xe?function(e,t){return Xe(e,"toString",{configurable:!0,enumerable:!1,value:el(t),writable:!0})}:nl;function ra(e){return Ms(Uo(e))}function na(e,t,n){var a=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(n=n>s?s:n)<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var i=r(s);++a<s;)i[a]=e[a+t];return i}function aa(e,t){var r;return hn(e,function(e,n,a){return!(r=t(e,n,a))}),!!r}function sa(e,t,r){var n=0,a=null==e?n:e.length;if("number"==typeof t&&t===t&&a<=2147483647){for(;n<a;){var s=n+a>>>1,i=e[s];null!==i&&!oo(i)&&(r?i<=t:i<t)?n=s+1:a=s}return a}return ia(e,t,nl,r)}function ia(e,t,r,n){var s=0,i=null==e?0:e.length;if(0===i)return 0;for(var o=(t=r(t))!==t,l=null===t,c=oo(t),d=t===a;s<i;){var u=ft((s+i)/2),h=r(e[u]),m=h!==a,f=null===h,p=h===h,g=oo(h);if(o)var x=n||p;else x=d?p&&(n||m):l?p&&m&&(n||!f):c?p&&m&&!f&&(n||!g):!f&&!g&&(n?h<=t:h<t);x?s=u+1:i=u}return yr(i,4294967294)}function oa(e,t){for(var r=-1,n=e.length,a=0,s=[];++r<n;){var i=e[r],o=t?t(i):i;if(!r||!Bi(o,l)){var l=o;s[a++]=0===i?0:i}}return s}function la(e){return"number"==typeof e?e:oo(e)?p:+e}function ca(e){if("string"==typeof e)return e;if(Vi(e))return Rt(e,ca)+"";if(oo(e))return Fr?Fr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function da(e,t,r){var n=-1,a=Lt,s=e.length,i=!0,o=[],l=o;if(r)i=!1,a=Mt;else if(s>=200){var c=t?null:$a(e);if(c)return ur(c);i=!1,a=tr,l=new Gr}else l=t?[]:o;e:for(;++n<s;){var d=e[n],u=t?t(d):d;if(d=r||0!==d?d:0,i&&u===u){for(var h=l.length;h--;)if(l[h]===u)continue e;t&&l.push(u),o.push(d)}else a(l,u,r)||(l!==o&&l.push(u),o.push(d))}return o}function ua(e,t){return null==(e=Es(e,t=ba(t,e)))||delete e[Ds($s(t))]}function ha(e,t,r,n){return Xn(e,t,r(kn(e,t)),n)}function ma(e,t,r,n){for(var a=e.length,s=n?a:-1;(n?s--:++s<a)&&t(e[s],s,e););return r?na(e,n?0:s,n?s+1:a):na(e,n?s+1:0,n?a:s)}function fa(e,t){var r=e;return r instanceof Vr&&(r=r.value()),It(t,function(e,t){return t.func.apply(t.thisArg,Dt([e],t.args))},r)}function pa(e,t,n){var a=e.length;if(a<2)return a?da(e[0]):[];for(var s=-1,i=r(a);++s<a;)for(var o=e[s],l=-1;++l<a;)l!=s&&(i[s]=un(i[s]||o,e[l],t,n));return da(xn(i,1),t,n)}function ga(e,t,r){for(var n=-1,s=e.length,i=t.length,o={};++n<s;){var l=n<i?t[n]:a;r(o,e[n],l)}return o}function xa(e){return Ki(e)?e:[]}function ya(e){return"function"==typeof e?e:nl}function ba(e,t){return Vi(e)?e:vs(e,t)?[e]:Rs(yo(e))}var va=Jn;function wa(e,t,r){var n=e.length;return r=r===a?n:r,!t&&r>=n?e:na(e,t,r)}var ja=rt||function(e){return pt.clearTimeout(e)};function ka(e,t){if(t)return e.slice();var r=e.length,n=We?We(r):new e.constructor(r);return e.copy(n),n}function Na(e){var t=new e.constructor(e.byteLength);return new He(t).set(new He(e)),t}function _a(e,t){var r=t?Na(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Sa(e,t){if(e!==t){var r=e!==a,n=null===e,s=e===e,i=oo(e),o=t!==a,l=null===t,c=t===t,d=oo(t);if(!l&&!d&&!i&&e>t||i&&o&&c&&!l&&!d||n&&o&&c||!r&&c||!s)return 1;if(!n&&!i&&!d&&e<t||d&&r&&s&&!n&&!i||l&&r&&s||!o&&s||!c)return-1}return 0}function Ea(e,t,n,a){for(var s=-1,i=e.length,o=n.length,l=-1,c=t.length,d=Yt(i-o,0),u=r(c+d),h=!a;++l<c;)u[l]=t[l];for(;++s<o;)(h||s<i)&&(u[n[s]]=e[s]);for(;d--;)u[l++]=e[s++];return u}function Aa(e,t,n,a){for(var s=-1,i=e.length,o=-1,l=n.length,c=-1,d=t.length,u=Yt(i-l,0),h=r(u+d),m=!a;++s<u;)h[s]=e[s];for(var f=s;++c<d;)h[f+c]=t[c];for(;++o<l;)(m||s<i)&&(h[f+n[o]]=e[s++]);return h}function Ca(e,t){var n=-1,a=e.length;for(t||(t=r(a));++n<a;)t[n]=e[n];return t}function Oa(e,t,r,n){var s=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var l=t[i],c=n?n(r[l],e[l],l,r,e):a;c===a&&(c=e[l]),s?an(r,l,c):en(r,l,c)}return r}function Ta(e,t){return function(r,n){var a=Vi(r)?At:rn,s=t?t():{};return a(r,e,ls(n,2),s)}}function Pa(e){return Jn(function(t,r){var n=-1,s=r.length,i=s>1?r[s-1]:a,o=s>2?r[2]:a;for(i=e.length>3&&"function"==typeof i?(s--,i):a,o&&bs(r[0],r[1],o)&&(i=s<3?a:i,s=1),t=Se(t);++n<s;){var l=r[n];l&&e(t,l,n,i)}return t})}function La(e,t){return function(r,n){if(null==r)return r;if(!Wi(r))return e(r,n);for(var a=r.length,s=t?a:-1,i=Se(r);(t?s--:++s<a)&&!1!==n(i[s],s,i););return r}}function Ma(e){return function(t,r,n){for(var a=-1,s=Se(t),i=n(t),o=i.length;o--;){var l=i[e?o:++a];if(!1===r(s[l],l,s))break}return t}}function Ra(e){return function(t){var r=or(t=yo(t))?fr(t):a,n=r?r[0]:t.charAt(0),s=r?wa(r,1).join(""):t.slice(1);return n[e]()+s}}function Da(e){return function(t){return It(Qo(Vo(t).replace(et,"")),e,"")}}function Ia(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Ur(e.prototype),n=e.apply(r,t);return Xi(n)?n:r}}function Fa(e){return function(t,r,n){var s=Se(t);if(!Wi(t)){var i=ls(r,3);t=To(t),r=function(e){return i(s[e],e,s)}}var o=e(t,r,n);return o>-1?s[i?t[o]:o]:a}}function Ba(e){return rs(function(t){var r=t.length,n=r,i=zr.prototype.thru;for(e&&t.reverse();n--;){var o=t[n];if("function"!=typeof o)throw new Ce(s);if(i&&!l&&"wrapper"==is(o))var l=new zr([],!0)}for(n=l?n:r;++n<r;){var c=is(o=t[n]),d="wrapper"==c?ss(o):a;l=d&&ws(d[0])&&424==d[1]&&!d[4].length&&1==d[9]?l[is(d[0])].apply(l,d[3]):1==o.length&&ws(o)?l[c]():l.thru(o)}return function(){var e=arguments,n=e[0];if(l&&1==e.length&&Vi(n))return l.plant(n).value();for(var a=0,s=r?t[a].apply(this,e):n;++a<r;)s=t[a].call(this,s);return s}})}function Ua(e,t,n,s,i,o,l,c,d,h){var m=t&u,f=1&t,p=2&t,g=24&t,x=512&t,y=p?a:Ia(e);return function u(){for(var b=arguments.length,v=r(b),w=b;w--;)v[w]=arguments[w];if(g)var j=os(u),k=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(v,j);if(s&&(v=Ea(v,s,i,g)),o&&(v=Aa(v,o,l,g)),b-=k,g&&b<h){var N=dr(v,j);return Ga(e,t,Ua,u.placeholder,n,v,N,c,d,h-b)}var _=f?n:this,S=p?_[e]:e;return b=v.length,c?v=function(e,t){var r=e.length,n=yr(t.length,r),s=Ca(e);for(;n--;){var i=t[n];e[n]=ys(i,r)?s[i]:a}return e}(v,c):x&&b>1&&v.reverse(),m&&d<b&&(v.length=d),this&&this!==pt&&this instanceof u&&(S=y||Ia(S)),S.apply(_,v)}}function qa(e,t){return function(r,n){return function(e,t,r,n){return vn(e,function(e,a,s){t(n,r(e),a,s)}),n}(r,e,t(n),{})}}function za(e,t){return function(r,n){var s;if(r===a&&n===a)return t;if(r!==a&&(s=r),n!==a){if(s===a)return n;"string"==typeof r||"string"==typeof n?(r=ca(r),n=ca(n)):(r=la(r),n=la(n)),s=e(r,n)}return s}}function Va(e){return rs(function(t){return t=Rt(t,Xt(ls())),Jn(function(r){var n=this;return e(t,function(e){return Et(e,n,r)})})})}function Ha(e,t){var r=(t=t===a?" ":ca(t)).length;if(r<2)return r?$n(t,e):t;var n=$n(t,mt(e/mr(t)));return or(t)?wa(fr(n),0,e).join(""):n.slice(0,e)}function Wa(e){return function(t,n,s){return s&&"number"!=typeof s&&bs(t,n,s)&&(n=s=a),t=mo(t),n===a?(n=t,t=0):n=mo(n),function(e,t,n,a){for(var s=-1,i=Yt(mt((t-e)/(n||1)),0),o=r(i);i--;)o[a?i:++s]=e,e+=n;return o}(t,n,s=s===a?t<n?1:-1:mo(s),e)}}function Ka(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=go(t),r=go(r)),e(t,r)}}function Ga(e,t,r,n,s,i,o,l,u,h){var m=8&t;t|=m?c:d,4&(t&=~(m?d:c))||(t&=-4);var f=[e,t,s,m?i:a,m?o:a,m?a:i,m?a:o,l,u,h],p=r.apply(a,f);return ws(e)&&Cs(p,f),p.placeholder=n,Ps(p,e,t)}function Ya(e){var t=_e[e];return function(e,r){if(e=go(e),(r=null==r?0:yr(fo(r),292))&&bt(e)){var n=(yo(e)+"e").split("e");return+((n=(yo(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var $a=Sr&&1/ur(new Sr([,-0]))[1]==m?function(e){return new Sr(e)}:ll;function Ja(e){return function(t){var r=fs(t);return r==_?lr(t):r==O?hr(t):function(e,t){return Rt(t,function(t){return[t,e[t]]})}(t,e(t))}}function Qa(e,t,n,i,m,f,p,g){var x=2&t;if(!x&&"function"!=typeof e)throw new Ce(s);var y=i?i.length:0;if(y||(t&=-97,i=m=a),p=p===a?p:Yt(fo(p),0),g=g===a?g:fo(g),y-=m?m.length:0,t&d){var b=i,v=m;i=m=a}var w=x?a:ss(e),j=[e,t,n,i,m,b,v,f,p,g];if(w&&function(e,t){var r=e[1],n=t[1],a=r|n,s=a<131,i=n==u&&8==r||n==u&&r==h&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!s&&!i)return e;1&n&&(e[2]=t[2],a|=1&r?0:4);var l=t[3];if(l){var c=e[3];e[3]=c?Ea(c,l,t[4]):l,e[4]=c?dr(e[3],o):t[4]}(l=t[5])&&(c=e[5],e[5]=c?Aa(c,l,t[6]):l,e[6]=c?dr(e[5],o):t[6]);(l=t[7])&&(e[7]=l);n&u&&(e[8]=null==e[8]?t[8]:yr(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=a}(j,w),e=j[0],t=j[1],n=j[2],i=j[3],m=j[4],!(g=j[9]=j[9]===a?x?0:e.length:Yt(j[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)k=8==t||t==l?function(e,t,n){var s=Ia(e);return function i(){for(var o=arguments.length,l=r(o),c=o,d=os(i);c--;)l[c]=arguments[c];var u=o<3&&l[0]!==d&&l[o-1]!==d?[]:dr(l,d);return(o-=u.length)<n?Ga(e,t,Ua,i.placeholder,a,l,u,a,a,n-o):Et(this&&this!==pt&&this instanceof i?s:e,this,l)}}(e,t,g):t!=c&&33!=t||m.length?Ua.apply(a,j):function(e,t,n,a){var s=1&t,i=Ia(e);return function t(){for(var o=-1,l=arguments.length,c=-1,d=a.length,u=r(d+l),h=this&&this!==pt&&this instanceof t?i:e;++c<d;)u[c]=a[c];for(;l--;)u[c++]=arguments[++o];return Et(h,s?n:this,u)}}(e,t,n,i);else var k=function(e,t,r){var n=1&t,a=Ia(e);return function t(){return(this&&this!==pt&&this instanceof t?a:e).apply(n?r:this,arguments)}}(e,t,n);return Ps((w?ea:Cs)(k,j),e,t)}function Za(e,t,r,n){return e===a||Bi(e,Pe[r])&&!Re.call(n,r)?t:e}function Xa(e,t,r,n,s,i){return Xi(e)&&Xi(t)&&(i.set(t,e),zn(e,t,a,Xa,i),i.delete(t)),e}function es(e){return no(e)?a:e}function ts(e,t,r,n,s,i){var o=1&r,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=i.get(e),u=i.get(t);if(d&&u)return d==t&&u==e;var h=-1,m=!0,f=2&r?new Gr:a;for(i.set(e,t),i.set(t,e);++h<l;){var p=e[h],g=t[h];if(n)var x=o?n(g,p,h,t,e,i):n(p,g,h,e,t,i);if(x!==a){if(x)continue;m=!1;break}if(f){if(!Bt(t,function(e,t){if(!tr(f,t)&&(p===e||s(p,e,r,n,i)))return f.push(t)})){m=!1;break}}else if(p!==g&&!s(p,g,r,n,i)){m=!1;break}}return i.delete(e),i.delete(t),m}function rs(e){return Ts(Ss(e,a,Hs),e+"")}function ns(e){return Nn(e,To,hs)}function as(e){return Nn(e,Po,ms)}var ss=Cr?function(e){return Cr.get(e)}:ll;function is(e){for(var t=e.name+"",r=Or[t],n=Re.call(Or,t)?r.length:0;n--;){var a=r[n],s=a.func;if(null==s||s==e)return a.name}return t}function os(e){return(Re.call(Br,"placeholder")?Br:e).placeholder}function ls(){var e=Br.iteratee||al;return e=e===al?Rn:e,arguments.length?e(arguments[0],arguments[1]):e}function cs(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function ds(e){for(var t=To(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,Ns(a)]}return t}function us(e,t){var r=function(e,t){return null==e?a:e[t]}(e,t);return Mn(r)?r:a}var hs=gt?function(e){return null==e?[]:(e=Se(e),Pt(gt(e),function(t){return Ye.call(e,t)}))}:pl,ms=gt?function(e){for(var t=[];e;)Dt(t,hs(e)),e=Ke(e);return t}:pl,fs=_n;function ps(e,t,r){for(var n=-1,a=(t=ba(t,e)).length,s=!1;++n<a;){var i=Ds(t[n]);if(!(s=null!=e&&r(e,i)))break;e=e[i]}return s||++n!=a?s:!!(a=null==e?0:e.length)&&Zi(a)&&ys(i,a)&&(Vi(e)||zi(e))}function gs(e){return"function"!=typeof e.constructor||ks(e)?{}:Ur(Ke(e))}function xs(e){return Vi(e)||zi(e)||!!(Je&&e&&e[Je])}function ys(e,t){var r=typeof e;return!!(t=null==t?f:t)&&("number"==r||"symbol"!=r&&ve.test(e))&&e>-1&&e%1==0&&e<t}function bs(e,t,r){if(!Xi(r))return!1;var n=typeof t;return!!("number"==n?Wi(r)&&ys(t,r.length):"string"==n&&t in r)&&Bi(r[t],e)}function vs(e,t){if(Vi(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!oo(e))||(re.test(e)||!te.test(e)||null!=t&&e in Se(t))}function ws(e){var t=is(e),r=Br[t];if("function"!=typeof r||!(t in Vr.prototype))return!1;if(e===r)return!0;var n=ss(r);return!!n&&e===n[0]}(kr&&fs(new kr(new ArrayBuffer(1)))!=R||Nr&&fs(new Nr)!=_||_r&&fs(_r.resolve())!=A||Sr&&fs(new Sr)!=O||Er&&fs(new Er)!=L)&&(fs=function(e){var t=_n(e),r=t==E?e.constructor:a,n=r?Is(r):"";if(n)switch(n){case Tr:return R;case Pr:return _;case Lr:return A;case Mr:return O;case Rr:return L}return t});var js=Le?Ji:gl;function ks(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Pe)}function Ns(e){return e===e&&!Xi(e)}function _s(e,t){return function(r){return null!=r&&(r[e]===t&&(t!==a||e in Se(r)))}}function Ss(e,t,n){return t=Yt(t===a?e.length-1:t,0),function(){for(var a=arguments,s=-1,i=Yt(a.length-t,0),o=r(i);++s<i;)o[s]=a[t+s];s=-1;for(var l=r(t+1);++s<t;)l[s]=a[s];return l[t]=n(o),Et(e,this,l)}}function Es(e,t){return t.length<2?e:kn(e,na(t,0,-1))}function As(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Cs=Ls(ea),Os=dt||function(e,t){return pt.setTimeout(e,t)},Ts=Ls(ta);function Ps(e,t,r){var n=t+"";return Ts(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return Ct(x,function(r){var n="_."+r[0];t&r[1]&&!Lt(e,n)&&e.push(n)}),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(de):[]}(n),r)))}function Ls(e){var t=0,r=0;return function(){var n=br(),s=16-(n-r);if(r=n,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(a,arguments)}}function Ms(e,t){var r=-1,n=e.length,s=n-1;for(t=t===a?n:t;++r<t;){var i=Yn(r,s),o=e[i];e[i]=e[r],e[r]=o}return e.length=t,e}var Rs=function(e){var t=Li(e,function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ne,function(e,r,n,a){t.push(n?a.replace(me,"$1"):r||e)}),t});function Ds(e){if("string"==typeof e||oo(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Is(e){if(null!=e){try{return Me.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Fs(e){if(e instanceof Vr)return e.clone();var t=new zr(e.__wrapped__,e.__chain__);return t.__actions__=Ca(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Bs=Jn(function(e,t){return Ki(e)?un(e,xn(t,1,Ki,!0)):[]}),Us=Jn(function(e,t){var r=$s(t);return Ki(r)&&(r=a),Ki(e)?un(e,xn(t,1,Ki,!0),ls(r,2)):[]}),qs=Jn(function(e,t){var r=$s(t);return Ki(r)&&(r=a),Ki(e)?un(e,xn(t,1,Ki,!0),a,r):[]});function zs(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=null==r?0:fo(r);return a<0&&(a=Yt(n+a,0)),zt(e,ls(t,3),a)}function Vs(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var s=n-1;return r!==a&&(s=fo(r),s=r<0?Yt(n+s,0):yr(s,n-1)),zt(e,ls(t,3),s,!0)}function Hs(e){return(null==e?0:e.length)?xn(e,1):[]}function Ws(e){return e&&e.length?e[0]:a}var Ks=Jn(function(e){var t=Rt(e,xa);return t.length&&t[0]===e[0]?Cn(t):[]}),Gs=Jn(function(e){var t=$s(e),r=Rt(e,xa);return t===$s(r)?t=a:r.pop(),r.length&&r[0]===e[0]?Cn(r,ls(t,2)):[]}),Ys=Jn(function(e){var t=$s(e),r=Rt(e,xa);return(t="function"==typeof t?t:a)&&r.pop(),r.length&&r[0]===e[0]?Cn(r,a,t):[]});function $s(e){var t=null==e?0:e.length;return t?e[t-1]:a}var Js=Jn(Qs);function Qs(e,t){return e&&e.length&&t&&t.length?Kn(e,t):e}var Zs=rs(function(e,t){var r=null==e?0:e.length,n=sn(e,t);return Gn(e,Rt(t,function(e){return ys(e,r)?+e:e}).sort(Sa)),n});function Xs(e){return null==e?e:jr.call(e)}var ei=Jn(function(e){return da(xn(e,1,Ki,!0))}),ti=Jn(function(e){var t=$s(e);return Ki(t)&&(t=a),da(xn(e,1,Ki,!0),ls(t,2))}),ri=Jn(function(e){var t=$s(e);return t="function"==typeof t?t:a,da(xn(e,1,Ki,!0),a,t)});function ni(e){if(!e||!e.length)return[];var t=0;return e=Pt(e,function(e){if(Ki(e))return t=Yt(e.length,t),!0}),Qt(t,function(t){return Rt(e,Gt(t))})}function ai(e,t){if(!e||!e.length)return[];var r=ni(e);return null==t?r:Rt(r,function(e){return Et(t,a,e)})}var si=Jn(function(e,t){return Ki(e)?un(e,t):[]}),ii=Jn(function(e){return pa(Pt(e,Ki))}),oi=Jn(function(e){var t=$s(e);return Ki(t)&&(t=a),pa(Pt(e,Ki),ls(t,2))}),li=Jn(function(e){var t=$s(e);return t="function"==typeof t?t:a,pa(Pt(e,Ki),a,t)}),ci=Jn(ni);var di=Jn(function(e){var t=e.length,r=t>1?e[t-1]:a;return r="function"==typeof r?(e.pop(),r):a,ai(e,r)});function ui(e){var t=Br(e);return t.__chain__=!0,t}function hi(e,t){return t(e)}var mi=rs(function(e){var t=e.length,r=t?e[0]:0,n=this.__wrapped__,s=function(t){return sn(t,e)};return!(t>1||this.__actions__.length)&&n instanceof Vr&&ys(r)?((n=n.slice(r,+r+(t?1:0))).__actions__.push({func:hi,args:[s],thisArg:a}),new zr(n,this.__chain__).thru(function(e){return t&&!e.length&&e.push(a),e})):this.thru(s)});var fi=Ta(function(e,t,r){Re.call(e,r)?++e[r]:an(e,r,1)});var pi=Fa(zs),gi=Fa(Vs);function xi(e,t){return(Vi(e)?Ct:hn)(e,ls(t,3))}function yi(e,t){return(Vi(e)?Ot:mn)(e,ls(t,3))}var bi=Ta(function(e,t,r){Re.call(e,r)?e[r].push(t):an(e,r,[t])});var vi=Jn(function(e,t,n){var a=-1,s="function"==typeof t,i=Wi(e)?r(e.length):[];return hn(e,function(e){i[++a]=s?Et(t,e,n):On(e,t,n)}),i}),wi=Ta(function(e,t,r){an(e,r,t)});function ji(e,t){return(Vi(e)?Rt:Bn)(e,ls(t,3))}var ki=Ta(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});var Ni=Jn(function(e,t){if(null==e)return[];var r=t.length;return r>1&&bs(e,t[0],t[1])?t=[]:r>2&&bs(t[0],t[1],t[2])&&(t=[t[0]]),Hn(e,xn(t,1),[])}),_i=at||function(){return pt.Date.now()};function Si(e,t,r){return t=r?a:t,t=e&&null==t?e.length:t,Qa(e,u,a,a,a,a,t)}function Ei(e,t){var r;if("function"!=typeof t)throw new Ce(s);return e=fo(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=a),r}}var Ai=Jn(function(e,t,r){var n=1;if(r.length){var a=dr(r,os(Ai));n|=c}return Qa(e,n,t,r,a)}),Ci=Jn(function(e,t,r){var n=3;if(r.length){var a=dr(r,os(Ci));n|=c}return Qa(t,n,e,r,a)});function Oi(e,t,r){var n,i,o,l,c,d,u=0,h=!1,m=!1,f=!0;if("function"!=typeof e)throw new Ce(s);function p(t){var r=n,s=i;return n=i=a,u=t,l=e.apply(s,r)}function g(e){var r=e-d;return d===a||r>=t||r<0||m&&e-u>=o}function x(){var e=_i();if(g(e))return y(e);c=Os(x,function(e){var r=t-(e-d);return m?yr(r,o-(e-u)):r}(e))}function y(e){return c=a,f&&n?p(e):(n=i=a,l)}function b(){var e=_i(),r=g(e);if(n=arguments,i=this,d=e,r){if(c===a)return function(e){return u=e,c=Os(x,t),h?p(e):l}(d);if(m)return ja(c),c=Os(x,t),p(d)}return c===a&&(c=Os(x,t)),l}return t=go(t)||0,Xi(r)&&(h=!!r.leading,o=(m="maxWait"in r)?Yt(go(r.maxWait)||0,t):o,f="trailing"in r?!!r.trailing:f),b.cancel=function(){c!==a&&ja(c),u=0,n=d=i=c=a},b.flush=function(){return c===a?l:y(_i())},b}var Ti=Jn(function(e,t){return dn(e,1,t)}),Pi=Jn(function(e,t,r){return dn(e,go(t)||0,r)});function Li(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ce(s);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],s=r.cache;if(s.has(a))return s.get(a);var i=e.apply(this,n);return r.cache=s.set(a,i)||s,i};return r.cache=new(Li.Cache||Kr),r}function Mi(e){if("function"!=typeof e)throw new Ce(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Li.Cache=Kr;var Ri=va(function(e,t){var r=(t=1==t.length&&Vi(t[0])?Rt(t[0],Xt(ls())):Rt(xn(t,1),Xt(ls()))).length;return Jn(function(n){for(var a=-1,s=yr(n.length,r);++a<s;)n[a]=t[a].call(this,n[a]);return Et(e,this,n)})}),Di=Jn(function(e,t){var r=dr(t,os(Di));return Qa(e,c,a,t,r)}),Ii=Jn(function(e,t){var r=dr(t,os(Ii));return Qa(e,d,a,t,r)}),Fi=rs(function(e,t){return Qa(e,h,a,a,a,t)});function Bi(e,t){return e===t||e!==e&&t!==t}var Ui=Ka(Sn),qi=Ka(function(e,t){return e>=t}),zi=Tn(function(){return arguments}())?Tn:function(e){return eo(e)&&Re.call(e,"callee")&&!Ye.call(e,"callee")},Vi=r.isArray,Hi=wt?Xt(wt):function(e){return eo(e)&&_n(e)==M};function Wi(e){return null!=e&&Zi(e.length)&&!Ji(e)}function Ki(e){return eo(e)&&Wi(e)}var Gi=xt||gl,Yi=jt?Xt(jt):function(e){return eo(e)&&_n(e)==w};function $i(e){if(!eo(e))return!1;var t=_n(e);return t==j||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!no(e)}function Ji(e){if(!Xi(e))return!1;var t=_n(e);return t==k||t==N||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Qi(e){return"number"==typeof e&&e==fo(e)}function Zi(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=f}function Xi(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eo(e){return null!=e&&"object"==typeof e}var to=kt?Xt(kt):function(e){return eo(e)&&fs(e)==_};function ro(e){return"number"==typeof e||eo(e)&&_n(e)==S}function no(e){if(!eo(e)||_n(e)!=E)return!1;var t=Ke(e);if(null===t)return!0;var r=Re.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Me.call(r)==Be}var ao=Nt?Xt(Nt):function(e){return eo(e)&&_n(e)==C};var so=_t?Xt(_t):function(e){return eo(e)&&fs(e)==O};function io(e){return"string"==typeof e||!Vi(e)&&eo(e)&&_n(e)==T}function oo(e){return"symbol"==typeof e||eo(e)&&_n(e)==P}var lo=St?Xt(St):function(e){return eo(e)&&Zi(e.length)&&!!lt[_n(e)]};var co=Ka(Fn),uo=Ka(function(e,t){return e<=t});function ho(e){if(!e)return[];if(Wi(e))return io(e)?fr(e):Ca(e);if(Qe&&e[Qe])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[Qe]());var t=fs(e);return(t==_?lr:t==O?ur:Uo)(e)}function mo(e){return e?(e=go(e))===m||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function fo(e){var t=mo(e),r=t%1;return t===t?r?t-r:t:0}function po(e){return e?on(fo(e),0,g):0}function go(e){if("number"==typeof e)return e;if(oo(e))return p;if(Xi(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Xi(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Zt(e);var r=xe.test(e);return r||be.test(e)?ht(e.slice(2),r?2:8):ge.test(e)?p:+e}function xo(e){return Oa(e,Po(e))}function yo(e){return null==e?"":ca(e)}var bo=Pa(function(e,t){if(ks(t)||Wi(t))Oa(t,To(t),e);else for(var r in t)Re.call(t,r)&&en(e,r,t[r])}),vo=Pa(function(e,t){Oa(t,Po(t),e)}),wo=Pa(function(e,t,r,n){Oa(t,Po(t),e,n)}),jo=Pa(function(e,t,r,n){Oa(t,To(t),e,n)}),ko=rs(sn);var No=Jn(function(e,t){e=Se(e);var r=-1,n=t.length,s=n>2?t[2]:a;for(s&&bs(t[0],t[1],s)&&(n=1);++r<n;)for(var i=t[r],o=Po(i),l=-1,c=o.length;++l<c;){var d=o[l],u=e[d];(u===a||Bi(u,Pe[d])&&!Re.call(e,d))&&(e[d]=i[d])}return e}),_o=Jn(function(e){return e.push(a,Xa),Et(Mo,a,e)});function So(e,t,r){var n=null==e?a:kn(e,t);return n===a?r:n}function Eo(e,t){return null!=e&&ps(e,t,An)}var Ao=qa(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=r},el(nl)),Co=qa(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),Re.call(e,t)?e[t].push(r):e[t]=[r]},ls),Oo=Jn(On);function To(e){return Wi(e)?$r(e):Dn(e)}function Po(e){return Wi(e)?$r(e,!0):In(e)}var Lo=Pa(function(e,t,r){zn(e,t,r)}),Mo=Pa(function(e,t,r,n){zn(e,t,r,n)}),Ro=rs(function(e,t){var r={};if(null==e)return r;var n=!1;t=Rt(t,function(t){return t=ba(t,e),n||(n=t.length>1),t}),Oa(e,as(e),r),n&&(r=ln(r,7,es));for(var a=t.length;a--;)ua(r,t[a]);return r});var Do=rs(function(e,t){return null==e?{}:function(e,t){return Wn(e,t,function(t,r){return Eo(e,r)})}(e,t)});function Io(e,t){if(null==e)return{};var r=Rt(as(e),function(e){return[e]});return t=ls(t),Wn(e,r,function(e,r){return t(e,r[0])})}var Fo=Ja(To),Bo=Ja(Po);function Uo(e){return null==e?[]:er(e,To(e))}var qo=Da(function(e,t,r){return t=t.toLowerCase(),e+(r?zo(t):t)});function zo(e){return Jo(yo(e).toLowerCase())}function Vo(e){return(e=yo(e))&&e.replace(we,ar).replace(tt,"")}var Ho=Da(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),Wo=Da(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),Ko=Ra("toLowerCase");var Go=Da(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});var Yo=Da(function(e,t,r){return e+(r?" ":"")+Jo(t)});var $o=Da(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),Jo=Ra("toUpperCase");function Qo(e,t,r){return e=yo(e),(t=r?a:t)===a?function(e){return st.test(e)}(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.match(ue)||[]}(e):e.match(t)||[]}var Zo=Jn(function(e,t){try{return Et(e,a,t)}catch(r){return $i(r)?r:new oe(r)}}),Xo=rs(function(e,t){return Ct(t,function(t){t=Ds(t),an(e,t,Ai(e[t],e))}),e});function el(e){return function(){return e}}var tl=Ba(),rl=Ba(!0);function nl(e){return e}function al(e){return Rn("function"==typeof e?e:ln(e,1))}var sl=Jn(function(e,t){return function(r){return On(r,e,t)}}),il=Jn(function(e,t){return function(r){return On(e,r,t)}});function ol(e,t,r){var n=To(t),a=jn(t,n);null!=r||Xi(t)&&(a.length||!n.length)||(r=t,t=e,e=this,a=jn(t,To(t)));var s=!(Xi(r)&&"chain"in r)||!!r.chain,i=Ji(e);return Ct(a,function(r){var n=t[r];e[r]=n,i&&(e.prototype[r]=function(){var t=this.__chain__;if(s||t){var r=e(this.__wrapped__);return(r.__actions__=Ca(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Dt([this.value()],arguments))})}),e}function ll(){}var cl=Va(Rt),dl=Va(Tt),ul=Va(Bt);function hl(e){return vs(e)?Gt(Ds(e)):function(e){return function(t){return kn(t,e)}}(e)}var ml=Wa(),fl=Wa(!0);function pl(){return[]}function gl(){return!1}var xl=za(function(e,t){return e+t},0),yl=Ya("ceil"),bl=za(function(e,t){return e/t},1),vl=Ya("floor");var wl=za(function(e,t){return e*t},1),jl=Ya("round"),kl=za(function(e,t){return e-t},0);return Br.after=function(e,t){if("function"!=typeof t)throw new Ce(s);return e=fo(e),function(){if(--e<1)return t.apply(this,arguments)}},Br.ary=Si,Br.assign=bo,Br.assignIn=vo,Br.assignInWith=wo,Br.assignWith=jo,Br.at=ko,Br.before=Ei,Br.bind=Ai,Br.bindAll=Xo,Br.bindKey=Ci,Br.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Vi(e)?e:[e]},Br.chain=ui,Br.chunk=function(e,t,n){t=(n?bs(e,t,n):t===a)?1:Yt(fo(t),0);var s=null==e?0:e.length;if(!s||t<1)return[];for(var i=0,o=0,l=r(mt(s/t));i<s;)l[o++]=na(e,i,i+=t);return l},Br.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,a=[];++t<r;){var s=e[t];s&&(a[n++]=s)}return a},Br.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],a=e;a--;)t[a-1]=arguments[a];return Dt(Vi(n)?Ca(n):[n],xn(t,1))},Br.cond=function(e){var t=null==e?0:e.length,r=ls();return e=t?Rt(e,function(e){if("function"!=typeof e[1])throw new Ce(s);return[r(e[0]),e[1]]}):[],Jn(function(r){for(var n=-1;++n<t;){var a=e[n];if(Et(a[0],this,r))return Et(a[1],this,r)}})},Br.conforms=function(e){return function(e){var t=To(e);return function(r){return cn(r,e,t)}}(ln(e,1))},Br.constant=el,Br.countBy=fi,Br.create=function(e,t){var r=Ur(e);return null==t?r:nn(r,t)},Br.curry=function e(t,r,n){var s=Qa(t,8,a,a,a,a,a,r=n?a:r);return s.placeholder=e.placeholder,s},Br.curryRight=function e(t,r,n){var s=Qa(t,l,a,a,a,a,a,r=n?a:r);return s.placeholder=e.placeholder,s},Br.debounce=Oi,Br.defaults=No,Br.defaultsDeep=_o,Br.defer=Ti,Br.delay=Pi,Br.difference=Bs,Br.differenceBy=Us,Br.differenceWith=qs,Br.drop=function(e,t,r){var n=null==e?0:e.length;return n?na(e,(t=r||t===a?1:fo(t))<0?0:t,n):[]},Br.dropRight=function(e,t,r){var n=null==e?0:e.length;return n?na(e,0,(t=n-(t=r||t===a?1:fo(t)))<0?0:t):[]},Br.dropRightWhile=function(e,t){return e&&e.length?ma(e,ls(t,3),!0,!0):[]},Br.dropWhile=function(e,t){return e&&e.length?ma(e,ls(t,3),!0):[]},Br.fill=function(e,t,r,n){var s=null==e?0:e.length;return s?(r&&"number"!=typeof r&&bs(e,t,r)&&(r=0,n=s),function(e,t,r,n){var s=e.length;for((r=fo(r))<0&&(r=-r>s?0:s+r),(n=n===a||n>s?s:fo(n))<0&&(n+=s),n=r>n?0:po(n);r<n;)e[r++]=t;return e}(e,t,r,n)):[]},Br.filter=function(e,t){return(Vi(e)?Pt:gn)(e,ls(t,3))},Br.flatMap=function(e,t){return xn(ji(e,t),1)},Br.flatMapDeep=function(e,t){return xn(ji(e,t),m)},Br.flatMapDepth=function(e,t,r){return r=r===a?1:fo(r),xn(ji(e,t),r)},Br.flatten=Hs,Br.flattenDeep=function(e){return(null==e?0:e.length)?xn(e,m):[]},Br.flattenDepth=function(e,t){return(null==e?0:e.length)?xn(e,t=t===a?1:fo(t)):[]},Br.flip=function(e){return Qa(e,512)},Br.flow=tl,Br.flowRight=rl,Br.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var a=e[t];n[a[0]]=a[1]}return n},Br.functions=function(e){return null==e?[]:jn(e,To(e))},Br.functionsIn=function(e){return null==e?[]:jn(e,Po(e))},Br.groupBy=bi,Br.initial=function(e){return(null==e?0:e.length)?na(e,0,-1):[]},Br.intersection=Ks,Br.intersectionBy=Gs,Br.intersectionWith=Ys,Br.invert=Ao,Br.invertBy=Co,Br.invokeMap=vi,Br.iteratee=al,Br.keyBy=wi,Br.keys=To,Br.keysIn=Po,Br.map=ji,Br.mapKeys=function(e,t){var r={};return t=ls(t,3),vn(e,function(e,n,a){an(r,t(e,n,a),e)}),r},Br.mapValues=function(e,t){var r={};return t=ls(t,3),vn(e,function(e,n,a){an(r,n,t(e,n,a))}),r},Br.matches=function(e){return Un(ln(e,1))},Br.matchesProperty=function(e,t){return qn(e,ln(t,1))},Br.memoize=Li,Br.merge=Lo,Br.mergeWith=Mo,Br.method=sl,Br.methodOf=il,Br.mixin=ol,Br.negate=Mi,Br.nthArg=function(e){return e=fo(e),Jn(function(t){return Vn(t,e)})},Br.omit=Ro,Br.omitBy=function(e,t){return Io(e,Mi(ls(t)))},Br.once=function(e){return Ei(2,e)},Br.orderBy=function(e,t,r,n){return null==e?[]:(Vi(t)||(t=null==t?[]:[t]),Vi(r=n?a:r)||(r=null==r?[]:[r]),Hn(e,t,r))},Br.over=cl,Br.overArgs=Ri,Br.overEvery=dl,Br.overSome=ul,Br.partial=Di,Br.partialRight=Ii,Br.partition=ki,Br.pick=Do,Br.pickBy=Io,Br.property=hl,Br.propertyOf=function(e){return function(t){return null==e?a:kn(e,t)}},Br.pull=Js,Br.pullAll=Qs,Br.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?Kn(e,t,ls(r,2)):e},Br.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?Kn(e,t,a,r):e},Br.pullAt=Zs,Br.range=ml,Br.rangeRight=fl,Br.rearg=Fi,Br.reject=function(e,t){return(Vi(e)?Pt:gn)(e,Mi(ls(t,3)))},Br.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,a=[],s=e.length;for(t=ls(t,3);++n<s;){var i=e[n];t(i,n,e)&&(r.push(i),a.push(n))}return Gn(e,a),r},Br.rest=function(e,t){if("function"!=typeof e)throw new Ce(s);return Jn(e,t=t===a?t:fo(t))},Br.reverse=Xs,Br.sampleSize=function(e,t,r){return t=(r?bs(e,t,r):t===a)?1:fo(t),(Vi(e)?Qr:Zn)(e,t)},Br.set=function(e,t,r){return null==e?e:Xn(e,t,r)},Br.setWith=function(e,t,r,n){return n="function"==typeof n?n:a,null==e?e:Xn(e,t,r,n)},Br.shuffle=function(e){return(Vi(e)?Zr:ra)(e)},Br.slice=function(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&bs(e,t,r)?(t=0,r=n):(t=null==t?0:fo(t),r=r===a?n:fo(r)),na(e,t,r)):[]},Br.sortBy=Ni,Br.sortedUniq=function(e){return e&&e.length?oa(e):[]},Br.sortedUniqBy=function(e,t){return e&&e.length?oa(e,ls(t,2)):[]},Br.split=function(e,t,r){return r&&"number"!=typeof r&&bs(e,t,r)&&(t=r=a),(r=r===a?g:r>>>0)?(e=yo(e))&&("string"==typeof t||null!=t&&!ao(t))&&!(t=ca(t))&&or(e)?wa(fr(e),0,r):e.split(t,r):[]},Br.spread=function(e,t){if("function"!=typeof e)throw new Ce(s);return t=null==t?0:Yt(fo(t),0),Jn(function(r){var n=r[t],a=wa(r,0,t);return n&&Dt(a,n),Et(e,this,a)})},Br.tail=function(e){var t=null==e?0:e.length;return t?na(e,1,t):[]},Br.take=function(e,t,r){return e&&e.length?na(e,0,(t=r||t===a?1:fo(t))<0?0:t):[]},Br.takeRight=function(e,t,r){var n=null==e?0:e.length;return n?na(e,(t=n-(t=r||t===a?1:fo(t)))<0?0:t,n):[]},Br.takeRightWhile=function(e,t){return e&&e.length?ma(e,ls(t,3),!1,!0):[]},Br.takeWhile=function(e,t){return e&&e.length?ma(e,ls(t,3)):[]},Br.tap=function(e,t){return t(e),e},Br.throttle=function(e,t,r){var n=!0,a=!0;if("function"!=typeof e)throw new Ce(s);return Xi(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),Oi(e,t,{leading:n,maxWait:t,trailing:a})},Br.thru=hi,Br.toArray=ho,Br.toPairs=Fo,Br.toPairsIn=Bo,Br.toPath=function(e){return Vi(e)?Rt(e,Ds):oo(e)?[e]:Ca(Rs(yo(e)))},Br.toPlainObject=xo,Br.transform=function(e,t,r){var n=Vi(e),a=n||Gi(e)||lo(e);if(t=ls(t,4),null==r){var s=e&&e.constructor;r=a?n?new s:[]:Xi(e)&&Ji(s)?Ur(Ke(e)):{}}return(a?Ct:vn)(e,function(e,n,a){return t(r,e,n,a)}),r},Br.unary=function(e){return Si(e,1)},Br.union=ei,Br.unionBy=ti,Br.unionWith=ri,Br.uniq=function(e){return e&&e.length?da(e):[]},Br.uniqBy=function(e,t){return e&&e.length?da(e,ls(t,2)):[]},Br.uniqWith=function(e,t){return t="function"==typeof t?t:a,e&&e.length?da(e,a,t):[]},Br.unset=function(e,t){return null==e||ua(e,t)},Br.unzip=ni,Br.unzipWith=ai,Br.update=function(e,t,r){return null==e?e:ha(e,t,ya(r))},Br.updateWith=function(e,t,r,n){return n="function"==typeof n?n:a,null==e?e:ha(e,t,ya(r),n)},Br.values=Uo,Br.valuesIn=function(e){return null==e?[]:er(e,Po(e))},Br.without=si,Br.words=Qo,Br.wrap=function(e,t){return Di(ya(t),e)},Br.xor=ii,Br.xorBy=oi,Br.xorWith=li,Br.zip=ci,Br.zipObject=function(e,t){return ga(e||[],t||[],en)},Br.zipObjectDeep=function(e,t){return ga(e||[],t||[],Xn)},Br.zipWith=di,Br.entries=Fo,Br.entriesIn=Bo,Br.extend=vo,Br.extendWith=wo,ol(Br,Br),Br.add=xl,Br.attempt=Zo,Br.camelCase=qo,Br.capitalize=zo,Br.ceil=yl,Br.clamp=function(e,t,r){return r===a&&(r=t,t=a),r!==a&&(r=(r=go(r))===r?r:0),t!==a&&(t=(t=go(t))===t?t:0),on(go(e),t,r)},Br.clone=function(e){return ln(e,4)},Br.cloneDeep=function(e){return ln(e,5)},Br.cloneDeepWith=function(e,t){return ln(e,5,t="function"==typeof t?t:a)},Br.cloneWith=function(e,t){return ln(e,4,t="function"==typeof t?t:a)},Br.conformsTo=function(e,t){return null==t||cn(e,t,To(t))},Br.deburr=Vo,Br.defaultTo=function(e,t){return null==e||e!==e?t:e},Br.divide=bl,Br.endsWith=function(e,t,r){e=yo(e),t=ca(t);var n=e.length,s=r=r===a?n:on(fo(r),0,n);return(r-=t.length)>=0&&e.slice(r,s)==t},Br.eq=Bi,Br.escape=function(e){return(e=yo(e))&&Q.test(e)?e.replace($,sr):e},Br.escapeRegExp=function(e){return(e=yo(e))&&se.test(e)?e.replace(ae,"\\$&"):e},Br.every=function(e,t,r){var n=Vi(e)?Tt:fn;return r&&bs(e,t,r)&&(t=a),n(e,ls(t,3))},Br.find=pi,Br.findIndex=zs,Br.findKey=function(e,t){return qt(e,ls(t,3),vn)},Br.findLast=gi,Br.findLastIndex=Vs,Br.findLastKey=function(e,t){return qt(e,ls(t,3),wn)},Br.floor=vl,Br.forEach=xi,Br.forEachRight=yi,Br.forIn=function(e,t){return null==e?e:yn(e,ls(t,3),Po)},Br.forInRight=function(e,t){return null==e?e:bn(e,ls(t,3),Po)},Br.forOwn=function(e,t){return e&&vn(e,ls(t,3))},Br.forOwnRight=function(e,t){return e&&wn(e,ls(t,3))},Br.get=So,Br.gt=Ui,Br.gte=qi,Br.has=function(e,t){return null!=e&&ps(e,t,En)},Br.hasIn=Eo,Br.head=Ws,Br.identity=nl,Br.includes=function(e,t,r,n){e=Wi(e)?e:Uo(e),r=r&&!n?fo(r):0;var a=e.length;return r<0&&(r=Yt(a+r,0)),io(e)?r<=a&&e.indexOf(t,r)>-1:!!a&&Vt(e,t,r)>-1},Br.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=null==r?0:fo(r);return a<0&&(a=Yt(n+a,0)),Vt(e,t,a)},Br.inRange=function(e,t,r){return t=mo(t),r===a?(r=t,t=0):r=mo(r),function(e,t,r){return e>=yr(t,r)&&e<Yt(t,r)}(e=go(e),t,r)},Br.invoke=Oo,Br.isArguments=zi,Br.isArray=Vi,Br.isArrayBuffer=Hi,Br.isArrayLike=Wi,Br.isArrayLikeObject=Ki,Br.isBoolean=function(e){return!0===e||!1===e||eo(e)&&_n(e)==v},Br.isBuffer=Gi,Br.isDate=Yi,Br.isElement=function(e){return eo(e)&&1===e.nodeType&&!no(e)},Br.isEmpty=function(e){if(null==e)return!0;if(Wi(e)&&(Vi(e)||"string"==typeof e||"function"==typeof e.splice||Gi(e)||lo(e)||zi(e)))return!e.length;var t=fs(e);if(t==_||t==O)return!e.size;if(ks(e))return!Dn(e).length;for(var r in e)if(Re.call(e,r))return!1;return!0},Br.isEqual=function(e,t){return Pn(e,t)},Br.isEqualWith=function(e,t,r){var n=(r="function"==typeof r?r:a)?r(e,t):a;return n===a?Pn(e,t,a,r):!!n},Br.isError=$i,Br.isFinite=function(e){return"number"==typeof e&&bt(e)},Br.isFunction=Ji,Br.isInteger=Qi,Br.isLength=Zi,Br.isMap=to,Br.isMatch=function(e,t){return e===t||Ln(e,t,ds(t))},Br.isMatchWith=function(e,t,r){return r="function"==typeof r?r:a,Ln(e,t,ds(t),r)},Br.isNaN=function(e){return ro(e)&&e!=+e},Br.isNative=function(e){if(js(e))throw new oe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Mn(e)},Br.isNil=function(e){return null==e},Br.isNull=function(e){return null===e},Br.isNumber=ro,Br.isObject=Xi,Br.isObjectLike=eo,Br.isPlainObject=no,Br.isRegExp=ao,Br.isSafeInteger=function(e){return Qi(e)&&e>=-9007199254740991&&e<=f},Br.isSet=so,Br.isString=io,Br.isSymbol=oo,Br.isTypedArray=lo,Br.isUndefined=function(e){return e===a},Br.isWeakMap=function(e){return eo(e)&&fs(e)==L},Br.isWeakSet=function(e){return eo(e)&&"[object WeakSet]"==_n(e)},Br.join=function(e,t){return null==e?"":vt.call(e,t)},Br.kebabCase=Ho,Br.last=$s,Br.lastIndexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var s=n;return r!==a&&(s=(s=fo(r))<0?Yt(n+s,0):yr(s,n-1)),t===t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,s):zt(e,Wt,s,!0)},Br.lowerCase=Wo,Br.lowerFirst=Ko,Br.lt=co,Br.lte=uo,Br.max=function(e){return e&&e.length?pn(e,nl,Sn):a},Br.maxBy=function(e,t){return e&&e.length?pn(e,ls(t,2),Sn):a},Br.mean=function(e){return Kt(e,nl)},Br.meanBy=function(e,t){return Kt(e,ls(t,2))},Br.min=function(e){return e&&e.length?pn(e,nl,Fn):a},Br.minBy=function(e,t){return e&&e.length?pn(e,ls(t,2),Fn):a},Br.stubArray=pl,Br.stubFalse=gl,Br.stubObject=function(){return{}},Br.stubString=function(){return""},Br.stubTrue=function(){return!0},Br.multiply=wl,Br.nth=function(e,t){return e&&e.length?Vn(e,fo(t)):a},Br.noConflict=function(){return pt._===this&&(pt._=Ue),this},Br.noop=ll,Br.now=_i,Br.pad=function(e,t,r){e=yo(e);var n=(t=fo(t))?mr(e):0;if(!t||n>=t)return e;var a=(t-n)/2;return Ha(ft(a),r)+e+Ha(mt(a),r)},Br.padEnd=function(e,t,r){e=yo(e);var n=(t=fo(t))?mr(e):0;return t&&n<t?e+Ha(t-n,r):e},Br.padStart=function(e,t,r){e=yo(e);var n=(t=fo(t))?mr(e):0;return t&&n<t?Ha(t-n,r)+e:e},Br.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),vr(yo(e).replace(ie,""),t||0)},Br.random=function(e,t,r){if(r&&"boolean"!=typeof r&&bs(e,t,r)&&(t=r=a),r===a&&("boolean"==typeof t?(r=t,t=a):"boolean"==typeof e&&(r=e,e=a)),e===a&&t===a?(e=0,t=1):(e=mo(e),t===a?(t=e,e=0):t=mo(t)),e>t){var n=e;e=t,t=n}if(r||e%1||t%1){var s=wr();return yr(e+s*(t-e+ut("1e-"+((s+"").length-1))),t)}return Yn(e,t)},Br.reduce=function(e,t,r){var n=Vi(e)?It:$t,a=arguments.length<3;return n(e,ls(t,4),r,a,hn)},Br.reduceRight=function(e,t,r){var n=Vi(e)?Ft:$t,a=arguments.length<3;return n(e,ls(t,4),r,a,mn)},Br.repeat=function(e,t,r){return t=(r?bs(e,t,r):t===a)?1:fo(t),$n(yo(e),t)},Br.replace=function(){var e=arguments,t=yo(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Br.result=function(e,t,r){var n=-1,s=(t=ba(t,e)).length;for(s||(s=1,e=a);++n<s;){var i=null==e?a:e[Ds(t[n])];i===a&&(n=s,i=r),e=Ji(i)?i.call(e):i}return e},Br.round=jl,Br.runInContext=e,Br.sample=function(e){return(Vi(e)?Jr:Qn)(e)},Br.size=function(e){if(null==e)return 0;if(Wi(e))return io(e)?mr(e):e.length;var t=fs(e);return t==_||t==O?e.size:Dn(e).length},Br.snakeCase=Go,Br.some=function(e,t,r){var n=Vi(e)?Bt:aa;return r&&bs(e,t,r)&&(t=a),n(e,ls(t,3))},Br.sortedIndex=function(e,t){return sa(e,t)},Br.sortedIndexBy=function(e,t,r){return ia(e,t,ls(r,2))},Br.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=sa(e,t);if(n<r&&Bi(e[n],t))return n}return-1},Br.sortedLastIndex=function(e,t){return sa(e,t,!0)},Br.sortedLastIndexBy=function(e,t,r){return ia(e,t,ls(r,2),!0)},Br.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var r=sa(e,t,!0)-1;if(Bi(e[r],t))return r}return-1},Br.startCase=Yo,Br.startsWith=function(e,t,r){return e=yo(e),r=null==r?0:on(fo(r),0,e.length),t=ca(t),e.slice(r,r+t.length)==t},Br.subtract=kl,Br.sum=function(e){return e&&e.length?Jt(e,nl):0},Br.sumBy=function(e,t){return e&&e.length?Jt(e,ls(t,2)):0},Br.template=function(e,t,r){var n=Br.templateSettings;r&&bs(e,t,r)&&(t=a),e=yo(e),t=wo({},t,n,Za);var s,i,o=wo({},t.imports,n.imports,Za),l=To(o),c=er(o,l),d=0,u=t.interpolate||je,h="__p += '",m=Ee((t.escape||je).source+"|"+u.source+"|"+(u===ee?fe:je).source+"|"+(t.evaluate||je).source+"|$","g"),f="//# sourceURL="+(Re.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ot+"]")+"\n";e.replace(m,function(t,r,n,a,o,l){return n||(n=a),h+=e.slice(d,l).replace(ke,ir),r&&(s=!0,h+="' +\n__e("+r+") +\n'"),o&&(i=!0,h+="';\n"+o+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),d=l+t.length,t}),h+="';\n";var p=Re.call(t,"variable")&&t.variable;if(p){if(he.test(p))throw new oe("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(i?h.replace(W,""):h).replace(K,"$1").replace(G,"$1;"),h="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Zo(function(){return Ne(l,f+"return "+h).apply(a,c)});if(g.source=h,$i(g))throw g;return g},Br.times=function(e,t){if((e=fo(e))<1||e>f)return[];var r=g,n=yr(e,g);t=ls(t),e-=g;for(var a=Qt(n,t);++r<e;)t(r);return a},Br.toFinite=mo,Br.toInteger=fo,Br.toLength=po,Br.toLower=function(e){return yo(e).toLowerCase()},Br.toNumber=go,Br.toSafeInteger=function(e){return e?on(fo(e),-9007199254740991,f):0===e?e:0},Br.toString=yo,Br.toUpper=function(e){return yo(e).toUpperCase()},Br.trim=function(e,t,r){if((e=yo(e))&&(r||t===a))return Zt(e);if(!e||!(t=ca(t)))return e;var n=fr(e),s=fr(t);return wa(n,rr(n,s),nr(n,s)+1).join("")},Br.trimEnd=function(e,t,r){if((e=yo(e))&&(r||t===a))return e.slice(0,pr(e)+1);if(!e||!(t=ca(t)))return e;var n=fr(e);return wa(n,0,nr(n,fr(t))+1).join("")},Br.trimStart=function(e,t,r){if((e=yo(e))&&(r||t===a))return e.replace(ie,"");if(!e||!(t=ca(t)))return e;var n=fr(e);return wa(n,rr(n,fr(t))).join("")},Br.truncate=function(e,t){var r=30,n="...";if(Xi(t)){var s="separator"in t?t.separator:s;r="length"in t?fo(t.length):r,n="omission"in t?ca(t.omission):n}var i=(e=yo(e)).length;if(or(e)){var o=fr(e);i=o.length}if(r>=i)return e;var l=r-mr(n);if(l<1)return n;var c=o?wa(o,0,l).join(""):e.slice(0,l);if(s===a)return c+n;if(o&&(l+=c.length-l),ao(s)){if(e.slice(l).search(s)){var d,u=c;for(s.global||(s=Ee(s.source,yo(pe.exec(s))+"g")),s.lastIndex=0;d=s.exec(u);)var h=d.index;c=c.slice(0,h===a?l:h)}}else if(e.indexOf(ca(s),l)!=l){var m=c.lastIndexOf(s);m>-1&&(c=c.slice(0,m))}return c+n},Br.unescape=function(e){return(e=yo(e))&&J.test(e)?e.replace(Y,gr):e},Br.uniqueId=function(e){var t=++De;return yo(e)+t},Br.upperCase=$o,Br.upperFirst=Jo,Br.each=xi,Br.eachRight=yi,Br.first=Ws,ol(Br,function(){var e={};return vn(Br,function(t,r){Re.call(Br.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),Br.VERSION="4.17.21",Ct(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Br[e].placeholder=Br}),Ct(["drop","take"],function(e,t){Vr.prototype[e]=function(r){r=r===a?1:Yt(fo(r),0);var n=this.__filtered__&&!t?new Vr(this):this.clone();return n.__filtered__?n.__takeCount__=yr(r,n.__takeCount__):n.__views__.push({size:yr(r,g),type:e+(n.__dir__<0?"Right":"")}),n},Vr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Ct(["filter","map","takeWhile"],function(e,t){var r=t+1,n=1==r||3==r;Vr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ls(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}}),Ct(["head","last"],function(e,t){var r="take"+(t?"Right":"");Vr.prototype[e]=function(){return this[r](1).value()[0]}}),Ct(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");Vr.prototype[e]=function(){return this.__filtered__?new Vr(this):this[r](1)}}),Vr.prototype.compact=function(){return this.filter(nl)},Vr.prototype.find=function(e){return this.filter(e).head()},Vr.prototype.findLast=function(e){return this.reverse().find(e)},Vr.prototype.invokeMap=Jn(function(e,t){return"function"==typeof e?new Vr(this):this.map(function(r){return On(r,e,t)})}),Vr.prototype.reject=function(e){return this.filter(Mi(ls(e)))},Vr.prototype.slice=function(e,t){e=fo(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Vr(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==a&&(r=(t=fo(t))<0?r.dropRight(-t):r.take(t-e)),r)},Vr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Vr.prototype.toArray=function(){return this.take(g)},vn(Vr.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),s=Br[n?"take"+("last"==t?"Right":""):t],i=n||/^find/.test(t);s&&(Br.prototype[t]=function(){var t=this.__wrapped__,o=n?[1]:arguments,l=t instanceof Vr,c=o[0],d=l||Vi(t),u=function(e){var t=s.apply(Br,Dt([e],o));return n&&h?t[0]:t};d&&r&&"function"==typeof c&&1!=c.length&&(l=d=!1);var h=this.__chain__,m=!!this.__actions__.length,f=i&&!h,p=l&&!m;if(!i&&d){t=p?t:new Vr(this);var g=e.apply(t,o);return g.__actions__.push({func:hi,args:[u],thisArg:a}),new zr(g,h)}return f&&p?e.apply(this,o):(g=this.thru(u),f?n?g.value()[0]:g.value():g)})}),Ct(["pop","push","shift","sort","splice","unshift"],function(e){var t=Oe[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Br.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var a=this.value();return t.apply(Vi(a)?a:[],e)}return this[r](function(r){return t.apply(Vi(r)?r:[],e)})}}),vn(Vr.prototype,function(e,t){var r=Br[t];if(r){var n=r.name+"";Re.call(Or,n)||(Or[n]=[]),Or[n].push({name:t,func:r})}}),Or[Ua(a,2).name]=[{name:"wrapper",func:a}],Vr.prototype.clone=function(){var e=new Vr(this.__wrapped__);return e.__actions__=Ca(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ca(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ca(this.__views__),e},Vr.prototype.reverse=function(){if(this.__filtered__){var e=new Vr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Vr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=Vi(e),n=t<0,a=r?e.length:0,s=function(e,t,r){var n=-1,a=r.length;for(;++n<a;){var s=r[n],i=s.size;switch(s.type){case"drop":e+=i;break;case"dropRight":t-=i;break;case"take":t=yr(t,e+i);break;case"takeRight":e=Yt(e,t-i)}}return{start:e,end:t}}(0,a,this.__views__),i=s.start,o=s.end,l=o-i,c=n?o:i-1,d=this.__iteratees__,u=d.length,h=0,m=yr(l,this.__takeCount__);if(!r||!n&&a==l&&m==l)return fa(e,this.__actions__);var f=[];e:for(;l--&&h<m;){for(var p=-1,g=e[c+=t];++p<u;){var x=d[p],y=x.iteratee,b=x.type,v=y(g);if(2==b)g=v;else if(!v){if(1==b)continue e;break e}}f[h++]=g}return f},Br.prototype.at=mi,Br.prototype.chain=function(){return ui(this)},Br.prototype.commit=function(){return new zr(this.value(),this.__chain__)},Br.prototype.next=function(){this.__values__===a&&(this.__values__=ho(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?a:this.__values__[this.__index__++]}},Br.prototype.plant=function(e){for(var t,r=this;r instanceof qr;){var n=Fs(r);n.__index__=0,n.__values__=a,t?s.__wrapped__=n:t=n;var s=n;r=r.__wrapped__}return s.__wrapped__=e,t},Br.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Vr){var t=e;return this.__actions__.length&&(t=new Vr(this)),(t=t.reverse()).__actions__.push({func:hi,args:[Xs],thisArg:a}),new zr(t,this.__chain__)}return this.thru(Xs)},Br.prototype.toJSON=Br.prototype.valueOf=Br.prototype.value=function(){return fa(this.__wrapped__,this.__actions__)},Br.prototype.first=Br.prototype.head,Qe&&(Br.prototype[Qe]=function(){return this}),Br}();pt._=xr,(n=function(){return xr}.call(t,r,t,e))===a||(e.exports=n)}.call(this)},3668:(e,t,r)=>{var n=r(8902),a=r(2587),s=r(8114);e.exports=function(e,t,r,i,o,l){var c=1&r,d=e.length,u=t.length;if(d!=u&&!(c&&u>d))return!1;var h=l.get(e),m=l.get(t);if(h&&m)return h==t&&m==e;var f=-1,p=!0,g=2&r?new n:void 0;for(l.set(e,t),l.set(t,e);++f<d;){var x=e[f],y=t[f];if(i)var b=c?i(y,x,f,t,e,l):i(x,y,f,e,t,l);if(void 0!==b){if(b)continue;p=!1;break}if(g){if(!a(t,function(e,t){if(!s(g,t)&&(x===e||o(x,e,r,i,l)))return g.push(t)})){p=!1;break}}else if(x!==y&&!o(x,y,r,i,l)){p=!1;break}}return l.delete(e),l.delete(t),p}},3713:(e,t,r)=>{var n=r(6140),a=r(1143),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return a(e);var t=[];for(var r in Object(e))s.call(e,r)&&"constructor"!=r&&t.push(r);return t}},3892:e=>{e.exports=function(e){return this.__data__.has(e)}},4052:e=>{var t=Array.isArray;e.exports=t},4160:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}},4190:(e,t,r)=>{var n=r(1340);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},4202:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function x(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||f}function y(){}function b(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||f}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=x.prototype;var v=b.prototype=new y;v.constructor=b,p(v,x.prototype),v.isPureReactComponent=!0;var w=Array.isArray,j=Object.prototype.hasOwnProperty,k={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var a,s={},i=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)j.call(t,a)&&!N.hasOwnProperty(a)&&(s[a]=t[a]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:r,type:e,key:i,ref:o,props:s,_owner:k.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var E=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function C(e,t,a,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case n:l=!0}}if(l)return i=i(l=e),e=""===s?"."+A(l,0):s,w(i)?(a="",null!=e&&(a=e.replace(E,"$&/")+"/"),C(i,t,a,"",function(e){return e})):null!=i&&(S(i)&&(i=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(E,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var d=s+A(o=e[c],c);l+=C(o,t,a,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=C(o=o.value,t,a,d=s+A(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function O(e,t,r){if(null==e)return e;var n=[],a=0;return C(e,n,"","",function(e){return t.call(r,e,a++)}),n}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},L={transition:null},M={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:L,ReactCurrentOwner:k};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:O,forEach:function(e,t,r){O(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=x,t.Fragment=a,t.Profiler=i,t.PureComponent=b,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=R,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=p({},e.props),s=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j.call(t,c)&&!N.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:r,type:e.type,key:s,ref:i,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,r){return P.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,r){return P.current.useReducer(e,t,r)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return P.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},4262:(e,t,r)=>{var n=r(8895),a=r(4052);e.exports=function(e,t,r){var s=t(e);return a(e)?s:n(s,r(e))}},4391:(e,t,r)=>{"use strict";var n=r(7950);t.H=n.createRoot,n.hydrateRoot},4543:(e,t,r)=>{e=r.nmd(e);var n=r(6552),a=r(14),s=t&&!t.nodeType&&t,i=s&&e&&!e.nodeType&&e,o=i&&i.exports===s?n.Buffer:void 0,l=(o?o.isBuffer:void 0)||a;e.exports=l},4545:(e,t,r)=>{var n=r(7160);e.exports=function(){this.__data__=new n,this.size=0}},4552:(e,t,r)=>{var n=r(9812),a=Object.prototype,s=a.hasOwnProperty,i=a.toString,o=n?n.toStringTag:void 0;e.exports=function(e){var t=s.call(e,o),r=e[o];try{e[o]=void 0;var n=!0}catch(l){}var a=i.call(e);return n&&(t?e[o]=r:delete e[o]),a}},4657:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},4816:(e,t,r)=>{var n=r(7251),a=r(7159),s=r(438),i=r(9394),o=r(6874);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=a,l.prototype.get=s,l.prototype.has=i,l.prototype.set=o,e.exports=l},5043:(e,t,r)=>{"use strict";e.exports=r(4202)},5051:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},5193:(e,t,r)=>{var n=r(6913),a=r(2761);e.exports=function(e){return a(e)&&"[object Arguments]"==n(e)}},5204:(e,t,r)=>{var n=r(7937)(r(6552),"Map");e.exports=n},5387:(e,t,r)=>{var n=r(7937)(r(6552),"Promise");e.exports=n},5428:(e,t,r)=>{var n=r(6913),a=r(6173),s=r(2761),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return s(e)&&a(e.length)&&!!i[n(e)]}},5538:(e,t,r)=>{var n=r(7160),a=r(4545),s=r(793),i=r(7760),o=r(3892),l=r(6788);function c(e){var t=this.__data__=new n(e);this.size=t.size}c.prototype.clear=a,c.prototype.delete=s,c.prototype.get=i,c.prototype.has=o,c.prototype.set=l,e.exports=c},5575:(e,t,r)=>{var n=r(7937)(Object,"create");e.exports=n},5752:(e,t,r)=>{var n=r(9395),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,s,i,o){var l=1&r,c=n(e),d=c.length;if(d!=n(t).length&&!l)return!1;for(var u=d;u--;){var h=c[u];if(!(l?h in t:a.call(t,h)))return!1}var m=o.get(e),f=o.get(t);if(m&&f)return m==t&&f==e;var p=!0;o.set(e,t),o.set(t,e);for(var g=l;++u<d;){var x=e[h=c[u]],y=t[h];if(s)var b=l?s(y,x,h,t,e,o):s(x,y,h,e,t,o);if(!(void 0===b?x===y||i(x,y,r,s,o):b)){p=!1;break}g||(g="constructor"==h)}if(p&&!g){var v=e.constructor,w=t.constructor;v==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof w&&w instanceof w||(p=!1)}return o.delete(e),o.delete(t),p}},6095:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},6140:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},6173:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},6179:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},6399:(e,t,r)=>{var n=r(5538),a=r(3668),s=r(9987),i=r(5752),o=r(6924),l=r(4052),c=r(4543),d=r(1268),u="[object Arguments]",h="[object Array]",m="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,p,g,x){var y=l(e),b=l(t),v=y?h:o(e),w=b?h:o(t),j=(v=v==u?m:v)==m,k=(w=w==u?m:w)==m,N=v==w;if(N&&c(e)){if(!c(t))return!1;y=!0,j=!1}if(N&&!j)return x||(x=new n),y||d(e)?a(e,t,r,p,g,x):s(e,t,v,r,p,g,x);if(!(1&r)){var _=j&&f.call(e,"__wrapped__"),S=k&&f.call(t,"__wrapped__");if(_||S){var E=_?e.value():e,A=S?t.value():t;return x||(x=new n),g(E,A,r,p,x)}}return!!N&&(x||(x=new n),i(e,t,r,p,g,x))}},6552:(e,t,r)=>{var n=r(7105),a="object"==typeof self&&self&&self.Object===Object&&self,s=n||a||Function("return this")();e.exports=s},6571:(e,t,r)=>{var n=r(1629),a=r(6173);e.exports=function(e){return null!=e&&a(e.length)&&!n(e)}},6600:(e,t,r)=>{var n=r(7937)(r(6552),"WeakMap");e.exports=n},6686:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},6704:e=>{e.exports=function(e){return this.__data__.has(e)}},6788:(e,t,r)=>{var n=r(7160),a=r(5204),s=r(4816);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var i=r.__data__;if(!a||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new s(i)}return r.set(e,t),this.size=r.size,this}},6832:(e,t,r)=>{e=r.nmd(e);var n=r(7105),a=t&&!t.nodeType&&t,s=a&&e&&!e.nodeType&&e,i=s&&s.exports===a&&n.process,o=function(){try{var e=s&&s.require&&s.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(t){}}();e.exports=o},6874:(e,t,r)=>{var n=r(2622);e.exports=function(e,t){var r=n(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this}},6913:(e,t,r)=>{var n=r(9812),a=r(4552),s=r(6095),i=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?a(e):s(e)}},6924:(e,t,r)=>{var n=r(7685),a=r(5204),s=r(5387),i=r(2070),o=r(6600),l=r(6913),c=r(6996),d="[object Map]",u="[object Promise]",h="[object Set]",m="[object WeakMap]",f="[object DataView]",p=c(n),g=c(a),x=c(s),y=c(i),b=c(o),v=l;(n&&v(new n(new ArrayBuffer(1)))!=f||a&&v(new a)!=d||s&&v(s.resolve())!=u||i&&v(new i)!=h||o&&v(new o)!=m)&&(v=function(e){var t=l(e),r="[object Object]"==t?e.constructor:void 0,n=r?c(r):"";if(n)switch(n){case p:return f;case g:return d;case x:return u;case y:return h;case b:return m}return t}),e.exports=v},6954:(e,t,r)=>{var n=r(1629),a=r(7857),s=r(6686),i=r(6996),o=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,d=l.toString,u=c.hasOwnProperty,h=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!s(e)||a(e))&&(n(e)?h:o).test(i(e))}},6989:(e,t,r)=>{var n=r(6399),a=r(2761);e.exports=function e(t,r,s,i,o){return t===r||(null==t||null==r||!a(t)&&!a(r)?t!==t&&r!==r:n(t,r,s,i,e,o))}},6996:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(r){}try{return e+""}catch(r){}}return""}},7105:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},7159:(e,t,r)=>{var n=r(2622);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},7160:(e,t,r)=>{var n=r(7563),a=r(9935),s=r(4190),i=r(1946),o=r(1714);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=a,l.prototype.get=s,l.prototype.has=i,l.prototype.set=o,e.exports=l},7234:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(!(0<s(a,t)))break e;e[n]=t,e[r]=a,r=n}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,i=a>>>1;n<i;){var o=2*(n+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,r))c<a&&0>s(d,l)?(e[n]=d,e[c]=r,n=c):(e[n]=l,e[o]=r,n=o);else{if(!(c<a&&0>s(d,r)))break e;e[n]=d,e[c]=r,n=c}}}return t}function s(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,f=!1,p=!1,g=!1,x="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=n(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,r(c,t)}t=n(d)}}function w(e){if(g=!1,v(e),!p)if(null!==n(c))p=!0,L(j);else{var t=n(d);null!==t&&M(w,t.startTime-e)}}function j(e,r){p=!1,g&&(g=!1,y(S),S=-1),f=!0;var s=m;try{for(v(r),h=n(c);null!==h&&(!(h.expirationTime>r)||e&&!C());){var i=h.callback;if("function"===typeof i){h.callback=null,m=h.priorityLevel;var o=i(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof o?h.callback=o:h===n(c)&&a(c),v(r)}else a(c);h=n(c)}if(null!==h)var l=!0;else{var u=n(d);null!==u&&M(w,u.startTime-r),l=!1}return l}finally{h=null,m=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,N=!1,_=null,S=-1,E=5,A=-1;function C(){return!(t.unstable_now()-A<E)}function O(){if(null!==_){var e=t.unstable_now();A=e;var r=!0;try{r=_(!0,e)}finally{r?k():(N=!1,_=null)}}else N=!1}if("function"===typeof b)k=function(){b(O)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,P=T.port2;T.port1.onmessage=O,k=function(){P.postMessage(null)}}else k=function(){x(O,0)};function L(e){_=e,N||(N=!0,k())}function M(e,r){S=x(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,L(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var r=m;m=t;try{return e()}finally{m=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=m;m=e;try{return t()}finally{m=r}},t.unstable_scheduleCallback=function(e,a,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,r(d,e),null===n(c)&&e===n(d)&&(g?(y(S),S=-1):g=!0,M(w,s-i))):(e.sortIndex=o,r(c,e),p||f||(p=!0,L(j))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=m;return function(){var r=m;m=t;try{return e.apply(this,arguments)}finally{m=r}}}},7251:(e,t,r)=>{var n=r(8724),a=r(7160),s=r(5204);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(s||a),string:new n}}},7529:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,a=0,s=[];++r<n;){var i=e[r];t(i,r,e)&&(s[a++]=i)}return s}},7563:e=>{e.exports=function(){this.__data__=[],this.size=0}},7574:e=>{e.exports=function(e){return function(t){return e(t)}}},7615:(e,t,r)=>{var n=r(5575);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},7680:function(e){var t;"undefined"!==typeof self&&self,t=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=109)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(17),a=r(18),s=r(19),i=r(45),o=r(46),l=r(47),c=r(48),d=r(49),u=r(12),h=r(32),m=r(33),f=r(31),p=r(1),g={Scope:p.Scope,create:p.create,find:p.find,query:p.query,register:p.register,Container:n.default,Format:a.default,Leaf:s.default,Embed:c.default,Scroll:i.default,Block:l.default,Inline:o.default,Text:d.default,Attributor:{Attribute:u.default,Class:h.default,Style:m.default,Store:f.default}};t.default=g},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t){var r=this;return t="[Parchment] "+t,(r=e.call(this,t)||this).message=t,r.name=r.constructor.name,r}return n(t,e),t}(Error);t.ParchmentError=a;var s,i={},o={},l={},c={};function d(e,t){var r;if(void 0===t&&(t=s.ANY),"string"===typeof e)r=c[e]||i[e];else if(e instanceof Text||e.nodeType===Node.TEXT_NODE)r=c.text;else if("number"===typeof e)e&s.LEVEL&s.BLOCK?r=c.block:e&s.LEVEL&s.INLINE&&(r=c.inline);else if(e instanceof HTMLElement){var n=(e.getAttribute("class")||"").split(/\s+/);for(var a in n)if(r=o[n[a]])break;r=r||l[e.tagName]}return null==r?null:t&s.LEVEL&r.scope&&t&s.TYPE&r.scope?r:null}t.DATA_KEY="__blot",function(e){e[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY"}(s=t.Scope||(t.Scope={})),t.create=function(e,t){var r=d(e);if(null==r)throw new a("Unable to create "+e+" blot");var n=r,s=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:n.create(t);return new n(s,t)},t.find=function e(r,n){return void 0===n&&(n=!1),null==r?null:null!=r[t.DATA_KEY]?r[t.DATA_KEY].blot:n?e(r.parentNode,n):null},t.query=d,t.register=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length>1)return t.map(function(t){return e(t)});var n=t[0];if("string"!==typeof n.blotName&&"string"!==typeof n.attrName)throw new a("Invalid definition");if("abstract"===n.blotName)throw new a("Cannot register abstract class");return c[n.blotName||n.attrName]=n,"string"===typeof n.keyName?i[n.keyName]=n:(null!=n.className&&(o[n.className]=n),null!=n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(function(e){return e.toUpperCase()}):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(function(e){null!=l[e]&&null!=n.className||(l[e]=n)}))),n}},function(e,t,r){var n=r(51),a=r(11),s=r(3),i=r(20),o=String.fromCharCode(0),l=function(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]};l.prototype.insert=function(e,t){var r={};return 0===e.length?this:(r.insert=e,null!=t&&"object"===typeof t&&Object.keys(t).length>0&&(r.attributes=t),this.push(r))},l.prototype.delete=function(e){return e<=0?this:this.push({delete:e})},l.prototype.retain=function(e,t){if(e<=0)return this;var r={retain:e};return null!=t&&"object"===typeof t&&Object.keys(t).length>0&&(r.attributes=t),this.push(r)},l.prototype.push=function(e){var t=this.ops.length,r=this.ops[t-1];if(e=s(!0,{},e),"object"===typeof r){if("number"===typeof e.delete&&"number"===typeof r.delete)return this.ops[t-1]={delete:r.delete+e.delete},this;if("number"===typeof r.delete&&null!=e.insert&&(t-=1,"object"!==typeof(r=this.ops[t-1])))return this.ops.unshift(e),this;if(a(e.attributes,r.attributes)){if("string"===typeof e.insert&&"string"===typeof r.insert)return this.ops[t-1]={insert:r.insert+e.insert},"object"===typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"===typeof e.retain&&"number"===typeof r.retain)return this.ops[t-1]={retain:r.retain+e.retain},"object"===typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this},l.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},l.prototype.filter=function(e){return this.ops.filter(e)},l.prototype.forEach=function(e){this.ops.forEach(e)},l.prototype.map=function(e){return this.ops.map(e)},l.prototype.partition=function(e){var t=[],r=[];return this.forEach(function(n){(e(n)?t:r).push(n)}),[t,r]},l.prototype.reduce=function(e,t){return this.ops.reduce(e,t)},l.prototype.changeLength=function(){return this.reduce(function(e,t){return t.insert?e+i.length(t):t.delete?e-t.delete:e},0)},l.prototype.length=function(){return this.reduce(function(e,t){return e+i.length(t)},0)},l.prototype.slice=function(e,t){e=e||0,"number"!==typeof t&&(t=1/0);for(var r=[],n=i.iterator(this.ops),a=0;a<t&&n.hasNext();){var s;a<e?s=n.next(e-a):(s=n.next(t-a),r.push(s)),a+=i.length(s)}return new l(r)},l.prototype.compose=function(e){var t=i.iterator(this.ops),r=i.iterator(e.ops),n=[],s=r.peek();if(null!=s&&"number"===typeof s.retain&&null==s.attributes){for(var o=s.retain;"insert"===t.peekType()&&t.peekLength()<=o;)o-=t.peekLength(),n.push(t.next());s.retain-o>0&&r.next(s.retain-o)}for(var c=new l(n);t.hasNext()||r.hasNext();)if("insert"===r.peekType())c.push(r.next());else if("delete"===t.peekType())c.push(t.next());else{var d=Math.min(t.peekLength(),r.peekLength()),u=t.next(d),h=r.next(d);if("number"===typeof h.retain){var m={};"number"===typeof u.retain?m.retain=d:m.insert=u.insert;var f=i.attributes.compose(u.attributes,h.attributes,"number"===typeof u.retain);if(f&&(m.attributes=f),c.push(m),!r.hasNext()&&a(c.ops[c.ops.length-1],m)){var p=new l(t.rest());return c.concat(p).chop()}}else"number"===typeof h.delete&&"number"===typeof u.retain&&c.push(h)}return c.chop()},l.prototype.concat=function(e){var t=new l(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t},l.prototype.diff=function(e,t){if(this.ops===e.ops)return new l;var r=[this,e].map(function(t){return t.map(function(r){if(null!=r.insert)return"string"===typeof r.insert?r.insert:o;throw new Error("diff() called "+(t===e?"on":"with")+" non-document")}).join("")}),s=new l,c=n(r[0],r[1],t),d=i.iterator(this.ops),u=i.iterator(e.ops);return c.forEach(function(e){for(var t=e[1].length;t>0;){var r=0;switch(e[0]){case n.INSERT:r=Math.min(u.peekLength(),t),s.push(u.next(r));break;case n.DELETE:r=Math.min(t,d.peekLength()),d.next(r),s.delete(r);break;case n.EQUAL:r=Math.min(d.peekLength(),u.peekLength(),t);var o=d.next(r),l=u.next(r);a(o.insert,l.insert)?s.retain(r,i.attributes.diff(o.attributes,l.attributes)):s.push(l).delete(r)}t-=r}}),s.chop()},l.prototype.eachLine=function(e,t){t=t||"\n";for(var r=i.iterator(this.ops),n=new l,a=0;r.hasNext();){if("insert"!==r.peekType())return;var s=r.peek(),o=i.length(s)-r.peekLength(),c="string"===typeof s.insert?s.insert.indexOf(t,o)-o:-1;if(c<0)n.push(r.next());else if(c>0)n.push(r.next(c));else{if(!1===e(n,r.next(1).attributes||{},a))return;a+=1,n=new l}}n.length()>0&&e(n,{},a)},l.prototype.transform=function(e,t){if(t=!!t,"number"===typeof e)return this.transformPosition(e,t);for(var r=i.iterator(this.ops),n=i.iterator(e.ops),a=new l;r.hasNext()||n.hasNext();)if("insert"!==r.peekType()||!t&&"insert"===n.peekType())if("insert"===n.peekType())a.push(n.next());else{var s=Math.min(r.peekLength(),n.peekLength()),o=r.next(s),c=n.next(s);if(o.delete)continue;c.delete?a.push(c):a.retain(s,i.attributes.transform(o.attributes,c.attributes,t))}else a.retain(i.length(r.next()));return a.chop()},l.prototype.transformPosition=function(e,t){t=!!t;for(var r=i.iterator(this.ops),n=0;r.hasNext()&&n<=e;){var a=r.peekLength(),s=r.peekType();r.next(),"delete"!==s?("insert"===s&&(n<e||!t)&&(e+=a),n+=a):e-=Math.min(a,e-n)}return e},e.exports=l},function(e,t){"use strict";var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString,a=Object.defineProperty,s=Object.getOwnPropertyDescriptor,i=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},o=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var t,a=r.call(e,"constructor"),s=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!a&&!s)return!1;for(t in e);return"undefined"===typeof t||r.call(e,t)},l=function(e,t){a&&"__proto__"===t.name?a(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,t){if("__proto__"===t){if(!r.call(e,t))return;if(s)return s(e,t).value}return e[t]};e.exports=function e(){var t,r,n,a,s,d,u=arguments[0],h=1,m=arguments.length,f=!1;for("boolean"===typeof u&&(f=u,u=arguments[1]||{},h=2),(null==u||"object"!==typeof u&&"function"!==typeof u)&&(u={});h<m;++h)if(null!=(t=arguments[h]))for(r in t)n=c(u,r),u!==(a=c(t,r))&&(f&&a&&(o(a)||(s=i(a)))?(s?(s=!1,d=n&&i(n)?n:[]):d=n&&o(n)?n:{},l(u,{name:r,newValue:e(f,d,a)})):"undefined"!==typeof a&&l(u,{name:r,newValue:a}));return u}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BlockEmbed=t.bubbleFormats=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},s=u(r(3)),i=u(r(2)),o=u(r(0)),l=u(r(16)),c=u(r(6)),d=u(r(7));function u(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return h(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),n(t,[{key:"attach",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attach",this).call(this),this.attributes=new o.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new i.default).insert(this.value(),(0,s.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(e,t){var r=o.default.query(e,o.default.Scope.BLOCK_ATTRIBUTE);null!=r&&this.attributes.attribute(r,t)}},{key:"formatAt",value:function(e,t,r,n){this.format(r,n)}},{key:"insertAt",value:function(e,r,n){if("string"===typeof r&&r.endsWith("\n")){var s=o.default.create(g.blotName);this.parent.insertBefore(s,0===e?this:this.next),s.insertAt(0,r.slice(0,-1))}else a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,n)}}]),t}(o.default.Embed);p.scope=o.default.Scope.BLOCK_BLOT;var g=function(e){function t(e){h(this,t);var r=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.cache={},r}return f(t,e),n(t,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(o.default.Leaf).reduce(function(e,t){return 0===t.length()?e:e.insert(t.value(),x(t))},new i.default).insert("\n",x(this))),this.cache.delta}},{key:"deleteAt",value:function(e,r){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,r),this.cache={}}},{key:"formatAt",value:function(e,r,n,s){r<=0||(o.default.query(n,o.default.Scope.BLOCK)?e+r===this.length()&&this.format(n,s):a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,Math.min(r,this.length()-e-1),n,s),this.cache={})}},{key:"insertAt",value:function(e,r,n){if(null!=n)return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,n);if(0!==r.length){var s=r.split("\n"),i=s.shift();i.length>0&&(e<this.length()-1||null==this.children.tail?a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,Math.min(e,this.length()-1),i):this.children.tail.insertAt(this.children.tail.length(),i),this.cache={});var o=this;s.reduce(function(e,t){return(o=o.split(e,!0)).insertAt(0,t),t.length},e+i.length)}}},{key:"insertBefore",value:function(e,r){var n=this.children.head;a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r),n instanceof l.default&&n.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(e,r){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveChildren",this).call(this,e,r),this.cache={}}},{key:"optimize",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.cache={}}},{key:"path",value:function(e){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e,!0)}},{key:"removeChild",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeChild",this).call(this,e),this.cache={}}},{key:"split",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r&&(0===e||e>=this.length()-1)){var n=this.clone();return 0===e?(this.parent.insertBefore(n,this),this):(this.parent.insertBefore(n,this.next),n)}var s=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"split",this).call(this,e,r);return this.cache={},s}}]),t}(o.default.Block);function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==e?t:("function"===typeof e.formats&&(t=(0,s.default)(t,e.formats())),null==e.parent||"scroll"==e.parent.blotName||e.parent.statics.scope!==e.statics.scope?t:x(e.parent,t))}g.blotName="block",g.tagName="P",g.defaultChild="break",g.allowedChildren=[c.default,o.default.Embed,d.default],t.bubbleFormats=x,t.BlockEmbed=p,t.default=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.overload=t.expandConfig=void 0;var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){a=!0,s=l}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r(50);var i=g(r(2)),o=g(r(14)),l=g(r(8)),c=g(r(9)),d=g(r(0)),u=r(15),h=g(u),m=g(r(3)),f=g(r(10)),p=g(r(34));function g(e){return e&&e.__esModule?e:{default:e}}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=(0,f.default)("quill"),b=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=v(t,n),this.container=this.options.container,null==this.container)return y.error("Invalid Quill container",t);this.options.debug&&e.debug(this.options.debug);var a=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new l.default,this.scroll=d.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new o.default(this.scroll),this.selection=new h.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(l.default.events.EDITOR_CHANGE,function(e){e===l.default.events.TEXT_CHANGE&&r.root.classList.toggle("ql-blank",r.editor.isBlank())}),this.emitter.on(l.default.events.SCROLL_UPDATE,function(e,t){var n=r.selection.lastRange,a=n&&0===n.length?n.index:void 0;w.call(r,function(){return r.editor.update(null,t,a)},e)});var s=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+a+"<p><br></p></div>");this.setContents(s),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return s(e,null,[{key:"debug",value:function(e){!0===e&&(e="log"),f.default.level(e)}},{key:"find",value:function(e){return e.__quill||d.default.find(e)}},{key:"import",value:function(e){return null==this.imports[e]&&y.error("Cannot import "+e+". Are you sure it was registered?"),this.imports[e]}},{key:"register",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!==typeof e){var a=e.attrName||e.blotName;"string"===typeof a?this.register("formats/"+a,e,t):Object.keys(e).forEach(function(n){r.register(n,e[n],t)})}else null==this.imports[e]||n||y.warn("Overwriting "+e+" with",t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&"abstract"!==t.blotName?d.default.register(t):e.startsWith("modules")&&"function"===typeof t.register&&t.register()}}]),s(e,[{key:"addContainer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"===typeof e){var r=e;(e=document.createElement("div")).classList.add(r)}return this.container.insertBefore(e,t),e}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(e,t,r){var n=this,s=j(e,t,r),i=a(s,4);return e=i[0],t=i[1],r=i[3],w.call(this,function(){return n.editor.deleteText(e,t)},r,e,-1*t)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}},{key:"focus",value:function(){var e=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=e,this.scrollIntoView()}},{key:"format",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;return w.call(this,function(){var n=r.getSelection(!0),a=new i.default;if(null==n)return a;if(d.default.query(e,d.default.Scope.BLOCK))a=r.editor.formatLine(n.index,n.length,x({},e,t));else{if(0===n.length)return r.selection.format(e,t),a;a=r.editor.formatText(n.index,n.length,x({},e,t))}return r.setSelection(n,l.default.sources.SILENT),a},n)}},{key:"formatLine",value:function(e,t,r,n,s){var i,o=this,l=j(e,t,r,n,s),c=a(l,4);return e=c[0],t=c[1],i=c[2],s=c[3],w.call(this,function(){return o.editor.formatLine(e,t,i)},s,e,0)}},{key:"formatText",value:function(e,t,r,n,s){var i,o=this,l=j(e,t,r,n,s),c=a(l,4);return e=c[0],t=c[1],i=c[2],s=c[3],w.call(this,function(){return o.editor.formatText(e,t,i)},s,e,0)}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=void 0;r="number"===typeof e?this.selection.getBounds(e,t):this.selection.getBounds(e.index,e.length);var n=this.container.getBoundingClientRect();return{bottom:r.bottom-n.top,height:r.height,left:r.left-n.left,right:r.right-n.left,top:r.top-n.top,width:r.width}}},{key:"getContents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,r=j(e,t),n=a(r,2);return e=n[0],t=n[1],this.editor.getContents(e,t)}},{key:"getFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"===typeof e?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}},{key:"getIndex",value:function(e){return e.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(e){return this.scroll.leaf(e)}},{key:"getLine",value:function(e){return this.scroll.line(e)}},{key:"getLines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!==typeof e?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}},{key:"getModule",value:function(e){return this.theme.modules[e]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,r=j(e,t),n=a(r,2);return e=n[0],t=n[1],this.editor.getText(e,t)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(t,r,n){var a=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.sources.API;return w.call(this,function(){return a.editor.insertEmbed(t,r,n)},s,t)}},{key:"insertText",value:function(e,t,r,n,s){var i,o=this,l=j(e,0,r,n,s),c=a(l,4);return e=c[0],i=c[2],s=c[3],w.call(this,function(){return o.editor.insertText(e,t,i)},s,e,t.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(e,t,r){this.clipboard.dangerouslyPasteHTML(e,t,r)}},{key:"removeFormat",value:function(e,t,r){var n=this,s=j(e,t,r),i=a(s,4);return e=i[0],t=i[1],r=i[3],w.call(this,function(){return n.editor.removeFormat(e,t)},r,e)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return w.call(this,function(){e=new i.default(e);var r=t.getLength(),n=t.editor.deleteText(0,r),a=t.editor.applyDelta(e),s=a.ops[a.ops.length-1];return null!=s&&"string"===typeof s.insert&&"\n"===s.insert[s.insert.length-1]&&(t.editor.deleteText(t.getLength()-1,1),a.delete(1)),n.compose(a)},r)}},{key:"setSelection",value:function(t,r,n){if(null==t)this.selection.setRange(null,r||e.sources.API);else{var s=j(t,r,n),i=a(s,4);t=i[0],r=i[1],n=i[3],this.selection.setRange(new u.Range(t,r),n),n!==l.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API,r=(new i.default).insert(e);return this.setContents(r,t)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}},{key:"updateContents",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return w.call(this,function(){return e=new i.default(e),t.editor.applyDelta(e,r)},r,!0)}}]),e}();function v(e,t){if((t=(0,m.default)(!0,{container:e,modules:{clipboard:!0,keyboard:!0,history:!0}},t)).theme&&t.theme!==b.DEFAULTS.theme){if(t.theme=b.import("themes/"+t.theme),null==t.theme)throw new Error("Invalid theme "+t.theme+". Did you register it?")}else t.theme=p.default;var r=(0,m.default)(!0,{},t.theme.DEFAULTS);[r,t].forEach(function(e){e.modules=e.modules||{},Object.keys(e.modules).forEach(function(t){!0===e.modules[t]&&(e.modules[t]={})})});var n=Object.keys(r.modules).concat(Object.keys(t.modules)).reduce(function(e,t){var r=b.import("modules/"+t);return null==r?y.error("Cannot load "+t+" module. Are you sure you registered it?"):e[t]=r.DEFAULTS||{},e},{});return null!=t.modules&&t.modules.toolbar&&t.modules.toolbar.constructor!==Object&&(t.modules.toolbar={container:t.modules.toolbar}),t=(0,m.default)(!0,{},b.DEFAULTS,{modules:n},r,t),["bounds","container","scrollingContainer"].forEach(function(e){"string"===typeof t[e]&&(t[e]=document.querySelector(t[e]))}),t.modules=Object.keys(t.modules).reduce(function(e,r){return t.modules[r]&&(e[r]=t.modules[r]),e},{}),t}function w(e,t,r,n){if(this.options.strict&&!this.isEnabled()&&t===l.default.sources.USER)return new i.default;var a=null==r?null:this.getSelection(),s=this.editor.delta,o=e();if(null!=a&&(!0===r&&(r=a.index),null==n?a=k(a,o,t):0!==n&&(a=k(a,r,n,t)),this.setSelection(a,l.default.sources.SILENT)),o.length()>0){var c,d,u=[l.default.events.TEXT_CHANGE,o,s,t];(c=this.emitter).emit.apply(c,[l.default.events.EDITOR_CHANGE].concat(u)),t!==l.default.sources.SILENT&&(d=this.emitter).emit.apply(d,u)}return o}function j(e,t,r,a,s){var i={};return"number"===typeof e.index&&"number"===typeof e.length?"number"!==typeof t?(s=a,a=r,r=t,t=e.length,e=e.index):(t=e.length,e=e.index):"number"!==typeof t&&(s=a,a=r,r=t,t=0),"object"===("undefined"===typeof r?"undefined":n(r))?(i=r,s=a):"string"===typeof r&&(null!=a?i[r]=a:s=r),[e,t,i,s=s||l.default.sources.API]}function k(e,t,r,n){if(null==e)return null;var s=void 0,o=void 0;if(t instanceof i.default){var c=[e.index,e.index+e.length].map(function(e){return t.transformPosition(e,n!==l.default.sources.USER)}),d=a(c,2);s=d[0],o=d[1]}else{var h=[e.index,e.index+e.length].map(function(e){return e<t||e===t&&n===l.default.sources.USER?e:r>=0?e+r:Math.max(t,e+r)}),m=a(h,2);s=m[0],o=m[1]}return new u.Range(s,o-s)}b.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},b.events=l.default.events,b.sources=l.default.sources,b.version="1.3.7",b.imports={delta:i.default,parchment:d.default,"core/module":c.default,"core/theme":p.default},t.expandConfig=v,t.overload=j,t.default=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},s=o(r(7)),i=o(r(0));function o(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"formatAt",value:function(e,r,n,s){if(t.compare(this.statics.blotName,n)<0&&i.default.query(n,i.default.Scope.BLOT)){var o=this.isolate(e,r);s&&o.wrap(n,s)}else a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,r,n,s)}},{key:"optimize",value:function(e){if(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.parent instanceof t&&t.compare(this.statics.blotName,this.parent.statics.blotName)>0){var r=this.parent.isolate(this.offset(),this.length());this.moveChildren(r),r.wrap(this)}}}],[{key:"compare",value:function(e,r){var n=t.order.indexOf(e),a=t.order.indexOf(r);return n>=0||a>=0?n-a:e===r?0:e<r?-1:1}}]),t}(i.default.Inline);l.allowedChildren=[l,i.default.Embed,s.default],l.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=r(0),s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=a)&&n.__esModule?n:{default:n}).default.Text);t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},s=i(r(54));function i(e){return e&&e.__esModule?e:{default:e}}var o=(0,i(r(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(function(e){document.addEventListener(e,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(e){var r;e.__quill&&e.__quill.emitter&&(r=e.__quill.emitter).handleDOM.apply(r,t)})})});var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.listeners={},e.on("error",o.error),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"emit",value:function(){o.log.apply(o,arguments),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];(this.listeners[e.type]||[]).forEach(function(t){var n=t.node,a=t.handler;(e.target===n||n.contains(e.target))&&a.apply(void 0,[e].concat(r))})}},{key:"listenDOM",value:function(e,t,r){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({node:t,handler:r})}}]),t}(s.default);l.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},l.sources={API:"api",SILENT:"silent",USER:"user"},t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=r};n.DEFAULTS={},t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["error","warn","log","info"],a="warn";function s(e){if(n.indexOf(e)<=n.indexOf(a)){for(var t,r=arguments.length,s=Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];(t=console)[e].apply(t,s)}}function i(e){return n.reduce(function(t,r){return t[r]=s.bind(console,r,e),t},{})}s.level=i.level=function(e){a=e},t.default=i},function(e,t,r){var n=Array.prototype.slice,a=r(52),s=r(53),i=e.exports=function(e,t,r){return r||(r={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?r.strict?e===t:e==t:function(e,t,r){var c,d;if(o(e)||o(t))return!1;if(e.prototype!==t.prototype)return!1;if(s(e))return!!s(t)&&(e=n.call(e),t=n.call(t),i(e,t,r));if(l(e)){if(!l(t))return!1;if(e.length!==t.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==t[c])return!1;return!0}try{var u=a(e),h=a(t)}catch(m){return!1}if(u.length!=h.length)return!1;for(u.sort(),h.sort(),c=u.length-1;c>=0;c--)if(u[c]!=h[c])return!1;for(c=u.length-1;c>=0;c--)if(d=u[c],!i(e[d],t[d],r))return!1;return typeof e===typeof t}(e,t,r))};function o(e){return null===e||void 0===e}function l(e){return!(!e||"object"!==typeof e||"number"!==typeof e.length)&&"function"===typeof e.copy&&"function"===typeof e.slice&&!(e.length>0&&"number"!==typeof e[0])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),a=function(){function e(e,t,r){void 0===r&&(r={}),this.attrName=e,this.keyName=t;var a=n.Scope.TYPE&n.Scope.ATTRIBUTE;null!=r.scope?this.scope=r.scope&n.Scope.LEVEL|a:this.scope=n.Scope.ATTRIBUTE,null!=r.whitelist&&(this.whitelist=r.whitelist)}return e.keys=function(e){return[].map.call(e.attributes,function(e){return e.name})},e.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.setAttribute(this.keyName,t),!0)},e.prototype.canAdd=function(e,t){return null!=n.query(e,n.Scope.BLOT&(this.scope|n.Scope.TYPE))&&(null==this.whitelist||("string"===typeof t?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1))},e.prototype.remove=function(e){e.removeAttribute(this.keyName)},e.prototype.value=function(e){var t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""},e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Code=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){a=!0,s=l}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},i=u(r(2)),o=u(r(0)),l=u(r(4)),c=u(r(6)),d=u(r(7));function u(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return h(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),t}(c.default);p.blotName="code",p.tagName="CODE";var g=function(e){function t(){return h(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),a(t,[{key:"delta",value:function(){var e=this,t=this.domNode.textContent;return t.endsWith("\n")&&(t=t.slice(0,-1)),t.split("\n").reduce(function(t,r){return t.insert(r).insert("\n",e.formats())},new i.default)}},{key:"format",value:function(e,r){if(e!==this.statics.blotName||!r){var a=this.descendant(d.default,this.length()-1),i=n(a,1)[0];null!=i&&i.deleteAt(i.length()-1,1),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}},{key:"formatAt",value:function(e,r,n,a){if(0!==r&&null!=o.default.query(n,o.default.Scope.BLOCK)&&(n!==this.statics.blotName||a!==this.statics.formats(this.domNode))){var s=this.newlineIndex(e);if(!(s<0||s>=e+r)){var i=this.newlineIndex(e,!0)+1,l=s-i+1,c=this.isolate(i,l),d=c.next;c.format(n,a),d instanceof t&&d.formatAt(0,e-i+r-l,n,a)}}}},{key:"insertAt",value:function(e,t,r){if(null==r){var a=this.descendant(d.default,e),s=n(a,2),i=s[0],o=s[1];i.insertAt(o,t)}}},{key:"length",value:function(){var e=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?e:e+1}},{key:"newlineIndex",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,e).lastIndexOf("\n");var t=this.domNode.textContent.slice(e).indexOf("\n");return t>-1?e+t:-1}},{key:"optimize",value:function(e){this.domNode.textContent.endsWith("\n")||this.appendChild(o.default.create("text","\n")),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var r=this.next;null!=r&&r.prev===this&&r.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===r.statics.formats(r.domNode)&&(r.optimize(e),r.moveChildren(this),r.remove())}},{key:"replace",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(e){var t=o.default.find(e);null==t?e.parentNode.removeChild(e):t instanceof o.default.Embed?t.remove():t.unwrap()})}}],[{key:"create",value:function(e){var r=s(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return r.setAttribute("spellcheck",!1),r}},{key:"formats",value:function(){return!0}}]),t}(l.default);g.blotName="code-block",g.tagName="PRE",g.TAB="  ",t.Code=p,t.default=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){a=!0,s=l}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=x(r(2)),o=x(r(20)),l=x(r(0)),c=x(r(13)),d=x(r(24)),u=r(4),h=x(u),m=x(r(16)),f=x(r(21)),p=x(r(11)),g=x(r(3));function x(e){return e&&e.__esModule?e:{default:e}}var y=/^[ -~]*$/,b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scroll=t,this.delta=this.getDelta()}return s(e,[{key:"applyDelta",value:function(e){var t=this,r=!1;this.scroll.update();var s=this.scroll.length();return this.scroll.batchStart(),(e=function(e){return e.reduce(function(e,t){if(1===t.insert){var r=(0,f.default)(t.attributes);return delete r.image,e.insert({image:t.attributes.image},r)}if(null==t.attributes||!0!==t.attributes.list&&!0!==t.attributes.bullet||((t=(0,f.default)(t)).attributes.list?t.attributes.list="ordered":(t.attributes.list="bullet",delete t.attributes.bullet)),"string"===typeof t.insert){var n=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.insert(n,t.attributes)}return e.push(t)},new i.default)}(e)).reduce(function(e,i){var c=i.retain||i.delete||i.insert.length||1,d=i.attributes||{};if(null!=i.insert){if("string"===typeof i.insert){var m=i.insert;m.endsWith("\n")&&r&&(r=!1,m=m.slice(0,-1)),e>=s&&!m.endsWith("\n")&&(r=!0),t.scroll.insertAt(e,m);var f=t.scroll.line(e),p=a(f,2),x=p[0],y=p[1],b=(0,g.default)({},(0,u.bubbleFormats)(x));if(x instanceof h.default){var v=x.descendant(l.default.Leaf,y),w=a(v,1)[0];b=(0,g.default)(b,(0,u.bubbleFormats)(w))}d=o.default.attributes.diff(b,d)||{}}else if("object"===n(i.insert)){var j=Object.keys(i.insert)[0];if(null==j)return e;t.scroll.insertAt(e,j,i.insert[j])}s+=c}return Object.keys(d).forEach(function(r){t.scroll.formatAt(e,c,r,d[r])}),e+c},0),e.reduce(function(e,r){return"number"===typeof r.delete?(t.scroll.deleteAt(e,r.delete),e):e+(r.retain||r.insert.length||1)},0),this.scroll.batchEnd(),this.update(e)}},{key:"deleteText",value:function(e,t){return this.scroll.deleteAt(e,t),this.update((new i.default).retain(e).delete(t))}},{key:"formatLine",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(n).forEach(function(a){if(null==r.scroll.whitelist||r.scroll.whitelist[a]){var s=r.scroll.lines(e,Math.max(t,1)),i=t;s.forEach(function(t){var s=t.length();if(t instanceof c.default){var o=e-t.offset(r.scroll),l=t.newlineIndex(o+i)-o+1;t.formatAt(o,l,a,n[a])}else t.format(a,n[a]);i-=s})}}),this.scroll.optimize(),this.update((new i.default).retain(e).retain(t,(0,f.default)(n)))}},{key:"formatText",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(n).forEach(function(a){r.scroll.formatAt(e,t,a,n[a])}),this.update((new i.default).retain(e).retain(t,(0,f.default)(n)))}},{key:"getContents",value:function(e,t){return this.delta.slice(e,e+t)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(e,t){return e.concat(t.delta())},new i.default)}},{key:"getFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[],n=[];0===t?this.scroll.path(e).forEach(function(e){var t=a(e,1)[0];t instanceof h.default?r.push(t):t instanceof l.default.Leaf&&n.push(t)}):(r=this.scroll.lines(e,t),n=this.scroll.descendants(l.default.Leaf,e,t));var s=[r,n].map(function(e){if(0===e.length)return{};for(var t=(0,u.bubbleFormats)(e.shift());Object.keys(t).length>0;){var r=e.shift();if(null==r)return t;t=v((0,u.bubbleFormats)(r),t)}return t});return g.default.apply(g.default,s)}},{key:"getText",value:function(e,t){return this.getContents(e,t).filter(function(e){return"string"===typeof e.insert}).map(function(e){return e.insert}).join("")}},{key:"insertEmbed",value:function(e,t,r){return this.scroll.insertAt(e,t,r),this.update((new i.default).retain(e).insert(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},t,r)))}},{key:"insertText",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(e,t),Object.keys(n).forEach(function(a){r.scroll.formatAt(e,t.length,a,n[a])}),this.update((new i.default).retain(e).insert(t,(0,f.default)(n)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var e=this.scroll.children.head;return e.statics.blotName===h.default.blotName&&!(e.children.length>1)&&e.children.head instanceof m.default}},{key:"removeFormat",value:function(e,t){var r=this.getText(e,t),n=this.scroll.line(e+t),s=a(n,2),o=s[0],l=s[1],d=0,u=new i.default;null!=o&&(d=o instanceof c.default?o.newlineIndex(l)-l+1:o.length()-l,u=o.delta().slice(l,l+d-1).insert("\n"));var h=this.getContents(e,t+d).diff((new i.default).insert(r).concat(u)),m=(new i.default).retain(e).concat(h);return this.applyDelta(m)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this.delta;if(1===t.length&&"characterData"===t[0].type&&t[0].target.data.match(y)&&l.default.find(t[0].target)){var a=l.default.find(t[0].target),s=(0,u.bubbleFormats)(a),o=a.offset(this.scroll),c=t[0].oldValue.replace(d.default.CONTENTS,""),h=(new i.default).insert(c),m=(new i.default).insert(a.value());e=(new i.default).retain(o).concat(h.diff(m,r)).reduce(function(e,t){return t.insert?e.insert(t.insert,s):e.push(t)},new i.default),this.delta=n.compose(e)}else this.delta=this.getDelta(),e&&(0,p.default)(n.compose(e),this.delta)||(e=n.diff(this.delta,r));return e}}]),e}();function v(e,t){return Object.keys(t).reduce(function(r,n){return null==e[n]||(t[n]===e[n]?r[n]=t[n]:Array.isArray(t[n])?t[n].indexOf(e[n])<0&&(r[n]=t[n].concat([e[n]])):r[n]=[t[n],e[n]]),r},{})}t.default=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Range=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){a=!0,s=l}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=c(r(0)),i=c(r(21)),o=c(r(11)),l=c(r(8));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h=(0,c(r(10)).default)("quill:selection"),m=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u(this,e),this.index=t,this.length=r},f=function(){function e(t,r){var n=this;u(this,e),this.emitter=r,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=s.default.create("cursor",this),this.lastRange=this.savedRange=new m(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){n.mouseDown||setTimeout(n.update.bind(n,l.default.sources.USER),1)}),this.emitter.on(l.default.events.EDITOR_CHANGE,function(e,t){e===l.default.events.TEXT_CHANGE&&t.length()>0&&n.update(l.default.sources.SILENT)}),this.emitter.on(l.default.events.SCROLL_BEFORE_UPDATE,function(){if(n.hasFocus()){var e=n.getNativeRange();null!=e&&e.start.node!==n.cursor.textNode&&n.emitter.once(l.default.events.SCROLL_UPDATE,function(){try{n.setNativeRange(e.start.node,e.start.offset,e.end.node,e.end.offset)}catch(t){}})}}),this.emitter.on(l.default.events.SCROLL_OPTIMIZE,function(e,t){if(t.range){var r=t.range,a=r.startNode,s=r.startOffset,i=r.endNode,o=r.endOffset;n.setNativeRange(a,s,i,o)}}),this.update(l.default.sources.SILENT)}return a(e,[{key:"handleComposition",value:function(){var e=this;this.root.addEventListener("compositionstart",function(){e.composing=!0}),this.root.addEventListener("compositionend",function(){if(e.composing=!1,e.cursor.parent){var t=e.cursor.restore();if(!t)return;setTimeout(function(){e.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}},{key:"handleDragging",value:function(){var e=this;this.emitter.listenDOM("mousedown",document.body,function(){e.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){e.mouseDown=!1,e.update(l.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(e,t){if(null==this.scroll.whitelist||this.scroll.whitelist[e]){this.scroll.update();var r=this.getNativeRange();if(null!=r&&r.native.collapsed&&!s.default.query(e,s.default.Scope.BLOCK)){if(r.start.node!==this.cursor.textNode){var n=s.default.find(r.start.node,!1);if(null==n)return;if(n instanceof s.default.Leaf){var a=n.split(r.start.offset);n.parent.insertBefore(this.cursor,a)}else n.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.scroll.length();e=Math.min(e,r-1),t=Math.min(e+t,r-1)-e;var a=void 0,s=this.scroll.leaf(e),i=n(s,2),o=i[0],l=i[1];if(null==o)return null;var c=o.position(l,!0),d=n(c,2);a=d[0],l=d[1];var u=document.createRange();if(t>0){u.setStart(a,l);var h=this.scroll.leaf(e+t),m=n(h,2);if(o=m[0],l=m[1],null==o)return null;var f=o.position(l,!0),p=n(f,2);return a=p[0],l=p[1],u.setEnd(a,l),u.getBoundingClientRect()}var g="left",x=void 0;return a instanceof Text?(l<a.data.length?(u.setStart(a,l),u.setEnd(a,l+1)):(u.setStart(a,l-1),u.setEnd(a,l),g="right"),x=u.getBoundingClientRect()):(x=o.domNode.getBoundingClientRect(),l>0&&(g="right")),{bottom:x.top+x.height,height:x.height,left:x[g],right:x[g],top:x.top,width:0}}},{key:"getNativeRange",value:function(){var e=document.getSelection();if(null==e||e.rangeCount<=0)return null;var t=e.getRangeAt(0);if(null==t)return null;var r=this.normalizeNative(t);return h.info("getNativeRange",r),r}},{key:"getRange",value:function(){var e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(e){var t=this,r=[[e.start.node,e.start.offset]];e.native.collapsed||r.push([e.end.node,e.end.offset]);var a=r.map(function(e){var r=n(e,2),a=r[0],i=r[1],o=s.default.find(a,!0),l=o.offset(t.scroll);return 0===i?l:o instanceof s.default.Container?l+o.length():l+o.index(a,i)}),i=Math.min(Math.max.apply(Math,d(a)),this.scroll.length()-1),o=Math.min.apply(Math,[i].concat(d(a)));return new m(o,i-o)}},{key:"normalizeNative",value:function(e){if(!p(this.root,e.startContainer)||!e.collapsed&&!p(this.root,e.endContainer))return null;var t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach(function(e){for(var t=e.node,r=e.offset;!(t instanceof Text)&&t.childNodes.length>0;)if(t.childNodes.length>r)t=t.childNodes[r],r=0;else{if(t.childNodes.length!==r)break;r=(t=t.lastChild)instanceof Text?t.data.length:t.childNodes.length+1}e.node=t,e.offset=r}),t}},{key:"rangeToNative",value:function(e){var t=this,r=e.collapsed?[e.index]:[e.index,e.index+e.length],a=[],s=this.scroll.length();return r.forEach(function(e,r){e=Math.min(s-1,e);var i,o=t.scroll.leaf(e),l=n(o,2),c=l[0],d=l[1],u=c.position(d,0!==r),h=n(u,2);i=h[0],d=h[1],a.push(i,d)}),a.length<2&&(a=a.concat(a)),a}},{key:"scrollIntoView",value:function(e){var t=this.lastRange;if(null!=t){var r=this.getBounds(t.index,t.length);if(null!=r){var a=this.scroll.length()-1,s=this.scroll.line(Math.min(t.index,a)),i=n(s,1)[0],o=i;if(t.length>0){var l=this.scroll.line(Math.min(t.index+t.length,a));o=n(l,1)[0]}if(null!=i&&null!=o){var c=e.getBoundingClientRect();r.top<c.top?e.scrollTop-=c.top-r.top:r.bottom>c.bottom&&(e.scrollTop+=r.bottom-c.bottom)}}}}},{key:"setNativeRange",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(h.info("setNativeRange",e,t,r,n),null==e||null!=this.root.parentNode&&null!=e.parentNode&&null!=r.parentNode){var s=document.getSelection();if(null!=s)if(null!=e){this.hasFocus()||this.root.focus();var i=(this.getNativeRange()||{}).native;if(null==i||a||e!==i.startContainer||t!==i.startOffset||r!==i.endContainer||n!==i.endOffset){"BR"==e.tagName&&(t=[].indexOf.call(e.parentNode.childNodes,e),e=e.parentNode),"BR"==r.tagName&&(n=[].indexOf.call(r.parentNode.childNodes,r),r=r.parentNode);var o=document.createRange();o.setStart(e,t),o.setEnd(r,n),s.removeAllRanges(),s.addRange(o)}}else s.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;if("string"===typeof t&&(r=t,t=!1),h.info("setRange",e),null!=e){var n=this.rangeToNative(e);this.setNativeRange.apply(this,d(n).concat([t]))}else this.setNativeRange(null);this.update(r)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.lastRange,r=this.getRange(),a=n(r,2),s=a[0],c=a[1];if(this.lastRange=s,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,o.default)(t,this.lastRange)){var d;!this.composing&&null!=c&&c.native.collapsed&&c.start.node!==this.cursor.textNode&&this.cursor.restore();var u,h=[l.default.events.SELECTION_CHANGE,(0,i.default)(this.lastRange),(0,i.default)(t),e];(d=this.emitter).emit.apply(d,[l.default.events.EDITOR_CHANGE].concat(h)),e!==l.default.sources.SILENT&&(u=this.emitter).emit.apply(u,h)}}}]),e}();function p(e,t){try{t.parentNode}catch(r){return!1}return t instanceof Text&&(t=t.parentNode),e.contains(t)}t.Range=m,t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},i=r(0),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"insertInto",value:function(e,r){0===e.children.length?s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertInto",this).call(this,e,r):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),t}(((n=i)&&n.__esModule?n:{default:n}).default.Embed);o.blotName="break",o.tagName="BR",t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(44),s=r(30),i=r(1),o=function(e){function t(t){var r=e.call(this,t)||this;return r.build(),r}return n(t,e),t.prototype.appendChild=function(e){this.insertBefore(e)},t.prototype.attach=function(){e.prototype.attach.call(this),this.children.forEach(function(e){e.attach()})},t.prototype.build=function(){var e=this;this.children=new a.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(t){try{var r=l(t);e.insertBefore(r,e.children.head||void 0)}catch(n){if(n instanceof i.ParchmentError)return;throw n}})},t.prototype.deleteAt=function(e,t){if(0===e&&t===this.length())return this.remove();this.children.forEachAt(e,t,function(e,t,r){e.deleteAt(t,r)})},t.prototype.descendant=function(e,r){var n=this.children.find(r),a=n[0],s=n[1];return null==e.blotName&&e(a)||null!=e.blotName&&a instanceof e?[a,s]:a instanceof t?a.descendant(e,s):[null,-1]},t.prototype.descendants=function(e,r,n){void 0===r&&(r=0),void 0===n&&(n=Number.MAX_VALUE);var a=[],s=n;return this.children.forEachAt(r,n,function(r,n,i){(null==e.blotName&&e(r)||null!=e.blotName&&r instanceof e)&&a.push(r),r instanceof t&&(a=a.concat(r.descendants(e,n,s))),s-=i}),a},t.prototype.detach=function(){this.children.forEach(function(e){e.detach()}),e.prototype.detach.call(this)},t.prototype.formatAt=function(e,t,r,n){this.children.forEachAt(e,t,function(e,t,a){e.formatAt(t,a,r,n)})},t.prototype.insertAt=function(e,t,r){var n=this.children.find(e),a=n[0],s=n[1];if(a)a.insertAt(s,t,r);else{var o=null==r?i.create("text",t):i.create(t,r);this.appendChild(o)}},t.prototype.insertBefore=function(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some(function(t){return e instanceof t}))throw new i.ParchmentError("Cannot insert "+e.statics.blotName+" into "+this.statics.blotName);e.insertInto(this,t)},t.prototype.length=function(){return this.children.reduce(function(e,t){return e+t.length()},0)},t.prototype.moveChildren=function(e,t){this.children.forEach(function(r){e.insertBefore(r,t)})},t.prototype.optimize=function(t){if(e.prototype.optimize.call(this,t),0===this.children.length)if(null!=this.statics.defaultChild){var r=i.create(this.statics.defaultChild);this.appendChild(r),r.optimize(t)}else this.remove()},t.prototype.path=function(e,r){void 0===r&&(r=!1);var n=this.children.find(e,r),a=n[0],s=n[1],i=[[this,e]];return a instanceof t?i.concat(a.path(s,r)):(null!=a&&i.push([a,s]),i)},t.prototype.removeChild=function(e){this.children.remove(e)},t.prototype.replace=function(r){r instanceof t&&r.moveChildren(this),e.prototype.replace.call(this,r)},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var r=this.clone();return this.parent.insertBefore(r,this.next),this.children.forEachAt(e,this.length(),function(e,n,a){e=e.split(n,t),r.appendChild(e)}),r},t.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},t.prototype.update=function(e,t){var r=this,n=[],a=[];e.forEach(function(e){e.target===r.domNode&&"childList"===e.type&&(n.push.apply(n,e.addedNodes),a.push.apply(a,e.removedNodes))}),a.forEach(function(e){if(!(null!=e.parentNode&&"IFRAME"!==e.tagName&&document.body.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var t=i.find(e);null!=t&&(null!=t.domNode.parentNode&&t.domNode.parentNode!==r.domNode||t.detach())}}),n.filter(function(e){return e.parentNode==r.domNode}).sort(function(e,t){return e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(e){var t=null;null!=e.nextSibling&&(t=i.find(e.nextSibling));var n=l(e);n.next==t&&null!=n.next||(null!=n.parent&&n.parent.removeChild(r),r.insertBefore(n,t||void 0))})},t}(s.default);function l(e){var t=i.find(e);if(null==t)try{t=i.create(e)}catch(r){t=i.create(i.Scope.INLINE),[].slice.call(e.childNodes).forEach(function(e){t.domNode.appendChild(e)}),e.parentNode&&e.parentNode.replaceChild(t.domNode,e),t.attach()}return t}t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(12),s=r(31),i=r(17),o=r(1),l=function(e){function t(t){var r=e.call(this,t)||this;return r.attributes=new s.default(r.domNode),r}return n(t,e),t.formats=function(e){return"string"===typeof this.tagName||(Array.isArray(this.tagName)?e.tagName.toLowerCase():void 0)},t.prototype.format=function(e,t){var r=o.query(e);r instanceof a.default?this.attributes.attribute(r,t):t&&(null==r||e===this.statics.blotName&&this.formats()[e]===t||this.replaceWith(e,t))},t.prototype.formats=function(){var e=this.attributes.values(),t=this.statics.formats(this.domNode);return null!=t&&(e[this.statics.blotName]=t),e},t.prototype.replaceWith=function(t,r){var n=e.prototype.replaceWith.call(this,t,r);return this.attributes.copy(n),n},t.prototype.update=function(t,r){var n=this;e.prototype.update.call(this,t,r),t.some(function(e){return e.target===n.domNode&&"attributes"===e.type})&&this.attributes.build()},t.prototype.wrap=function(r,n){var a=e.prototype.wrap.call(this,r,n);return a instanceof t&&a.statics.scope===this.statics.scope&&this.attributes.move(a),a},t}(i.default);t.default=l},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(30),s=r(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.value=function(e){return!0},t.prototype.index=function(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},t.prototype.position=function(e,t){var r=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]},t.prototype.value=function(){var e;return(e={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,e},t.scope=s.Scope.INLINE_BLOT,t}(a.default);t.default=i},function(e,t,r){var n=r(11),a=r(3),s={attributes:{compose:function(e,t,r){"object"!==typeof e&&(e={}),"object"!==typeof t&&(t={});var n=a(!0,{},t);for(var s in r||(n=Object.keys(n).reduce(function(e,t){return null!=n[t]&&(e[t]=n[t]),e},{})),e)void 0!==e[s]&&void 0===t[s]&&(n[s]=e[s]);return Object.keys(n).length>0?n:void 0},diff:function(e,t){"object"!==typeof e&&(e={}),"object"!==typeof t&&(t={});var r=Object.keys(e).concat(Object.keys(t)).reduce(function(r,a){return n(e[a],t[a])||(r[a]=void 0===t[a]?null:t[a]),r},{});return Object.keys(r).length>0?r:void 0},transform:function(e,t,r){if("object"!==typeof e)return t;if("object"===typeof t){if(!r)return t;var n=Object.keys(t).reduce(function(r,n){return void 0===e[n]&&(r[n]=t[n]),r},{});return Object.keys(n).length>0?n:void 0}}},iterator:function(e){return new i(e)},length:function(e){return"number"===typeof e.delete?e.delete:"number"===typeof e.retain?e.retain:"string"===typeof e.insert?e.insert.length:1}};function i(e){this.ops=e,this.index=0,this.offset=0}i.prototype.hasNext=function(){return this.peekLength()<1/0},i.prototype.next=function(e){e||(e=1/0);var t=this.ops[this.index];if(t){var r=this.offset,n=s.length(t);if(e>=n-r?(e=n-r,this.index+=1,this.offset=0):this.offset+=e,"number"===typeof t.delete)return{delete:e};var a={};return t.attributes&&(a.attributes=t.attributes),"number"===typeof t.retain?a.retain=e:"string"===typeof t.insert?a.insert=t.insert.substr(r,e):a.insert=t.insert,a}return{retain:1/0}},i.prototype.peek=function(){return this.ops[this.index]},i.prototype.peekLength=function(){return this.ops[this.index]?s.length(this.ops[this.index])-this.offset:1/0},i.prototype.peekType=function(){return this.ops[this.index]?"number"===typeof this.ops[this.index].delete?"delete":"number"===typeof this.ops[this.index].retain?"retain":"insert":"retain"},i.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var e=this.offset,t=this.index,r=this.next(),n=this.ops.slice(this.index);return this.offset=e,this.index=t,[r].concat(n)}return[]},e.exports=s},function(e,t){var r=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var t,r,n;try{t=Map}catch(o){t=function(){}}try{r=Set}catch(o){r=function(){}}try{n=Promise}catch(o){n=function(){}}function a(s,o,l,c,d){"object"===typeof o&&(l=o.depth,c=o.prototype,d=o.includeNonEnumerable,o=o.circular);var u=[],h=[],m="undefined"!=typeof Buffer;return"undefined"==typeof o&&(o=!0),"undefined"==typeof l&&(l=1/0),function s(l,f){if(null===l)return null;if(0===f)return l;var p,g;if("object"!=typeof l)return l;if(e(l,t))p=new t;else if(e(l,r))p=new r;else if(e(l,n))p=new n(function(e,t){l.then(function(t){e(s(t,f-1))},function(e){t(s(e,f-1))})});else if(a.__isArray(l))p=[];else if(a.__isRegExp(l))p=new RegExp(l.source,i(l)),l.lastIndex&&(p.lastIndex=l.lastIndex);else if(a.__isDate(l))p=new Date(l.getTime());else{if(m&&Buffer.isBuffer(l))return p=Buffer.allocUnsafe?Buffer.allocUnsafe(l.length):new Buffer(l.length),l.copy(p),p;e(l,Error)?p=Object.create(l):"undefined"==typeof c?(g=Object.getPrototypeOf(l),p=Object.create(g)):(p=Object.create(c),g=c)}if(o){var x=u.indexOf(l);if(-1!=x)return h[x];u.push(l),h.push(p)}for(var y in e(l,t)&&l.forEach(function(e,t){var r=s(t,f-1),n=s(e,f-1);p.set(r,n)}),e(l,r)&&l.forEach(function(e){var t=s(e,f-1);p.add(t)}),l){var b;g&&(b=Object.getOwnPropertyDescriptor(g,y)),b&&null==b.set||(p[y]=s(l[y],f-1))}if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(l);for(y=0;y<v.length;y++){var w=v[y];(!(k=Object.getOwnPropertyDescriptor(l,w))||k.enumerable||d)&&(p[w]=s(l[w],f-1),k.enumerable||Object.defineProperty(p,w,{enumerable:!1}))}}if(d){var j=Object.getOwnPropertyNames(l);for(y=0;y<j.length;y++){var k,N=j[y];(k=Object.getOwnPropertyDescriptor(l,N))&&k.enumerable||(p[N]=s(l[N],f-1),Object.defineProperty(p,N,{enumerable:!1}))}}return p}(s,l)}function s(e){return Object.prototype.toString.call(e)}function i(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return a.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},a.__objToStr=s,a.__isDate=function(e){return"object"===typeof e&&"[object Date]"===s(e)},a.__isArray=function(e){return"object"===typeof e&&"[object Array]"===s(e)},a.__isRegExp=function(e){return"object"===typeof e&&"[object RegExp]"===s(e)},a.__getRegExpFlags=i,a}();"object"===typeof e&&e.exports&&(e.exports=r)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){a=!0,s=l}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},i=m(r(0)),o=m(r(8)),l=r(4),c=m(l),d=m(r(16)),u=m(r(13)),h=m(r(25));function m(e){return e&&e.__esModule?e:{default:e}}function f(e){return e instanceof c.default||e instanceof l.BlockEmbed}var p=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.emitter=r.emitter,Array.isArray(r.whitelist)&&(n.whitelist=r.whitelist.reduce(function(e,t){return e[t]=!0,e},{})),n.domNode.addEventListener("DOMNodeInserted",function(){}),n.optimize(),n.enable(),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(e,r){var a=this.line(e),i=n(a,2),o=i[0],c=i[1],h=this.line(e+r),m=n(h,1)[0];if(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,r),null!=m&&o!==m&&c>0){if(o instanceof l.BlockEmbed||m instanceof l.BlockEmbed)return void this.optimize();if(o instanceof u.default){var f=o.newlineIndex(o.length(),!0);if(f>-1&&(o=o.split(f+1))===m)return void this.optimize()}else if(m instanceof u.default){var p=m.newlineIndex(0);p>-1&&m.split(p+1)}var g=m.children.head instanceof d.default?null:m.children.head;o.moveChildren(m,g),o.remove()}this.optimize()}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",e)}},{key:"formatAt",value:function(e,r,n,a){(null==this.whitelist||this.whitelist[n])&&(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,r,n,a),this.optimize())}},{key:"insertAt",value:function(e,r,n){if(null==n||null==this.whitelist||this.whitelist[r]){if(e>=this.length())if(null==n||null==i.default.query(r,i.default.Scope.BLOCK)){var a=i.default.create(this.statics.defaultChild);this.appendChild(a),null==n&&r.endsWith("\n")&&(r=r.slice(0,-1)),a.insertAt(0,r,n)}else{var o=i.default.create(r,n);this.appendChild(o)}else s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,n);this.optimize()}}},{key:"insertBefore",value:function(e,r){if(e.statics.scope===i.default.Scope.INLINE_BLOT){var n=i.default.create(this.statics.defaultChild);n.appendChild(e),e=n}s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r)}},{key:"leaf",value:function(e){return this.path(e).pop()||[null,-1]}},{key:"line",value:function(e){return e===this.length()?this.line(e-1):this.descendant(f,e)}},{key:"lines",value:function(){return function e(t,r,n){var a=[],s=n;return t.children.forEachAt(r,n,function(t,r,n){f(t)?a.push(t):t instanceof i.default.Container&&(a=a.concat(e(t,r,s))),s-=n}),a}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e,r),e.length>0&&this.emitter.emit(o.default.events.SCROLL_OPTIMIZE,e,r))}},{key:"path",value:function(e){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e).slice(1)}},{key:"update",value:function(e){if(!0!==this.batch){var r=o.default.sources.USER;"string"===typeof e&&(r=e),Array.isArray(e)||(e=this.observer.takeRecords()),e.length>0&&this.emitter.emit(o.default.events.SCROLL_BEFORE_UPDATE,r,e),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e.concat([])),e.length>0&&this.emitter.emit(o.default.events.SCROLL_UPDATE,r,e)}}}]),t}(i.default.Scroll);p.blotName="scroll",p.className="ql-editor",p.tagName="DIV",p.defaultChild="block",p.allowedChildren=[c.default,l.BlockEmbed,h.default],t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHORTKEY=t.default=void 0;var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){a=!0,s=l}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=p(r(21)),o=p(r(11)),l=p(r(3)),c=p(r(2)),d=p(r(20)),u=p(r(0)),h=p(r(5)),m=p(r(10)),f=p(r(9));function p(e){return e&&e.__esModule?e:{default:e}}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=(0,m.default)("quill:keyboard"),y=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",b=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.bindings={},Object.keys(n.options.bindings).forEach(function(t){("list autofill"!==t||null==e.scroll.whitelist||e.scroll.whitelist.list)&&n.options.bindings[t]&&n.addBinding(n.options.bindings[t])}),n.addBinding({key:t.keys.ENTER,shiftKey:null},N),n.addBinding({key:t.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(n.addBinding({key:t.keys.BACKSPACE},{collapsed:!0},w),n.addBinding({key:t.keys.DELETE},{collapsed:!0},j)):(n.addBinding({key:t.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},w),n.addBinding({key:t.keys.DELETE},{collapsed:!0,suffix:/^.?$/},j)),n.addBinding({key:t.keys.BACKSPACE},{collapsed:!1},k),n.addBinding({key:t.keys.DELETE},{collapsed:!1},k),n.addBinding({key:t.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},w),n.listen(),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,null,[{key:"match",value:function(e,t){return t=E(t),!["altKey","ctrlKey","metaKey","shiftKey"].some(function(r){return!!t[r]!==e[r]&&null!==t[r]})&&t.key===(e.which||e.keyCode)}}]),s(t,[{key:"addBinding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=E(e);if(null==n||null==n.key)return x.warn("Attempted to add invalid keyboard binding",n);"function"===typeof t&&(t={handler:t}),"function"===typeof r&&(r={handler:r}),n=(0,l.default)(n,t,r),this.bindings[n.key]=this.bindings[n.key]||[],this.bindings[n.key].push(n)}},{key:"listen",value:function(){var e=this;this.quill.root.addEventListener("keydown",function(r){if(!r.defaultPrevented){var s=r.which||r.keyCode,i=(e.bindings[s]||[]).filter(function(e){return t.match(r,e)});if(0!==i.length){var l=e.quill.getSelection();if(null!=l&&e.quill.hasFocus()){var c=e.quill.getLine(l.index),d=a(c,2),h=d[0],m=d[1],f=e.quill.getLeaf(l.index),p=a(f,2),g=p[0],x=p[1],y=0===l.length?[g,x]:e.quill.getLeaf(l.index+l.length),b=a(y,2),v=b[0],w=b[1],j=g instanceof u.default.Text?g.value().slice(0,x):"",k=v instanceof u.default.Text?v.value().slice(w):"",N={collapsed:0===l.length,empty:0===l.length&&h.length()<=1,format:e.quill.getFormat(l),offset:m,prefix:j,suffix:k};i.some(function(t){if(null!=t.collapsed&&t.collapsed!==N.collapsed)return!1;if(null!=t.empty&&t.empty!==N.empty)return!1;if(null!=t.offset&&t.offset!==N.offset)return!1;if(Array.isArray(t.format)){if(t.format.every(function(e){return null==N.format[e]}))return!1}else if("object"===n(t.format)&&!Object.keys(t.format).every(function(e){return!0===t.format[e]?null!=N.format[e]:!1===t.format[e]?null==N.format[e]:(0,o.default)(t.format[e],N.format[e])}))return!1;return!(null!=t.prefix&&!t.prefix.test(N.prefix))&&!(null!=t.suffix&&!t.suffix.test(N.suffix))&&!0!==t.handler.call(e,l,N)})&&r.preventDefault()}}}})}}]),t}(f.default);function v(e,t){var r,n=e===b.keys.LEFT?"prefix":"suffix";return g(r={key:e,shiftKey:t,altKey:null},n,/^$/),g(r,"handler",function(r){var n=r.index;e===b.keys.RIGHT&&(n+=r.length+1);var s=this.quill.getLeaf(n);return!(a(s,1)[0]instanceof u.default.Embed)||(e===b.keys.LEFT?t?this.quill.setSelection(r.index-1,r.length+1,h.default.sources.USER):this.quill.setSelection(r.index-1,h.default.sources.USER):t?this.quill.setSelection(r.index,r.length+1,h.default.sources.USER):this.quill.setSelection(r.index+r.length+1,h.default.sources.USER),!1)}),r}function w(e,t){if(!(0===e.index||this.quill.getLength()<=1)){var r=this.quill.getLine(e.index),n=a(r,1)[0],s={};if(0===t.offset){var i=this.quill.getLine(e.index-1),o=a(i,1)[0];if(null!=o&&o.length()>1){var l=n.formats(),c=this.quill.getFormat(e.index-1,1);s=d.default.attributes.diff(l,c)||{}}}var u=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;this.quill.deleteText(e.index-u,u,h.default.sources.USER),Object.keys(s).length>0&&this.quill.formatLine(e.index-u,u,s,h.default.sources.USER),this.quill.focus()}}function j(e,t){var r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(!(e.index>=this.quill.getLength()-r)){var n={},s=0,i=this.quill.getLine(e.index),o=a(i,1)[0];if(t.offset>=o.length()-1){var l=this.quill.getLine(e.index+1),c=a(l,1)[0];if(c){var u=o.formats(),m=this.quill.getFormat(e.index,1);n=d.default.attributes.diff(u,m)||{},s=c.length()}}this.quill.deleteText(e.index,r,h.default.sources.USER),Object.keys(n).length>0&&this.quill.formatLine(e.index+s-1,r,n,h.default.sources.USER)}}function k(e){var t=this.quill.getLines(e),r={};if(t.length>1){var n=t[0].formats(),a=t[t.length-1].formats();r=d.default.attributes.diff(a,n)||{}}this.quill.deleteText(e,h.default.sources.USER),Object.keys(r).length>0&&this.quill.formatLine(e.index,1,r,h.default.sources.USER),this.quill.setSelection(e.index,h.default.sources.SILENT),this.quill.focus()}function N(e,t){var r=this;e.length>0&&this.quill.scroll.deleteAt(e.index,e.length);var n=Object.keys(t.format).reduce(function(e,r){return u.default.query(r,u.default.Scope.BLOCK)&&!Array.isArray(t.format[r])&&(e[r]=t.format[r]),e},{});this.quill.insertText(e.index,"\n",n,h.default.sources.USER),this.quill.setSelection(e.index+1,h.default.sources.SILENT),this.quill.focus(),Object.keys(t.format).forEach(function(e){null==n[e]&&(Array.isArray(t.format[e])||"link"!==e&&r.quill.format(e,t.format[e],h.default.sources.USER))})}function _(e){return{key:b.keys.TAB,shiftKey:!e,format:{"code-block":!0},handler:function(t){var r=u.default.query("code-block"),n=t.index,s=t.length,i=this.quill.scroll.descendant(r,n),o=a(i,2),l=o[0],c=o[1];if(null!=l){var d=this.quill.getIndex(l),m=l.newlineIndex(c,!0)+1,f=l.newlineIndex(d+c+s),p=l.domNode.textContent.slice(m,f).split("\n");c=0,p.forEach(function(t,a){e?(l.insertAt(m+c,r.TAB),c+=r.TAB.length,0===a?n+=r.TAB.length:s+=r.TAB.length):t.startsWith(r.TAB)&&(l.deleteAt(m+c,r.TAB.length),c-=r.TAB.length,0===a?n-=r.TAB.length:s-=r.TAB.length),c+=t.length+1}),this.quill.update(h.default.sources.USER),this.quill.setSelection(n,s,h.default.sources.SILENT)}}}}function S(e){return{key:e[0].toUpperCase(),shortKey:!0,handler:function(t,r){this.quill.format(e,!r.format[e],h.default.sources.USER)}}}function E(e){if("string"===typeof e||"number"===typeof e)return E({key:e});if("object"===("undefined"===typeof e?"undefined":n(e))&&(e=(0,i.default)(e,!1)),"string"===typeof e.key)if(null!=b.keys[e.key.toUpperCase()])e.key=b.keys[e.key.toUpperCase()];else{if(1!==e.key.length)return null;e.key=e.key.toUpperCase().charCodeAt(0)}return e.shortKey&&(e[y]=e.shortKey,delete e.shortKey),e}b.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},b.DEFAULTS={bindings:{bold:S("bold"),italic:S("italic"),underline:S("underline"),indent:{key:b.keys.TAB,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","+1",h.default.sources.USER)}},outdent:{key:b.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","-1",h.default.sources.USER)}},"outdent backspace":{key:b.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(e,t){null!=t.format.indent?this.quill.format("indent","-1",h.default.sources.USER):null!=t.format.list&&this.quill.format("list",!1,h.default.sources.USER)}},"indent code-block":_(!0),"outdent code-block":_(!1),"remove tab":{key:b.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(e){this.quill.deleteText(e.index-1,1,h.default.sources.USER)}},tab:{key:b.keys.TAB,handler:function(e){this.quill.history.cutoff();var t=(new c.default).retain(e.index).delete(e.length).insert("\t");this.quill.updateContents(t,h.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,h.default.sources.SILENT)}},"list empty enter":{key:b.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(e,t){this.quill.format("list",!1,h.default.sources.USER),t.format.indent&&this.quill.format("indent",!1,h.default.sources.USER)}},"checklist enter":{key:b.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(e){var t=this.quill.getLine(e.index),r=a(t,2),n=r[0],s=r[1],i=(0,l.default)({},n.formats(),{list:"checked"}),o=(new c.default).retain(e.index).insert("\n",i).retain(n.length()-s-1).retain(1,{list:"unchecked"});this.quill.updateContents(o,h.default.sources.USER),this.quill.setSelection(e.index+1,h.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:b.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(e,t){var r=this.quill.getLine(e.index),n=a(r,2),s=n[0],i=n[1],o=(new c.default).retain(e.index).insert("\n",t.format).retain(s.length()-i-1).retain(1,{header:null});this.quill.updateContents(o,h.default.sources.USER),this.quill.setSelection(e.index+1,h.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(e,t){var r=t.prefix.length,n=this.quill.getLine(e.index),s=a(n,2),i=s[0],o=s[1];if(o>r)return!0;var l=void 0;switch(t.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(e.index," ",h.default.sources.USER),this.quill.history.cutoff();var d=(new c.default).retain(e.index-o).delete(r+1).retain(i.length()-2-o).retain(1,{list:l});this.quill.updateContents(d,h.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-r,h.default.sources.SILENT)}},"code exit":{key:b.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(e){var t=this.quill.getLine(e.index),r=a(t,2),n=r[0],s=r[1],i=(new c.default).retain(e.index+n.length()-s-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(i,h.default.sources.USER)}},"embed left":v(b.keys.LEFT,!1),"embed left shift":v(b.keys.LEFT,!0),"embed right":v(b.keys.RIGHT,!1),"embed right shift":v(b.keys.RIGHT,!0)}},t.default=b,t.SHORTKEY=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){a=!0,s=l}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=l(r(0)),o=l(r(7));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.selection=r,n.textNode=document.createTextNode(t.CONTENTS),n.domNode.appendChild(n.textNode),n._length=0,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,null,[{key:"value",value:function(){}}]),s(t,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(e,r){if(0!==this._length)return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r);for(var n=this,s=0;null!=n&&n.statics.scope!==i.default.Scope.BLOCK_BLOT;)s+=n.offset(n.parent),n=n.parent;null!=n&&(this._length=t.CONTENTS.length,n.optimize(),n.formatAt(s,t.CONTENTS.length,e,r),this._length=0)}},{key:"index",value:function(e,r){return e===this.textNode?0:a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,r)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var e=this.textNode,r=this.selection.getNativeRange(),a=void 0,s=void 0,l=void 0;if(null!=r&&r.start.node===e&&r.end.node===e){var c=[e,r.start.offset,r.end.offset];a=c[0],s=c[1],l=c[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==t.CONTENTS){var d=this.textNode.data.split(t.CONTENTS).join("");this.next instanceof o.default?(a=this.next.domNode,this.next.insertAt(0,d),this.textNode.data=t.CONTENTS):(this.textNode.data=d,this.parent.insertBefore(i.default.create(this.textNode),this),this.textNode=document.createTextNode(t.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=s){var u=[s,l].map(function(e){return Math.max(0,Math.min(a.data.length,e-1))}),h=n(u,2);return s=h[0],l=h[1],{startNode:a,startOffset:s,endNode:a,endOffset:l}}}}},{key:"update",value:function(e,t){var r=this;if(e.some(function(e){return"characterData"===e.type&&e.target===r.textNode})){var n=this.restore();n&&(t.range=n)}}},{key:"value",value:function(){return""}}]),t}(i.default.Embed);c.blotName="cursor",c.className="ql-cursor",c.tagName="span",c.CONTENTS="\ufeff",t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(0)),a=r(4),s=i(a);function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(n.default.Container);o.allowedChildren=[s.default,a.BlockEmbed,o],t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorStyle=t.ColorClass=t.ColorAttributor=void 0;var n,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},i=r(0),o=(n=i)&&n.__esModule?n:{default:n},l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"value",value:function(e){var r=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e);return r.startsWith("rgb(")?(r=r.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+r.split(",").map(function(e){return("00"+parseInt(e).toString(16)).slice(-2)}).join("")):r}}]),t}(o.default.Attributor.Style),c=new o.default.Attributor.Class("color","ql-color",{scope:o.default.Scope.INLINE}),d=new l("color","color",{scope:o.default.Scope.INLINE});t.ColorAttributor=l,t.ColorClass=c,t.ColorStyle=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitize=t.default=void 0;var n,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},i=r(6),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"format",value:function(e,r){if(e!==this.statics.blotName||!r)return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r);r=this.constructor.sanitize(r),this.domNode.setAttribute("href",r)}}],[{key:"create",value:function(e){var r=s(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return e=this.sanitize(e),r.setAttribute("href",e),r.setAttribute("rel","noopener noreferrer"),r.setAttribute("target","_blank"),r}},{key:"formats",value:function(e){return e.getAttribute("href")}},{key:"sanitize",value:function(e){return l(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}}]),t}(((n=i)&&n.__esModule?n:{default:n}).default);function l(e,t){var r=document.createElement("a");r.href=e;var n=r.href.slice(0,r.href.indexOf(":"));return t.indexOf(n)>-1}o.blotName="link",o.tagName="A",o.SANITIZED_URL="about:blank",o.PROTOCOL_WHITELIST=["http","https","mailto","tel"],t.default=o,t.sanitize=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=o(r(23)),i=o(r(107));function o(e){return e&&e.__esModule?e:{default:e}}var l=0;function c(e,t){e.setAttribute(t,!("true"===e.getAttribute(t)))}var d=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){r.togglePicker()}),this.label.addEventListener("keydown",function(e){switch(e.keyCode){case s.default.keys.ENTER:r.togglePicker();break;case s.default.keys.ESCAPE:r.escape(),e.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}return a(e,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),c(this.label,"aria-expanded"),c(this.options,"aria-hidden")}},{key:"buildItem",value:function(e){var t=this,r=document.createElement("span");return r.tabIndex="0",r.setAttribute("role","button"),r.classList.add("ql-picker-item"),e.hasAttribute("value")&&r.setAttribute("data-value",e.getAttribute("value")),e.textContent&&r.setAttribute("data-label",e.textContent),r.addEventListener("click",function(){t.selectItem(r,!0)}),r.addEventListener("keydown",function(e){switch(e.keyCode){case s.default.keys.ENTER:t.selectItem(r,!0),e.preventDefault();break;case s.default.keys.ESCAPE:t.escape(),e.preventDefault()}}),r}},{key:"buildLabel",value:function(){var e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=i.default,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}},{key:"buildOptions",value:function(){var e=this,t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id="ql-picker-options-"+l,l+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,[].slice.call(this.select.options).forEach(function(r){var n=e.buildItem(r);t.appendChild(n),!0===r.selected&&e.selectItem(n)}),this.container.appendChild(t)}},{key:"buildPicker",value:function(){var e=this;[].slice.call(this.select.attributes).forEach(function(t){e.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var e=this;this.close(),setTimeout(function(){return e.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.container.querySelector(".ql-selected");if(e!==r&&(null!=r&&r.classList.remove("ql-selected"),null!=e&&(e.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(e.parentNode.children,e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t))){if("function"===typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"===typeof Event?"undefined":n(Event))){var a=document.createEvent("Event");a.initEvent("change",!0,!0),this.select.dispatchEvent(a)}this.close()}}},{key:"update",value:function(){var e=void 0;if(this.select.selectedIndex>-1){var t=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(t)}else this.selectItem(null);var r=null!=e&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",r)}}]),e}();t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=x(r(0)),a=x(r(5)),s=r(4),i=x(s),o=x(r(16)),l=x(r(25)),c=x(r(24)),d=x(r(35)),u=x(r(6)),h=x(r(22)),m=x(r(7)),f=x(r(55)),p=x(r(42)),g=x(r(23));function x(e){return e&&e.__esModule?e:{default:e}}a.default.register({"blots/block":i.default,"blots/block/embed":s.BlockEmbed,"blots/break":o.default,"blots/container":l.default,"blots/cursor":c.default,"blots/embed":d.default,"blots/inline":u.default,"blots/scroll":h.default,"blots/text":m.default,"modules/clipboard":f.default,"modules/history":p.default,"modules/keyboard":g.default}),n.default.register(i.default,o.default,c.default,u.default,h.default,m.default),t.default=a.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),a=function(){function e(e){this.domNode=e,this.domNode[n.DATA_KEY]={blot:this}}return Object.defineProperty(e.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),e.create=function(e){if(null==this.tagName)throw new n.ParchmentError("Blot definition missing tagName");var t;return Array.isArray(this.tagName)?("string"===typeof e&&(e=e.toUpperCase(),parseInt(e).toString()===e&&(e=parseInt(e))),t="number"===typeof e?document.createElement(this.tagName[e-1]):this.tagName.indexOf(e)>-1?document.createElement(e):document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t},e.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},e.prototype.clone=function(){var e=this.domNode.cloneNode(!1);return n.create(e)},e.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[n.DATA_KEY]},e.prototype.deleteAt=function(e,t){this.isolate(e,t).remove()},e.prototype.formatAt=function(e,t,r,a){var s=this.isolate(e,t);if(null!=n.query(r,n.Scope.BLOT)&&a)s.wrap(r,a);else if(null!=n.query(r,n.Scope.ATTRIBUTE)){var i=n.create(this.statics.scope);s.wrap(i),i.format(r,a)}},e.prototype.insertAt=function(e,t,r){var a=null==r?n.create("text",t):n.create(t,r),s=this.split(e);this.parent.insertBefore(a,s)},e.prototype.insertInto=function(e,t){void 0===t&&(t=null),null!=this.parent&&this.parent.children.remove(this);var r=null;e.children.insertBefore(this,t),null!=t&&(r=t.domNode),this.domNode.parentNode==e.domNode&&this.domNode.nextSibling==r||e.domNode.insertBefore(this.domNode,r),this.parent=e,this.attach()},e.prototype.isolate=function(e,t){var r=this.split(e);return r.split(t),r},e.prototype.length=function(){return 1},e.prototype.offset=function(e){return void 0===e&&(e=this.parent),null==this.parent||this==e?0:this.parent.children.offset(this)+this.parent.offset(e)},e.prototype.optimize=function(e){null!=this.domNode[n.DATA_KEY]&&delete this.domNode[n.DATA_KEY].mutations},e.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},e.prototype.replace=function(e){null!=e.parent&&(e.parent.insertBefore(this,e.next),e.remove())},e.prototype.replaceWith=function(e,t){var r="string"===typeof e?n.create(e,t):e;return r.replace(this),r},e.prototype.split=function(e,t){return 0===e?this:this.next},e.prototype.update=function(e,t){},e.prototype.wrap=function(e,t){var r="string"===typeof e?n.create(e,t):e;return null!=this.parent&&this.parent.insertBefore(r,this.next),r.appendChild(this),r},e.blotName="abstract",e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12),a=r(32),s=r(33),i=r(1),o=function(){function e(e){this.attributes={},this.domNode=e,this.build()}return e.prototype.attribute=function(e,t){t?e.add(this.domNode,t)&&(null!=e.value(this.domNode)?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])},e.prototype.build=function(){var e=this;this.attributes={};var t=n.default.keys(this.domNode),r=a.default.keys(this.domNode),o=s.default.keys(this.domNode);t.concat(r).concat(o).forEach(function(t){var r=i.query(t,i.Scope.ATTRIBUTE);r instanceof n.default&&(e.attributes[r.attrName]=r)})},e.prototype.copy=function(e){var t=this;Object.keys(this.attributes).forEach(function(r){var n=t.attributes[r].value(t.domNode);e.format(r,n)})},e.prototype.move=function(e){var t=this;this.copy(e),Object.keys(this.attributes).forEach(function(e){t.attributes[e].remove(t.domNode)}),this.attributes={}},e.prototype.values=function(){var e=this;return Object.keys(this.attributes).reduce(function(t,r){return t[r]=e.attributes[r].value(e.domNode),t},{})},e}();t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function a(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter(function(e){return 0===e.indexOf(t+"-")})}Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.keys=function(e){return(e.getAttribute("class")||"").split(/\s+/).map(function(e){return e.split("-").slice(0,-1).join("-")})},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(this.remove(e),e.classList.add(this.keyName+"-"+t),!0)},t.prototype.remove=function(e){a(e,this.keyName).forEach(function(t){e.classList.remove(t)}),0===e.classList.length&&e.removeAttribute("class")},t.prototype.value=function(e){var t=(a(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""},t}(r(12).default);t.default=s},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function a(e){var t=e.split("-"),r=t.slice(1).map(function(e){return e[0].toUpperCase()+e.slice(1)}).join("");return t[0]+r}Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.keys=function(e){return(e.getAttribute("style")||"").split(";").map(function(e){return e.split(":")[0].trim()})},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.style[a(this.keyName)]=t,!0)},t.prototype.remove=function(e){e.style[a(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")},t.prototype.value=function(e){var t=e.style[a(this.keyName)];return this.canAdd(e,t)?t:""},t}(r(12).default);t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=r,this.modules={}}return n(e,[{key:"init",value:function(){var e=this;Object.keys(this.options.modules).forEach(function(t){null==e.modules[t]&&e.addModule(t)})}},{key:"addModule",value:function(e){var t=this.quill.constructor.import("modules/"+e);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}]),e}();a.DEFAULTS={modules:{}},a.themes={default:a},t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},s=o(r(0)),i=o(r(7));function o(e){return e&&e.__esModule?e:{default:e}}var l="\ufeff",c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.contentNode=document.createElement("span"),r.contentNode.setAttribute("contenteditable",!1),[].slice.call(r.domNode.childNodes).forEach(function(e){r.contentNode.appendChild(e)}),r.leftGuard=document.createTextNode(l),r.rightGuard=document.createTextNode(l),r.domNode.appendChild(r.leftGuard),r.domNode.appendChild(r.contentNode),r.domNode.appendChild(r.rightGuard),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"index",value:function(e,r){return e===this.leftGuard?0:e===this.rightGuard?1:a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,r)}},{key:"restore",value:function(e){var t=void 0,r=void 0,n=e.data.split(l).join("");if(e===this.leftGuard)if(this.prev instanceof i.default){var a=this.prev.length();this.prev.insertAt(a,n),t={startNode:this.prev.domNode,startOffset:a+n.length}}else r=document.createTextNode(n),this.parent.insertBefore(s.default.create(r),this),t={startNode:r,startOffset:n.length};else e===this.rightGuard&&(this.next instanceof i.default?(this.next.insertAt(0,n),t={startNode:this.next.domNode,startOffset:n.length}):(r=document.createTextNode(n),this.parent.insertBefore(s.default.create(r),this.next),t={startNode:r,startOffset:n.length}));return e.data=l,t}},{key:"update",value:function(e,t){var r=this;e.forEach(function(e){if("characterData"===e.type&&(e.target===r.leftGuard||e.target===r.rightGuard)){var n=r.restore(e.target);n&&(t.range=n)}})}}]),t}(s.default.Embed);t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlignStyle=t.AlignClass=t.AlignAttribute=void 0;var n,a=r(0),s=(n=a)&&n.__esModule?n:{default:n},i={scope:s.default.Scope.BLOCK,whitelist:["right","center","justify"]},o=new s.default.Attributor.Attribute("align","align",i),l=new s.default.Attributor.Class("align","ql-align",i),c=new s.default.Attributor.Style("align","text-align",i);t.AlignAttribute=o,t.AlignClass=l,t.AlignStyle=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundStyle=t.BackgroundClass=void 0;var n,a=r(0),s=(n=a)&&n.__esModule?n:{default:n},i=r(26),o=new s.default.Attributor.Class("background","ql-bg",{scope:s.default.Scope.INLINE}),l=new i.ColorAttributor("background","background-color",{scope:s.default.Scope.INLINE});t.BackgroundClass=o,t.BackgroundStyle=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionStyle=t.DirectionClass=t.DirectionAttribute=void 0;var n,a=r(0),s=(n=a)&&n.__esModule?n:{default:n},i={scope:s.default.Scope.BLOCK,whitelist:["rtl"]},o=new s.default.Attributor.Attribute("direction","dir",i),l=new s.default.Attributor.Class("direction","ql-direction",i),c=new s.default.Attributor.Style("direction","direction",i);t.DirectionAttribute=o,t.DirectionClass=l,t.DirectionStyle=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontClass=t.FontStyle=void 0;var n,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},i=r(0),o=(n=i)&&n.__esModule?n:{default:n},l={scope:o.default.Scope.INLINE,whitelist:["serif","monospace"]},c=new o.default.Attributor.Class("font","ql-font",l),d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"value",value:function(e){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e).replace(/["']/g,"")}}]),t}(o.default.Attributor.Style),u=new d("font","font-family",l);t.FontStyle=u,t.FontClass=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SizeStyle=t.SizeClass=void 0;var n,a=r(0),s=(n=a)&&n.__esModule?n:{default:n},i=new s.default.Attributor.Class("size","ql-size",{scope:s.default.Scope.INLINE,whitelist:["small","large","huge"]}),o=new s.default.Attributor.Style("size","font-size",{scope:s.default.Scope.INLINE,whitelist:["10px","18px","32px"]});t.SizeClass=i,t.SizeStyle=o},function(e,t,r){"use strict";e.exports={align:{"":r(76),center:r(77),right:r(78),justify:r(79)},background:r(80),blockquote:r(81),bold:r(82),clean:r(83),code:r(58),"code-block":r(58),color:r(84),direction:{"":r(85),rtl:r(86)},float:{center:r(87),full:r(88),left:r(89),right:r(90)},formula:r(91),header:{1:r(92),2:r(93)},italic:r(94),image:r(95),indent:{"+1":r(96),"-1":r(97)},link:r(98),list:{ordered:r(99),bullet:r(100),check:r(101)},script:{sub:r(102),super:r(103)},strike:r(104),underline:r(105),video:r(106)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLastChangeIndex=t.default=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=i(r(0)),s=i(r(5));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.lastRecorded=0,n.ignoreChange=!1,n.clear(),n.quill.on(s.default.events.EDITOR_CHANGE,function(e,t,r,a){e!==s.default.events.TEXT_CHANGE||n.ignoreChange||(n.options.userOnly&&a!==s.default.sources.USER?n.transform(t):n.record(t,r))}),n.quill.keyboard.addBinding({key:"Z",shortKey:!0},n.undo.bind(n)),n.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},n.redo.bind(n)),/Win/i.test(navigator.platform)&&n.quill.keyboard.addBinding({key:"Y",shortKey:!0},n.redo.bind(n)),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"change",value:function(e,t){if(0!==this.stack[e].length){var r=this.stack[e].pop();this.stack[t].push(r),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r[e],s.default.sources.USER),this.ignoreChange=!1;var n=l(r[e]);this.quill.setSelection(n)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(e,t){if(0!==e.ops.length){this.stack.redo=[];var r=this.quill.getContents().diff(t),n=Date.now();if(this.lastRecorded+this.options.delay>n&&this.stack.undo.length>0){var a=this.stack.undo.pop();r=r.compose(a.undo),e=a.redo.compose(e)}else this.lastRecorded=n;this.stack.undo.push({redo:e,undo:r}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(e){this.stack.undo.forEach(function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}),this.stack.redo.forEach(function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),t}(i(r(9)).default);function l(e){var t=e.reduce(function(e,t){return e+=t.delete||0},0),r=e.length()-t;return function(e){var t=e.ops[e.ops.length-1];return null!=t&&(null!=t.insert?"string"===typeof t.insert&&t.insert.endsWith("\n"):null!=t.attributes&&Object.keys(t.attributes).some(function(e){return null!=a.default.query(e,a.default.Scope.BLOCK)}))}(e)&&(r-=1),r}o.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},t.default=o,t.getLastChangeIndex=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseTooltip=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},s=f(r(3)),i=f(r(2)),o=f(r(8)),l=f(r(23)),c=f(r(34)),d=f(r(59)),u=f(r(60)),h=f(r(28)),m=f(r(61));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function x(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=[!1,"center","right","justify"],b=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],v=[!1,"serif","monospace"],w=["1","2","3",!1],j=["small",!1,"large","huge"],k=function(e){function t(e,r){p(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return e.emitter.listenDOM("click",document.body,function t(r){if(!document.body.contains(e.root))return document.body.removeEventListener("click",t);null==n.tooltip||n.tooltip.root.contains(r.target)||document.activeElement===n.tooltip.textbox||n.quill.hasFocus()||n.tooltip.hide(),null!=n.pickers&&n.pickers.forEach(function(e){e.container.contains(r.target)||e.close()})}),n}return x(t,e),n(t,[{key:"addModule",value:function(e){var r=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addModule",this).call(this,e);return"toolbar"===e&&this.extendToolbar(r),r}},{key:"buildButtons",value:function(e,t){e.forEach(function(e){(e.getAttribute("class")||"").split(/\s+/).forEach(function(r){if(r.startsWith("ql-")&&(r=r.slice(3),null!=t[r]))if("direction"===r)e.innerHTML=t[r][""]+t[r].rtl;else if("string"===typeof t[r])e.innerHTML=t[r];else{var n=e.value||"";null!=n&&t[r][n]&&(e.innerHTML=t[r][n])}})})}},{key:"buildPickers",value:function(e,t){var r=this;this.pickers=e.map(function(e){if(e.classList.contains("ql-align"))return null==e.querySelector("option")&&_(e,y),new u.default(e,t.align);if(e.classList.contains("ql-background")||e.classList.contains("ql-color")){var r=e.classList.contains("ql-background")?"background":"color";return null==e.querySelector("option")&&_(e,b,"background"===r?"#ffffff":"#000000"),new d.default(e,t[r])}return null==e.querySelector("option")&&(e.classList.contains("ql-font")?_(e,v):e.classList.contains("ql-header")?_(e,w):e.classList.contains("ql-size")&&_(e,j)),new h.default(e)}),this.quill.on(o.default.events.EDITOR_CHANGE,function(){r.pickers.forEach(function(e){e.update()})})}}]),t}(c.default);k.DEFAULTS=(0,s.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var e=this,t=this.container.querySelector("input.ql-image[type=file]");null==t&&((t=document.createElement("input")).setAttribute("type","file"),t.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),t.classList.add("ql-image"),t.addEventListener("change",function(){if(null!=t.files&&null!=t.files[0]){var r=new FileReader;r.onload=function(r){var n=e.quill.getSelection(!0);e.quill.updateContents((new i.default).retain(n.index).delete(n.length).insert({image:r.target.result}),o.default.sources.USER),e.quill.setSelection(n.index+1,o.default.sources.SILENT),t.value=""},r.readAsDataURL(t.files[0])}}),this.container.appendChild(t)),t.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var N=function(e){function t(e,r){p(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.textbox=n.root.querySelector('input[type="text"]'),n.listen(),n}return x(t,e),n(t,[{key:"listen",value:function(){var e=this;this.textbox.addEventListener("keydown",function(t){l.default.match(t,"enter")?(e.save(),t.preventDefault()):l.default.match(t,"escape")&&(e.cancel(),t.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=t?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+e)||""),this.root.setAttribute("data-mode",e)}},{key:"restoreFocus",value:function(){var e=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=e}},{key:"save",value:function(){var e=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var t=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,o.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,o.default.sources.USER)),this.quill.root.scrollTop=t;break;case"video":e=function(e){var t=e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?(t[1]||"https")+"://www.youtube.com/embed/"+t[2]+"?showinfo=0":(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(t[1]||"https")+"://player.vimeo.com/video/"+t[2]+"/":e}(e);case"formula":if(!e)break;var r=this.quill.getSelection(!0);if(null!=r){var n=r.index+r.length;this.quill.insertEmbed(n,this.root.getAttribute("data-mode"),e,o.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(n+1," ",o.default.sources.USER),this.quill.setSelection(n+2,o.default.sources.USER)}}this.textbox.value="",this.hide()}}]),t}(m.default);function _(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach(function(t){var n=document.createElement("option");t===r?n.setAttribute("selected","selected"):n.setAttribute("value",t),e.appendChild(n)})}t.BaseTooltip=N,t.default=k},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.head=this.tail=null,this.length=0}return e.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.insertBefore(e[0],null),e.length>1&&this.append.apply(this,e.slice(1))},e.prototype.contains=function(e){for(var t,r=this.iterator();t=r();)if(t===e)return!0;return!1},e.prototype.insertBefore=function(e,t){e&&(e.next=t,null!=t?(e.prev=t.prev,null!=t.prev&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):null!=this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)},e.prototype.offset=function(e){for(var t=0,r=this.head;null!=r;){if(r===e)return t;t+=r.length(),r=r.next}return-1},e.prototype.remove=function(e){this.contains(e)&&(null!=e.prev&&(e.prev.next=e.next),null!=e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)},e.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},e.prototype.find=function(e,t){void 0===t&&(t=!1);for(var r,n=this.iterator();r=n();){var a=r.length();if(e<a||t&&e===a&&(null==r.next||0!==r.next.length()))return[r,e];e-=a}return[null,0]},e.prototype.forEach=function(e){for(var t,r=this.iterator();t=r();)e(t)},e.prototype.forEachAt=function(e,t,r){if(!(t<=0))for(var n,a=this.find(e),s=a[0],i=e-a[1],o=this.iterator(s);(n=o())&&i<e+t;){var l=n.length();e>i?r(n,e-i,Math.min(t,i+l-e)):r(n,0,Math.min(l,e+t-i)),i+=l}},e.prototype.map=function(e){return this.reduce(function(t,r){return t.push(e(r)),t},[])},e.prototype.reduce=function(e,t){for(var r,n=this.iterator();r=n();)t=e(t,r);return t},e}();t.default=n},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(17),s=r(1),i={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},o=function(e){function t(t){var r=e.call(this,t)||this;return r.scroll=r,r.observer=new MutationObserver(function(e){r.update(e)}),r.observer.observe(r.domNode,i),r.attach(),r}return n(t,e),t.prototype.detach=function(){e.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(t,r){this.update(),0===t&&r===this.length()?this.children.forEach(function(e){e.remove()}):e.prototype.deleteAt.call(this,t,r)},t.prototype.formatAt=function(t,r,n,a){this.update(),e.prototype.formatAt.call(this,t,r,n,a)},t.prototype.insertAt=function(t,r,n){this.update(),e.prototype.insertAt.call(this,t,r,n)},t.prototype.optimize=function(t,r){var n=this;void 0===t&&(t=[]),void 0===r&&(r={}),e.prototype.optimize.call(this,r);for(var i=[].slice.call(this.observer.takeRecords());i.length>0;)t.push(i.pop());for(var o=function(e,t){void 0===t&&(t=!0),null!=e&&e!==n&&null!=e.domNode.parentNode&&(null==e.domNode[s.DATA_KEY].mutations&&(e.domNode[s.DATA_KEY].mutations=[]),t&&o(e.parent))},l=function(e){null!=e.domNode[s.DATA_KEY]&&null!=e.domNode[s.DATA_KEY].mutations&&(e instanceof a.default&&e.children.forEach(l),e.optimize(r))},c=t,d=0;c.length>0;d+=1){if(d>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach(function(e){var t=s.find(e.target,!0);null!=t&&(t.domNode===e.target&&("childList"===e.type?(o(s.find(e.previousSibling,!1)),[].forEach.call(e.addedNodes,function(e){var t=s.find(e,!1);o(t,!1),t instanceof a.default&&t.children.forEach(function(e){o(e,!1)})})):"attributes"===e.type&&o(t.prev)),o(t))}),this.children.forEach(l),i=(c=[].slice.call(this.observer.takeRecords())).slice();i.length>0;)t.push(i.pop())}},t.prototype.update=function(t,r){var n=this;void 0===r&&(r={}),(t=t||this.observer.takeRecords()).map(function(e){var t=s.find(e.target,!0);return null==t?null:null==t.domNode[s.DATA_KEY].mutations?(t.domNode[s.DATA_KEY].mutations=[e],t):(t.domNode[s.DATA_KEY].mutations.push(e),null)}).forEach(function(e){null!=e&&e!==n&&null!=e.domNode[s.DATA_KEY]&&e.update(e.domNode[s.DATA_KEY].mutations||[],r)}),null!=this.domNode[s.DATA_KEY].mutations&&e.prototype.update.call(this,this.domNode[s.DATA_KEY].mutations,r),this.optimize(t,r)},t.blotName="scroll",t.defaultChild="block",t.scope=s.Scope.BLOCK_BLOT,t.tagName="DIV",t}(a.default);t.default=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(18),s=r(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.formats=function(r){if(r.tagName!==t.tagName)return e.formats.call(this,r)},t.prototype.format=function(r,n){var s=this;r!==this.statics.blotName||n?e.prototype.format.call(this,r,n):(this.children.forEach(function(e){e instanceof a.default||(e=e.wrap(t.blotName,!0)),s.attributes.copy(e)}),this.unwrap())},t.prototype.formatAt=function(t,r,n,a){null!=this.formats()[n]||s.query(n,s.Scope.ATTRIBUTE)?this.isolate(t,r).format(n,a):e.prototype.formatAt.call(this,t,r,n,a)},t.prototype.optimize=function(r){e.prototype.optimize.call(this,r);var n=this.formats();if(0===Object.keys(n).length)return this.unwrap();var a=this.next;a instanceof t&&a.prev===this&&function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(e[r]!==t[r])return!1;return!0}(n,a.formats())&&(a.moveChildren(this),a.remove())},t.blotName="inline",t.scope=s.Scope.INLINE_BLOT,t.tagName="SPAN",t}(a.default);t.default=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(18),s=r(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.formats=function(r){var n=s.query(t.blotName).tagName;if(r.tagName!==n)return e.formats.call(this,r)},t.prototype.format=function(r,n){null!=s.query(r,s.Scope.BLOCK)&&(r!==this.statics.blotName||n?e.prototype.format.call(this,r,n):this.replaceWith(t.blotName))},t.prototype.formatAt=function(t,r,n,a){null!=s.query(n,s.Scope.BLOCK)?this.format(n,a):e.prototype.formatAt.call(this,t,r,n,a)},t.prototype.insertAt=function(t,r,n){if(null==n||null!=s.query(r,s.Scope.INLINE))e.prototype.insertAt.call(this,t,r,n);else{var a=this.split(t),i=s.create(r,n);a.parent.insertBefore(i,a)}},t.prototype.update=function(t,r){navigator.userAgent.match(/Trident/)?this.build():e.prototype.update.call(this,t,r)},t.blotName="block",t.scope=s.Scope.BLOCK_BLOT,t.tagName="P",t}(a.default);t.default=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.formats=function(e){},t.prototype.format=function(t,r){e.prototype.formatAt.call(this,0,this.length(),t,r)},t.prototype.formatAt=function(t,r,n,a){0===t&&r===this.length()?this.format(n,a):e.prototype.formatAt.call(this,t,r,n,a)},t.prototype.formats=function(){return this.statics.formats(this.domNode)},t}(r(19).default);t.default=a},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r(19),s=r(1),i=function(e){function t(t){var r=e.call(this,t)||this;return r.text=r.statics.value(r.domNode),r}return n(t,e),t.create=function(e){return document.createTextNode(e)},t.value=function(e){var t=e.data;return t.normalize&&(t=t.normalize()),t},t.prototype.deleteAt=function(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)},t.prototype.index=function(e,t){return this.domNode===e?t:-1},t.prototype.insertAt=function(t,r,n){null==n?(this.text=this.text.slice(0,t)+r+this.text.slice(t),this.domNode.data=this.text):e.prototype.insertAt.call(this,t,r,n)},t.prototype.length=function(){return this.text.length},t.prototype.optimize=function(r){e.prototype.optimize.call(this,r),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},t.prototype.position=function(e,t){return void 0===t&&(t=!1),[this.domNode,e]},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var r=s.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next),this.text=this.statics.value(this.domNode),r},t.prototype.update=function(e,t){var r=this;e.some(function(e){return"characterData"===e.type&&e.target===r.domNode})&&(this.text=this.statics.value(this.domNode))},t.prototype.value=function(){return this.text},t.blotName="text",t.scope=s.Scope.INLINE_BLOT,t}(a.default);t.default=i},function(e,t,r){"use strict";var n=document.createElement("div");if(n.classList.toggle("test-class",!1),n.classList.contains("test-class")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return arguments.length>1&&!this.contains(e)===!t?t:a.call(this,e)}}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var r=this.toString();("number"!==typeof t||!isFinite(t)||Math.floor(t)!==t||t>r.length)&&(t=r.length),t-=e.length;var n=r.indexOf(e,t);return-1!==n&&n===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!==typeof e)throw new TypeError("predicate must be a function");for(var t,r=Object(this),n=r.length>>>0,a=arguments[1],s=0;s<n;s++)if(t=r[s],e.call(a,t,s,r))return t}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(e,t){var r=-1;function n(e,t,l){if(e==t)return e?[[0,e]]:[];(l<0||e.length<l)&&(l=null);var d=s(e,t),u=e.substring(0,d);d=i(e=e.substring(d),t=t.substring(d));var h=e.substring(e.length-d),m=function(e,t){var o;if(!e)return[[1,t]];if(!t)return[[r,e]];var l=e.length>t.length?e:t,c=e.length>t.length?t:e,d=l.indexOf(c);if(-1!=d)return o=[[1,l.substring(0,d)],[0,c],[1,l.substring(d+c.length)]],e.length>t.length&&(o[0][0]=o[2][0]=r),o;if(1==c.length)return[[r,e],[1,t]];var u=function(e,t){var r=e.length>t.length?e:t,n=e.length>t.length?t:e;if(r.length<4||2*n.length<r.length)return null;function a(e,t,r){for(var n,a,o,l,c=e.substring(r,r+Math.floor(e.length/4)),d=-1,u="";-1!=(d=t.indexOf(c,d+1));){var h=s(e.substring(r),t.substring(d)),m=i(e.substring(0,r),t.substring(0,d));u.length<m+h&&(u=t.substring(d-m,d)+t.substring(d,d+h),n=e.substring(0,r-m),a=e.substring(r+h),o=t.substring(0,d-m),l=t.substring(d+h))}return 2*u.length>=e.length?[n,a,o,l,u]:null}var o,l,c,d,u,h=a(r,n,Math.ceil(r.length/4)),m=a(r,n,Math.ceil(r.length/2));if(!h&&!m)return null;o=m?h&&h[4].length>m[4].length?h:m:h,e.length>t.length?(l=o[0],c=o[1],d=o[2],u=o[3]):(d=o[0],u=o[1],l=o[2],c=o[3]);var f=o[4];return[l,c,d,u,f]}(e,t);if(u){var h=u[0],m=u[1],f=u[2],p=u[3],g=u[4],x=n(h,f),y=n(m,p);return x.concat([[0,g]],y)}return function(e,t){for(var n=e.length,s=t.length,i=Math.ceil((n+s)/2),o=i,l=2*i,c=new Array(l),d=new Array(l),u=0;u<l;u++)c[u]=-1,d[u]=-1;c[o+1]=0,d[o+1]=0;for(var h=n-s,m=h%2!=0,f=0,p=0,g=0,x=0,y=0;y<i;y++){for(var b=-y+f;b<=y-p;b+=2){for(var v=o+b,w=(S=b==-y||b!=y&&c[v-1]<c[v+1]?c[v+1]:c[v-1]+1)-b;S<n&&w<s&&e.charAt(S)==t.charAt(w);)S++,w++;if(c[v]=S,S>n)p+=2;else if(w>s)f+=2;else if(m&&(N=o+h-b)>=0&&N<l&&-1!=d[N]&&S>=(k=n-d[N]))return a(e,t,S,w)}for(var j=-y+g;j<=y-x;j+=2){for(var k,N=o+j,_=(k=j==-y||j!=y&&d[N-1]<d[N+1]?d[N+1]:d[N-1]+1)-j;k<n&&_<s&&e.charAt(n-k-1)==t.charAt(s-_-1);)k++,_++;if(d[N]=k,k>n)x+=2;else if(_>s)g+=2;else if(!m){var S;if((v=o+h-j)>=0&&v<l&&-1!=c[v])if(w=o+(S=c[v])-v,S>=(k=n-k))return a(e,t,S,w)}}}return[[r,e],[1,t]]}(e,t)}(e=e.substring(0,e.length-d),t=t.substring(0,t.length-d));return u&&m.unshift([0,u]),h&&m.push([0,h]),o(m),null!=l&&(m=function(e,t){var n=function(e,t){if(0===t)return[0,e];for(var n=0,a=0;a<e.length;a++){var s=e[a];if(s[0]===r||0===s[0]){var i=n+s[1].length;if(t===i)return[a+1,e];if(t<i){e=e.slice();var o=t-n,l=[s[0],s[1].slice(0,o)],c=[s[0],s[1].slice(o)];return e.splice(a,1,l,c),[a+1,e]}n=i}}throw new Error("cursor_pos is out of bounds!")}(e,t),a=n[1],s=n[0],i=a[s],o=a[s+1];if(null==i)return e;if(0!==i[0])return e;if(null!=o&&i[1]+o[1]===o[1]+i[1])return a.splice(s,2,o,i),c(a,s,2);if(null!=o&&0===o[1].indexOf(i[1])){a.splice(s,2,[o[0],i[1]],[0,i[1]]);var l=o[1].slice(i[1].length);return l.length>0&&a.splice(s+2,0,[o[0],l]),c(a,s,3)}return e}(m,l)),m=function(e){for(var t=!1,n=function(e){return e.charCodeAt(0)>=56320&&e.charCodeAt(0)<=57343},a=function(e){return e.charCodeAt(e.length-1)>=55296&&e.charCodeAt(e.length-1)<=56319},s=2;s<e.length;s+=1)0===e[s-2][0]&&a(e[s-2][1])&&e[s-1][0]===r&&n(e[s-1][1])&&1===e[s][0]&&n(e[s][1])&&(t=!0,e[s-1][1]=e[s-2][1].slice(-1)+e[s-1][1],e[s][1]=e[s-2][1].slice(-1)+e[s][1],e[s-2][1]=e[s-2][1].slice(0,-1));if(!t)return e;var i=[];for(s=0;s<e.length;s+=1)e[s][1].length>0&&i.push(e[s]);return i}(m)}function a(e,t,r,a){var s=e.substring(0,r),i=t.substring(0,a),o=e.substring(r),l=t.substring(a),c=n(s,i),d=n(o,l);return c.concat(d)}function s(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var r=0,n=Math.min(e.length,t.length),a=n,s=0;r<a;)e.substring(s,a)==t.substring(s,a)?s=r=a:n=a,a=Math.floor((n-r)/2+r);return a}function i(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var r=0,n=Math.min(e.length,t.length),a=n,s=0;r<a;)e.substring(e.length-a,e.length-s)==t.substring(t.length-a,t.length-s)?s=r=a:n=a,a=Math.floor((n-r)/2+r);return a}function o(e){e.push([0,""]);for(var t,n=0,a=0,l=0,c="",d="";n<e.length;)switch(e[n][0]){case 1:l++,d+=e[n][1],n++;break;case r:a++,c+=e[n][1],n++;break;case 0:a+l>1?(0!==a&&0!==l&&(0!==(t=s(d,c))&&(n-a-l>0&&0==e[n-a-l-1][0]?e[n-a-l-1][1]+=d.substring(0,t):(e.splice(0,0,[0,d.substring(0,t)]),n++),d=d.substring(t),c=c.substring(t)),0!==(t=i(d,c))&&(e[n][1]=d.substring(d.length-t)+e[n][1],d=d.substring(0,d.length-t),c=c.substring(0,c.length-t))),0===a?e.splice(n-l,a+l,[1,d]):0===l?e.splice(n-a,a+l,[r,c]):e.splice(n-a-l,a+l,[r,c],[1,d]),n=n-a-l+(a?1:0)+(l?1:0)+1):0!==n&&0==e[n-1][0]?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,l=0,a=0,c="",d=""}""===e[e.length-1][1]&&e.pop();var u=!1;for(n=1;n<e.length-1;)0==e[n-1][0]&&0==e[n+1][0]&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),u=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),u=!0)),n++;u&&o(e)}var l=n;function c(e,t,r){for(var n=t+r-1;n>=0&&n>=t-1;n--)if(n+1<e.length){var a=e[n],s=e[n+1];a[0]===s[1]&&e.splice(n,2,[a[0],a[1]+s[1]])}return e}l.INSERT=1,l.DELETE=r,l.EQUAL=0,e.exports=l},function(e,t){function r(e){var t=[];for(var r in e)t.push(r);return t}(e.exports="function"===typeof Object.keys?Object.keys:r).shim=r},function(e,t){var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function a(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=r?n:a).supported=n,t.unsupported=a},function(e,t){"use strict";var r=Object.prototype.hasOwnProperty,n="~";function a(){}function s(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(n=!1)),i.prototype.eventNames=function(){var e,t,a=[];if(0===this._eventsCount)return a;for(t in e=this._events)r.call(e,t)&&a.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},i.prototype.listeners=function(e,t){var r=n?n+e:e,a=this._events[r];if(t)return!!a;if(!a)return[];if(a.fn)return[a.fn];for(var s=0,i=a.length,o=new Array(i);s<i;s++)o[s]=a[s].fn;return o},i.prototype.emit=function(e,t,r,a,s,i){var o=n?n+e:e;if(!this._events[o])return!1;var l,c,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,a),!0;case 5:return d.fn.call(d.context,t,r,a,s),!0;case 6:return d.fn.call(d.context,t,r,a,s,i),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var h,m=d.length;for(c=0;c<m;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,r);break;case 4:d[c].fn.call(d[c].context,t,r,a);break;default:if(!l)for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];d[c].fn.apply(d[c].context,l)}}return!0},i.prototype.on=function(e,t,r){var a=new s(t,r||this),i=n?n+e:e;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],a]:this._events[i].push(a):(this._events[i]=a,this._eventsCount++),this},i.prototype.once=function(e,t,r){var a=new s(t,r||this,!0),i=n?n+e:e;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],a]:this._events[i].push(a):(this._events[i]=a,this._eventsCount++),this},i.prototype.removeListener=function(e,t,r,s){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return 0===--this._eventsCount?this._events=new a:delete this._events[i],this;var o=this._events[i];if(o.fn)o.fn!==t||s&&!o.once||r&&o.context!==r||(0===--this._eventsCount?this._events=new a:delete this._events[i]);else{for(var l=0,c=[],d=o.length;l<d;l++)(o[l].fn!==t||s&&!o[l].once||r&&o[l].context!==r)&&c.push(o[l]);c.length?this._events[i]=1===c.length?c[0]:c:0===--this._eventsCount?this._events=new a:delete this._events[i]}return this},i.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&(0===--this._eventsCount?this._events=new a:delete this._events[t])):(this._events=new a,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=n,i.EventEmitter=i,"undefined"!==typeof e&&(e.exports=i)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchText=t.matchSpacing=t.matchNewline=t.matchBlot=t.matchAttributor=t.default=void 0;var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){a=!0,s=l}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=b(r(3)),o=b(r(2)),l=b(r(0)),c=b(r(5)),d=b(r(10)),u=b(r(9)),h=r(36),m=r(37),f=b(r(13)),p=r(26),g=r(38),x=r(39),y=r(40);function b(e){return e&&e.__esModule?e:{default:e}}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=(0,d.default)("quill:clipboard"),j="__ql-matcher",k=[[Node.TEXT_NODE,I],[Node.TEXT_NODE,R],["br",function(e,t){return C(t,"\n")||t.insert("\n"),t}],[Node.ELEMENT_NODE,R],[Node.ELEMENT_NODE,M],[Node.ELEMENT_NODE,D],[Node.ELEMENT_NODE,L],[Node.ELEMENT_NODE,function(e,t){var r={},n=e.style||{};return n.fontStyle&&"italic"===A(e).fontStyle&&(r.italic=!0),n.fontWeight&&(A(e).fontWeight.startsWith("bold")||parseInt(A(e).fontWeight)>=700)&&(r.bold=!0),Object.keys(r).length>0&&(t=E(t,r)),parseFloat(n.textIndent||0)>0&&(t=(new o.default).insert("\t").concat(t)),t}],["li",function(e,t){var r=l.default.query(e);if(null==r||"list-item"!==r.blotName||!C(t,"\n"))return t;for(var n=-1,a=e.parentNode;!a.classList.contains("ql-clipboard");)"list"===(l.default.query(a)||{}).blotName&&(n+=1),a=a.parentNode;return n<=0?t:t.compose((new o.default).retain(t.length()-1).retain(1,{indent:n}))}],["b",P.bind(P,"bold")],["i",P.bind(P,"italic")],["style",function(){return new o.default}]],N=[h.AlignAttribute,g.DirectionAttribute].reduce(function(e,t){return e[t.keyName]=t,e},{}),_=[h.AlignStyle,m.BackgroundStyle,p.ColorStyle,g.DirectionStyle,x.FontStyle,y.SizeStyle].reduce(function(e,t){return e[t.keyName]=t,e},{}),S=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.root.addEventListener("paste",n.onPaste.bind(n)),n.container=n.quill.addContainer("ql-clipboard"),n.container.setAttribute("contenteditable",!0),n.container.setAttribute("tabindex",-1),n.matchers=[],k.concat(n.options.matchers).forEach(function(e){var t=a(e,2),s=t[0],i=t[1];(r.matchVisual||i!==D)&&n.addMatcher(s,i)}),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"addMatcher",value:function(e,t){this.matchers.push([e,t])}},{key:"convert",value:function(e){if("string"===typeof e)return this.container.innerHTML=e.replace(/\>\r?\n +\</g,"><"),this.convert();var t=this.quill.getFormat(this.quill.selection.savedRange.index);if(t[f.default.blotName]){var r=this.container.innerText;return this.container.innerHTML="",(new o.default).insert(r,v({},f.default.blotName,t[f.default.blotName]))}var n=this.prepareMatching(),s=a(n,2),i=s[0],l=s[1],c=T(this.container,i,l);return C(c,"\n")&&null==c.ops[c.ops.length-1].attributes&&(c=c.compose((new o.default).retain(c.length()-1).delete(1))),w.log("convert",this.container.innerHTML,c),this.container.innerHTML="",c}},{key:"dangerouslyPasteHTML",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.default.sources.API;if("string"===typeof e)this.quill.setContents(this.convert(e),t),this.quill.setSelection(0,c.default.sources.SILENT);else{var n=this.convert(t);this.quill.updateContents((new o.default).retain(e).concat(n),r),this.quill.setSelection(e+n.length(),c.default.sources.SILENT)}}},{key:"onPaste",value:function(e){var t=this;if(!e.defaultPrevented&&this.quill.isEnabled()){var r=this.quill.getSelection(),n=(new o.default).retain(r.index),a=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(c.default.sources.SILENT),setTimeout(function(){n=n.concat(t.convert()).delete(r.length),t.quill.updateContents(n,c.default.sources.USER),t.quill.setSelection(n.length()-r.length,c.default.sources.SILENT),t.quill.scrollingContainer.scrollTop=a,t.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var e=this,t=[],r=[];return this.matchers.forEach(function(n){var s=a(n,2),i=s[0],o=s[1];switch(i){case Node.TEXT_NODE:r.push(o);break;case Node.ELEMENT_NODE:t.push(o);break;default:[].forEach.call(e.container.querySelectorAll(i),function(e){e[j]=e[j]||[],e[j].push(o)})}}),[t,r]}}]),t}(u.default);function E(e,t,r){return"object"===("undefined"===typeof t?"undefined":n(t))?Object.keys(t).reduce(function(e,r){return E(e,r,t[r])},e):e.reduce(function(e,n){return n.attributes&&n.attributes[t]?e.push(n):e.insert(n.insert,(0,i.default)({},v({},t,r),n.attributes))},new o.default)}function A(e){if(e.nodeType!==Node.ELEMENT_NODE)return{};var t="__ql-computed-style";return e[t]||(e[t]=window.getComputedStyle(e))}function C(e,t){for(var r="",n=e.ops.length-1;n>=0&&r.length<t.length;--n){var a=e.ops[n];if("string"!==typeof a.insert)break;r=a.insert+r}return r.slice(-1*t.length)===t}function O(e){if(0===e.childNodes.length)return!1;var t=A(e);return["block","list-item"].indexOf(t.display)>-1}function T(e,t,r){return e.nodeType===e.TEXT_NODE?r.reduce(function(t,r){return r(e,t)},new o.default):e.nodeType===e.ELEMENT_NODE?[].reduce.call(e.childNodes||[],function(n,a){var s=T(a,t,r);return a.nodeType===e.ELEMENT_NODE&&(s=t.reduce(function(e,t){return t(a,e)},s),s=(a[j]||[]).reduce(function(e,t){return t(a,e)},s)),n.concat(s)},new o.default):new o.default}function P(e,t,r){return E(r,e,!0)}function L(e,t){var r=l.default.Attributor.Attribute.keys(e),n=l.default.Attributor.Class.keys(e),a=l.default.Attributor.Style.keys(e),s={};return r.concat(n).concat(a).forEach(function(t){var r=l.default.query(t,l.default.Scope.ATTRIBUTE);null!=r&&(s[r.attrName]=r.value(e),s[r.attrName])||(null==(r=N[t])||r.attrName!==t&&r.keyName!==t||(s[r.attrName]=r.value(e)||void 0),null==(r=_[t])||r.attrName!==t&&r.keyName!==t||(r=_[t],s[r.attrName]=r.value(e)||void 0))}),Object.keys(s).length>0&&(t=E(t,s)),t}function M(e,t){var r=l.default.query(e);if(null==r)return t;if(r.prototype instanceof l.default.Embed){var n={},a=r.value(e);null!=a&&(n[r.blotName]=a,t=(new o.default).insert(n,r.formats(e)))}else"function"===typeof r.formats&&(t=E(t,r.blotName,r.formats(e)));return t}function R(e,t){return C(t,"\n")||(O(e)||t.length()>0&&e.nextSibling&&O(e.nextSibling))&&t.insert("\n"),t}function D(e,t){if(O(e)&&null!=e.nextElementSibling&&!C(t,"\n\n")){var r=e.offsetHeight+parseFloat(A(e).marginTop)+parseFloat(A(e).marginBottom);e.nextElementSibling.offsetTop>e.offsetTop+1.5*r&&t.insert("\n")}return t}function I(e,t){var r=e.data;if("O:P"===e.parentNode.tagName)return t.insert(r.trim());if(0===r.trim().length&&e.parentNode.classList.contains("ql-clipboard"))return t;if(!A(e.parentNode).whiteSpace.startsWith("pre")){var n=function(e,t){return(t=t.replace(/[^\u00a0]/g,"")).length<1&&e?" ":t};r=(r=r.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,n.bind(n,!0)),(null==e.previousSibling&&O(e.parentNode)||null!=e.previousSibling&&O(e.previousSibling))&&(r=r.replace(/^\s+/,n.bind(n,!1))),(null==e.nextSibling&&O(e.parentNode)||null!=e.nextSibling&&O(e.nextSibling))&&(r=r.replace(/\s+$/,n.bind(n,!1)))}return t.insert(r)}S.DEFAULTS={matchers:[],matchVisual:!0},t.default=S,t.matchAttributor=L,t.matchBlot=M,t.matchNewline=R,t.matchSpacing=D,t.matchText=I},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},i=r(6),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"optimize",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return s(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),t}(((n=i)&&n.__esModule?n:{default:n}).default);o.blotName="bold",o.tagName=["STRONG","B"],t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addControls=t.default=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){a=!0,s=l}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=d(r(2)),i=d(r(0)),o=d(r(5)),l=d(r(10)),c=d(r(9));function d(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var h=(0,l.default)("quill:toolbar"),m=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a,s=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));if(Array.isArray(s.options.container)){var i=document.createElement("div");p(i,s.options.container),e.container.parentNode.insertBefore(i,e.container),s.container=i}else"string"===typeof s.options.container?s.container=document.querySelector(s.options.container):s.container=s.options.container;return s.container instanceof HTMLElement?(s.container.classList.add("ql-toolbar"),s.controls=[],s.handlers={},Object.keys(s.options.handlers).forEach(function(e){s.addHandler(e,s.options.handlers[e])}),[].forEach.call(s.container.querySelectorAll("button, select"),function(e){s.attach(e)}),s.quill.on(o.default.events.EDITOR_CHANGE,function(e,t){e===o.default.events.SELECTION_CHANGE&&s.update(t)}),s.quill.on(o.default.events.SCROLL_OPTIMIZE,function(){var e=s.quill.selection.getRange(),t=n(e,1)[0];s.update(t)}),s):(a=h.error("Container required for toolbar",s.options),u(s,a))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"addHandler",value:function(e,t){this.handlers[e]=t}},{key:"attach",value:function(e){var t=this,r=[].find.call(e.classList,function(e){return 0===e.indexOf("ql-")});if(r){if(r=r.slice(3),"BUTTON"===e.tagName&&e.setAttribute("type","button"),null==this.handlers[r]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[r])return void h.warn("ignoring attaching to disabled format",r,e);if(null==i.default.query(r))return void h.warn("ignoring attaching to nonexistent format",r,e)}var a="SELECT"===e.tagName?"change":"click";e.addEventListener(a,function(a){var l=void 0;if("SELECT"===e.tagName){if(e.selectedIndex<0)return;var c=e.options[e.selectedIndex];l=!c.hasAttribute("selected")&&(c.value||!1)}else l=!e.classList.contains("ql-active")&&(e.value||!e.hasAttribute("value")),a.preventDefault();t.quill.focus();var d=t.quill.selection.getRange(),u=n(d,1)[0];if(null!=t.handlers[r])t.handlers[r].call(t,l);else if(i.default.query(r).prototype instanceof i.default.Embed){if(!(l=prompt("Enter "+r)))return;t.quill.updateContents((new s.default).retain(u.index).delete(u.length).insert(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},r,l)),o.default.sources.USER)}else t.quill.format(r,l,o.default.sources.USER);t.update(u)}),this.controls.push([r,e])}}},{key:"update",value:function(e){var t=null==e?{}:this.quill.getFormat(e);this.controls.forEach(function(r){var a=n(r,2),s=a[0],i=a[1];if("SELECT"===i.tagName){var o=void 0;if(null==e)o=null;else if(null==t[s])o=i.querySelector("option[selected]");else if(!Array.isArray(t[s])){var l=t[s];"string"===typeof l&&(l=l.replace(/\"/g,'\\"')),o=i.querySelector('option[value="'+l+'"]')}null==o?(i.value="",i.selectedIndex=-1):o.selected=!0}else if(null==e)i.classList.remove("ql-active");else if(i.hasAttribute("value")){var c=t[s]===i.getAttribute("value")||null!=t[s]&&t[s].toString()===i.getAttribute("value")||null==t[s]&&!i.getAttribute("value");i.classList.toggle("ql-active",c)}else i.classList.toggle("ql-active",null!=t[s])})}}]),t}(c.default);function f(e,t,r){var n=document.createElement("button");n.setAttribute("type","button"),n.classList.add("ql-"+t),null!=r&&(n.value=r),e.appendChild(n)}function p(e,t){Array.isArray(t[0])||(t=[t]),t.forEach(function(t){var r=document.createElement("span");r.classList.add("ql-formats"),t.forEach(function(e){if("string"===typeof e)f(r,e);else{var t=Object.keys(e)[0],n=e[t];Array.isArray(n)?function(e,t,r){var n=document.createElement("select");n.classList.add("ql-"+t),r.forEach(function(e){var t=document.createElement("option");!1!==e?t.setAttribute("value",e):t.setAttribute("selected","selected"),n.appendChild(t)}),e.appendChild(n)}(r,t,n):f(r,t,n)}}),e.appendChild(r)})}m.DEFAULTS={},m.DEFAULTS={container:null,handlers:{clean:function(){var e=this,t=this.quill.getSelection();if(null!=t)if(0==t.length){var r=this.quill.getFormat();Object.keys(r).forEach(function(t){null!=i.default.query(t,i.default.Scope.INLINE)&&e.quill.format(t,!1)})}else this.quill.removeFormat(t,o.default.sources.USER)},direction:function(e){var t=this.quill.getFormat().align;"rtl"===e&&null==t?this.quill.format("align","right",o.default.sources.USER):e||"right"!==t||this.quill.format("align",!1,o.default.sources.USER),this.quill.format("direction",e,o.default.sources.USER)},indent:function(e){var t=this.quill.getSelection(),r=this.quill.getFormat(t),n=parseInt(r.indent||0);if("+1"===e||"-1"===e){var a="+1"===e?1:-1;"rtl"===r.direction&&(a*=-1),this.quill.format("indent",n+a,o.default.sources.USER)}},link:function(e){!0===e&&(e=prompt("Enter link URL:")),this.quill.format("link",e,o.default.sources.USER)},list:function(e){var t=this.quill.getSelection(),r=this.quill.getFormat(t);"check"===e?"checked"===r.list||"unchecked"===r.list?this.quill.format("list",!1,o.default.sources.USER):this.quill.format("list","unchecked",o.default.sources.USER):this.quill.format("list",e,o.default.sources.USER)}}},t.default=m,t.addControls=p},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},i=r(28),o=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.label.innerHTML=r,n.container.classList.add("ql-color-picker"),[].slice.call(n.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(e){e.classList.add("ql-primary")}),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"buildItem",value:function(e){var r=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildItem",this).call(this,e);return r.style.backgroundColor=e.getAttribute("value")||"",r}},{key:"selectItem",value:function(e,r){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,r);var n=this.label.querySelector(".ql-color-label"),a=e&&e.getAttribute("data-value")||"";n&&("line"===n.tagName?n.style.stroke=a:n.style.fill=a)}}]),t}(((n=i)&&n.__esModule?n:{default:n}).default);t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},i=r(28),o=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.container.classList.add("ql-icon-picker"),[].forEach.call(n.container.querySelectorAll(".ql-picker-item"),function(e){e.innerHTML=r[e.getAttribute("data-value")||""]}),n.defaultItem=n.container.querySelector(".ql-selected"),n.selectItem(n.defaultItem),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"selectItem",value:function(e,r){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,r),e=e||this.defaultItem,this.label.innerHTML=e.innerHTML}}]),t}(((n=i)&&n.__esModule?n:{default:n}).default);t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.boundsContainer=r||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){n.root.style.marginTop=-1*n.quill.root.scrollTop+"px"}),this.hide()}return n(e,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(e){var t=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=t+"px",this.root.style.top=r+"px",this.root.classList.remove("ql-flip");var n=this.boundsContainer.getBoundingClientRect(),a=this.root.getBoundingClientRect(),s=0;if(a.right>n.right&&(s=n.right-a.right,this.root.style.left=t+s+"px"),a.left<n.left&&(s=n.left-a.left,this.root.style.left=t+s+"px"),a.bottom>n.bottom){var i=a.bottom-a.top,o=e.bottom-e.top+i;this.root.style.top=r-o+"px",this.root.classList.add("ql-flip")}return s}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){a=!0,s=l}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=m(r(3)),o=m(r(8)),l=r(43),c=m(l),d=m(r(27)),u=r(15),h=m(r(41));function m(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var x=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],y=function(e){function t(e,r){f(this,t),null!=r.modules.toolbar&&null==r.modules.toolbar.container&&(r.modules.toolbar.container=x);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.container.classList.add("ql-snow"),n}return g(t,e),s(t,[{key:"extendToolbar",value:function(e){e.container.classList.add("ql-snow"),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),h.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),h.default),this.tooltip=new b(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(t,r){e.handlers.link.call(e,!r.format.link)})}}]),t}(c.default);y.DEFAULTS=(0,i.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){if(e){var t=this.quill.getSelection();if(null==t||0==t.length)return;var r=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(r)&&0!==r.indexOf("mailto:")&&(r="mailto:"+r),this.quill.theme.tooltip.edit("link",r)}else this.quill.format("link",!1)}}}}});var b=function(e){function t(e,r){f(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.preview=n.root.querySelector("a.ql-preview"),n}return g(t,e),s(t,[{key:"listen",value:function(){var e=this;a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(t){e.root.classList.contains("ql-editing")?e.save():e.edit("link",e.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(t){if(null!=e.linkRange){var r=e.linkRange;e.restoreFocus(),e.quill.formatText(r,"link",!1,o.default.sources.USER),delete e.linkRange}t.preventDefault(),e.hide()}),this.quill.on(o.default.events.SELECTION_CHANGE,function(t,r,a){if(null!=t){if(0===t.length&&a===o.default.sources.USER){var s=e.quill.scroll.descendant(d.default,t.index),i=n(s,2),l=i[0],c=i[1];if(null!=l){e.linkRange=new u.Range(t.index-c,l.length());var h=d.default.formats(l.domNode);return e.preview.textContent=h,e.preview.setAttribute("href",h),e.show(),void e.position(e.quill.getBounds(e.linkRange))}}else delete e.linkRange;e.hide()}})}},{key:"show",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),t}(l.BaseTooltip);b.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),t.default=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=R(r(29)),a=r(36),s=r(38),i=r(64),o=R(r(65)),l=R(r(66)),c=r(67),d=R(c),u=r(37),h=r(26),m=r(39),f=r(40),p=R(r(56)),g=R(r(68)),x=R(r(27)),y=R(r(69)),b=R(r(70)),v=R(r(71)),w=R(r(72)),j=R(r(73)),k=r(13),N=R(k),_=R(r(74)),S=R(r(75)),E=R(r(57)),A=R(r(41)),C=R(r(28)),O=R(r(59)),T=R(r(60)),P=R(r(61)),L=R(r(108)),M=R(r(62));function R(e){return e&&e.__esModule?e:{default:e}}n.default.register({"attributors/attribute/direction":s.DirectionAttribute,"attributors/class/align":a.AlignClass,"attributors/class/background":u.BackgroundClass,"attributors/class/color":h.ColorClass,"attributors/class/direction":s.DirectionClass,"attributors/class/font":m.FontClass,"attributors/class/size":f.SizeClass,"attributors/style/align":a.AlignStyle,"attributors/style/background":u.BackgroundStyle,"attributors/style/color":h.ColorStyle,"attributors/style/direction":s.DirectionStyle,"attributors/style/font":m.FontStyle,"attributors/style/size":f.SizeStyle},!0),n.default.register({"formats/align":a.AlignClass,"formats/direction":s.DirectionClass,"formats/indent":i.IndentClass,"formats/background":u.BackgroundStyle,"formats/color":h.ColorStyle,"formats/font":m.FontClass,"formats/size":f.SizeClass,"formats/blockquote":o.default,"formats/code-block":N.default,"formats/header":l.default,"formats/list":d.default,"formats/bold":p.default,"formats/code":k.Code,"formats/italic":g.default,"formats/link":x.default,"formats/script":y.default,"formats/strike":b.default,"formats/underline":v.default,"formats/image":w.default,"formats/video":j.default,"formats/list/item":c.ListItem,"modules/formula":_.default,"modules/syntax":S.default,"modules/toolbar":E.default,"themes/bubble":L.default,"themes/snow":M.default,"ui/icons":A.default,"ui/picker":C.default,"ui/icon-picker":T.default,"ui/color-picker":O.default,"ui/tooltip":P.default},!0),t.default=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IndentClass=void 0;var n,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},i=r(0),o=(n=i)&&n.__esModule?n:{default:n},l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"add",value:function(e,r){if("+1"===r||"-1"===r){var n=this.value(e)||0;r="+1"===r?n+1:n-1}return 0===r?(this.remove(e),!0):s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e,r)}},{key:"canAdd",value:function(e,r){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,r)||s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,parseInt(r))}},{key:"value",value:function(e){return parseInt(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e))||void 0}}]),t}(o.default.Attributor.Class),c=new l("indent","ql-indent",{scope:o.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});t.IndentClass=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=r(4),s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=a)&&n.__esModule?n:{default:n}).default);s.blotName="blockquote",s.tagName="blockquote",t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(4),i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,null,[{key:"formats",value:function(e){return this.tagName.indexOf(e.tagName)+1}}]),t}(((n=s)&&n.__esModule?n:{default:n}).default);i.blotName="header",i.tagName=["H1","H2","H3","H4","H5","H6"],t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListItem=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},s=l(r(0)),i=l(r(4)),o=l(r(25));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),n(t,[{key:"format",value:function(e,r){e!==m.blotName||r?a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r):this.replaceWith(s.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(e,r){return this.parent.isolate(this.offset(this.parent),this.length()),e===this.parent.statics.blotName?(this.parent.replaceWith(e,r),this):(this.parent.unwrap(),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e,r))}}],[{key:"formats",value:function(e){return e.tagName===this.tagName?void 0:a(t.__proto__||Object.getPrototypeOf(t),"formats",this).call(this,e)}}]),t}(i.default);h.blotName="list-item",h.tagName="LI";var m=function(e){function t(e){c(this,t);var r=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=function(t){if(t.target.parentNode===e){var n=r.statics.formats(e),a=s.default.find(t.target);"checked"===n?a.format("list","unchecked"):"unchecked"===n&&a.format("list","checked")}};return e.addEventListener("touchstart",n),e.addEventListener("mousedown",n),r}return u(t,e),n(t,null,[{key:"create",value:function(e){var r="ordered"===e?"OL":"UL",n=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,r);return"checked"!==e&&"unchecked"!==e||n.setAttribute("data-checked","checked"===e),n}},{key:"formats",value:function(e){return"OL"===e.tagName?"ordered":"UL"===e.tagName?e.hasAttribute("data-checked")?"true"===e.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),n(t,[{key:"format",value:function(e,t){this.children.length>0&&this.children.tail.format(e,t)}},{key:"formats",value:function(){return e={},t=this.statics.blotName,r=this.statics.formats(this.domNode),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e;var e,t,r}},{key:"insertBefore",value:function(e,r){if(e instanceof h)a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r);else{var n=null==r?this.length():r.offset(this),s=this.split(n);s.parent.insertBefore(e,s)}}},{key:"optimize",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var r=this.next;null!=r&&r.prev===this&&r.statics.blotName===this.statics.blotName&&r.domNode.tagName===this.domNode.tagName&&r.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(r.moveChildren(this),r.remove())}},{key:"replace",value:function(e){if(e.statics.blotName!==this.statics.blotName){var r=s.default.create(this.statics.defaultChild);e.moveChildren(r),this.appendChild(r)}a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e)}}]),t}(o.default);m.blotName="list",m.scope=s.default.Scope.BLOCK_BLOT,m.tagName=["OL","UL"],m.defaultChild="list-item",m.allowedChildren=[h],t.ListItem=h,t.default=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=r(56),s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=a)&&n.__esModule?n:{default:n}).default);s.blotName="italic",s.tagName=["EM","I"],t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},i=r(6),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,null,[{key:"create",value:function(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):s(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e)}},{key:"formats",value:function(e){return"SUB"===e.tagName?"sub":"SUP"===e.tagName?"super":void 0}}]),t}(((n=i)&&n.__esModule?n:{default:n}).default);o.blotName="script",o.tagName=["SUB","SUP"],t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=r(6),s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=a)&&n.__esModule?n:{default:n}).default);s.blotName="strike",s.tagName="S",t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=r(6),s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=a)&&n.__esModule?n:{default:n}).default);s.blotName="underline",s.tagName="U",t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},i=r(0),o=(n=i)&&n.__esModule?n:{default:n},l=r(27),c=["alt","height","width"],d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"format",value:function(e,r){c.indexOf(e)>-1?r?this.domNode.setAttribute(e,r):this.domNode.removeAttribute(e):s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}],[{key:"create",value:function(e){var r=s(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"===typeof e&&r.setAttribute("src",this.sanitize(e)),r}},{key:"formats",value:function(e){return c.reduce(function(t,r){return e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t},{})}},{key:"match",value:function(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}},{key:"sanitize",value:function(e){return(0,l.sanitize)(e,["http","https","data"])?e:"//:0"}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(o.default.Embed);d.blotName="image",d.tagName="IMG",t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},i=r(4),o=r(27),l=(n=o)&&n.__esModule?n:{default:n},c=["height","width"],d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"format",value:function(e,r){c.indexOf(e)>-1?r?this.domNode.setAttribute(e,r):this.domNode.removeAttribute(e):s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}],[{key:"create",value:function(e){var r=s(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return r.setAttribute("frameborder","0"),r.setAttribute("allowfullscreen",!0),r.setAttribute("src",this.sanitize(e)),r}},{key:"formats",value:function(e){return c.reduce(function(t,r){return e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t},{})}},{key:"sanitize",value:function(e){return l.default.sanitize(e)}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(i.BlockEmbed);d.blotName="video",d.className="ql-video",d.tagName="IFRAME",t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormulaBlot=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},s=l(r(35)),i=l(r(5)),o=l(r(9));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),n(t,null,[{key:"create",value:function(e){var r=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"===typeof e&&(window.katex.render(e,r,{throwOnError:!1,errorColor:"#f00"}),r.setAttribute("data-value",e)),r}},{key:"value",value:function(e){return e.getAttribute("data-value")}}]),t}(s.default);h.blotName="formula",h.className="ql-formula",h.tagName="SPAN";var m=function(e){function t(){c(this,t);var e=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return e}return u(t,e),n(t,null,[{key:"register",value:function(){i.default.register(h,!0)}}]),t}(o.default);t.FormulaBlot=h,t.default=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CodeToken=t.CodeBlock=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},s=l(r(0)),i=l(r(5)),o=l(r(9));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),n(t,[{key:"replaceWith",value:function(e){this.domNode.textContent=this.domNode.textContent,this.attach(),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e)}},{key:"highlight",value:function(e){var t=this.domNode.textContent;this.cachedText!==t&&((t.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}}]),t}(l(r(13)).default);h.className="ql-syntax";var m=new s.default.Attributor.Class("token","hljs",{scope:s.default.Scope.INLINE}),f=function(e){function t(e,r){c(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));if("function"!==typeof n.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var a=null;return n.quill.on(i.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(a),a=setTimeout(function(){n.highlight(),a=null},n.options.interval)}),n.highlight(),n}return u(t,e),n(t,null,[{key:"register",value:function(){i.default.register(m,!0),i.default.register(h,!0)}}]),n(t,[{key:"highlight",value:function(){var e=this;if(!this.quill.selection.composing){this.quill.update(i.default.sources.USER);var t=this.quill.getSelection();this.quill.scroll.descendants(h).forEach(function(t){t.highlight(e.options.highlight)}),this.quill.update(i.default.sources.SILENT),null!=t&&this.quill.setSelection(t,i.default.sources.SILENT)}}}]),t}(o.default);f.DEFAULTS={highlight:null==window.hljs?null:function(e){return window.hljs.highlightAuto(e).value},interval:1e3},t.CodeBlock=h,t.CodeToken=m,t.default=f},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BubbleTooltip=void 0;var n=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=u(r(3)),i=u(r(8)),o=r(43),l=u(o),c=r(15),d=u(r(41));function u(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],g=function(e){function t(e,r){h(this,t),null!=r.modules.toolbar&&null==r.modules.toolbar.container&&(r.modules.toolbar.container=p);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.container.classList.add("ql-bubble"),n}return f(t,e),a(t,[{key:"extendToolbar",value:function(e){this.tooltip=new x(this.quill,this.options.bounds),this.tooltip.root.appendChild(e.container),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),d.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),d.default)}}]),t}(l.default);g.DEFAULTS=(0,s.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var x=function(e){function t(e,r){h(this,t);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.on(i.default.events.EDITOR_CHANGE,function(e,t,r,a){if(e===i.default.events.SELECTION_CHANGE)if(null!=t&&t.length>0&&a===i.default.sources.USER){n.show(),n.root.style.left="0px",n.root.style.width="",n.root.style.width=n.root.offsetWidth+"px";var s=n.quill.getLines(t.index,t.length);if(1===s.length)n.position(n.quill.getBounds(t));else{var o=s[s.length-1],l=n.quill.getIndex(o),d=Math.min(o.length()-1,t.index+t.length-l),u=n.quill.getBounds(new c.Range(l,d));n.position(u)}}else document.activeElement!==n.textbox&&n.quill.hasFocus()&&n.hide()}),n}return f(t,e),a(t,[{key:"listen",value:function(){var e=this;n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){e.root.classList.remove("ql-editing")}),this.quill.on(i.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!e.root.classList.contains("ql-hidden")){var t=e.quill.getSelection();null!=t&&e.position(e.quill.getBounds(t))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(e){var r=n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"position",this).call(this,e),a=this.root.querySelector(".ql-tooltip-arrow");if(a.style.marginLeft="",0===r)return r;a.style.marginLeft=-1*r-a.offsetWidth/2+"px"}}]),t}(o.BaseTooltip);x.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),t.BubbleTooltip=x,t.default=g},function(e,t,r){e.exports=r(63)}]).default},e.exports=t()},7685:(e,t,r)=>{var n=r(7937)(r(6552),"DataView");e.exports=n},7760:e=>{e.exports=function(e){return this.__data__.get(e)}},7784:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DEFAULT_ADS_CONFIG:()=>a,activateAd:()=>m,calculateExpirationDate:()=>d,deactivateExpiredAds:()=>p,executeExpirationEvents:()=>f,getAdsConfiguration:()=>i,getTimeRemaining:()=>h,initializeAdsConfiguration:()=>s,isAdExpired:()=>u,loadAndApplyAdsConfiguration:()=>l,saveAdsConfiguration:()=>o,trackAdClick:()=>c});var n=r(2555);const a={adsManager:{browsePageAd:{active:!0,image:null,description:"Browse Page Advertisement Space",runtime:"1 month",width:"300px",height:"600px",url:"",clicks:0,startDate:null,expirationDate:null,expirationEvents:["deactivate"]},favoriteAd:{active:!1,image:null,description:"",runtime:"1 month",width:"100%",height:"200px",url:"",clicks:0,startDate:null,expirationDate:null,expirationEvents:["deactivate"],notificationMethods:["notificationCenter"],notificationUsers:[]},messengerAd:{active:!1,image:null,description:"",runtime:"1 month",width:"250px",height:"400px",url:"",clicks:0,startDate:null,expirationDate:null,expirationEvents:["deactivate"],notificationMethods:["notificationCenter"],notificationUsers:[]},footerAd:{active:!1,logo:null,companyName:"",runtime:"1 month",url:"",clicks:0,startDate:null,expirationDate:null,expirationEvents:["deactivate"],notificationMethods:["notificationCenter"],notificationUsers:[]}},heroSectionEnabled:!0,featuredProductsEnabled:!0,categoriesShowcase:!0,testimonialSection:!1,footerEnabled:!0},s=()=>{try{console.log("\ud83d\udd27 Initializing ads configuration...");const t=localStorage.getItem("cataloro_site_config");let r={};if(t)try{r=JSON.parse(t)}catch(e){console.warn("\u26a0\ufe0f Invalid existing config, using defaults:",e),r={}}const s=(0,n.A)((0,n.A)((0,n.A)({},a),r),{},{adsManager:(0,n.A)((0,n.A)({},a.adsManager),r.adsManager||{})});return s.heroSectionEnabled=!0,localStorage.setItem("cataloro_site_config",JSON.stringify(s)),console.log("\u2705 Ads configuration initialized:",s),window.dispatchEvent(new CustomEvent("adsConfigUpdated",{detail:s.adsManager})),s}catch(e){return console.error("\u274c Failed to initialize ads configuration:",e),a}},i=()=>{try{const e=localStorage.getItem("cataloro_site_config");if(e){return JSON.parse(e).adsManager||a.adsManager}return a.adsManager}catch(e){return console.error("\u274c Failed to get ads configuration:",e),a.adsManager}},o=e=>{try{const t=JSON.parse(localStorage.getItem("cataloro_site_config")||"{}"),r=(0,n.A)((0,n.A)({},t),{},{adsManager:e,heroSectionEnabled:!0});return localStorage.setItem("cataloro_site_config",JSON.stringify(r)),window.dispatchEvent(new CustomEvent("adsConfigUpdated",{detail:e})),console.log("\u2705 Ads configuration saved:",e),!0}catch(t){return console.error("\u274c Failed to save ads configuration:",t),!1}},l=()=>{try{const e=s();return!1===e.heroSectionEnabled&&(e.heroSectionEnabled=!0,localStorage.setItem("cataloro_site_config",JSON.stringify(e))),console.log("\u2705 Ads configuration loaded and applied on startup"),e}catch(e){return console.warn("\u26a0\ufe0f Could not load ads configuration:",e),s()}},c=e=>{try{const t=JSON.parse(localStorage.getItem("cataloro_site_config")||"{}");if(t.adsManager&&t.adsManager[e])return t.adsManager[e].clicks=(t.adsManager[e].clicks||0)+1,localStorage.setItem("cataloro_site_config",JSON.stringify(t)),window.dispatchEvent(new CustomEvent("adClicked",{detail:{adType:e,clicks:t.adsManager[e].clicks}})),console.log("\ud83d\udd17 Ad click tracked: ".concat(e," (Total clicks: ").concat(t.adsManager[e].clicks,")")),t.adsManager[e].clicks}catch(t){console.error("\u274c Failed to track ad click:",t)}return 0},d=(e,t)=>{if(!e)return null;const r=new Date(e),n=new Date(r);if(t.startsWith("custom_")){const e=t.match(/custom_(\d+)d_(\d+)h_(\d+)m/);if(e){const t=parseInt(e[1])||0,r=parseInt(e[2])||0,a=parseInt(e[3])||0;return n.setDate(n.getDate()+t),n.setHours(n.getHours()+r),n.setMinutes(n.getMinutes()+a),n.toISOString()}}if(t.includes("days")||t.includes("hours")||t.includes("minutes")){const e=t.match(/(\d+)\s*days?/),r=t.match(/(\d+)\s*hours?/),a=t.match(/(\d+)\s*minutes?/),s=e?parseInt(e[1]):0,i=r?parseInt(r[1]):0,o=a?parseInt(a[1]):0;return n.setDate(n.getDate()+s),n.setHours(n.getHours()+i),n.setMinutes(n.getMinutes()+o),n.toISOString()}switch(t){case"1 minute":n.setMinutes(n.getMinutes()+1);break;case"5 minutes":n.setMinutes(n.getMinutes()+5);break;case"1 hour":n.setHours(n.getHours()+1);break;case"1 day":n.setDate(n.getDate()+1);break;case"1 week":n.setDate(n.getDate()+7);break;case"1 month":default:n.setMonth(n.getMonth()+1);break;case"3 months":n.setMonth(n.getMonth()+3);break;case"12 months":case"1 year":n.setFullYear(n.getFullYear()+1)}return n.toISOString()},u=e=>!!e.expirationDate&&new Date>new Date(e.expirationDate),h=e=>{if(!e)return null;const t=new Date,r=new Date(e)-t;if(r<=0)return{expired:!0};return{days:Math.floor(r/864e5),hours:Math.floor(r%864e5/36e5),minutes:Math.floor(r%36e5/6e4),seconds:Math.floor(r%6e4/1e3),expired:!1}},m=(e,t)=>{try{const r=JSON.parse(localStorage.getItem("cataloro_site_config")||"{}");r.adsManager||(r.adsManager={}),r.adsManager[e]||(r.adsManager[e]={});const a=(new Date).toISOString(),s=d(a,t.runtime||"1 month");return r.adsManager[e]=(0,n.A)((0,n.A)((0,n.A)({},r.adsManager[e]),t),{},{active:!0,startDate:a,expirationDate:s}),localStorage.setItem("cataloro_site_config",JSON.stringify(r)),window.dispatchEvent(new CustomEvent("adsConfigUpdated",{detail:r.adsManager})),console.log("\ud83d\udd52 Ad activated: ".concat(e," (Expires: ").concat(s,")")),!0}catch(r){return console.error("\u274c Failed to activate ad:",r),!1}},f=(e,t)=>{const r=t.expirationEvents||[];console.log("\ud83d\udd14 Executing expiration events for ".concat(e,":"),r),r.forEach(r=>{switch(r){case"notify":console.log("\ud83d\udce7 Sending admin notification for expired ad: ".concat(e)),window.dispatchEvent(new CustomEvent("adExpiredNotification",{detail:{adType:e,adConfig:t,message:'Advertisement "'.concat(e,'" has expired')}}));break;case"deactivate":console.log("\u274c Deactivating expired ad: ".concat(e));break;case"reset":console.log("\ud83d\udd04 Resetting duration for ad: ".concat(e));try{const t=JSON.parse(localStorage.getItem("cataloro_site_config")||"{}");if(t.adsManager&&t.adsManager[e]){const r=(new Date).toISOString(),n=t.adsManager[e].runtime,a=d(r,n);t.adsManager[e].startDate=r,t.adsManager[e].expirationDate=a,t.adsManager[e].active=!0,localStorage.setItem("cataloro_site_config",JSON.stringify(t)),window.dispatchEvent(new CustomEvent("adsConfigUpdated",{detail:t.adsManager})),console.log("\ud83d\udd04 Ad duration reset for ".concat(e," until:"),a)}}catch(n){console.error("Error resetting ad duration for ".concat(e,":"),n)}break;default:console.warn("Unknown expiration event: ".concat(r))}})},p=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{const t=JSON.parse(localStorage.getItem("cataloro_site_config")||"{}");if(!t.adsManager)return;let r=!1;return Object.keys(t.adsManager).forEach(n=>{const a=t.adsManager[n];if(a.active&&u(a)){var s,i;if(e)return void console.log("\ud83d\udd27 Skipping automatic expiration for ".concat(n," - manual admin control active"));f(n,a);const o=null===(s=a.expirationEvents)||void 0===s?void 0:s.includes("reset"),l=null===(i=a.expirationEvents)||void 0===i?void 0:i.includes("deactivate");o&&!l?console.log("\ud83d\udd04 Ad ".concat(n," expired but configured for reset - automatic reactivation handled")):(l||!o&&!l)&&(t.adsManager[n].active=!1,r=!0,console.log("\ud83d\udd52 Ad expired and automatically deactivated: ".concat(n," (can be manually reactivated by admin)")))}}),r&&(localStorage.setItem("cataloro_site_config",JSON.stringify(t)),window.dispatchEvent(new CustomEvent("adsConfigUpdated",{detail:t.adsManager}))),r}catch(t){return console.error("\u274c Failed to deactivate expired ads:",t),!1}}},7828:e=>{e.exports=function(){return[]}},7857:(e,t,r)=>{var n=r(3440),a=function(){var e=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!a&&a in e}},7937:(e,t,r)=>{var n=r(6954),a=r(4657);e.exports=function(e,t){var r=a(e,t);return n(r)?r:void 0}},7950:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(2730)},8114:e=>{e.exports=function(e,t){return e.has(t)}},8673:(e,t,r)=>{var n=r(3204),a=r(3713),s=r(6571);e.exports=function(e){return s(e)?n(e):a(e)}},8724:(e,t,r)=>{var n=r(7615),a=r(5051),s=r(2154),i=r(8734),o=r(2662);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=a,l.prototype.get=s,l.prototype.has=i,l.prototype.set=o,e.exports=l},8734:(e,t,r)=>{var n=r(5575),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:a.call(t,e)}},8853:(e,t,r)=>{"use strict";e.exports=r(7234)},8895:e=>{e.exports=function(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}},8902:(e,t,r)=>{var n=r(4816),a=r(6179),s=r(6704);function i(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}i.prototype.add=i.prototype.push=a,i.prototype.has=s,e.exports=i},9194:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},9394:(e,t,r)=>{var n=r(2622);e.exports=function(e){return n(this,e).has(e)}},9395:(e,t,r)=>{var n=r(4262),a=r(9621),s=r(8673);e.exports=function(e){return n(e,s,a)}},9621:(e,t,r)=>{var n=r(7529),a=r(7828),s=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(e){return null==e?[]:(e=Object(e),n(i(e),function(t){return s.call(e,t)}))}:a;e.exports=o},9812:(e,t,r)=>{var n=r(6552).Symbol;e.exports=n},9853:(e,t,r)=>{var n=r(6989);e.exports=function(e,t){return n(e,t)}},9935:(e,t,r)=>{var n=r(1340),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():a.call(t,r,1),--this.size,!0)}},9987:(e,t,r)=>{var n=r(9812),a=r(2929),s=r(3211),i=r(3668),o=r(4160),l=r(2074),c=n?n.prototype:void 0,d=c?c.valueOf:void 0;e.exports=function(e,t,r,n,c,u,h){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new a(e),new a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var m=o;case"[object Set]":var f=1&n;if(m||(m=l),e.size!=t.size&&!f)return!1;var p=h.get(e);if(p)return p==t;n|=2,h.set(e,t);var g=i(m(e),m(t),n,c,u,h);return h.delete(e),g;case"[object Symbol]":if(d)return d.call(e)==d.call(t)}return!1}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}r.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,a){if(1&a&&(n=this(n)),8&a)return n;if("object"===typeof n&&n){if(4&a&&n.__esModule)return n;if(16&a&&"function"===typeof n.then)return n}var s=Object.create(null);r.r(s);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&a&&n;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>n[e]);return i.default=()=>n,r.d(s,i),s}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce((t,n)=>(r.f[n](e,t),t),[])),r.u=e=>"static/js/"+e+".e68ce003.chunk.js",r.miniCssF=e=>{},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="cataloro-marketplace:";r.l=(n,a,s,i)=>{if(e[n])e[n].push(a);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+s){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.setAttribute("data-webpack",t+s),o.src=n),e[n]=[a];var h=(t,r)=>{o.onerror=o.onload=null,clearTimeout(m);var a=e[n];if(delete e[n],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach(e=>e(r)),t)return t(r)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.p="/",(()=>{var e={792:0};r.f.j=(t,n)=>{var a=r.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var s=new Promise((r,n)=>a=e[t]=[r,n]);n.push(a[2]=s);var i=r.p+r.u(t),o=new Error;r.l(i,n=>{if(r.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var s=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",o.name="ChunkLoadError",o.type=s,o.request=i,a[1](o)}},"chunk-"+t,t)}};var t=(t,n)=>{var a,s,i=n[0],o=n[1],l=n[2],c=0;if(i.some(t=>0!==e[t])){for(a in o)r.o(o,a)&&(r.m[a]=o[a]);if(l)l(r)}for(t&&t(n);c<i.length;c++)s=i[c],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0},n=self.webpackChunkcataloro_marketplace=self.webpackChunkcataloro_marketplace||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e={};r.r(e),r.d(e,{hasBrowserEnv:()=>zt,hasStandardBrowserEnv:()=>Ht,hasStandardBrowserWebWorkerEnv:()=>Wt,navigator:()=>Vt,origin:()=>Kt});var t={};r.r(t),r.d(t,{Decoder:()=>ds,Encoder:()=>ls,PacketType:()=>os,protocol:()=>is});var n,a=r(5043),s=r.t(a,2),i=r(4391),o=r(7950),l=r.t(o,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(n||(n={}));const d="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function m(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,r,n){return void 0===r&&(r=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function g(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function x(e,t,r,a){void 0===a&&(a={});let{window:s=document.defaultView,v5Compat:i=!1}=a,o=s.history,l=n.Pop,h=null,g=x();function x(){return(o.state||{idx:null}).idx}function y(){l=n.Pop;let e=x(),t=null==e?null:e-g;g=e,h&&h({action:l,location:v.location,delta:t})}function b(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,r="string"===typeof e?e:p(e);return r=r.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==g&&(g=0,o.replaceState(c({},o.state,{idx:g}),""));let v={get action(){return l},get location(){return e(s,o)},listen(e){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(d,y),h=e,()=>{s.removeEventListener(d,y),h=null}},createHref:e=>t(s,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=n.Push;let a=f(v.location,e,t);r&&r(a,e),g=x()+1;let c=m(a,g),d=v.createHref(a);try{o.pushState(c,"",d)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;s.location.assign(d)}i&&h&&h({action:l,location:v.location,delta:1})},replace:function(e,t){l=n.Replace;let a=f(v.location,e,t);r&&r(a,e),g=x();let s=m(a,g),c=v.createHref(a);o.replaceState(s,"",c),i&&h&&h({action:l,location:v.location,delta:0})},go:e=>o.go(e)};return v}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,r){return void 0===r&&(r="/"),v(e,t,r,!1)}function v(e,t,r,n){let a=M(("string"===typeof t?g(t):t).pathname||"/",r);if(null==a)return null;let s=w(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let i=null;for(let o=0;null==i&&o<s.length;++o){let e=L(a);i=T(s[o],e,n)}return i}function w(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let a=(e,a,s)=>{let i={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(u(i.relativePath.startsWith(n),'Absolute route path "'+i.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(n.length));let o=B([n,i.relativePath]),l=r.concat(i);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),w(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:O(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let n of j(e.path))a(e,t,n);else a(e,t)}),t}function j(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(0===n.length)return a?[s,""]:[s];let i=j(n.join("/")),o=[];return o.push(...i.map(e=>""===e?s:[s,e].join("/"))),a&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const k=/^:[\w-]+$/,N=3,_=2,S=1,E=10,A=-2,C=e=>"*"===e;function O(e,t){let r=e.split("/"),n=r.length;return r.some(C)&&(n+=A),t&&(n+=_),r.filter(e=>!C(e)).reduce((e,t)=>e+(k.test(t)?N:""===t?S:E),n)}function T(e,t,r){void 0===r&&(r=!1);let{routesMeta:n}=e,a={},s="/",i=[];for(let o=0;o<n.length;++o){let e=n[o],l=o===n.length-1,c="/"===s?t:t.slice(s.length)||"/",d=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&r&&!n[n.length-1].route.index&&(d=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(a,d.params),i.push({params:a,pathname:B([s,d.pathname]),pathnameBase:U(B([s,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(s=B([s,d.pathnameBase]))}return i}function P(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(n.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let s=new RegExp(a,t?void 0:"i");return[s,n]}(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),o=a.slice(1),l=n.reduce((e,t,r)=>{let{paramName:n,isOptional:a}=t;if("*"===n){let e=o[r]||"";i=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[r];return e[n]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:s,pathnameBase:i,pattern:e}}function L(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function M(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function R(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function I(e,t){let r=D(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}function F(e,t,r,n){let a;void 0===n&&(n=!1),"string"===typeof e?a=g(e):(a=c({},e),u(!a.pathname||!a.pathname.includes("?"),R("?","pathname","search",a)),u(!a.pathname||!a.pathname.includes("#"),R("#","pathname","hash",a)),u(!a.search||!a.search.includes("#"),R("#","search","hash",a)));let s,i=""===e||""===a.pathname,o=i?"/":a.pathname;if(null==o)s=r;else{let e=t.length-1;if(!n&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:r,search:n="",hash:a=""}="string"===typeof e?g(e):e,s=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:s,search:q(n),hash:z(a)}}(a,s),d=o&&"/"!==o&&o.endsWith("/"),h=(i||"."===o)&&r.endsWith("/");return l.pathname.endsWith("/")||!d&&!h||(l.pathname+="/"),l}const B=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),q=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function V(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const H=["post","put","patch","delete"],W=(new Set(H),["get",...H]);new Set(W),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K.apply(this,arguments)}const G=a.createContext(null);const Y=a.createContext(null);const $=a.createContext(null);const J=a.createContext(null);const Q=a.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=a.createContext(null);function X(){return null!=a.useContext(J)}function ee(){return X()||u(!1),a.useContext(J).location}function te(e){a.useContext($).static||a.useLayoutEffect(e)}function re(){let{isDataRoute:e}=a.useContext(Q);return e?function(){let{router:e}=fe(he.UseNavigateStable),t=ge(me.UseNavigateStable),r=a.useRef(!1);return te(()=>{r.current=!0}),a.useCallback(function(n,a){void 0===a&&(a={}),r.current&&("number"===typeof n?e.navigate(n):e.navigate(n,K({fromRouteId:t},a)))},[e,t])}():function(){X()||u(!1);let e=a.useContext(G),{basename:t,future:r,navigator:n}=a.useContext($),{matches:s}=a.useContext(Q),{pathname:i}=ee(),o=JSON.stringify(I(s,r.v7_relativeSplatPath)),l=a.useRef(!1);return te(()=>{l.current=!0}),a.useCallback(function(r,a){if(void 0===a&&(a={}),!l.current)return;if("number"===typeof r)return void n.go(r);let s=F(r,JSON.parse(o),i,"path"===a.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:B([t,s.pathname])),(a.replace?n.replace:n.push)(s,a.state,a)},[t,n,o,i,e])}()}const ne=a.createContext(null);function ae(){let{matches:e}=a.useContext(Q),t=e[e.length-1];return t?t.params:{}}function se(e,t){let{relative:r}=void 0===t?{}:t,{future:n}=a.useContext($),{matches:s}=a.useContext(Q),{pathname:i}=ee(),o=JSON.stringify(I(s,n.v7_relativeSplatPath));return a.useMemo(()=>F(e,JSON.parse(o),i,"path"===r),[e,o,i,r])}function ie(e,t,r,s){X()||u(!1);let{navigator:i}=a.useContext($),{matches:o}=a.useContext(Q),l=o[o.length-1],c=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,m=ee();if(t){var f;let e="string"===typeof t?g(t):t;"/"===d||(null==(f=e.pathname)?void 0:f.startsWith(d))||u(!1),h=e}else h=m;let p=h.pathname||"/",x=p;if("/"!==d){let e=d.replace(/^\//,"").split("/");x="/"+p.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=b(e,{pathname:x});let v=ue(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:B([d,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:B([d,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,r,s);return t&&v?a.createElement(J.Provider,{value:{location:K({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:n.Pop}},v):v}function oe(){let e=function(){var e;let t=a.useContext(Z),r=pe(me.UseRouteError),n=ge(me.UseRouteError);if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[n]}(),t=V(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n};return a.createElement(a.Fragment,null,a.createElement("h2",null,"Unexpected Application Error!"),a.createElement("h3",{style:{fontStyle:"italic"}},t),r?a.createElement("pre",{style:s},r):null,null)}const le=a.createElement(oe,null);class ce extends a.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?a.createElement(Q.Provider,{value:this.props.routeContext},a.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function de(e){let{routeContext:t,match:r,children:n}=e,s=a.useContext(G);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),a.createElement(Q.Provider,{value:t},n)}function ue(e,t,r,n){var s;if(void 0===t&&(t=[]),void 0===r&&(r=null),void 0===n&&(n=null),null==e){var i;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(i=n)&&i.v7_partialHydration&&0===t.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let o=e,l=null==(s=r)?void 0:s.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||u(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let a=0;a<o.length;a++){let e=o[a];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=a),e.route.id){let{loaderData:t,errors:n}=r,a=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||a){c=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight((e,n,s)=>{let i,u=!1,h=null,m=null;var f;r&&(i=l&&n.route.id?l[n.route.id]:void 0,h=n.route.errorElement||le,c&&(d<0&&0===s?(f="route-fallback",!1||xe[f]||(xe[f]=!0),u=!0,m=null):d===s&&(u=!0,m=n.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,s+1)),g=()=>{let t;return t=i?h:u?m:n.route.Component?a.createElement(n.route.Component,null):n.route.element?n.route.element:e,a.createElement(de,{match:n,routeContext:{outlet:e,matches:p,isDataRoute:null!=r},children:t})};return r&&(n.route.ErrorBoundary||n.route.errorElement||0===s)?a.createElement(ce,{location:r.location,revalidation:r.revalidation,component:h,error:i,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}var he=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(he||{}),me=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(me||{});function fe(e){let t=a.useContext(G);return t||u(!1),t}function pe(e){let t=a.useContext(Y);return t||u(!1),t}function ge(e){let t=function(){let e=a.useContext(Q);return e||u(!1),e}(),r=t.matches[t.matches.length-1];return r.route.id||u(!1),r.route.id}const xe={};function ye(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function be(e){let{to:t,replace:r,state:n,relative:s}=e;X()||u(!1);let{future:i,static:o}=a.useContext($),{matches:l}=a.useContext(Q),{pathname:c}=ee(),d=re(),h=F(t,I(l,i.v7_relativeSplatPath),c,"path"===s),m=JSON.stringify(h);return a.useEffect(()=>d(JSON.parse(m),{replace:r,state:n,relative:s}),[d,m,s,r,n]),null}function ve(e){return function(e){let t=a.useContext(Q).outlet;return t?a.createElement(ne.Provider,{value:e},t):t}(e.context)}function we(e){u(!1)}function je(e){let{basename:t="/",children:r=null,location:s,navigationType:i=n.Pop,navigator:o,static:l=!1,future:c}=e;X()&&u(!1);let d=t.replace(/^\/*/,"/"),h=a.useMemo(()=>({basename:d,navigator:o,static:l,future:K({v7_relativeSplatPath:!1},c)}),[d,c,o,l]);"string"===typeof s&&(s=g(s));let{pathname:m="/",search:f="",hash:p="",state:x=null,key:y="default"}=s,b=a.useMemo(()=>{let e=M(m,d);return null==e?null:{location:{pathname:e,search:f,hash:p,state:x,key:y},navigationType:i}},[d,m,f,p,x,y,i]);return null==b?null:a.createElement($.Provider,{value:h},a.createElement(J.Provider,{children:r,value:b}))}function ke(e){let{children:t,location:r}=e;return ie(Ne(t),r)}new Promise(()=>{});a.Component;function Ne(e,t){void 0===t&&(t=[]);let r=[];return a.Children.forEach(e,(e,n)=>{if(!a.isValidElement(e))return;let s=[...t,n];if(e.type===a.Fragment)return void r.push.apply(r,Ne(e.props.children,s));e.type!==we&&u(!1),e.props.index&&e.props.children&&u(!1);let i={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=Ne(e.props.children,s)),r.push(i)}),r}function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_e.apply(this,arguments)}function Se(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}function Ee(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(e=>[r,e]):[[r,n]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ae=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Ac){}new Map;const Ce=s.startTransition;l.flushSync,s.useId;function Oe(e){let{basename:t,children:r,future:n,window:s}=e,i=a.useRef();var o;null==i.current&&(i.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),x(function(e,t){let{pathname:r,search:n,hash:a}=e.location;return f("",{pathname:r,search:n,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:p(t)},null,o)));let l=i.current,[c,d]=a.useState({action:l.action,location:l.location}),{v7_startTransition:u}=n||{},h=a.useCallback(e=>{u&&Ce?Ce(()=>d(e)):d(e)},[d,u]);return a.useLayoutEffect(()=>l.listen(h),[l,h]),a.useEffect(()=>ye(n),[n]),a.createElement(je,{basename:t,children:r,location:c.location,navigationType:c.action,navigator:l,future:n})}const Te="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Pe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Le=a.forwardRef(function(e,t){let r,{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:m}=e,f=Se(e,Ae),{basename:g}=a.useContext($),x=!1;if("string"===typeof d&&Pe.test(d)&&(r=d,Te))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),r=M(t.pathname,g);t.origin===e.origin&&null!=r?d=r+t.search+t.hash:x=!0}catch(Ac){}let y=function(e,t){let{relative:r}=void 0===t?{}:t;X()||u(!1);let{basename:n,navigator:s}=a.useContext($),{hash:i,pathname:o,search:l}=se(e,{relative:r}),c=o;return"/"!==n&&(c="/"===o?n:B([n,o])),s.createHref({pathname:c,search:l,hash:i})}(d,{relative:s}),b=function(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=void 0===t?{}:t,c=re(),d=ee(),u=se(e,{relative:o});return a.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let r=void 0!==n?n:p(d)===p(u);c(e,{replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,n,s,r,e,i,o,l])}(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:m});return a.createElement("a",_e({},f,{href:r||y,onClick:x||i?n:function(e){n&&n(e),e.defaultPrevented||b(e)},ref:t,target:c}))});var Me,Re;function De(e){let t=a.useRef(Ee(e)),r=a.useRef(!1),n=ee(),s=a.useMemo(()=>function(e,t){let r=Ee(e);return t&&t.forEach((e,n)=>{r.has(n)||t.getAll(n).forEach(e=>{r.append(n,e)})}),r}(n.search,r.current?null:t.current),[n.search]),i=re(),o=a.useCallback((e,t)=>{const n=Ee("function"===typeof e?e(s):e);r.current=!0,i("?"+n,t)},[i,s]);return[s,o]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Me||(Me={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Re||(Re={}));var Ie=r(2555);function Fe(e,t){return function(){return e.apply(t,arguments)}}const{toString:Be}=Object.prototype,{getPrototypeOf:Ue}=Object,{iterator:qe,toStringTag:ze}=Symbol,Ve=(e=>t=>{const r=Be.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),He=e=>(e=e.toLowerCase(),t=>Ve(t)===e),We=e=>t=>typeof t===e,{isArray:Ke}=Array,Ge=We("undefined");function Ye(e){return null!==e&&!Ge(e)&&null!==e.constructor&&!Ge(e.constructor)&&Qe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const $e=He("ArrayBuffer");const Je=We("string"),Qe=We("function"),Ze=We("number"),Xe=e=>null!==e&&"object"===typeof e,et=e=>{if("object"!==Ve(e))return!1;const t=Ue(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(ze in e)&&!(qe in e)},tt=He("Date"),rt=He("File"),nt=He("Blob"),at=He("FileList"),st=He("URLSearchParams"),[it,ot,lt,ct]=["ReadableStream","Request","Response","Headers"].map(He);function dt(e,t){let r,n,{allOwnKeys:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Ke(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{if(Ye(e))return;const n=a?Object.getOwnPropertyNames(e):Object.keys(e),s=n.length;let i;for(r=0;r<s;r++)i=n[r],t.call(null,e[i],i,e)}}function ut(e,t){if(Ye(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n,a=r.length;for(;a-- >0;)if(n=r[a],t===n.toLowerCase())return n;return null}const ht="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,mt=e=>!Ge(e)&&e!==ht;const ft=(pt="undefined"!==typeof Uint8Array&&Ue(Uint8Array),e=>pt&&e instanceof pt);var pt;const gt=He("HTMLFormElement"),xt=(e=>{let{hasOwnProperty:t}=e;return(e,r)=>t.call(e,r)})(Object.prototype),yt=He("RegExp"),bt=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};dt(r,(r,a)=>{let s;!1!==(s=t(r,a,e))&&(n[a]=s||r)}),Object.defineProperties(e,n)};const vt=He("AsyncFunction"),wt=((e,t)=>{return e?setImmediate:t?(r="axios@".concat(Math.random()),n=[],ht.addEventListener("message",e=>{let{source:t,data:a}=e;t===ht&&a===r&&n.length&&n.shift()()},!1),e=>{n.push(e),ht.postMessage(r,"*")}):e=>setTimeout(e);var r,n})("function"===typeof setImmediate,Qe(ht.postMessage)),jt="undefined"!==typeof queueMicrotask?queueMicrotask.bind(ht):"undefined"!==typeof process&&process.nextTick||wt,kt={isArray:Ke,isArrayBuffer:$e,isBuffer:Ye,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Qe(e.append)&&("formdata"===(t=Ve(e))||"object"===t&&Qe(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&$e(e.buffer),t},isString:Je,isNumber:Ze,isBoolean:e=>!0===e||!1===e,isObject:Xe,isPlainObject:et,isEmptyObject:e=>{if(!Xe(e)||Ye(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(Ac){return!1}},isReadableStream:it,isRequest:ot,isResponse:lt,isHeaders:ct,isUndefined:Ge,isDate:tt,isFile:rt,isBlob:nt,isRegExp:yt,isFunction:Qe,isStream:e=>Xe(e)&&Qe(e.pipe),isURLSearchParams:st,isTypedArray:ft,isFileList:at,forEach:dt,merge:function e(){const{caseless:t}=mt(this)&&this||{},r={},n=(n,a)=>{const s=t&&ut(r,a)||a;et(r[s])&&et(n)?r[s]=e(r[s],n):et(n)?r[s]=e({},n):Ke(n)?r[s]=n.slice():r[s]=n};for(let a=0,s=arguments.length;a<s;a++)arguments[a]&&dt(arguments[a],n);return r},extend:function(e,t,r){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return dt(t,(t,n)=>{r&&Qe(t)?e[n]=Fe(t,r):e[n]=t},{allOwnKeys:n}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let a,s,i;const o={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),s=a.length;s-- >0;)i=a[s],n&&!n(i,e,t)||o[i]||(t[i]=e[i],o[i]=!0);e=!1!==r&&Ue(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:Ve,kindOfTest:He,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(Ke(e))return e;let t=e.length;if(!Ze(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[qe]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:gt,hasOwnProperty:xt,hasOwnProp:xt,reduceDescriptors:bt,freezeMethods:e=>{bt(e,(t,r)=>{if(Qe(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];Qe(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach(e=>{r[e]=!0})};return Ke(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:ut,global:ht,isContextDefined:mt,isSpecCompliantForm:function(e){return!!(e&&Qe(e.append)&&"FormData"===e[ze]&&e[qe])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(Xe(e)){if(t.indexOf(e)>=0)return;if(Ye(e))return e;if(!("toJSON"in e)){t[n]=e;const a=Ke(e)?[]:{};return dt(e,(e,t)=>{const s=r(e,n+1);!Ge(s)&&(a[t]=s)}),t[n]=void 0,a}}return e};return r(e,0)},isAsyncFn:vt,isThenable:e=>e&&(Xe(e)||Qe(e))&&Qe(e.then)&&Qe(e.catch),setImmediate:wt,asap:jt,isIterable:e=>null!=e&&Qe(e[qe])};function Nt(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}kt.inherits(Nt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:kt.toJSONObject(this.config),code:this.code,status:this.status}}});const _t=Nt.prototype,St={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{St[e]={value:e}}),Object.defineProperties(Nt,St),Object.defineProperty(_t,"isAxiosError",{value:!0}),Nt.from=(e,t,r,n,a,s)=>{const i=Object.create(_t);return kt.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),Nt.call(i,e.message,t,r,n,a),i.cause=e,i.name=e.name,s&&Object.assign(i,s),i};const Et=Nt;function At(e){return kt.isPlainObject(e)||kt.isArray(e)}function Ct(e){return kt.endsWith(e,"[]")?e.slice(0,-2):e}function Ot(e,t,r){return e?e.concat(t).map(function(e,t){return e=Ct(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const Tt=kt.toFlatObject(kt,{},null,function(e){return/^is[A-Z]/.test(e)});const Pt=function(e,t,r){if(!kt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=kt.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!kt.isUndefined(t[e])})).metaTokens,a=r.visitor||c,s=r.dots,i=r.indexes,o=(r.Blob||"undefined"!==typeof Blob&&Blob)&&kt.isSpecCompliantForm(t);if(!kt.isFunction(a))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(kt.isDate(e))return e.toISOString();if(kt.isBoolean(e))return e.toString();if(!o&&kt.isBlob(e))throw new Et("Blob is not supported. Use a Buffer instead.");return kt.isArrayBuffer(e)||kt.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,a){let o=e;if(e&&!a&&"object"===typeof e)if(kt.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(kt.isArray(e)&&function(e){return kt.isArray(e)&&!e.some(At)}(e)||(kt.isFileList(e)||kt.endsWith(r,"[]"))&&(o=kt.toArray(e)))return r=Ct(r),o.forEach(function(e,n){!kt.isUndefined(e)&&null!==e&&t.append(!0===i?Ot([r],n,s):null===i?r:r+"[]",l(e))}),!1;return!!At(e)||(t.append(Ot(a,r,s),l(e)),!1)}const d=[],u=Object.assign(Tt,{defaultVisitor:c,convertValue:l,isVisitable:At});if(!kt.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!kt.isUndefined(r)){if(-1!==d.indexOf(r))throw Error("Circular reference detected in "+n.join("."));d.push(r),kt.forEach(r,function(r,s){!0===(!(kt.isUndefined(r)||null===r)&&a.call(t,r,kt.isString(s)?s.trim():s,n,u))&&e(r,n?n.concat(s):[s])}),d.pop()}}(e),t};function Lt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Mt(e,t){this._pairs=[],e&&Pt(e,this,t)}const Rt=Mt.prototype;Rt.append=function(e,t){this._pairs.push([e,t])},Rt.toString=function(e){const t=e?function(t){return e.call(this,t,Lt)}:Lt;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Dt=Mt;function It(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ft(e,t,r){if(!t)return e;const n=r&&r.encode||It;kt.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let s;if(s=a?a(t,r):kt.isURLSearchParams(t)?t.toString():new Dt(t,r).toString(n),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const Bt=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){kt.forEach(this.handlers,function(t){null!==t&&e(t)})}},Ut={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qt={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Dt,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},zt="undefined"!==typeof window&&"undefined"!==typeof document,Vt="object"===typeof navigator&&navigator||void 0,Ht=zt&&(!Vt||["ReactNative","NativeScript","NS"].indexOf(Vt.product)<0),Wt="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Kt=zt&&window.location.href||"http://localhost",Gt=(0,Ie.A)((0,Ie.A)({},e),qt);const Yt=function(e){function t(e,r,n,a){let s=e[a++];if("__proto__"===s)return!0;const i=Number.isFinite(+s),o=a>=e.length;if(s=!s&&kt.isArray(n)?n.length:s,o)return kt.hasOwnProp(n,s)?n[s]=[n[s],r]:n[s]=r,!i;n[s]&&kt.isObject(n[s])||(n[s]=[]);return t(e,r,n[s],a)&&kt.isArray(n[s])&&(n[s]=function(e){const t={},r=Object.keys(e);let n;const a=r.length;let s;for(n=0;n<a;n++)s=r[n],t[s]=e[s];return t}(n[s])),!i}if(kt.isFormData(e)&&kt.isFunction(e.entries)){const r={};return kt.forEachEntry(e,(e,n)=>{t(function(e){return kt.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,r,0)}),r}return null};const $t={transitional:Ut,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,a=kt.isObject(e);a&&kt.isHTMLForm(e)&&(e=new FormData(e));if(kt.isFormData(e))return n?JSON.stringify(Yt(e)):e;if(kt.isArrayBuffer(e)||kt.isBuffer(e)||kt.isStream(e)||kt.isFile(e)||kt.isBlob(e)||kt.isReadableStream(e))return e;if(kt.isArrayBufferView(e))return e.buffer;if(kt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Pt(e,new Gt.classes.URLSearchParams,(0,Ie.A)({visitor:function(e,t,r,n){return Gt.isNode&&kt.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=kt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Pt(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||n?(t.setContentType("application/json",!1),function(e,t,r){if(kt.isString(e))try{return(t||JSON.parse)(e),kt.trim(e)}catch(Ac){if("SyntaxError"!==Ac.name)throw Ac}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||$t.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(kt.isResponse(e)||kt.isReadableStream(e))return e;if(e&&kt.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(Ac){if(r){if("SyntaxError"===Ac.name)throw Et.from(Ac,Et.ERR_BAD_RESPONSE,this,null,this.response);throw Ac}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gt.classes.FormData,Blob:Gt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};kt.forEach(["delete","get","head","post","put","patch"],e=>{$t.headers[e]={}});const Jt=$t,Qt=kt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Zt=Symbol("internals");function Xt(e){return e&&String(e).trim().toLowerCase()}function er(e){return!1===e||null==e?e:kt.isArray(e)?e.map(er):String(e)}function tr(e,t,r,n,a){return kt.isFunction(n)?n.call(this,t,r):(a&&(t=r),kt.isString(t)?kt.isString(n)?-1!==t.indexOf(n):kt.isRegExp(n)?n.test(t):void 0:void 0)}class rr{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function a(e,t,r){const a=Xt(t);if(!a)throw new Error("header name must be a non-empty string");const s=kt.findKey(n,a);(!s||void 0===n[s]||!0===r||void 0===r&&!1!==n[s])&&(n[s||t]=er(e))}const s=(e,t)=>kt.forEach(e,(e,r)=>a(e,r,t));if(kt.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(kt.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let r,n,a;return e&&e.split("\n").forEach(function(e){a=e.indexOf(":"),r=e.substring(0,a).trim().toLowerCase(),n=e.substring(a+1).trim(),!r||t[r]&&Qt[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t})(e),t);else if(kt.isObject(e)&&kt.isIterable(e)){let r,n,a={};for(const t of e){if(!kt.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[n=t[0]]=(r=a[n])?kt.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}s(a,t)}else null!=e&&a(t,e,r);return this}get(e,t){if(e=Xt(e)){const r=kt.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(kt.isFunction(t))return t.call(this,e,r);if(kt.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Xt(e)){const r=kt.findKey(this,e);return!(!r||void 0===this[r]||t&&!tr(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function a(e){if(e=Xt(e)){const a=kt.findKey(r,e);!a||t&&!tr(0,r[a],a,t)||(delete r[a],n=!0)}}return kt.isArray(e)?e.forEach(a):a(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const a=t[r];e&&!tr(0,this[a],a,e,!0)||(delete this[a],n=!0)}return n}normalize(e){const t=this,r={};return kt.forEach(this,(n,a)=>{const s=kt.findKey(r,a);if(s)return t[s]=er(n),void delete t[a];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(a):String(a).trim();i!==a&&delete t[a],t[i]=er(n),r[i]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return kt.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&kt.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,r]=e;return t+": "+r}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[Zt]=this[Zt]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=Xt(e);t[n]||(!function(e,t){const r=kt.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,a){return this[n].call(this,t,e,r,a)},configurable:!0})})}(r,e),t[n]=!0)}return kt.isArray(e)?e.forEach(n):n(e),this}}rr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),kt.reduceDescriptors(rr.prototype,(e,t)=>{let{value:r}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(e){this[n]=e}}}),kt.freezeMethods(rr);const nr=rr;function ar(e,t){const r=this||Jt,n=t||r,a=nr.from(n.headers);let s=n.data;return kt.forEach(e,function(e){s=e.call(r,s,a.normalize(),t?t.status:void 0)}),a.normalize(),s}function sr(e){return!(!e||!e.__CANCEL__)}function ir(e,t,r){Et.call(this,null==e?"canceled":e,Et.ERR_CANCELED,t,r),this.name="CanceledError"}kt.inherits(ir,Et,{__CANCEL__:!0});const or=ir;function lr(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new Et("Request failed with status code "+r.status,[Et.ERR_BAD_REQUEST,Et.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}const cr=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a,s=0,i=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=n[i];a||(a=l),r[s]=o,n[s]=l;let d=i,u=0;for(;d!==s;)u+=r[d++],d%=e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),l-a<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}};const dr=function(e,t){let r,n,a=0,s=1e3/t;const i=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();a=s,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[function(){const e=Date.now(),t=e-a;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=s?i(l,e):(r=l,n||(n=setTimeout(()=>{n=null,i(r)},s-t)))},()=>r&&i(r)]},ur=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=0;const a=cr(50,250);return dr(r=>{const s=r.loaded,i=r.lengthComputable?r.total:void 0,o=s-n,l=a(o);n=s;e({loaded:s,total:i,progress:i?s/i:void 0,bytes:o,rate:l||void 0,estimated:l&&i&&s<=i?(i-s)/l:void 0,event:r,lengthComputable:null!=i,[t?"download":"upload"]:!0})},r)},hr=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},mr=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return kt.asap(()=>e(...r))},fr=Gt.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Gt.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Gt.origin),Gt.navigator&&/(msie|trident)/i.test(Gt.navigator.userAgent)):()=>!0,pr=Gt.hasStandardBrowserEnv?{write(e,t,r,n,a,s){const i=[e+"="+encodeURIComponent(t)];kt.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),kt.isString(n)&&i.push("path="+n),kt.isString(a)&&i.push("domain="+a),!0===s&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function gr(e,t,r){let n=!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const xr=e=>e instanceof nr?(0,Ie.A)({},e):e;function yr(e,t){t=t||{};const r={};function n(e,t,r,n){return kt.isPlainObject(e)&&kt.isPlainObject(t)?kt.merge.call({caseless:n},e,t):kt.isPlainObject(t)?kt.merge({},t):kt.isArray(t)?t.slice():t}function a(e,t,r,a){return kt.isUndefined(t)?kt.isUndefined(e)?void 0:n(void 0,e,0,a):n(e,t,0,a)}function s(e,t){if(!kt.isUndefined(t))return n(void 0,t)}function i(e,t){return kt.isUndefined(t)?kt.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function o(r,a,s){return s in t?n(r,a):s in e?n(void 0,r):void 0}const l={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(e,t,r)=>a(xr(e),xr(t),0,!0)};return kt.forEach(Object.keys((0,Ie.A)((0,Ie.A)({},e),t)),function(n){const s=l[n]||a,i=s(e[n],t[n],n);kt.isUndefined(i)&&s!==o||(r[n]=i)}),r}const br=e=>{const t=yr({},e);let r,{data:n,withXSRFToken:a,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=nr.from(o),t.url=Ft(gr(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),kt.isFormData(n))if(Gt.hasStandardBrowserEnv||Gt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(r=o.getContentType())){const[e,...t]=r?r.split(";").map(e=>e.trim()).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(Gt.hasStandardBrowserEnv&&(a&&kt.isFunction(a)&&(a=a(t)),a||!1!==a&&fr(t.url))){const e=s&&i&&pr.read(i);e&&o.set(s,e)}return t},vr="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const n=br(e);let a=n.data;const s=nr.from(n.headers).normalize();let i,o,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:m}=n;function f(){c&&c(),d&&d(),n.cancelToken&&n.cancelToken.unsubscribe(i),n.signal&&n.signal.removeEventListener("abort",i)}let p=new XMLHttpRequest;function g(){if(!p)return;const n=nr.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());lr(function(e){t(e),f()},function(e){r(e),f()},{data:u&&"text"!==u&&"json"!==u?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:n,config:e,request:p}),p=null}p.open(n.method.toUpperCase(),n.url,!0),p.timeout=n.timeout,"onloadend"in p?p.onloadend=g:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(g)},p.onabort=function(){p&&(r(new Et("Request aborted",Et.ECONNABORTED,e,p)),p=null)},p.onerror=function(){r(new Et("Network Error",Et.ERR_NETWORK,e,p)),p=null},p.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const a=n.transitional||Ut;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new Et(t,a.clarifyTimeoutError?Et.ETIMEDOUT:Et.ECONNABORTED,e,p)),p=null},void 0===a&&s.setContentType(null),"setRequestHeader"in p&&kt.forEach(s.toJSON(),function(e,t){p.setRequestHeader(t,e)}),kt.isUndefined(n.withCredentials)||(p.withCredentials=!!n.withCredentials),u&&"json"!==u&&(p.responseType=n.responseType),m&&([l,d]=ur(m,!0),p.addEventListener("progress",l)),h&&p.upload&&([o,c]=ur(h),p.upload.addEventListener("progress",o),p.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(i=t=>{p&&(r(!t||t.type?new or(null,e,p):t),p.abort(),p=null)},n.cancelToken&&n.cancelToken.subscribe(i),n.signal&&(n.signal.aborted?i():n.signal.addEventListener("abort",i)));const x=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);x&&-1===Gt.protocols.indexOf(x)?r(new Et("Unsupported protocol "+x+":",Et.ERR_BAD_REQUEST,e)):p.send(a||null)})},wr=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const a=function(e){if(!r){r=!0,i();const t=e instanceof Error?e:this.reason;n.abort(t instanceof Et?t:new or(t instanceof Error?t.message:t))}};let s=t&&setTimeout(()=>{s=null,a(new Et("timeout ".concat(t," of ms exceeded"),Et.ETIMEDOUT))},t);const i=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)}),e=null)};e.forEach(e=>e.addEventListener("abort",a));const{signal:o}=n;return o.unsubscribe=()=>kt.asap(i),o}};function jr(e,t){this.v=e,this.k=t}function kr(e){return function(){return new Nr(e.apply(this,arguments))}}function Nr(e){var t,r;function n(t,r){try{var s=e[t](r),i=s.value,o=i instanceof jr;Promise.resolve(o?i.v:i).then(function(r){if(o){var l="return"===t?"return":"next";if(!i.k||r.done)return n(l,r);r=e[l](r).value}a(s.done?"return":"normal",r)},function(e){n("throw",e)})}catch(e){a("throw",e)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,a){return new Promise(function(s,i){var o={key:e,arg:a,resolve:s,reject:i,next:null};r?r=r.next=o:(t=r=o,n(e,a))})},"function"!=typeof e.return&&(this.return=void 0)}function _r(e){return new jr(e,0)}function Sr(e){var t={},r=!1;function n(t,n){return r=!0,n=new Promise(function(r){r(e[t](n))}),{done:!1,value:new jr(n,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):n("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return n("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):n("return",e)}),t}function Er(e){var t,r,n,a=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);a--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new Ar(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Ar(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Ar=function(e){this.s=e,this.n=e.next},Ar.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Ar(e)}Nr.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Nr.prototype.next=function(e){return this._invoke("next",e)},Nr.prototype.throw=function(e){return this._invoke("throw",e)},Nr.prototype.return=function(e){return this._invoke("return",e)};const Cr=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let n,a=0;for(;a<r;)n=a+t,yield e.slice(a,n),a=n},Or=function(){var e=kr(function*(e,t){var r,n=!1,a=!1;try{for(var s,i=Er(Tr(e));n=!(s=yield _r(i.next())).done;n=!1){const e=s.value;yield*Sr(Er(Cr(e,t)))}}catch(o){a=!0,r=o}finally{try{n&&null!=i.return&&(yield _r(i.return()))}finally{if(a)throw r}}});return function(t,r){return e.apply(this,arguments)}}(),Tr=function(){var e=kr(function*(e){if(e[Symbol.asyncIterator])return void(yield*Sr(Er(e)));const t=e.getReader();try{for(;;){const{done:e,value:r}=yield _r(t.read());if(e)break;yield r}}finally{yield _r(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),Pr=(e,t,r,n)=>{const a=Or(e,t);let s,i=0,o=e=>{s||(s=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await a.next();if(t)return o(),void e.close();let s=n.byteLength;if(r){let e=i+=s;r(e)}e.enqueue(new Uint8Array(n))}catch(t){throw o(t),t}},cancel:e=>(o(e),a.return())},{highWaterMark:2})},Lr="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Mr=Lr&&"function"===typeof ReadableStream,Rr=Lr&&("function"===typeof TextEncoder?(Dr=new TextEncoder,e=>Dr.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Dr;const Ir=function(e){try{for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return!!e(...r)}catch(Ac){return!1}},Fr=Mr&&Ir(()=>{let e=!1;const t=new Request(Gt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Br=Mr&&Ir(()=>kt.isReadableStream(new Response("").body)),Ur={stream:Br&&(e=>e.body)};var qr;Lr&&(qr=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Ur[e]&&(Ur[e]=kt.isFunction(qr[e])?t=>t[e]():(t,r)=>{throw new Et("Response type '".concat(e,"' is not supported"),Et.ERR_NOT_SUPPORT,r)})}));const zr=async(e,t)=>{const r=kt.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(kt.isBlob(e))return e.size;if(kt.isSpecCompliantForm(e)){const t=new Request(Gt.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return kt.isArrayBufferView(e)||kt.isArrayBuffer(e)?e.byteLength:(kt.isURLSearchParams(e)&&(e+=""),kt.isString(e)?(await Rr(e)).byteLength:void 0)})(t):r},Vr=Lr&&(async e=>{let{url:t,method:r,data:n,signal:a,cancelToken:s,timeout:i,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:d,withCredentials:u="same-origin",fetchOptions:h}=br(e);c=c?(c+"").toLowerCase():"text";let m,f=wr([a,s&&s.toAbortSignal()],i);const p=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(l&&Fr&&"get"!==r&&"head"!==r&&0!==(g=await zr(d,n))){let e,r=new Request(t,{method:"POST",body:n,duplex:"half"});if(kt.isFormData(n)&&(e=r.headers.get("content-type"))&&d.setContentType(e),r.body){const[e,t]=hr(g,ur(mr(l)));n=Pr(r.body,65536,e,t)}}kt.isString(u)||(u=u?"include":"omit");const a="credentials"in Request.prototype;m=new Request(t,(0,Ie.A)((0,Ie.A)({},h),{},{signal:f,method:r.toUpperCase(),headers:d.normalize().toJSON(),body:n,duplex:"half",credentials:a?u:void 0}));let s=await fetch(m,h);const i=Br&&("stream"===c||"response"===c);if(Br&&(o||i&&p)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=s[t]});const t=kt.toFiniteNumber(s.headers.get("content-length")),[r,n]=o&&hr(t,ur(mr(o),!0))||[];s=new Response(Pr(s.body,65536,r,()=>{n&&n(),p&&p()}),e)}c=c||"text";let x=await Ur[kt.findKey(Ur,c)||"text"](s,e);return!i&&p&&p(),await new Promise((t,r)=>{lr(t,r,{data:x,headers:nr.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:m})})}catch(x){if(p&&p(),x&&"TypeError"===x.name&&/Load failed|fetch/i.test(x.message))throw Object.assign(new Et("Network Error",Et.ERR_NETWORK,e,m),{cause:x.cause||x});throw Et.from(x,x&&x.code,e,m)}}),Hr={http:null,xhr:vr,fetch:Vr};kt.forEach(Hr,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Ac){}Object.defineProperty(e,"adapterName",{value:t})}});const Wr=e=>"- ".concat(e),Kr=e=>kt.isFunction(e)||null===e||!1===e,Gr=e=>{e=kt.isArray(e)?e:[e];const{length:t}=e;let r,n;const a={};for(let s=0;s<t;s++){let t;if(r=e[s],n=r,!Kr(r)&&(n=Hr[(t=String(r)).toLowerCase()],void 0===n))throw new Et("Unknown adapter '".concat(t,"'"));if(n)break;a[t||"#"+s]=n}if(!n){const e=Object.entries(a).map(e=>{let[t,r]=e;return"adapter ".concat(t," ")+(!1===r?"is not supported by the environment":"is not available in the build")});let r=t?e.length>1?"since :\n"+e.map(Wr).join("\n"):" "+Wr(e[0]):"as no adapter specified";throw new Et("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return n};function Yr(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new or(null,e)}function $r(e){Yr(e),e.headers=nr.from(e.headers),e.data=ar.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Gr(e.adapter||Jt.adapter)(e).then(function(t){return Yr(e),t.data=ar.call(e,e.transformResponse,t),t.headers=nr.from(t.headers),t},function(t){return sr(t)||(Yr(e),t&&t.response&&(t.response.data=ar.call(e,e.transformResponse,t.response),t.response.headers=nr.from(t.response.headers))),Promise.reject(t)})}const Jr="1.11.0",Qr={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Qr[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Zr={};Qr.transitional=function(e,t,r){function n(e,t){return"[Axios v"+Jr+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,a,s)=>{if(!1===e)throw new Et(n(a," has been removed"+(t?" in "+t:"")),Et.ERR_DEPRECATED);return t&&!Zr[a]&&(Zr[a]=!0,console.warn(n(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,a,s)}},Qr.spelling=function(e){return(t,r)=>(console.warn("".concat(r," is likely a misspelling of ").concat(e)),!0)};const Xr={assertOptions:function(e,t,r){if("object"!==typeof e)throw new Et("options must be an object",Et.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const s=n[a],i=t[s];if(i){const t=e[s],r=void 0===t||i(t,s,e);if(!0!==r)throw new Et("option "+s+" must be "+r,Et.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new Et("Unknown option "+s,Et.ERR_BAD_OPTION)}},validators:Qr},en=Xr.validators;class tn{constructor(e){this.defaults=e||{},this.interceptors={request:new Bt,response:new Bt}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(Ac){}}throw r}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=yr(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:a}=t;void 0!==r&&Xr.assertOptions(r,{silentJSONParsing:en.transitional(en.boolean),forcedJSONParsing:en.transitional(en.boolean),clarifyTimeoutError:en.transitional(en.boolean)},!1),null!=n&&(kt.isFunction(n)?t.paramsSerializer={serialize:n}:Xr.assertOptions(n,{encode:en.function,serialize:en.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Xr.assertOptions(t,{baseUrl:en.spelling("baseURL"),withXsrfToken:en.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=a&&kt.merge(a.common,a[t.method]);a&&kt.forEach(["delete","get","head","post","put","patch","common"],e=>{delete a[e]}),t.headers=nr.concat(s,a);const i=[];let o=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,u=0;if(!o){const e=[$r.bind(this),void 0];for(e.unshift(...i),e.push(...l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let h=t;for(u=0;u<d;){const e=i[u++],t=i[u++];try{h=e(h)}catch(m){t.call(this,m);break}}try{c=$r.call(this,h)}catch(m){return Promise.reject(m)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return Ft(gr((e=yr(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}kt.forEach(["delete","get","head","options"],function(e){tn.prototype[e]=function(t,r){return this.request(yr(r||{},{method:e,url:t,data:(r||{}).data}))}}),kt.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,a){return this.request(yr(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}tn.prototype[e]=t(),tn.prototype[e+"Form"]=t(!0)});const rn=tn;class nn{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,a){r.reason||(r.reason=new or(e,n,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new nn(function(t){e=t}),cancel:e}}}const an=nn;const sn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(sn).forEach(e=>{let[t,r]=e;sn[r]=t});const on=sn;const ln=function e(t){const r=new rn(t),n=Fe(rn.prototype.request,r);return kt.extend(n,rn.prototype,r,{allOwnKeys:!0}),kt.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(yr(t,r))},n}(Jt);ln.Axios=rn,ln.CanceledError=or,ln.CancelToken=an,ln.isCancel=sr,ln.VERSION=Jr,ln.toFormData=Pt,ln.AxiosError=Et,ln.Cancel=ln.CanceledError,ln.all=function(e){return Promise.all(e)},ln.spread=function(e){return function(t){return e.apply(null,t)}},ln.isAxiosError=function(e){return kt.isObject(e)&&!0===e.isAxiosError},ln.mergeConfig=yr,ln.AxiosHeaders=nr,ln.formToJSON=e=>Yt(kt.isHTMLForm(e)?new FormData(e):e),ln.getAdapter=Gr,ln.HttpStatusCode=on,ln.default=ln;const cn=ln,dn={development:{BACKEND_URL:"https://market-refactor-1.preview.emergentagent.com",FRONTEND_URL:"https://market-refactor-1.preview.emergentagent.com"},production:{BACKEND_URL:"https://market-refactor-1.preview.emergentagent.com",FRONTEND_URL:"http://217.154.0.82"}},un=dn.production,hn={API_BASE_URL:un.BACKEND_URL},mn={AUTH:{LOGIN:"".concat(un.BACKEND_URL,"/api/auth/login"),REGISTER:"".concat(un.BACKEND_URL,"/api/auth/register"),LOGOUT:"".concat(un.BACKEND_URL,"/api/auth/logout"),PROFILE:"".concat(un.BACKEND_URL,"/api/auth/profile"),REFRESH:"".concat(un.BACKEND_URL,"/api/auth/refresh")},MARKETPLACE:{LISTINGS:"".concat(un.BACKEND_URL,"/api/listings"),BROWSE:"".concat(un.BACKEND_URL,"/api/marketplace/browse"),FAVORITES:"".concat(un.BACKEND_URL,"/api/marketplace/favorites"),SEARCH:"".concat(un.BACKEND_URL,"/api/marketplace/search")},USER:{MY_LISTINGS:"".concat(un.BACKEND_URL,"/api/user/my-listings/{user_id}"),MY_DEALS:"".concat(un.BACKEND_URL,"/api/user/my-deals/{user_id}"),NOTIFICATIONS:"".concat(un.BACKEND_URL,"/api/user/{user_id}/notifications"),PROFILE:"".concat(un.BACKEND_URL,"/api/user/profile")},ADMIN:{DASHBOARD:"".concat(un.BACKEND_URL,"/api/admin/dashboard"),USERS:"".concat(un.BACKEND_URL,"/api/admin/users"),SETTINGS:"".concat(un.BACKEND_URL,"/api/admin/settings"),KPIS:"".concat(un.BACKEND_URL,"/api/admin/kpis"),LOGO:"".concat(un.BACKEND_URL,"/api/admin/logo")}},fn={HOME:"/",BROWSE:"/browse",MY_LISTINGS:"/my-listings",TENDERS:"/tenders",MY_TENDERS:"/my-tenders",ADMIN_PANEL:"/admin",FAVORITES:"/favorites",NOTIFICATIONS:"/notifications",PROFILE:"/profile",LOGIN:"/login",REGISTER:"/register",INFO:"/info"},pn={APP_NAME:"Cataloro",LOGO_URL:"/assets/logo.png",DEFAULT_AVATAR:"/assets/default-avatar.png",PAGINATION_SIZE:12,NOTIFICATION_TIMEOUT:5e3},gn={USER:"user",ADMIN:"admin",MODERATOR:"moderator"};const xn=new class{constructor(){cn.defaults.timeout=1e4,cn.interceptors.request.use(e=>{const t=localStorage.getItem("cataloro_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),cn.interceptors.response.use(e=>e,e=>{var t;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(localStorage.removeItem("cataloro_token"),localStorage.removeItem("cataloro_user"),window.location.href="/login"),Promise.reject(e)})}async login(e,t){try{return(await cn.post(mn.AUTH.LOGIN,{email:e,password:t})).data}catch(a){var r,n;throw new Error((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||"Login failed")}}async register(e){try{return(await cn.post(mn.AUTH.REGISTER,e)).data}catch(n){var t,r;throw new Error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Registration failed")}}async logout(){try{await cn.post(mn.AUTH.LOGOUT)}catch(e){console.error("Logout error:",e)}finally{localStorage.removeItem("cataloro_token"),localStorage.removeItem("cataloro_user")}}async getProfile(e){try{return(await cn.get(mn.AUTH.PROFILE.replace("{user_id}",e))).data}catch(n){var t,r;throw new Error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to fetch profile")}}async refreshToken(){try{const e=await cn.post(mn.AUTH.REFRESH),{token:t}=e.data;return localStorage.setItem("cataloro_token",t),t}catch(e){throw new Error("Token refresh failed")}}isAuthenticated(){return!!localStorage.getItem("cataloro_token")}getCurrentUser(){try{const e=localStorage.getItem("cataloro_user");return e?JSON.parse(e):null}catch(e){return console.error("Error parsing user data:",e),null}}getToken(){return localStorage.getItem("cataloro_token")}};var yn=r(579);const bn={user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null},vn="LOGIN_START",wn="LOGIN_SUCCESS",jn="LOGIN_FAILURE",kn="LOGOUT",Nn="SET_USER",_n="CLEAR_ERROR";function Sn(e,t){switch(t.type){case vn:return(0,Ie.A)((0,Ie.A)({},e),{},{isLoading:!0,error:null});case wn:return(0,Ie.A)((0,Ie.A)({},e),{},{user:t.payload.user,token:t.payload.token,isAuthenticated:!0,isLoading:!1,error:null});case jn:return(0,Ie.A)((0,Ie.A)({},e),{},{user:null,token:null,isAuthenticated:!1,isLoading:!1,error:t.payload});case kn:return(0,Ie.A)({},bn);case Nn:return(0,Ie.A)((0,Ie.A)({},e),{},{user:t.payload});case _n:return(0,Ie.A)((0,Ie.A)({},e),{},{error:null});default:return e}}const En=(0,a.createContext)();function An(e){let{children:t}=e;const[r,n]=(0,a.useReducer)(Sn,bn);(0,a.useEffect)(()=>{const e=localStorage.getItem("cataloro_token"),t=localStorage.getItem("cataloro_user");if(e&&t)try{n({type:wn,payload:{token:e,user:JSON.parse(t)}})}catch(r){console.error("Error parsing stored user data:",r),localStorage.removeItem("cataloro_token"),localStorage.removeItem("cataloro_user")}},[]);const s=async(e,t)=>{n({type:vn});try{const r=await xn.login(e,t);return localStorage.setItem("cataloro_token",r.token),localStorage.setItem("cataloro_user",JSON.stringify(r.user)),n({type:wn,payload:r}),r}catch(r){throw n({type:jn,payload:r.message}),r}},i=()=>{var e;return(null===(e=r.user)||void 0===e?void 0:e.role)===gn.ADMIN},o=(0,Ie.A)((0,Ie.A)({},r),{},{login:s,register:async e=>{n({type:vn});try{const t=await xn.register(e);return t.user_id?await s(e.email,e.password):t}catch(t){throw n({type:jn,payload:t.message}),t}},logout:()=>{localStorage.removeItem("cataloro_token"),localStorage.removeItem("cataloro_user"),n({type:kn})},clearError:()=>{n({type:_n})},updateUser:e=>{localStorage.setItem("cataloro_user",JSON.stringify(e)),n({type:Nn,payload:e})},isAdmin:i,isModerator:()=>{var e;return(null===(e=r.user)||void 0===e?void 0:e.role)===gn.MODERATOR||i()},hasPermission:e=>{if(!r.user)return!1;const t={[gn.USER]:1,[gn.MODERATOR]:2,[gn.ADMIN]:3};return t[r.user.role]>=t[e]}});return(0,yn.jsx)(En.Provider,{value:o,children:t})}function Cn(){const e=(0,a.useContext)(En);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}const On=new class{async getUserNotifications(e){try{return(await cn.get(mn.USER.NOTIFICATIONS.replace("{user_id}",e))).data}catch(n){var t,r;throw new Error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to fetch notifications")}}async markAsRead(e,t){try{await cn.put("".concat(mn.USER.NOTIFICATIONS.replace("{user_id}",e),"/").concat(t,"/read"))}catch(a){var r,n;throw new Error((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||"Failed to mark notification as read")}}async markAllAsRead(e){try{await cn.put("".concat(mn.USER.NOTIFICATIONS.replace("{user_id}",e),"/read-all"))}catch(n){var t,r;throw new Error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to mark all notifications as read")}}async deleteNotification(e,t){try{await cn.delete("".concat(mn.USER.NOTIFICATIONS.replace("{user_id}",e),"/").concat(t))}catch(a){var r,n;throw new Error((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||"Failed to delete notification")}}},Tn={notifications:[],unreadCount:0,isLoading:!1,error:null},Pn="FETCH_START",Ln="FETCH_SUCCESS",Mn="FETCH_FAILURE",Rn="MARK_AS_READ",Dn="MARK_ALL_AS_READ",In="ADD_NOTIFICATION",Fn="REMOVE_NOTIFICATION";function Bn(e,t){switch(t.type){case Pn:return(0,Ie.A)((0,Ie.A)({},e),{},{isLoading:!0,error:null});case Ln:const r=t.payload,n=r.filter(e=>!e.is_read).length;return(0,Ie.A)((0,Ie.A)({},e),{},{notifications:r,unreadCount:n,isLoading:!1,error:null});case Mn:return(0,Ie.A)((0,Ie.A)({},e),{},{isLoading:!1,error:t.payload});case Rn:const a=e.notifications.map(e=>e.id===t.payload?(0,Ie.A)((0,Ie.A)({},e),{},{is_read:!0}):e);return(0,Ie.A)((0,Ie.A)({},e),{},{notifications:a,unreadCount:Math.max(0,e.unreadCount-1)});case Dn:return(0,Ie.A)((0,Ie.A)({},e),{},{notifications:e.notifications.map(e=>(0,Ie.A)((0,Ie.A)({},e),{},{is_read:!0})),unreadCount:0});case In:return(0,Ie.A)((0,Ie.A)({},e),{},{notifications:[t.payload,...e.notifications],unreadCount:e.unreadCount+1});case Fn:const s=e.notifications.filter(e=>e.id!==t.payload);return(0,Ie.A)((0,Ie.A)({},e),{},{notifications:s,unreadCount:s.filter(e=>!e.is_read).length});default:return e}}const Un=(0,a.createContext)();function qn(e){let{children:t}=e;const[r,n]=(0,a.useReducer)(Bn,Tn),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n({type:In,payload:(0,Ie.A)({id:Date.now().toString(),user_id:t,created_at:(new Date).toISOString(),is_read:!1},e)})},i=e=>{n({type:Fn,payload:e})},o=(0,Ie.A)((0,Ie.A)({},r),{},{fetchNotifications:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e){n({type:Pn});try{const t=await On.getUserNotifications(e);n({type:Ln,payload:t})}catch(t){n({type:Mn,payload:t.message})}}},markAsRead:async e=>{try{await On.markAsRead(e),n({type:Rn,payload:e})}catch(t){console.error("Error marking notification as read:",t)}},markAllAsRead:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e)try{await On.markAllAsRead(e),n({type:Dn})}catch(t){console.error("Error marking all notifications as read:",t)}},addNotification:s,removeNotification:i,showToast:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";s({title:t.charAt(0).toUpperCase()+t.slice(1),message:e,type:t}),setTimeout(()=>{i(Date.now().toString())},5e3)}});return(0,yn.jsx)(Un.Provider,{value:o,children:t})}function zn(){const e=(0,a.useContext)(Un);if(!e)throw new Error("useNotifications must be used within a NotificationProvider");return e}const Vn=new class{async browseListings(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const r=new URLSearchParams(e);t&&r.append("user_id",t),e.bidFilter&&"all"!==e.bidFilter&&r.append("bid_filter",e.bidFilter);return(await cn.get("".concat(hn.API_BASE_URL,"/api/marketplace/browse?").concat(r))).data}catch(a){var r,n;throw new Error((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||"Failed to fetch listings")}}async getMyListings(e){try{return(await cn.get(mn.USER.MY_LISTINGS.replace("{user_id}",e))).data}catch(n){var t,r;throw new Error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to fetch your listings")}}async getMyDeals(e){try{return(await cn.get(mn.USER.MY_DEALS.replace("{user_id}",e))).data}catch(n){var t,r;throw new Error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to fetch your deals")}}async createListing(e){try{const t=localStorage.getItem("cataloro_token");return(await cn.post("".concat(hn.API_BASE_URL,"/api/listings"),e,{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})).data}catch(n){var t,r;throw new Error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to create listing")}}async updateListing(e,t){try{return(await cn.put("".concat(mn.MARKETPLACE.LISTINGS,"/").concat(e),t)).data}catch(a){var r,n;throw new Error((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||"Failed to update listing")}}async deleteListing(e){try{await cn.delete("".concat(mn.MARKETPLACE.LISTINGS,"/").concat(e))}catch(n){var t,r;throw new Error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to delete listing")}}async searchListings(e){try{return(await cn.get("".concat(mn.MARKETPLACE.SEARCH,"?q=").concat(encodeURIComponent(e)))).data}catch(n){var t,r;throw new Error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Search failed")}}};const Hn=new class{constructor(){this.baseURL=hn.API_BASE_URL,this.rateLimitBackoff={}}async handleRateLimitedRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=e.split("?")[0];if(this.rateLimitBackoff[n]&&Date.now()<this.rateLimitBackoff[n])throw console.warn("\u23f3 Rate limit backoff active for ".concat(n," - skipping request")),new Error("Rate limit backoff - request skipped");try{const a=await fetch(e,t);if(429===a.status){const a=3e4*Math.pow(2,r);if(this.rateLimitBackoff[n]=Date.now()+a,console.warn("\ud83d\udea6 Rate limit hit for ".concat(n," - backing off for ").concat(a/1e3,"s")),r<3)return await new Promise(e=>setTimeout(e,a)),this.handleRateLimitedRequest(e,t,r+1);throw new Error("429 Too Many Requests - Max retries exceeded")}if(delete this.rateLimitBackoff[n],!a.ok)throw new Error("HTTP error! status: ".concat(a.status));return a}catch(a){if(a.message.includes("429")||a.message.includes("Rate limit"))throw a;throw console.error("Request error:",a),a}}async getUserFavorites(e){try{const t=localStorage.getItem("cataloro_token"),r=await this.handleRateLimitedRequest("".concat(this.baseURL,"/api/user/").concat(e,"/favorites"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});return await r.json()}catch(t){throw console.error("Error fetching favorites:",t),t}}async addToFavorites(e,t){try{const r=localStorage.getItem("cataloro_token"),n=await fetch("".concat(this.baseURL,"/api/user/").concat(e,"/favorites/").concat(t),{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}});if(!n.ok)throw new Error("HTTP error! status: ".concat(n.status));return await n.json()}catch(r){throw console.error("Error adding to favorites:",r),r}}async removeFromFavorites(e,t){try{const r=localStorage.getItem("cataloro_token"),n=await fetch("".concat(this.baseURL,"/api/user/").concat(e,"/favorites/").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}});if(!n.ok)throw new Error("HTTP error! status: ".concat(n.status));return await n.json()}catch(r){throw console.error("Error removing from favorites:",r),r}}async getUserMessages(e){try{const t=localStorage.getItem("cataloro_token"),r=await fetch("".concat(this.baseURL,"/api/user/").concat(e,"/messages"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!r.ok)throw new Error("HTTP error! status: ".concat(r.status));return await r.json()}catch(t){throw console.error("Error fetching messages:",t),t}}async sendMessage(e){try{const t=e.sender_id;if(!t)throw new Error("sender_id is required in messageData");const r=localStorage.getItem("cataloro_token"),n=await fetch("".concat(this.baseURL,"/api/user/").concat(t,"/messages"),{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw new Error("HTTP error! status: ".concat(n.status));return await n.json()}catch(t){throw console.error("Error sending message:",t),t}}async markMessageRead(e,t){try{const r=localStorage.getItem("cataloro_token"),n=await fetch("".concat(this.baseURL,"/api/user/").concat(e,"/messages/").concat(t,"/read"),{method:"PUT",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}});if(!n.ok)throw new Error("HTTP error! status: ".concat(n.status));return await n.json()}catch(r){throw console.error("Error marking message as read:",r),r}}async getUserNotifications(e){try{const t=localStorage.getItem("cataloro_token"),r=await fetch("".concat(this.baseURL,"/api/user/").concat(e,"/notifications"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!r.ok)throw new Error("HTTP error! status: ".concat(r.status));return await r.json()}catch(t){throw console.error("Error fetching notifications:",t),t}}async createNotification(e,t){try{const r=await fetch("".concat(this.baseURL,"/user/").concat(e,"/notifications"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("HTTP error! status: ".concat(r.status));return await r.json()}catch(r){throw console.error("Error creating notification:",r),r}}async markNotificationRead(e,t){try{const r=await fetch("".concat(this.baseURL,"/user/").concat(e,"/notifications/").concat(t,"/read"),{method:"PUT",headers:{"Content-Type":"application/json"}});if(!r.ok)throw new Error("HTTP error! status: ".concat(r.status));return await r.json()}catch(r){throw console.error("Error marking notification as read:",r),r}}async searchUsers(e){try{const t=await fetch("".concat(this.baseURL,"/users/search?q=").concat(encodeURIComponent(e)));if(!t.ok)throw new Error("HTTP error! status: ".concat(t.status));return await t.json()}catch(t){throw console.error("Error searching users:",t),t}}},Wn={favorites:[],favoriteCount:0,searchQuery:"",activeFilters:{type:"all",priceFrom:0,priceTo:1e4,rating:0,location:"all",bidFilter:"all"},allProducts:[],filteredProducts:[],categories:[],recentlyViewed:[],notifications:[],messages:[],viewMode:"grid",sortBy:"newest",isLoading:!1,appliedPromo:null,availablePromos:[{code:"SAVE10",discount:.1,description:"10% off your order"},{code:"FREESHIP",shippingDiscount:!0,description:"Free shipping"},{code:"WELCOME20",discount:.2,description:"20% off first order",minAmount:100}]},Kn={APPLY_PROMO:"APPLY_PROMO",REMOVE_PROMO:"REMOVE_PROMO",ADD_TO_FAVORITES:"ADD_TO_FAVORITES",REMOVE_FROM_FAVORITES:"REMOVE_FROM_FAVORITES",SET_FAVORITES:"SET_FAVORITES",SET_PRODUCTS:"SET_PRODUCTS",SET_FILTERED_PRODUCTS:"SET_FILTERED_PRODUCTS",ADD_PRODUCT:"ADD_PRODUCT",UPDATE_PRODUCT:"UPDATE_PRODUCT",DELETE_PRODUCT:"DELETE_PRODUCT",SET_SEARCH_QUERY:"SET_SEARCH_QUERY",SET_FILTERS:"SET_FILTERS",SET_SORT_BY:"SET_SORT_BY",SET_VIEW_MODE:"SET_VIEW_MODE",SET_LOADING:"SET_LOADING",ADD_NOTIFICATION:"ADD_NOTIFICATION",REMOVE_NOTIFICATION:"REMOVE_NOTIFICATION",ADD_TO_RECENTLY_VIEWED:"ADD_TO_RECENTLY_VIEWED",ADD_MESSAGE:"ADD_MESSAGE",MARK_MESSAGE_READ:"MARK_MESSAGE_READ"};function Gn(e,t){switch(t.type){case Kn.ADD_TO_FAVORITES:return e.favorites.some(e=>e.id===t.payload.id)?e:(0,Ie.A)((0,Ie.A)({},e),{},{favorites:[...e.favorites,t.payload],favoriteCount:e.favoriteCount+1});case Kn.REMOVE_FROM_FAVORITES:return(0,Ie.A)((0,Ie.A)({},e),{},{favorites:e.favorites.filter(e=>e.id!==t.payload),favoriteCount:Math.max(0,e.favoriteCount-1)});case Kn.SET_FAVORITES:return(0,Ie.A)((0,Ie.A)({},e),{},{favorites:t.payload,favoriteCount:t.payload.length});case Kn.SET_PRODUCTS:{const r=[...t.payload].sort((t,r)=>{switch(e.sortBy){case"price_low":return t.price-r.price;case"price_high":return r.price-t.price;case"rating":return(r.rating||0)-(t.rating||0);case"popular":return(r.views||0)-(t.views||0);default:return new Date(r.created_at||r.createdAt)-new Date(t.created_at||t.createdAt)}});return(0,Ie.A)((0,Ie.A)({},e),{},{allProducts:t.payload,filteredProducts:r})}case Kn.SET_FILTERED_PRODUCTS:return(0,Ie.A)((0,Ie.A)({},e),{},{filteredProducts:t.payload});case Kn.SET_SEARCH_QUERY:return(0,Ie.A)((0,Ie.A)({},e),{},{searchQuery:t.payload});case Kn.SET_FILTERS:return(0,Ie.A)((0,Ie.A)({},e),{},{activeFilters:(0,Ie.A)((0,Ie.A)({},e.activeFilters),t.payload)});case Kn.SET_SORT_BY:return(0,Ie.A)((0,Ie.A)({},e),{},{sortBy:t.payload});case Kn.SET_VIEW_MODE:return(0,Ie.A)((0,Ie.A)({},e),{},{viewMode:t.payload});case Kn.APPLY_PROMO:{const r=e.availablePromos.find(e=>e.code===t.payload);return(0,Ie.A)((0,Ie.A)({},e),{},{appliedPromo:r||null})}case Kn.REMOVE_PROMO:return(0,Ie.A)((0,Ie.A)({},e),{},{appliedPromo:null});case Kn.ADD_NOTIFICATION:return(0,Ie.A)((0,Ie.A)({},e),{},{notifications:[t.payload,...e.notifications]});case Kn.REMOVE_NOTIFICATION:return(0,Ie.A)((0,Ie.A)({},e),{},{notifications:e.notifications.filter(e=>e.id!==t.payload)});case Kn.ADD_TO_RECENTLY_VIEWED:{const r=e.recentlyViewed.filter(e=>e.id!==t.payload.id);return(0,Ie.A)((0,Ie.A)({},e),{},{recentlyViewed:[t.payload,...r].slice(0,10)})}case Kn.SET_LOADING:return(0,Ie.A)((0,Ie.A)({},e),{},{isLoading:t.payload});default:return e}}const Yn=(0,a.createContext)();function $n(e){let{children:t}=e;const[r,n]=(0,a.useReducer)(Gn,Wn);(0,a.useEffect)(()=>{const e=localStorage.getItem("cataloro_cart"),t=localStorage.getItem("cataloro_favorites");if(e)try{JSON.parse(e).forEach(e=>{n({type:Kn.ADD_TO_CART,payload:e})})}catch(r){console.error("Error loading cart from storage:",r)}if(t)try{JSON.parse(t).forEach(e=>{n({type:Kn.ADD_TO_FAVORITES,payload:e})})}catch(r){console.error("Error loading favorites from storage:",r)}s()},[]),(0,a.useEffect)(()=>{localStorage.setItem("cataloro_favorites",JSON.stringify(r.favorites))},[r.favorites]);const s=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n({type:Kn.SET_LOADING,payload:!0});try{const a=e||r.activeFilters,s={};a.type&&"all"!==a.type&&(s.type=a.type),a.priceFrom>0&&(s.price_from=a.priceFrom),a.priceTo<1e4&&(s.price_to=a.priceTo),a.bidFilter&&"all"!==a.bidFilter&&(s.bidFilter=a.bidFilter);const i=t||(()=>{try{const e=localStorage.getItem("cataloro_user");return e?JSON.parse(e).id:null}catch(e){return null}})(),o=await Vn.browseListings(s,i);let l;if(console.log("\u2705 Loaded real listings from API with filters:",s,"userId:",i,o),!Array.isArray(o))throw new Error("Invalid API response format: expected array");l=o,console.log("\ud83d\udccb Processing listings:",l.length),l.length>0&&(console.log("\ud83d\udd0d First listing raw data:",JSON.stringify(l[0],null,2)),console.log("\ud83d\udd0d First listing seller data:",l[0].seller));const c=l.map((e,t)=>{var r,n,a,s,i,o,l,c;const d={id:e.id,title:e.title,description:e.description,price:parseFloat(e.price)||0,originalPrice:1.1*(parseFloat(e.price)||0),category:e.category,condition:e.condition,location:e.location||"Unknown",images:e.images||[],bid_info:e.bid_info||{has_bids:!1,total_bids:0,highest_bid:parseFloat(e.price)||0,highest_bidder_id:""},time_info:e.time_info||{has_time_limit:!1,is_expired:!1,time_remaining_seconds:null,expires_at:null,status_text:null},seller:(0,Ie.A)((0,Ie.A)({},e.seller),{},{name:(null===(r=e.seller)||void 0===r?void 0:r.name)||"Unknown Seller",username:(null===(n=e.seller)||void 0===n?void 0:n.username)||"Unknown",email:(null===(a=e.seller)||void 0===a?void 0:a.email)||"",is_business:(null===(s=e.seller)||void 0===s?void 0:s.is_business)||!1,business_name:(null===(i=e.seller)||void 0===i?void 0:i.business_name)||"",verified:(null===(o=e.seller)||void 0===o?void 0:o.verified)||!1,location:(null===(l=e.seller)||void 0===l?void 0:l.location)||"Unknown"}),address:e.address||{},created_at:e.created_at,updated_at:e.updated_at,rating:4.5,reviewCount:Math.floor(100*Math.random())+10,isHotDeal:Math.random()>.7,hasFastShipping:Math.random()>.6,verified:(null===(c=e.seller)||void 0===c?void 0:c.verified)||!1,inStock:!0,quantity:1,tags:e.tags||[],features:e.features||[]};return 0===t&&(console.log("\ud83d\udd04 First listing transformed:",JSON.stringify(d,null,2)),console.log("\ud83d\udd04 First listing seller after transform:",d.seller)),d});return n({type:Kn.SET_PRODUCTS,payload:c}),n({type:Kn.SET_LOADING,payload:!1}),void console.log("\ud83c\udf89 Successfully loaded",c.length,"real listings from API")}catch(s){console.error("Failed to load listings from API:",s)}console.log("\u26a0\ufe0f Using demo data - no real listings found");const a=[{id:"1",title:"MacBook Pro 16-inch M3 Max",description:"Professional laptop with M3 Max chip, perfect for developers and creators. Includes original box and all accessories.",price:2499,originalPrice:2799,category:"Electronics",subcategory:"Laptops",seller:{name:"TechGuru123",username:"TechGuru123",email:"techguru123@example.com",rating:4.9,reviews:156,verified:!0,is_business:!1,location:"San Francisco, CA"},images:["https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=500","https://images.unsplash.com/photo-1611186871348-b1ce696e52c9?w=500","https://images.unsplash.com/photo-1585337701044-7305994ea6fb?w=500"],condition:"Like New",views:234,favorites:45,createdAt:(new Date).toISOString(),features:["M3 Max Chip","64GB RAM","2TB SSD","Space Gray","16-inch Display"],shipping:"Free shipping",estimatedDelivery:"2-3 business days",rating:4.8,reviewCount:156,tags:["Hot Deal","Fast Shipping","Professional"],inStock:!0,quantity:1},{id:"2",title:"Vintage Gibson Les Paul Standard 1959",description:"Authentic 1959 Gibson Les Paul in museum-quality condition. This is a collector's dream with incredible tone and playability.",price:45e3,originalPrice:55e3,category:"Music",subcategory:"Guitars",seller:{name:"VintageGuitars_Pro",username:"VintageGuitars_Pro",email:"vintage.guitars.pro@example.com",rating:4.9,reviews:89,verified:!0,is_business:!0,company_name:"Vintage Guitars Pro LLC",location:"Nashville, TN"},images:["https://images.unsplash.com/photo-1510915361894-db8b60106cb1?w=500","https://images.unsplash.com/photo-1564186763535-ebb21ef5277f?w=500","https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=500"],condition:"Excellent",views:1289,favorites:267,createdAt:new Date(Date.now()-864e5).toISOString(),features:["1959 Model","Original Case","Certificate of Authenticity","Museum Quality"],shipping:"Insured shipping - $150",estimatedDelivery:"3-5 business days",rating:4.9,reviewCount:89,tags:["Vintage","Authenticated","Collector Item"],inStock:!0,quantity:1},{id:"3",title:"Louis Vuitton Neverfull MM",description:"Authentic Louis Vuitton handbag in pristine condition. Perfect for daily use with elegant design.",price:1850,originalPrice:2200,category:"Fashion",subcategory:"Handbags",seller:{name:"LuxuryItems_NYC",username:"LuxuryItems_NYC",email:"luxury.items.nyc@example.com",rating:4.7,reviews:245,verified:!0,is_business:!0,company_name:"Luxury Items NYC Inc.",location:"New York, NY"},images:["https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=500","https://images.unsplash.com/photo-1584917865442-de89df76afd3?w=500"],condition:"Excellent",views:456,favorites:189,createdAt:new Date(Date.now()-1728e5).toISOString(),features:["Authentic","Dust Bag Included","Care Instructions","Serial Number"],shipping:"Express delivery - $25",estimatedDelivery:"1-2 business days",rating:4.6,reviewCount:245,tags:["Luxury","Authentic","Designer"],inStock:!0,quantity:1},{id:"4",title:"Gaming PC - RTX 4090 Build",description:"Ultimate gaming PC with RTX 4090, perfect for 4K gaming, streaming, and content creation.",price:4200,originalPrice:4800,category:"Electronics",subcategory:"Computers",seller:{name:"PCBuilder_Expert",rating:4.9,reviews:78,verified:!0,location:"Austin, TX"},images:["https://images.unsplash.com/photo-1587831990711-23ca6441447b?w=500"],condition:"New",views:698,favorites:212,createdAt:new Date(Date.now()-432e5).toISOString(),features:["RTX 4090","Intel i9-13900K","64GB RAM","Custom Cooling"],shipping:"Free shipping",estimatedDelivery:"3-5 business days",rating:5,reviewCount:78,tags:["Gaming","Custom Built","High Performance"],inStock:!0,quantity:1},{id:"5",title:"iPhone 15 Pro Max 1TB",description:"Latest iPhone 15 Pro Max in Natural Titanium with maximum storage capacity.",price:1599,category:"Electronics",subcategory:"Smartphones",seller:{name:"AppleStore_Certified",rating:4.8,reviews:324,verified:!0,location:"Cupertino, CA"},images:["https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=500"],condition:"New",views:1205,favorites:398,createdAt:new Date(Date.now()-216e5).toISOString(),features:["1TB Storage","Natural Titanium","Pro Camera System","A17 Pro Chip"],shipping:"Free shipping",estimatedDelivery:"1-2 business days",rating:4.8,reviewCount:324,tags:["Latest Model","Premium","Fast Shipping"],inStock:!0,quantity:1}];n({type:Kn.SET_PRODUCTS,payload:a})},i={addToFavorites:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r.favorites.some(t=>t.id===e.id))l("Already in favorites!","info");else try{t&&await Hn.addToFavorites(t,e.id),n({type:Kn.ADD_TO_FAVORITES,payload:e}),l("Added ".concat(e.title," to favorites!"),"success")}catch(a){console.error("Error adding to favorites:",a),n({type:Kn.ADD_TO_FAVORITES,payload:e}),l("Added ".concat(e.title," to favorites!"),"success")}},removeFromFavorites:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{t&&await Hn.removeFromFavorites(t,e),n({type:Kn.REMOVE_FROM_FAVORITES,payload:e}),l("Removed from favorites","info")}catch(r){console.error("Error removing from favorites:",r),n({type:Kn.REMOVE_FROM_FAVORITES,payload:e}),l("Removed from favorites","info")}},loadUserFavorites:async e=>{try{const t=await Hn.getUserFavorites(e);n({type:Kn.SET_FAVORITES,payload:t})}catch(t){console.error("Error loading user favorites:",t)}},setSearchQuery:async e=>{n({type:Kn.SET_SEARCH_QUERY,payload:e}),("all"!==r.activeFilters.type||r.activeFilters.priceFrom>0||r.activeFilters.priceTo<1e4)&&await s(r.activeFilters),o(e,r.activeFilters,r.sortBy)},setFilters:async e=>{const t=(0,Ie.A)((0,Ie.A)({},r.activeFilters),e);n({type:Kn.SET_FILTERS,payload:e}),void 0!==e.type||void 0!==e.priceFrom||void 0!==e.priceTo||void 0!==e.bidFilter?await s(t):o(r.searchQuery,t,r.sortBy)},setSortBy:e=>{n({type:Kn.SET_SORT_BY,payload:e}),o(r.searchQuery,r.activeFilters,e)},setViewMode:e=>{n({type:Kn.SET_VIEW_MODE,payload:e})},applyPromo:e=>{const t=r.availablePromos.find(t=>t.code===e.toUpperCase());return t?t.minAmount&&r.cartTotal<t.minAmount?(l("Minimum order of $".concat(t.minAmount," required for this promo"),"error"),!1):(n({type:Kn.APPLY_PROMO,payload:e.toUpperCase()}),l("Promo code applied: ".concat(t.description),"success"),!0):(l("Invalid promo code","error"),!1)},removePromo:()=>{n({type:Kn.REMOVE_PROMO}),l("Promo code removed","info")},refreshListings:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;await s(e)},addToRecentlyViewed:e=>{n({type:Kn.ADD_TO_RECENTLY_VIEWED,payload:e})},setLoading:e=>{n({type:Kn.SET_LOADING,payload:e})}},o=(e,t,a)=>{let s=[...r.allProducts];e&&(s=s.filter(t=>{var r;return t.title.toLowerCase().includes(e.toLowerCase())||t.description.toLowerCase().includes(e.toLowerCase())||t.category.toLowerCase().includes(e.toLowerCase())||(null===(r=t.features)||void 0===r?void 0:r.some(t=>t.toLowerCase().includes(e.toLowerCase())))||t.add_info&&t.add_info.toLowerCase().includes(e.toLowerCase())})),"all"!==t.type&&(s=s.filter(e=>{var r;const n=!0===(null===(r=e.seller)||void 0===r?void 0:r.is_business);return"Business"===t.type?n:"Private"!==t.type||!n})),void 0!==t.priceFrom&&void 0!==t.priceTo&&(s=s.filter(e=>e.price>=t.priceFrom&&e.price<=t.priceTo)),t.rating>0&&(s=s.filter(e=>(e.rating||0)>=t.rating)),s.sort((e,t)=>{switch(a){case"price_low":return e.price-t.price;case"price_high":return t.price-e.price;case"rating":return(t.rating||0)-(e.rating||0);case"popular":return(t.views||0)-(e.views||0);default:return new Date(t.created_at)-new Date(e.created_at)}}),n({type:Kn.SET_FILTERED_PRODUCTS,payload:s})},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const r={id:Date.now(),message:e,type:t,timestamp:(new Date).toISOString()};n({type:Kn.ADD_NOTIFICATION,payload:r}),setTimeout(()=>{n({type:Kn.REMOVE_NOTIFICATION,payload:r.id})},5e3)},c=(0,Ie.A)((0,Ie.A)((0,Ie.A)({},r),i),{},{showNotification:l});return(0,yn.jsx)(Yn.Provider,{value:c,children:t})}function Jn(){const e=(0,a.useContext)(Yn);if(!e)throw new Error("useMarketplace must be used within a MarketplaceProvider");return e}const Qn=Object.create(null);Qn.open="0",Qn.close="1",Qn.ping="2",Qn.pong="3",Qn.message="4",Qn.upgrade="5",Qn.noop="6";const Zn=Object.create(null);Object.keys(Qn).forEach(e=>{Zn[Qn[e]]=e});const Xn={type:"error",data:"parser error"},ea="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),ta="function"===typeof ArrayBuffer,ra=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,na=(e,t,r)=>{let{type:n,data:a}=e;return ea&&a instanceof Blob?t?r(a):aa(a,r):ta&&(a instanceof ArrayBuffer||ra(a))?t?r(a):aa(new Blob([a]),r):r(Qn[n]+(a||""))},aa=(e,t)=>{const r=new FileReader;return r.onload=function(){const e=r.result.split(",")[1];t("b"+(e||""))},r.readAsDataURL(e)};function sa(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let ia;const oa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",la="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let r=0;r<64;r++)la[oa.charCodeAt(r)]=r;const ca="function"===typeof ArrayBuffer,da=(e,t)=>{if("string"!==typeof e)return{type:"message",data:ha(e,t)};const r=e.charAt(0);if("b"===r)return{type:"message",data:ua(e.substring(1),t)};return Zn[r]?e.length>1?{type:Zn[r],data:e.substring(1)}:{type:Zn[r]}:Xn},ua=(e,t)=>{if(ca){const r=(e=>{let t,r,n,a,s,i=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);const c=new ArrayBuffer(i),d=new Uint8Array(c);for(t=0;t<o;t+=4)r=la[e.charCodeAt(t)],n=la[e.charCodeAt(t+1)],a=la[e.charCodeAt(t+2)],s=la[e.charCodeAt(t+3)],d[l++]=r<<2|n>>4,d[l++]=(15&n)<<4|a>>2,d[l++]=(3&a)<<6|63&s;return c})(e);return ha(r,t)}return{base64:!0,data:e}},ha=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,ma=String.fromCharCode(30);function fa(){return new TransformStream({transform(e,t){!function(e,t){ea&&e.data instanceof Blob?e.data.arrayBuffer().then(sa).then(t):ta&&(e.data instanceof ArrayBuffer||ra(e.data))?t(sa(e.data)):na(e,!1,e=>{ia||(ia=new TextEncoder),t(ia.encode(e))})}(e,r=>{const n=r.length;let a;if(n<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,n);else if(n<65536){a=new Uint8Array(3);const e=new DataView(a.buffer);e.setUint8(0,126),e.setUint16(1,n)}else{a=new Uint8Array(9);const e=new DataView(a.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(n))}e.data&&"string"!==typeof e.data&&(a[0]|=128),t.enqueue(a),t.enqueue(r)})}})}let pa;function ga(e){return e.reduce((e,t)=>e+t.length,0)}function xa(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let a=0;a<t;a++)r[a]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function ya(e){if(e)return function(e){for(var t in ya.prototype)e[t]=ya.prototype[t];return e}(e)}ya.prototype.on=ya.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},ya.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},ya.prototype.off=ya.prototype.removeListener=ya.prototype.removeAllListeners=ya.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var a=0;a<n.length;a++)if((r=n[a])===t||r.fn===t){n.splice(a,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},ya.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){n=0;for(var a=(r=r.slice(0)).length;n<a;++n)r[n].apply(this,t)}return this},ya.prototype.emitReserved=ya.prototype.emit,ya.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},ya.prototype.hasListeners=function(e){return!!this.listeners(e).length};const ba="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function va(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduce((t,r)=>(e.hasOwnProperty(r)&&(t[r]=e[r]),t),{})}const wa=ba.setTimeout,ja=ba.clearTimeout;function ka(e,t){t.useNativeTimers?(e.setTimeoutFn=wa.bind(ba),e.clearTimeoutFn=ja.bind(ba)):(e.setTimeoutFn=ba.setTimeout.bind(ba),e.clearTimeoutFn=ba.clearTimeout.bind(ba))}function Na(e){return"string"===typeof e?function(e){let t=0,r=0;for(let n=0,a=e.length;n<a;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}(e):Math.ceil(1.33*(e.byteLength||e.size))}class _a extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class Sa extends ya{constructor(e){super(),this.writable=!1,ka(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,t,r){return super.emitReserved("error",new _a(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=da(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}(e);return t.length?"?"+t:""}}const Ea="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Aa={};let Ca,Oa=0,Ta=0;function Pa(e){let t="";do{t=Ea[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function La(){const e=Pa(+new Date);return e!==Ca?(Oa=0,Ca=e):e+"."+Pa(Oa++)}for(;Ta<64;Ta++)Aa[Ea[Ta]]=Ta;let Ma=!1;try{Ma="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(Cc){}const Ra=Ma;function Da(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||Ra))return new XMLHttpRequest}catch(Ac){}if(!t)try{return new(ba[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(Ac){}}function Ia(){}const Fa=null!=new Da({xdomain:!1}).responseType;class Ba extends ya{constructor(e,t){super(),ka(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.data=void 0!==t.data?t.data:null,this.create()}create(){var e;const t=va(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd;const r=this.xhr=new Da(t);try{r.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&r.setRequestHeader(e,this.opts.extraHeaders[e])}}catch(Ac){}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(Ac){}try{r.setRequestHeader("Accept","*/*")}catch(Ac){}null===(e=this.opts.cookieJar)||void 0===e||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{var e;3===r.readyState&&(null===(e=this.opts.cookieJar)||void 0===e||e.parseCookies(r)),4===r.readyState&&(200===r.status||1223===r.status?this.onLoad():this.setTimeoutFn(()=>{this.onError("number"===typeof r.status?r.status:0)},0))},r.send(this.data)}catch(Ac){return void this.setTimeoutFn(()=>{this.onError(Ac)},0)}"undefined"!==typeof document&&(this.index=Ba.requestsCount++,Ba.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=Ia,e)try{this.xhr.abort()}catch(Ac){}"undefined"!==typeof document&&delete Ba.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(Ba.requestsCount=0,Ba.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",Ua);else if("function"===typeof addEventListener){addEventListener("onpagehide"in ba?"pagehide":"unload",Ua,!1)}function Ua(){for(let e in Ba.requests)Ba.requests.hasOwnProperty(e)&&Ba.requests[e].abort()}const qa="function"===typeof Promise&&"function"===typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),za=ba.WebSocket||ba.MozWebSocket,Va="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();const Ha={websocket:class extends Sa{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,r=Va?{}:va(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=Va?new za(e,t,r):t?new za(e,t):new za(e)}catch(Cc){return this.emitReserved("error",Cc)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],n=t===e.length-1;na(r,this.supportsBinary,e=>{try{this.ws.send(e)}catch(Ac){}n&&qa(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=La()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}check(){return!!za}},webtransport:class extends Sa{get name(){return"webtransport"}doOpen(){"function"===typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const t=function(e,t){pa||(pa=new TextDecoder);const r=[];let n=0,a=-1,s=!1;return new TransformStream({transform(i,o){for(r.push(i);;){if(0===n){if(ga(r)<1)break;const e=xa(r,1);s=128===(128&e[0]),a=127&e[0],n=a<126?3:126===a?1:2}else if(1===n){if(ga(r)<2)break;const e=xa(r,2);a=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),n=3}else if(2===n){if(ga(r)<8)break;const e=xa(r,8),t=new DataView(e.buffer,e.byteOffset,e.length),s=t.getUint32(0);if(s>Math.pow(2,21)-1){o.enqueue(Xn);break}a=s*Math.pow(2,32)+t.getUint32(4),n=3}else{if(ga(r)<a)break;const e=xa(r,a);o.enqueue(da(s?e:pa.decode(e),t)),n=0}if(0===a||a>e){o.enqueue(Xn);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),n=fa();n.readable.pipeTo(e.writable),this.writer=n.writable.getWriter();const a=()=>{r.read().then(e=>{let{done:t,value:r}=e;t||(this.onPacket(r),a())}).catch(e=>{})};a();const s={type:"open"};this.query.sid&&(s.data='{"sid":"'.concat(this.query.sid,'"}')),this.writer.write(s).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],n=t===e.length-1;this.writer.write(r).then(()=>{n&&qa(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this.transport)||void 0===e||e.close()}},polling:class extends Sa{constructor(e){if(super(e),this.polling=!1,"undefined"!==typeof location){const t="https:"===location.protocol;let r=location.port;r||(r=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||r!==e.port}const t=e&&e.forceBase64;this.supportsBinary=Fa&&!t,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(e++,this.once("pollComplete",function(){--e||t()})),this.writable||(e++,this.once("drain",function(){--e||t()}))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const r=e.split(ma),n=[];for(let a=0;a<r.length;a++){const e=da(r[a],t);if(n.push(e),"error"===e.type)break}return n})(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const r=e.length,n=new Array(r);let a=0;e.forEach((e,s)=>{na(e,!1,e=>{n[s]=e,++a===r&&t(n.join(ma))})})})(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=La()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Ba(this.uri(),e)}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}},Wa=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Ka=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ga(e){if(e.length>2e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");-1!=r&&-1!=n&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let a=Wa.exec(e||""),s={},i=14;for(;i--;)s[Ka[i]]=a[i]||"";return-1!=r&&-1!=n&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||n.splice(0,1);"/"==t.slice(-1)&&n.splice(n.length-1,1);return n}(0,s.path),s.queryKey=function(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,n){t&&(r[t]=n)}),r}(0,s.query),s}class Ya extends ya{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.binaryType="arraybuffer",this.writeBuffer=[],e&&"object"===typeof e&&(t=e,e=null),e?(e=Ga(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=Ga(t.host).host),ka(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=function(e){let t={},r=e.split("&");for(let n=0,a=r.length;n<a;n++){let e=r[n].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"===typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new Ha[e](r)}open(){let e;if(this.opts.rememberUpgrade&&Ya.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(Ac){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",e=>this.onClose("transport close",e))}probe(e){let t=this.createTransport(e),r=!1;Ya.priorWebsocketSuccess=!1;const n=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!r)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Ya.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{r||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}))};function a(){r||(r=!0,c(),t.close(),t=null)}const s=e=>{const r=new Error("probe error: "+e);r.transport=t.name,a(),this.emitReserved("upgradeError",r)};function i(){s("transport closed")}function o(){s("socket closed")}function l(e){t&&e.name!==t.name&&a()}const c=()=>{t.removeListener("open",n),t.removeListener("error",s),t.removeListener("close",i),this.off("close",o),this.off("upgrading",l)};t.once("open",n),t.once("error",s),t.once("close",i),this.once("close",o),this.once("upgrading",l),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onOpen(){if(this.readyState="open",Ya.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){const r=this.writeBuffer[t].data;if(r&&(e+=Na(r)),t>0&&e>this.maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}write(e,t,r){return this.sendPacket("message",e,t,r),this}send(e,t,r){return this.sendPacket("message",e,t,r),this}sendPacket(e,t,r,n){if("function"===typeof t&&(n=t,t=void 0),"function"===typeof r&&(n=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;(r=r||{}).compress=!1!==r.compress;const a={type:e,data:t,options:r};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),n&&this.once("flush",n),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}onError(e){Ya.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let r=0;const n=e.length;for(;r<n;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}Ya.protocol=4;Ya.protocol;const $a="function"===typeof ArrayBuffer,Ja=Object.prototype.toString,Qa="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Ja.call(Blob),Za="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===Ja.call(File);function Xa(e){return $a&&(e instanceof ArrayBuffer||(e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||Qa&&e instanceof Blob||Za&&e instanceof File}function es(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,r=e.length;t<r;t++)if(es(e[t]))return!0;return!1}if(Xa(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return es(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&es(e[r]))return!0;return!1}function ts(e){const t=[],r=e.data,n=e;return n.data=rs(r,t),n.attachments=t.length,{packet:n,buffers:t}}function rs(e,t){if(!e)return e;if(Xa(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=rs(e[n],t);return r}if("object"===typeof e&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=rs(e[n],t));return r}return e}function ns(e,t){return e.data=as(e.data,t),delete e.attachments,e}function as(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=as(e[r],t);else if("object"===typeof e)for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=as(e[r],t));return e}const ss=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],is=5;var os;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(os||(os={}));class ls{constructor(e){this.replacer=e}encode(e){return e.type!==os.EVENT&&e.type!==os.ACK||!es(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===os.EVENT?os.BINARY_EVENT:os.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==os.BINARY_EVENT&&e.type!==os.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=ts(e),r=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(r),n}}function cs(e){return"[object Object]"===Object.prototype.toString.call(e)}class ds extends ya{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const r=t.type===os.BINARY_EVENT;r||t.type===os.BINARY_ACK?(t.type=r?os.EVENT:os.ACK,this.reconstructor=new us(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!Xa(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const r={type:Number(e.charAt(0))};if(void 0===os[r.type])throw new Error("unknown packet type "+r.type);if(r.type===os.BINARY_EVENT||r.type===os.BINARY_ACK){const n=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const a=e.substring(n,t);if(a!=Number(a)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(a)}if("/"===e.charAt(t+1)){const n=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}r.nsp=e.substring(n,t)}else r.nsp="/";const n=e.charAt(t+1);if(""!==n&&Number(n)==n){const n=t+1;for(;++t;){const r=e.charAt(t);if(null==r||Number(r)!=r){--t;break}if(t===e.length)break}r.id=Number(e.substring(n,t+1))}if(e.charAt(++t)){const n=this.tryParse(e.substr(t));if(!ds.isPayloadValid(r.type,n))throw new Error("invalid payload");r.data=n}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(Ac){return!1}}static isPayloadValid(e,t){switch(e){case os.CONNECT:return cs(t);case os.DISCONNECT:return void 0===t;case os.CONNECT_ERROR:return"string"===typeof t||cs(t);case os.EVENT:case os.BINARY_EVENT:return Array.isArray(t)&&("number"===typeof t[0]||"string"===typeof t[0]&&-1===ss.indexOf(t[0]));case os.ACK:case os.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class us{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=ns(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function hs(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const ms=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class fs extends ya{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[hs(e,"open",this.onopen.bind(this)),hs(e,"packet",this.onpacket.bind(this)),hs(e,"error",this.onerror.bind(this)),hs(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){if(ms.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(r.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const a={type:os.EVENT,data:r,options:{}};if(a.options.compress=!1!==this.flags.compress,"function"===typeof r[r.length-1]){const e=this.ids++,t=r.pop();this._registerAckCallback(e,t),a.id=e}const s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var r,n=this;const a=null!==(r=this.flags.timeout)&&void 0!==r?r:this._opts.ackTimeout;if(void 0===a)return void(this.acks[e]=t);const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))},a),i=function(){n.io.clearTimeoutFn(s);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];t.apply(n,r)};i.withError=!0,this.acks[e]=i}emitWithAck(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return new Promise((t,n)=>{const a=(e,r)=>e?n(e):t(r);a.withError=!0,r.push(a),this.emit(e,...r)})}_addToQueue(e){var t=this;let r;"function"===typeof e[e.length-1]&&(r=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(function(e){if(n!==t._queue[0])return;if(null!==e)n.tryCount>t._opts.retries&&(t._queue.shift(),r&&r(e));else if(t._queue.shift(),r){for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];r(null,...s)}return n.pending=!1,t._drainQueue()}),this._queue.push(n),this._drainQueue()}_drainQueue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:os.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case os.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case os.EVENT:case os.BINARY_EVENT:this.onevent(e);break;case os.ACK:case os.BINARY_ACK:this.onack(e);break;case os.DISCONNECT:this.ondisconnect();break;case os.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const r of t)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let r=!1;return function(){if(!r){r=!0;for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];t.packet({type:os.ACK,id:e,data:a})}}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:os.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const r of t)r.apply(this,e.data)}}}function ps(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ps.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,this.max)},ps.prototype.reset=function(){this.attempts=0},ps.prototype.setMin=function(e){this.ms=e},ps.prototype.setMax=function(e){this.max=e},ps.prototype.setJitter=function(e){this.jitter=e};class gs extends ya{constructor(e,r){var n;super(),this.nsps={},this.subs=[],e&&"object"===typeof e&&(r=e,e=void 0),(r=r||{}).path=r.path||"/socket.io",this.opts=r,ka(this,r),this.reconnection(!1!==r.reconnection),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=r.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new ps({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==r.timeout?2e4:r.timeout),this._readyState="closed",this.uri=e;const a=r.parser||t;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=!1!==r.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Ya(this.uri,this.opts);const t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const n=hs(t,"open",function(){r.onopen(),e&&e()}),a=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},s=hs(t,"error",a);if(!1!==this._timeout){const e=this._timeout,r=this.setTimeoutFn(()=>{n(),a(new Error("timeout")),t.close()},e);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}return this.subs.push(n),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(hs(e,"ping",this.onping.bind(this)),hs(e,"data",this.ondata.bind(this)),hs(e,"error",this.onerror.bind(this)),hs(e,"close",this.onclose.bind(this)),hs(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(Ac){this.onclose("parse error",Ac)}}ondecoded(e){qa(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new fs(this,e,t),this.nsps[e]=r),r}_destroy(e){const t=Object.keys(this.nsps);for(const r of t){if(this.nsps[r].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const xs={};function ys(e,t){"object"===typeof e&&(t=e,e=void 0);const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,n=e;r=r||"undefined"!==typeof location&&location,null==e&&(e=r.protocol+"//"+r.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof r?r.protocol+"//"+e:"https://"+e),n=Ga(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const a=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port+t,n.href=n.protocol+"://"+a+(r&&r.port===n.port?"":":"+n.port),n}(e,(t=t||{}).path||"/socket.io"),n=r.source,a=r.id,s=r.path,i=xs[a]&&s in xs[a].nsps;let o;return t.forceNew||t["force new connection"]||!1===t.multiplex||i?o=new gs(n,t):(xs[a]||(xs[a]=new gs(n,t)),o=xs[a]),r.query&&!t.query&&(t.query=r.queryKey),o.socket(r.path,t)}Object.assign(ys,{Manager:gs,Socket:fs,io:ys,connect:ys});const bs=(0,a.createContext)(),vs=e=>{let{children:t}=e;const[r,n]=(0,a.useState)(null),[s,i]=(0,a.useState)(!1),[o,l]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),[u,h]=(0,a.useState)({}),m=(0,a.useRef)(null);(0,a.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("currentUser")||"{}");return e.id&&f(e),()=>{m.current&&m.current.disconnect()}},[]);const f=e=>{try{const t=ys("https://market-refactor-1.preview.emergentagent.com".replace("/api","").replace("http","ws"),{transports:["websocket","polling"],auth:{user_id:e.id,username:e.username,user_role:e.user_role}});t.on("connect",()=>{console.log("\u2705 WebSocket connected"),i(!0),n(t),m.current=t}),t.on("disconnect",()=>{console.log("\u274c WebSocket disconnected"),i(!1)}),t.on("connection_confirmed",e=>{console.log("\ud83d\udd17 Connection confirmed:",e),t.emit("get_online_users",{})}),t.on("online_users",e=>{l(e.users||[])}),t.on("user_status_update",e=>{"online"===e.status?l(t=>{const r=t.some(t=>t.user_id===e.user_id);return r?t:[...t,{user_id:e.user_id,username:e.username,last_activity:e.timestamp}]}):l(t=>t.filter(t=>t.user_id!==e.user_id))}),t.on("notification",e=>{d(t=>[e,...t.slice(0,49)]),"granted"===Notification.permission&&new Notification(e.title||"Cataloro Notification",{body:e.message,icon:"/favicon.ico"})}),t.on("new_message",e=>{d(t=>[{type:"message",title:"New message from ".concat(e.sender_username),message:e.message,timestamp:e.timestamp,data:e},...t.slice(0,49)])}),t.on("new_bid",e=>{const{listing_id:t,bid:r,auction_status:n}=e;h(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:n})),d(t=>[{type:"bid",title:"New Bid Placed",message:"\u20ac".concat(r.amount," bid on ").concat(r.listing_id),timestamp:r.timestamp,data:e},...t.slice(0,49)])}),t.on("bid_received",e=>{d(t=>[{type:"bid_received",title:"Bid Received on Your Listing",message:"".concat(e.bid.bidder_username," bid \u20ac").concat(e.bid.amount),timestamp:e.bid.timestamp,data:e},...t.slice(0,49)])}),t.on("auction_status",e=>{h(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e.listing_id]:e.auction}))}),t.on("listing_update",e=>{console.log("\ud83d\udccb Listing updated:",e)}),t.on("error",e=>{console.error("\u274c WebSocket error:",e)})}catch(t){console.error("Failed to initialize WebSocket:",t)}};(0,a.useEffect)(()=>{"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission()},[]);const p={socket:r,isConnected:s,onlineUsers:o,notifications:c,liveAuctions:u,joinRoom:(e,t)=>{r&&s&&r.emit("join_room",{room_type:e,room_id:t})},leaveRoom:(e,t)=>{r&&s&&r.emit("leave_room",{room_type:e,room_id:t})},sendMessage:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text";r&&s&&r.emit("send_message",{recipient_id:e,message:t,type:n})},placeBid:(e,t)=>{r&&s&&r.emit("place_bid",{listing_id:e,bid_amount:t})},watchListing:e=>{r&&s&&r.emit("watch_listing",{listing_id:e})},unwatchListing:e=>{r&&s&&r.emit("unwatch_listing",{listing_id:e})},clearNotifications:()=>{d([])},markNotificationAsRead:e=>{d(t=>t.map(t=>t.id===e?(0,Ie.A)((0,Ie.A)({},t),{},{read:!0}):t))}};return(0,yn.jsx)(bs.Provider,{value:p,children:t})};var ws={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const js=["color","size","strokeWidth","absoluteStrokeWidth","children"],ks=(e,t)=>{const r=(0,a.forwardRef)((r,n)=>{let{color:s="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,children:c}=r,d=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(r,js);return(0,a.createElement)("svg",(0,Ie.A)((0,Ie.A)({ref:n},ws),{},{width:i,height:i,stroke:s,strokeWidth:l?24*Number(o)/Number(i):o,className:"lucide lucide-".concat((u=e,u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},d),[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...(Array.isArray(c)?c:[c])||[]]);var u});return r.displayName="".concat(e),r},Ns=ks("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]),_s=ks("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ss=ks("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),Es=ks("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),As=ks("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Cs=ks("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Os=ks("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Ts=ks("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Ps=ks("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ls=ks("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ms=ks("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Rs=ks("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Ds=ks("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Is=ks("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Fs=ks("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Bs=ks("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Us=ks("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),qs=ks("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),zs=ks("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Vs=ks("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Hs=ks("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Ws=ks("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Ks=ks("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Gs=ks("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Ys=ks("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),$s=ks("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Js=ks("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Qs=ks("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Zs=ks("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Xs=ks("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),ei=ks("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),ti=ks("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ri=ks("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),ni=ks("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),ai=ks("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),si=ks("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),ii=ks("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),oi=ks("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),li=ks("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),ci=ks("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),di=ks("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),ui=ks("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]),hi=ks("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]),mi=ks("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),fi=ks("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),pi=ks("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),gi=ks("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),xi=ks("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]),yi=ks("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]),bi=ks("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),vi=ks("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),wi=ks("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),ji=ks("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),ki=ks("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),Ni=ks("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),_i=ks("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),Si=ks("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),Ei=ks("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),Ai=ks("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),Ci=ks("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),Oi=ks("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Ti=ks("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),Pi=ks("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),Li=ks("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]),Mi=ks("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),Ri=ks("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),Di=ks("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Ii=ks("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),Fi=ks("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Bi=ks("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]),Ui=ks("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),qi=ks("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]),zi=ks("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]),Vi=ks("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]),Hi=ks("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Wi=ks("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),Ki=ks("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Gi=ks("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Yi=ks("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),$i=ks("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ji=ks("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Qi=ks("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Zi=ks("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),Xi=ks("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),eo=ks("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),to=ks("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ro=()=>{const{user:e}=Cn(),t=e?e.user_role||e.role||"user":null,r="Admin-Manager"===t?"Manager":(null===e||void 0===e?void 0:e.badge)||("admin"===(null===e||void 0===e?void 0:e.role)?"Admin":"Buyer"),n={adminPanel:{canAccess:"Admin"===t||"Admin-Manager"===t,canAccessUserManagement:"Admin"===t||"Admin-Manager"===t,canAccessListingsManagement:"Admin"===t||"Admin-Manager"===t,canAccessDatDatabase:"Admin"===t||"Admin-Manager"===t,canAccessAdsManager:"Admin"===t,canAccessSystemNotifications:"Admin"===t,canDeleteDatabase:"Admin"===t,canUploadExcel:"Admin"===t},browse:{canAccess:!0,canViewMarketRange:!0,canViewSellerInfo:!0,canViewLocation:!0,canViewTimeLeft:!0,canViewBidInfo:!0,canPlaceBid:"User-Buyer"===t||"Admin"===t||"Admin-Manager"===t,canSeeBiddingControls:"User-Buyer"===t||"Admin"===t||"Admin-Manager"===t},tenders:{canAccess:!0,canSubmitTender:"User-Buyer"===t||"Admin"===t||"Admin-Manager"===t,canManageTenders:"User-Seller"===t||"Admin"===t||"Admin-Manager"===t,canViewMyTenders:"User-Buyer"===t||"Admin"===t||"Admin-Manager"===t,canViewTenderManagement:"User-Seller"===t||"Admin"===t||"Admin-Manager"===t},selling:{canCreateListing:"User-Seller"===t||"Admin"===t||"Admin-Manager"===t,canManageListings:"User-Seller"===t||"Admin"===t||"Admin-Manager"===t,canAccessSellingFunctions:"User-Seller"===t||"Admin"===t||"Admin-Manager"===t},user:{canAccessProfile:!0,canAccessMessages:!0,canAccessNotifications:!0,canAccessFavorites:"User-Buyer"===t||"Admin"===t||"Admin-Manager"===t},ui:{showAdminPanelLink:"Admin"===t||"Admin-Manager"===t,showTenderManagementLink:"User-Seller"===t||"Admin"===t||"Admin-Manager"===t,showMyTendersLink:"User-Buyer"===t||"Admin"===t||"Admin-Manager"===t,showCreateListingLink:"User-Seller"===t||"Admin"===t||"Admin-Manager"===t,showSellingFeatures:"User-Seller"===t||"Admin"===t||"Admin-Manager"===t,showBuyingFeatures:"User-Buyer"===t||"Admin"===t||"Admin-Manager"===t}},a=()=>"Admin"===t,s=()=>"Admin-Manager"===t,i=()=>"User-Seller"===t,o=()=>"User-Buyer"===t,l=()=>"Admin"===t||"Admin-Manager"===t;return{permissions:n,userRole:t,badge:r,isAdmin:a,isAdminManager:s,isSeller:i,isBuyer:o,isAdminLevel:l,hasPermission:(e,t)=>{var r;return(null===(r=n[e])||void 0===r?void 0:r[t])||!1},canAccess:e=>{switch(e){case"admin":return n.adminPanel.canAccess;case"browse-bidding":return n.browse.canPlaceBid;case"tenders":return n.tenders.canAccess;case"selling":return n.selling.canAccessSellingFunctions;case"favorites":return n.user.canAccessFavorites;default:return!1}},getUserDisplay:()=>({role:t,badge:r,name:(null===e||void 0===e?void 0:e.full_name)||(null===e||void 0===e?void 0:e.username)||"User",email:(null===e||void 0===e?void 0:e.email)||"",isAdmin:a(),isAdminManager:s(),isSeller:i(),isBuyer:o(),isAdminLevel:l()})}},no=ro;function ao(){const{user:e}=Cn(),[t,r]=(0,a.useState)({desktop_menu:{},mobile_menu:{},user_role:"buyer"}),[n,s]=(0,a.useState)(!0);(0,a.useEffect)(()=>{null!==e&&void 0!==e&&e.id?i(e.id):s(!1)},[e]);const i=async t=>{try{s(!0);const n=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/menu-settings/user/").concat(t));if(n.ok){const e=await n.json();r(e)}else r({desktop_menu:{},mobile_menu:{},user_role:(null===e||void 0===e?void 0:e.role)||"buyer"})}catch(n){console.error("Error fetching menu settings:",n),r({desktop_menu:{},mobile_menu:{},user_role:(null===e||void 0===e?void 0:e.role)||"buyer"})}finally{s(!1)}},o=(e,r)=>{if(n)return!1;const a=t[e];if(!a){return["browse","about"].includes(r)}const s=a[r];return!!s&&!0===s.enabled};return{menuSettings:t,loading:n,isMenuItemVisible:o,getVisibleMenuItems:(e,t)=>n?[]:t.filter(t=>{var r;const n=t.key||t.id||(null===(r=t.path)||void 0===r?void 0:r.replace("/",""));return o(e,n)}),getCustomMenuItems:e=>{var r;if(n)return[];return((null===(r=t[e])||void 0===r?void 0:r.custom_items)||[]).filter(e=>!1!==e.enabled).sort((e,t)=>(e.position||0)-(t.position||0))},refreshSettings:()=>(null===e||void 0===e?void 0:e.id)&&i(e.id)}}const so=function(e){var t,r;let{darkMode:n,toggleDarkMode:s,isMobileMenuOpen:i,setIsMobileMenuOpen:o}=e;const{user:l,logout:c}=Cn(),{favoriteCount:d}=Jn(),{showToast:u}=zn(),{permissions:h,isAdmin:m,isSeller:f,isBuyer:p,isAdminLevel:g,getUserDisplay:x}=no(),{isMenuItemVisible:y}=ao(),[b,v]=(0,a.useState)(!1),[w,j]=(0,a.useState)(!1),[k,N]=(0,a.useState)(!1),[_,S]=(0,a.useState)([]),[E,A]=(0,a.useState)(0),[C,O]=(0,a.useState)(0),[T,P]=(0,a.useState)(new Set),[L,M]=(0,a.useState)({}),[R,D]=(0,a.useState)(!0),[I,F]=(0,a.useState)("all"),[B,U]=(0,a.useState)(Date.now()),q=re(),z=ee(),V=(0,a.useRef)(null),H=(0,a.useRef)(null),W=async function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t&&t.stopPropagation();try{const t=_.find(t=>t.id===e),a=document.querySelector('[data-notification-id="'.concat(e,'"]'));a?(a.classList.add("notification-removing"),setTimeout(()=>{S(_.filter(t=>t.id!==e)),t&&!t.is_read&&A(e=>Math.max(0,e-1))},300)):(S(_.filter(t=>t.id!==e)),t&&!t.is_read&&A(e=>Math.max(0,e-1)));try{const t=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/user/").concat(null===l||void 0===l?void 0:l.id,"/notifications/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}});t.ok||console.warn("Failed to delete notification from backend:",t.statusText)}catch(n){console.error("API error deleting notification:",n)}r&&console.log("Notification removed")}catch(a){console.error("Failed to delete notification:",a)}},K=()=>{let e=_;switch(I){case"unread":e=_.filter(e=>!e.is_read);break;case"read":e=_.filter(e=>e.is_read);break;default:e=_}return e.sort((e,t)=>new Date(t.created_at)-new Date(e.created_at))},G=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(null!==l&&void 0!==l&&l.id)try{const t=await Hn.getUserNotifications(l.id),r=await Hn.getUserMessages(l.id),n=Array.isArray(t)?t:[],a=Array.isArray(r)?r:[];if(e&&_.length>0){const e=n.filter(e=>new Date(e.created_at)>new Date(B)&&!e.is_read);e.length>0&&((()=>{if(R)try{const e=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmIdBz6S3fPNeSsFJICO89iMOQkXZL7n6KdUFAg+ltryxnkpBSl+zfDZjjkKGGG+6OSlSxELStPx07dORgk2jNnuw3MoByJ9yvDQjj0KFmSx5eeScxELTanxx4A=");e.volume=.3,e.play().catch(console.error)}catch(e){console.error("Could not play notification sound:",e)}})(),"Notification"in window&&"granted"===Notification.permission&&new Notification("".concat(e.length," new notification").concat(e.length>1?"s":""),{body:e[0].title,icon:"/favicon.ico",tag:"cataloro-notification"}))}S(n),A(n.filter(e=>!e.is_read).length),O(a.filter(e=>!e.is_read&&e.sender_id!==l.id).length),U(Date.now())}catch(r){var t;if(console.error("Failed to load notifications:",r),null!==(t=r.message)&&void 0!==t&&t.includes("429")||429===r.status)return void console.warn("\u26a0\ufe0f Rate limit detected - backing off notifications polling");S([]),A(0),O(0)}},Y=async e=>{try{await Hn.markNotificationRead(l.id,e),S(_.map(t=>t.id===e?(0,Ie.A)((0,Ie.A)({},t),{},{is_read:!0}):t)),A(e=>Math.max(0,e-1))}catch(t){console.error("Failed to mark notification as read:",t)}};(0,a.useEffect)(()=>{const e=()=>{const e=localStorage.getItem("cataloro_site_branding");if(e)try{const t=JSON.parse(e);console.log("Header loading branding data:",t),M(t)}catch(t){console.error("Error parsing branding data:",t)}else console.log("No branding data found in localStorage")};if(e(),null!==l&&void 0!==l&&l.id){G(),"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission().then(e=>{console.log("Notification permission:",e)});const e=setInterval(()=>{G(!0)},3e5),t=e=>{var t,r;console.log("\ud83d\udce7 ModernHeader received messagesMarkedAsRead event with detail:",e.detail);const n=(null===(t=e.detail)||void 0===t?void 0:t.messageIds)||[],a=(null===(r=e.detail)||void 0===r?void 0:r.count)||0;console.log("\ud83d\udd22 Reducing unread message count by ".concat(a," (current: ").concat(C,")")),P(e=>{const t=new Set(e);return n.forEach(e=>t.add(e)),console.log("\ud83d\udcdd Updated session read message IDs:",Array.from(t)),t}),O(e=>{const t=Math.max(0,e-a);return console.log("\ud83d\udcca Updated unread messages count: ".concat(e," \u2192 ").concat(t)),t}),console.log("\ud83d\udd04 Triggering loadNotifications to sync with server"),G(!0)},r=()=>{console.log("\ud83d\udd04 Messages session reset - restoring original unread counts"),P(new Set),G(!0)};return window.addEventListener("messagesMarkedAsRead",t),window.addEventListener("messagesSessionReset",r),()=>{clearInterval(e),window.removeEventListener("messagesMarkedAsRead",t),window.removeEventListener("messagesSessionReset",r)}}const t=t=>{"cataloro_site_branding"===t.key&&e()},r=()=>{e()};return window.addEventListener("storage",t),window.addEventListener("brandingUpdated",r),()=>{window.removeEventListener("storage",t),window.removeEventListener("brandingUpdated",r)}},[null===l||void 0===l?void 0:l.id]),(0,a.useEffect)(()=>{const e=localStorage.getItem("cataloro_notification_sound");D("false"!==e)},[]),(0,a.useEffect)(()=>{const e=e=>{V.current&&!V.current.contains(e.target)&&v(!1),H.current&&!H.current.contains(e.target)&&j(!1),k&&!e.target.closest(".tenders-dropdown")&&N(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[b,w,k]);const $={Store:Ns,Plus:_s,MessageCircle:Ss,DollarSign:Es,ShoppingCart:As,Heart:Cs,Bell:Os,User:Ts,Settings:Ps,LogOut:Ls,Package:Ms,Shield:Rs,Menu:Ds,X:Is,Sun:Fs,Moon:Bs,Globe:Us,BarChart3:qs,TrendingUp:zs,HelpCircle:Vs,Mail:Hs,FileText:Ws,Home:Ks,Star:Gs,Camera:Ys,Calendar:$s,Clock:Js,Download:Qs,Upload:Zs,Edit:Xs,Trash2:ei,Eye:ti,EyeOff:ri,Lock:ni,Unlock:ai,Key:si,Users:ii,UserPlus:oi,Phone:li,Smartphone:ci,Monitor:di,Tablet:ui,Laptop:hi,Zap:mi,Activity:fi,Award:pi,Target:gi,Compass:xi,Map:yi,Navigation:bi,Bookmark:vi,Tag:wi,Filter:ji,SortAsc:ki,List:Ni,Grid:_i,Layers:Si,Archive:Ei,Folder:Ai,File:Ci,Image:Oi,Video:Ti,Music:Pi,Headphones:Li,Mic:Mi,Volume2:Ri,Play:Di,Pause:Ii,Square:Fi,SkipBack:Bi,SkipForward:Ui,Repeat:qi,Shuffle:zi,Share:Vi,ExternalLink:Hi,LinkIcon:Wi,Copy:Ki,Check:Gi,AlertTriangle:Yi,AlertCircle:$i,Info:Ji,CheckCircle:Qi},J=[{label:"About",path:"/info",icon:Us,key:"about"},{label:"Browse",path:"/browse",icon:Ns,key:"browse"},{label:"My Listings",path:"/my-listings",icon:Ms,key:"my_listings"},{label:"Notifications",path:"/notifications",icon:Os,key:"notifications"}].filter(e=>y("desktop_menu",e.key)),{getCustomMenuItems:Q}=ao(),Z=Q("desktop_menu");return(0,yn.jsxs)("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl border-b border-white/20 shadow-lg shadow-black/5",children:[(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/5 via-purple-600/5 to-pink-600/5"}),(0,yn.jsx)("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between h-20",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-8",children:[(0,yn.jsxs)(Le,{to:"/browse",className:"flex items-center space-x-3 group header-logo",children:[L.logo_light_url||L.logo_dark_url||L.logo_url?(0,yn.jsx)("div",{className:"relative",children:(0,yn.jsx)("img",{src:n?L.logo_dark_url||L.logo_url:L.logo_light_url||L.logo_url,alt:L.site_name||"Cataloro",className:"h-12 max-w-[200px] object-contain group-hover:opacity-90 transition-opacity duration-300",onError:e=>{e.target.style.display="none",e.target.parentElement.nextSibling.style.display="flex"}})}):(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsxs)("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center relative overflow-hidden",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",boxShadow:"0 8px 25px rgba(103, 126, 234, 0.4)"},children:[(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,yn.jsx)(Ns,{className:"w-7 h-7 text-white relative z-10"})]}),(0,yn.jsx)("div",{className:"absolute inset-0 rounded-2xl",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",filter:"blur(8px)",opacity:"0.3",transform:"scale(1.1)"}})]}),(0,yn.jsxs)("div",{className:"hidden sm:block",children:[(0,yn.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white group-hover:text-gray-700 dark:group-hover:text-white/90 transition-colors header-title",style:{background:"linear-gradient(135deg, #1f2937 0%, #374151 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:L.site_name||"Cataloro"}),(0,yn.jsx)("p",{className:"text-xs text-gray-600 dark:text-white/70 font-medium tracking-wide",children:L.site_description||"ULTRA-MODERN MARKETPLACE"})]})]}),(0,yn.jsxs)("div",{className:"items-center space-x-3",style:{display:"none"},children:[(0,yn.jsx)("div",{className:"relative",children:(0,yn.jsxs)("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center relative overflow-hidden",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",boxShadow:"0 8px 25px rgba(103, 126, 234, 0.4)"},children:[(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,yn.jsx)(Ns,{className:"w-7 h-7 text-white relative z-10"})]})}),(0,yn.jsxs)("div",{className:"hidden sm:block",children:[(0,yn.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:L.site_name||"Cataloro"}),(0,yn.jsx)("p",{className:"text-xs text-gray-600 dark:text-white/70 font-medium tracking-wide",children:L.site_description||"ULTRA-MODERN MARKETPLACE"})]})]})]}),(0,yn.jsxs)("nav",{className:"hidden lg:flex space-x-2",children:[Z.map(e=>{const t=z.pathname===e.url,r=e.url.startsWith("http"),n=$[e.icon]||Gs;return r?(0,yn.jsxs)("a",{href:e.url,target:e.target||"_self",rel:"_blank"===e.target?"noopener noreferrer":void 0,className:"flex items-center space-x-2 px-4 py-2 rounded-xl transition-all duration-300 font-medium text-sm text-gray-700 dark:text-white/80 hover:text-gray-900 dark:hover:text-white hover:bg-white/10 dark:hover:bg-white/10",children:[(0,yn.jsx)(n,{className:"w-4 h-4"}),(0,yn.jsx)("span",{className:"font-medium",children:e.label}),"_blank"===e.target&&(0,yn.jsx)("span",{className:"text-xs opacity-60",children:"\u2197"})]},e.id):(0,yn.jsxs)(Le,{to:e.url,className:"flex items-center space-x-2 px-4 py-2 rounded-xl transition-all duration-300 font-medium text-sm ".concat(t?"bg-white/20 dark:bg-white/20 text-gray-900 dark:text-white shadow-lg backdrop-blur-md":"text-gray-700 dark:text-white/80 hover:text-gray-900 dark:hover:text-white hover:bg-white/10 dark:hover:bg-white/10"),style:t?{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.1) 100%)",backdropFilter:"blur(20px)",boxShadow:"0 4px 15px rgba(255, 255, 255, 0.1)"}:{},children:[(0,yn.jsx)(n,{className:"w-4 h-4"}),(0,yn.jsx)("span",{className:"font-medium",children:e.label})]},e.id)}),J.map(e=>{const t=e.icon,r=z.pathname===e.path;return(0,yn.jsxs)(Le,{to:e.path,className:"flex items-center space-x-2 px-4 py-2 rounded-xl transition-all duration-300 font-medium text-sm ".concat(r?"bg-white/20 dark:bg-white/20 text-gray-900 dark:text-white shadow-lg backdrop-blur-md":"text-gray-700 dark:text-white/80 hover:text-gray-900 dark:hover:text-white hover:bg-white/10 dark:hover:bg-white/10"),style:r?{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.1) 100%)",backdropFilter:"blur(20px)",boxShadow:"0 4px 15px rgba(255, 255, 255, 0.1)"}:{},children:[(0,yn.jsx)(t,{className:"w-4 h-4"}),(0,yn.jsx)("span",{className:"font-medium",children:e.label})]},e.path)}),y("desktop_menu","tenders")&&(0,yn.jsxs)(Le,{to:fn.TENDERS,className:"flex items-center space-x-2 px-4 py-2 rounded-xl transition-all duration-300 font-medium text-sm ".concat("/tenders"===z.pathname||"/my-tenders"===z.pathname?"bg-white/20 dark:bg-white/20 text-gray-900 dark:text-white shadow-lg backdrop-blur-md":"text-gray-700 dark:text-white/80 hover:text-gray-900 dark:hover:text-white hover:bg-white/10 dark:hover:bg-white/10"),style:"/tenders"===z.pathname||"/my-tenders"===z.pathname?{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.1) 100%)",backdropFilter:"blur(20px)",boxShadow:"0 4px 15px rgba(255, 255, 255, 0.1)"}:{},children:[(0,yn.jsx)(Es,{className:"w-4 h-4"}),(0,yn.jsx)("span",{className:"font-medium",children:"Tenders"})]}),y("desktop_menu","buy_management")&&(0,yn.jsxs)(Le,{to:"/buy-management",className:"flex items-center space-x-2 px-4 py-2 rounded-xl transition-all duration-300 font-medium text-sm ".concat("/buy-management"===z.pathname?"bg-white/20 dark:bg-white/20 text-gray-900 dark:text-white shadow-lg backdrop-blur-md":"text-gray-700 dark:text-white/80 hover:text-gray-900 dark:hover:text-white hover:bg-white/10 dark:hover:bg-white/10"),style:"/buy-management"===z.pathname?{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.1) 100%)",backdropFilter:"blur(20px)",boxShadow:"0 4px 15px rgba(255, 255, 255, 0.1)"}:{},children:[(0,yn.jsx)(As,{className:"w-4 h-4"}),(0,yn.jsx)("span",{className:"font-medium",children:"Inventory"})]}),y("desktop_menu","admin_panel")&&(0,yn.jsxs)(Le,{to:"/admin",className:"flex items-center space-x-2 px-4 py-2 rounded-xl transition-all duration-300 font-medium text-sm shadow-lg backdrop-blur-md ".concat(g()?"text-gray-900 dark:text-gray-900":"text-gray-700 dark:text-white/80"),style:{background:"/admin"===z.pathname?m()?"linear-gradient(135deg, rgba(255, 193, 7, 0.9) 0%, rgba(255, 152, 0, 0.8) 100%)":"linear-gradient(135deg, rgba(147, 51, 234, 0.8) 0%, rgba(79, 70, 229, 0.7) 100%)":m()?"linear-gradient(135deg, rgba(255, 193, 7, 0.7) 0%, rgba(255, 152, 0, 0.6) 100%)":"linear-gradient(135deg, rgba(147, 51, 234, 0.6) 0%, rgba(79, 70, 229, 0.5) 100%)",backdropFilter:"blur(20px)",boxShadow:m()?"0 4px 15px rgba(255, 193, 7, 0.3)":"0 4px 15px rgba(147, 51, 234, 0.3)",border:m()?"1px solid rgba(255, 193, 7, 0.4)":"1px solid rgba(147, 51, 234, 0.4)"},children:[(0,yn.jsx)(Rs,{className:"w-4 h-4"}),(0,yn.jsx)("span",{className:"font-medium",children:m()?"Admin":"Manager"})]})]})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsxs)("div",{className:"hidden lg:flex items-center space-x-2",children:[y("desktop_menu","messages")&&(0,yn.jsxs)(Le,{to:"/messages",className:"relative p-2 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-all duration-200",children:[(0,yn.jsx)(Ss,{className:"w-6 h-6"}),C>0&&(0,yn.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium",children:C})]}),y("desktop_menu","favorites")&&(0,yn.jsxs)(Le,{to:"/favorites",className:"relative p-2 text-gray-600 dark:text-gray-400 hover:text-red-500 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all duration-200",children:[(0,yn.jsx)(Cs,{className:"w-6 h-6"}),d>0&&(0,yn.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium",children:d})]}),y("desktop_menu","create_listing")&&(0,yn.jsx)(Le,{to:"/create-listing",className:"relative p-3 text-gray-700 dark:text-white/80 hover:text-gray-900 dark:hover:text-white transition-all duration-300 group",style:{background:n?"linear-gradient(135deg, rgba(34, 197, 94, 0.2) 0%, rgba(34, 197, 94, 0.1) 100%)":"linear-gradient(135deg, rgba(34, 197, 94, 0.1) 0%, rgba(34, 197, 94, 0.05) 100%)",backdropFilter:"blur(20px)",borderRadius:"16px",border:n?"1px solid rgba(34, 197, 94, 0.2)":"1px solid rgba(34, 197, 94, 0.15)"},title:"Create New Listing",children:(0,yn.jsx)(_s,{className:"w-5 h-5 text-green-600 dark:text-green-400"})})]}),(0,yn.jsxs)("div",{className:"relative",ref:H,children:[(0,yn.jsxs)("button",{onClick:()=>j(!w),className:"relative p-3 text-gray-700 dark:text-white/80 hover:text-gray-900 dark:hover:text-white transition-all duration-300 group",style:{background:n?"linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%)":"linear-gradient(135deg, rgba(0, 0, 0, 0.08) 0%, rgba(0, 0, 0, 0.04) 100%)",backdropFilter:"blur(20px)",borderRadius:"16px",border:n?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(0, 0, 0, 0.1)"},children:[(0,yn.jsx)(Os,{className:"w-5 h-5"}),E>0&&(0,yn.jsx)("span",{className:"absolute -top-2 -right-2 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold text-[10px]",style:{background:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",boxShadow:"0 4px 15px rgba(250, 112, 154, 0.4)"},children:E})]}),w&&(0,yn.jsxs)("div",{className:"absolute right-0 mt-3 w-80 max-w-[90vw] rounded-2xl shadow-2xl py-3 z-50 notifications-dropdown-enhanced animate-in",style:{background:n?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(25px)",border:n?"1px solid rgba(255, 255, 255, 0.2)":"1px solid rgba(0, 0, 0, 0.2)",animation:"slideDown 0.3s ease-out"},children:[(0,yn.jsxs)("div",{className:"px-4 py-3 border-b border-white/10",children:[(0,yn.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,yn.jsxs)("h3",{className:"font-bold text-gray-900 dark:text-white text-base flex items-center",children:[(0,yn.jsx)(Os,{className:"w-4 h-4 mr-2"}),"Notifications",E>0&&(0,yn.jsx)("span",{className:"ml-2 bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-full animate-pulse",children:E})]})}),(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(0,yn.jsxs)("select",{value:I,onChange:e=>F(e.target.value),className:"text-xs bg-transparent border border-white/20 rounded-md px-1.5 py-1 text-gray-600 dark:text-white/80 focus:outline-none focus:ring-1 focus:ring-blue-500 min-w-0 w-16",children:[(0,yn.jsx)("option",{value:"all",children:"All"}),(0,yn.jsx)("option",{value:"unread",children:"New"}),(0,yn.jsx)("option",{value:"read",children:"Read"})]}),(0,yn.jsx)("button",{onClick:()=>{const e=!R;D(e),localStorage.setItem("cataloro_notification_sound",e.toString())},className:"p-1 text-gray-600 dark:text-white/80 hover:text-gray-800 dark:hover:text-white transition-colors",title:R?"Disable sound":"Enable sound",children:R?(0,yn.jsx)(Ri,{className:"w-3.5 h-3.5"}):(0,yn.jsx)(Zi,{className:"w-3.5 h-3.5"})}),(0,yn.jsx)("button",{onClick:()=>G(),className:"p-1 text-gray-600 dark:text-white/80 hover:text-gray-800 dark:hover:text-white transition-colors",title:"Refresh",children:(0,yn.jsx)(Xi,{className:"w-3.5 h-3.5"})})]}),(0,yn.jsx)("div",{className:"flex items-center",children:E>0&&(0,yn.jsx)("button",{onClick:async()=>{try{const e=_.filter(e=>!e.is_read).map(e=>e.id);await Promise.all(e.map(e=>Hn.markNotificationRead(l.id,e))),S(_.map(e=>(0,Ie.A)((0,Ie.A)({},e),{},{is_read:!0}))),A(0)}catch(e){console.error("Failed to mark all notifications as read:",e)}},className:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 font-medium transition-colors",children:"Mark all read"})})]})]}),(0,yn.jsx)("div",{className:"max-h-80 overflow-y-auto custom-scrollbar",children:0===K().length?(0,yn.jsxs)("div",{className:"px-4 py-6 text-center",children:[(0,yn.jsx)("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,yn.jsx)(Os,{className:"w-6 h-6 text-gray-400"})}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400 font-medium text-sm",children:"all"===I?"No notifications yet":"unread"===I?"No unread notifications":"No read notifications"}),(0,yn.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:"We'll notify you when something important happens"})]}):K().map((e,t)=>(0,yn.jsx)("div",{"data-notification-id":e.id,onClick:()=>(async e=>{try{switch(await Y(e.id),j(!1),e.type){case"tender_accepted":q("/tenders"),setTimeout(()=>{const e=new URLSearchParams;e.set("tab","my-tenders"),q("/tenders?"+e.toString(),{replace:!0})},100);break;case"tender_offer":case"new_tender_offer":q("/tenders"),setTimeout(()=>{const t=new URLSearchParams;t.set("tab","manage"),e.listing_id&&t.set("listing",e.listing_id),q("/tenders?"+t.toString(),{replace:!0})},100);break;case"tender_rejected":q("/tenders"),setTimeout(()=>{const e=new URLSearchParams;e.set("tab","my-tenders"),q("/tenders?"+e.toString(),{replace:!0})},100);break;case"order_completed":case"order_shipped":case"listing_sold":q("/my-listings"),setTimeout(()=>{const e=new URLSearchParams;e.set("filter","closed"),q("/my-listings?"+e.toString(),{replace:!0})},100);break;case"message":case"new_message":e.message_id?q("/messages?id=".concat(e.message_id)):q("/messages");break;case"buy_request":case"purchase_request":q("/my-listings"),setTimeout(()=>{const e=new URLSearchParams;e.set("filter","active"),q("/my-listings?"+e.toString(),{replace:!0})},100);break;case"buy_approved":case"purchase_approved":q("/deals");break;case"buy_rejected":case"purchase_rejected":q("/browse");break;case"favorite":case"wishlist_update":q("/favorites");break;case"listing_approved":case"listing_updated":q("/my-listings");break;case"profile_update":case"account_update":q("/profile");break;default:q("/notifications")}u("Navigating to ".concat(e.title),"info")}catch(t){console.error("Error handling notification click:",t),u("Error navigating from notification","error")}})(e),className:"group px-4 py-3 hover:bg-white/5 dark:hover:bg-white/5 cursor-pointer border-l-3 transition-all duration-300 ".concat(e.is_read?"":"bg-blue-50/30 dark:bg-blue-900/30"," ").concat(0===t?"animate-in":""),style:{borderColor:"message"===e.type?"#667eea":"favorite"===e.type?"#f093fb":"payment"===e.type?"#43e97b":"buy_request"===e.type?"#fbbf24":"buy_approved"===e.type?"#10b981":"buy_rejected"===e.type?"#ef4444":"tender_accepted"===e.type?"#10b981":"tender_offer"===e.type?"#f59e0b":"tender_rejected"===e.type?"#ef4444":"new_tender_offer"===e.type?"#f59e0b":"order_completed"===e.type?"#10b981":"#9ca3af",animationDelay:"".concat(.1*t,"s")},children:(0,yn.jsxs)("div",{className:"flex items-start space-x-2.5",children:[(0,yn.jsx)("div",{className:"p-1.5 rounded-full flex-shrink-0 ".concat("message"===e.type?"bg-blue-100 text-blue-600":"favorite"===e.type?"bg-pink-100 text-pink-600":"payment"===e.type?"bg-green-100 text-green-600":"buy_request"===e.type?"bg-yellow-100 text-yellow-600":"buy_approved"===e.type?"bg-green-100 text-green-600":"buy_rejected"===e.type?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600"," ").concat(e.is_read?"":"animate-pulse"),children:"message"===e.type?(0,yn.jsx)(Ss,{className:"w-3.5 h-3.5"}):"favorite"===e.type?(0,yn.jsx)(Cs,{className:"w-3.5 h-3.5"}):"payment"===e.type?(0,yn.jsx)(Es,{className:"w-3.5 h-3.5"}):"buy_request"===e.type?(0,yn.jsx)(Ms,{className:"w-3.5 h-3.5"}):"buy_approved"===e.type?(0,yn.jsx)(Gi,{className:"w-3.5 h-3.5"}):"buy_rejected"===e.type?(0,yn.jsx)(Is,{className:"w-3.5 h-3.5"}):(0,yn.jsx)(Os,{className:"w-3.5 h-3.5"})}),(0,yn.jsxs)("div",{className:"flex-1 min-w-0 overflow-hidden",children:[(0,yn.jsxs)("div",{className:"flex items-start justify-between",children:[(0,yn.jsxs)("div",{className:"flex-1 min-w-0 pr-2",children:[(0,yn.jsx)("p",{className:"text-sm font-semibold truncate ".concat(e.is_read?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-white"),children:e.title}),(0,yn.jsx)("p",{className:"text-xs text-gray-600 dark:text-white/70 mt-0.5 line-clamp-2 leading-tight",children:e.message})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[!e.is_read&&(0,yn.jsx)("div",{className:"w-1.5 h-1.5 bg-blue-600 rounded-full animate-pulse"}),(0,yn.jsx)("button",{onClick:t=>W(e.id,t),className:"opacity-0 group-hover:opacity-100 p-0.5 text-gray-400 hover:text-red-600 transition-all duration-200",title:"Delete",children:(0,yn.jsx)(ei,{className:"w-3 h-3"})})]})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,yn.jsxs)("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[(0,yn.jsx)(Js,{className:"w-3 h-3 mr-1"}),(0,yn.jsxs)("span",{className:"truncate",children:[new Date(e.created_at).toLocaleDateString()," ",new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[!e.is_read&&(0,yn.jsx)("button",{onClick:t=>(async(e,t)=>{t.stopPropagation();try{await Y(e),setTimeout(()=>{W(e,null,!1)},1e3)}catch(r){console.error("Failed to mark notification as read:",r)}})(e.id,t),className:"p-1 bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-900/70 transition-all duration-200",title:"Mark read",children:(0,yn.jsx)(eo,{className:"w-3 h-3"})}),"buy_request"===e.type&&(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)("button",{onClick:t=>(async(e,t)=>{t.stopPropagation();try{j(!1),q("/pending-sales"),setTimeout(()=>{W(e,null,!1)},500)}catch(r){console.error("Failed to handle accept request:",r)}})(e.id,t),className:"p-1 bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-900/70 transition-all duration-200",title:"Accept",children:(0,yn.jsx)(Gi,{className:"w-3 h-3"})}),(0,yn.jsx)("button",{onClick:t=>(async(e,t)=>{t.stopPropagation();try{console.log("Request declined"),W(e,null,!1)}catch(r){console.error("Failed to handle decline request:",r)}})(e.id,t),className:"p-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 rounded hover:bg-red-200 dark:hover:bg-red-900/70 transition-all duration-200",title:"Decline",children:(0,yn.jsx)(Is,{className:"w-3 h-3"})})]}),"message"===e.type&&(0,yn.jsx)("button",{onClick:t=>(async(e,t)=>{t.stopPropagation();try{j(!1),q("/messages"),setTimeout(()=>{W(e,null,!1)},500)}catch(r){console.error("Failed to handle reply to message:",r)}})(e.id,t),className:"p-1 bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-900/70 transition-all duration-200",title:"Reply",children:(0,yn.jsx)(Ss,{className:"w-3 h-3"})})]})]})]})]})},e.id))}),(0,yn.jsx)("div",{className:"px-4 py-2 border-t border-white/10",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)(Le,{to:"/notifications",className:"text-xs text-gray-600 dark:text-white/80 hover:text-gray-800 dark:hover:text-white font-medium flex items-center transition-colors",onClick:()=>j(!1),children:["View all notifications",(0,yn.jsx)(zs,{className:"w-3 h-3 ml-1"})]}),(0,yn.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[K().length," total"]})]})})]})]}),(0,yn.jsx)("button",{onClick:s,className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-all duration-200",children:n?(0,yn.jsx)(Fs,{className:"w-6 h-6"}):(0,yn.jsx)(Bs,{className:"w-6 h-6"})}),(0,yn.jsxs)("div",{className:"relative",ref:V,children:[(0,yn.jsxs)("button",{onClick:()=>v(!b),className:"flex items-center space-x-3 p-2 rounded-2xl transition-all duration-300 group",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.06) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[(0,yn.jsxs)("div",{className:"w-10 h-10 rounded-2xl flex items-center justify-center relative overflow-hidden",style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",boxShadow:"0 6px 20px rgba(79, 172, 254, 0.4)"},children:[(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,yn.jsx)("span",{className:"text-white font-bold text-sm relative z-10",children:(null===l||void 0===l||null===(t=l.full_name)||void 0===t?void 0:t.charAt(0))||(null===l||void 0===l||null===(r=l.username)||void 0===r?void 0:r.charAt(0))||"U"})]}),(0,yn.jsxs)("div",{className:"hidden sm:block text-left",children:[(0,yn.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:(null===l||void 0===l?void 0:l.full_name)||(null===l||void 0===l?void 0:l.username)||"User"}),(0,yn.jsx)("p",{className:"text-xs text-gray-600 dark:text-white/70 font-medium uppercase tracking-wide",children:null===l||void 0===l?void 0:l.role})]}),(0,yn.jsx)(to,{className:"w-4 h-4 text-gray-700 dark:text-white/80 transition-transform duration-300 ".concat(b?"rotate-180":"")})]}),b&&(0,yn.jsxs)("div",{className:"absolute right-0 mt-3 w-72 rounded-2xl shadow-2xl py-2 z-50 profile-dropdown-enhanced",style:{background:n?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(25px)",border:n?"1px solid rgba(255, 255, 255, 0.2)":"1px solid rgba(0, 0, 0, 0.2)"},children:[(0,yn.jsx)("div",{className:"px-6 py-4 border-b border-white/10",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("p",{className:"text-base font-bold text-gray-900 dark:text-white",children:(null===l||void 0===l?void 0:l.full_name)||(null===l||void 0===l?void 0:l.username)}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-white/70",children:null===l||void 0===l?void 0:l.email})]}),(0,yn.jsx)("div",{className:"flex flex-col items-end",children:(0,yn.jsx)("span",{className:"inline-flex px-3 py-1 text-xs font-semibold rounded-full ".concat("Admin"===x().badge?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"Manager"===x().badge?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300":"Seller"===x().badge?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"),children:x().badge})})]})}),(0,yn.jsxs)("div",{className:"py-2",children:[(0,yn.jsxs)(Le,{to:"/profile",className:"flex items-center px-6 py-3 text-sm text-gray-700 dark:text-white/90 hover:text-gray-900 dark:hover:text-white hover:bg-white/5 dark:hover:bg-white/5 transition-all duration-300 group",onClick:()=>v(!1),children:[(0,yn.jsx)("div",{className:"p-2 rounded-lg mr-3 group-hover:bg-white/10 transition-all duration-300",style:{background:"linear-gradient(135deg, rgba(79, 172, 254, 0.2), rgba(0, 242, 254, 0.1))"},children:(0,yn.jsx)(Ts,{className:"w-4 h-4"})}),(0,yn.jsx)("span",{className:"font-medium",children:"Profile Settings"})]}),h.selling.canManageListings&&(0,yn.jsxs)(Le,{to:"/my-listings",className:"flex items-center px-6 py-3 text-sm text-gray-700 dark:text-white/90 hover:text-gray-900 dark:hover:text-white hover:bg-white/5 dark:hover:bg-white/5 transition-all duration-300 group",onClick:()=>v(!1),children:[(0,yn.jsx)("div",{className:"p-2 rounded-lg mr-3 group-hover:bg-white/10 transition-all duration-300",style:{background:"linear-gradient(135deg, rgba(240, 147, 251, 0.2), rgba(245, 87, 108, 0.1))"},children:(0,yn.jsx)(Ms,{className:"w-4 h-4"})}),(0,yn.jsx)("span",{className:"font-medium",children:"My Listings"})]}),(0,yn.jsxs)(Le,{to:"/profile/".concat(null===l||void 0===l?void 0:l.id),className:"flex items-center px-6 py-3 text-sm text-gray-700 dark:text-white/90 hover:text-gray-900 dark:hover:text-white hover:bg-white/5 dark:hover:bg-white/5 transition-all duration-300 group",onClick:()=>v(!1),children:[(0,yn.jsx)("div",{className:"p-2 rounded-lg mr-3 group-hover:bg-white/10 transition-all duration-300",style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(147, 197, 253, 0.1))"},children:(0,yn.jsx)(Us,{className:"w-4 h-4"})}),(0,yn.jsx)("span",{className:"font-medium",children:"View Public Profile"})]}),h.ui.showAdminPanelLink&&y("desktop_menu","admin_panel")&&(0,yn.jsxs)(Le,{to:"/admin",className:"flex items-center px-6 py-3 text-sm text-gray-700 dark:text-white/90 hover:text-gray-900 dark:hover:text-white hover:bg-white/5 dark:hover:bg-white/5 transition-all duration-300 group",onClick:()=>v(!1),children:[(0,yn.jsx)("div",{className:"p-2 rounded-lg mr-3 group-hover:bg-white/10 transition-all duration-300",style:{background:m()?"linear-gradient(135deg, rgba(250, 112, 154, 0.2), rgba(254, 225, 64, 0.1))":"linear-gradient(135deg, rgba(147, 51, 234, 0.2), rgba(79, 70, 229, 0.1))"},children:(0,yn.jsx)(Rs,{className:"w-4 h-4"})}),(0,yn.jsx)("span",{className:"font-medium",children:m()?"Admin Panel":"Manager Panel"})]})]}),(0,yn.jsx)("div",{className:"border-t border-white/10 pt-2",children:(0,yn.jsxs)("button",{onClick:()=>{c(),q("/login"),u("Logged out successfully","success")},className:"flex items-center w-full px-6 py-3 text-sm text-gray-700 dark:text-white/90 hover:text-red-600 dark:hover:text-red-300 hover:bg-red-500/10 dark:hover:bg-red-500/10 transition-all duration-300 group",children:[(0,yn.jsx)("div",{className:"p-2 rounded-lg mr-3 group-hover:bg-red-500/20 transition-all duration-300",style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(239, 68, 68, 0.1))"},children:(0,yn.jsx)(Ls,{className:"w-4 h-4"})}),(0,yn.jsx)("span",{className:"font-medium",children:"Sign Out"})]})})]})]}),(0,yn.jsx)("button",{onClick:()=>o(!i),className:"lg:hidden p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-all duration-200",children:i?(0,yn.jsx)(Is,{className:"w-6 h-6"}):(0,yn.jsx)(Ds,{className:"w-6 h-6"})})]})]})})]})};const io=function(e){var t,r;let{isOpen:n,onClose:s}=e;const[i,o]=(0,a.useState)(null),[l,c]=(0,a.useState)(0),d=ee(),u=re(),{logout:h}=Cn(),{isMenuItemVisible:m}=ao(),f=async()=>{try{await h(),s(),u("/login")}catch(e){console.error("Logout error:",e),localStorage.removeItem("cataloro_token"),localStorage.removeItem("cataloro_user"),s(),u("/login")}};(0,a.useEffect)(()=>{const e=localStorage.getItem("cataloro_user");if(e)try{const t=JSON.parse(e);o(t);(async()=>{try{const e=(await Hn.getUserNotifications(t.id)).filter(e=>!e.is_read).length;c(e)}catch(e){console.error("Error loading notifications:",e),c(0)}})()}catch(t){console.error("Error parsing user data:",t)}},[]),null===i||void 0===i||i.role;const p=[{title:"Marketplace",items:[{label:"About Platform",path:"/info",icon:Us,key:"about"},{label:"Browse All",path:"/browse",icon:Ns,key:"browse"}]},{title:"My Account",items:[{label:"My Listings",path:"/mobile-my-listings",icon:Ms,key:"listings"},{label:"Buy Management",path:"/buy-management",icon:As,key:"buy_management"},{label:"Messages",path:"/messages",icon:Ss,key:"messages"},{label:"Favorites",path:"/favorites",icon:Cs,key:"favorites"}]},{title:"Settings",items:[{label:"Profile",path:"/profile",icon:Ts,key:"profile"},{label:"Notifications",path:"/notifications",icon:Os,key:"notifications"},{label:"Logout",action:"logout",icon:Ls,isButton:!0,key:"logout"}]}].map(e=>(0,Ie.A)((0,Ie.A)({},e),{},{items:e.items.filter(e=>!!e.isButton||("notifications"===e.key||(!e.key||m("mobile_menu",e.key))))})).filter(e=>e.items.length>0);return(0,yn.jsxs)(yn.Fragment,{children:[n&&(0,yn.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:s}),(0,yn.jsxs)("div",{className:"fixed top-0 left-0 h-full w-64 max-w-[70vw] bg-white dark:bg-gray-900 shadow-2xl z-50 transform transition-transform duration-300 ease-in-out ".concat(n?"translate-x-0":"-translate-x-full"," lg:hidden"),children:[(0,yn.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-600 to-purple-600",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-white font-bold text-sm",children:"C"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h2",{className:"text-sm font-bold text-white",children:"Cataloro"}),(0,yn.jsx)("p",{className:"text-xs text-white/80",children:"Marketplace"})]})]}),(0,yn.jsx)("button",{onClick:s,className:"p-1 text-white/80 hover:text-white hover:bg-white/20 rounded-md transition-colors",children:(0,yn.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,yn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i&&(0,yn.jsxs)("div",{className:"mt-2 flex items-center space-x-2 p-2 bg-white/10 rounded-md",children:[(0,yn.jsx)("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-white font-medium text-xs",children:(null===(t=i.full_name)||void 0===t?void 0:t.charAt(0))||(null===(r=i.username)||void 0===r?void 0:r.charAt(0))||"U"})}),(0,yn.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,yn.jsx)("p",{className:"font-medium text-white text-xs truncate",children:i.full_name||i.username}),(0,yn.jsx)("p",{className:"text-xs text-white/70 uppercase",children:i.role})]})]})]}),(0,yn.jsx)("div",{className:"flex-1 overflow-y-auto py-2",children:p.map(e=>(0,yn.jsxs)("div",{className:"mb-3",children:[(0,yn.jsx)("h3",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400 font-semibold mb-1 px-4",children:e.title}),(0,yn.jsx)("div",{className:"space-y-0",children:e.items.map(e=>{const t=e.icon;return e.isButton&&"logout"===e.action?(0,yn.jsxs)("button",{onClick:f,className:"flex items-center space-x-3 px-4 py-2 text-sm font-medium transition-all duration-200 touch-manipulation text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 active:bg-red-100 dark:active:bg-red-900/30 w-full text-left",children:[(0,yn.jsx)(t,{className:"w-4 h-4 flex-shrink-0"}),(0,yn.jsx)("span",{className:"truncate",children:e.label})]},e.action):(0,yn.jsxs)(Le,{to:e.path,onClick:s,className:"flex items-center justify-between px-4 py-2 text-sm font-medium transition-all duration-200 touch-manipulation ".concat((r=e.path,d.pathname===r?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 border-r-2 border-blue-600":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 active:bg-gray-100 dark:active:bg-gray-700")),children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)(t,{className:"w-4 h-4 flex-shrink-0"}),(0,yn.jsx)("span",{className:"truncate",children:e.label})]}),"notifications"===e.key&&l>0&&(0,yn.jsx)("div",{className:"bg-blue-500 text-white text-xs rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 font-medium shadow-md",children:l>99?"99+":l})]},e.path);var r})})]},e.title))}),(0,yn.jsx)("div",{className:"px-4 py-2 border-t border-gray-200 dark:border-gray-700",children:(0,yn.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"Cataloro v2.0"})})]})]})},oo=ks("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),lo=ks("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),co=ks("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),uo=ks("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),ho=ks("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),mo=ks("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);const fo=function(){var e,t,n,s,i;const[o,l]=(0,a.useState)({}),c=function(){const[e,t]=(0,a.useState)(null);return(0,a.useEffect)(()=>{const e=()=>{try{const e=localStorage.getItem("cataloro_site_config");if(e){const r=JSON.parse(e);t(r.adsManager||null)}}catch(e){console.warn("Could not load ads configuration")}};e();const r=()=>{e()};return window.addEventListener("adsConfigUpdated",r),window.addEventListener("storage",r),()=>{window.removeEventListener("adsConfigUpdated",r),window.removeEventListener("storage",r)}},[]),e}();(0,a.useEffect)(()=>{const e=()=>{try{const e=localStorage.getItem("cataloro_site_branding");if(e){const t=JSON.parse(e);l(t)}}catch(e){console.error("Error loading branding data in footer:",e)}};e();const t=()=>{e()};return window.addEventListener("brandingUpdated",t),window.addEventListener("storage",t),()=>{window.removeEventListener("brandingUpdated",t),window.removeEventListener("storage",t)}},[]);const d=()=>({enabled:!0,companyInfo:{name:"Cataloro",tagline:"Modern Marketplace for Everyone",description:"Discover, buy, and sell amazing products in our trusted marketplace. Connect with sellers worldwide and find exactly what you're looking for.",logo:"/logo.png"},contact:{email:"hello@cataloro.com",phone:"+1 (555) 123-4567",address:"123 Marketplace St, Commerce City, CC 12345"},social:{facebook:"https://facebook.com/cataloro",twitter:"https://twitter.com/cataloro",instagram:"https://instagram.com/cataloro",linkedin:"https://linkedin.com/company/cataloro",youtube:"https://youtube.com/cataloro"},links:{about:[{label:"About Us",url:"/about"},{label:"Our Story",url:"/story"},{label:"Careers",url:"/careers"},{label:"Press",url:"/press"}],marketplace:[{label:"Browse Products",url:"/browse"},{label:"Sell on Cataloro",url:"/sell"},{label:"Seller Center",url:"/seller"}],support:[{label:"Help Center",url:"/help"},{label:"Contact Support",url:"/support"},{label:"Community",url:"/community"},{label:"Safety",url:"/safety"}],legal:[{label:"Privacy Policy",url:"/privacy"},{label:"Terms of Service",url:"/terms"},{label:"Cookie Policy",url:"/cookies"},{label:"Seller Agreement",url:"/seller-terms"}]},style:{backgroundColor:"#1f2937",textColor:"#ffffff",linkColor:"#60a5fa",borderColor:"#374151"}}),u=(()=>{try{var e,t,r,n;const a=localStorage.getItem("cataloro_footer_config"),s=d();if(!a)return s;const i=JSON.parse(a);return(0,Ie.A)((0,Ie.A)((0,Ie.A)({},s),i),{},{companyInfo:(0,Ie.A)((0,Ie.A)({},s.companyInfo),i.companyInfo),contact:(0,Ie.A)((0,Ie.A)({},s.contact),i.contact),social:(0,Ie.A)((0,Ie.A)({},s.social),i.social),links:(0,Ie.A)((0,Ie.A)((0,Ie.A)({},s.links),i.links),{},{about:(null===(e=i.links)||void 0===e?void 0:e.about)||s.links.about,marketplace:(null===(t=i.links)||void 0===t?void 0:t.marketplace)||s.links.marketplace,support:(null===(r=i.links)||void 0===r?void 0:r.support)||s.links.support,legal:(null===(n=i.links)||void 0===n?void 0:n.legal)||s.links.legal}),style:(0,Ie.A)((0,Ie.A)({},s.style),i.style)})}catch(a){return console.error("Error parsing footer config:",a),d()}})();if(!u.enabled)return null;const h={backgroundColor:u.style.backgroundColor,color:u.style.textColor,borderColor:u.style.borderColor},m={color:u.style.linkColor};return(0,yn.jsx)("footer",{style:h,className:"bg-gray-900 text-white border-t",children:(0,yn.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,yn.jsx)("div",{className:"py-12",children:(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[(0,yn.jsxs)("div",{className:"lg:col-span-1",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[o.logo_dark_url&&"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChAI9jU77zgAAAABJRU5ErkJggg=="!==o.logo_dark_url?(0,yn.jsx)("div",{className:"flex flex-col space-y-2",children:(0,yn.jsx)("img",{src:o.logo_dark_url,alt:o.site_name||u.companyInfo.name,className:"h-12 max-w-[200px] object-contain",onError:e=>{e.target.style.display="none",e.target.parentElement.nextElementSibling.style.display="flex"}})}):o.logo_light_url&&"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChAI9jU77zgAAAABJRU5ErkJggg=="!==o.logo_light_url?(0,yn.jsx)("div",{className:"flex flex-col space-y-2",children:(0,yn.jsx)("img",{src:o.logo_light_url,alt:o.site_name||u.companyInfo.name,className:"h-12 max-w-[200px] object-contain",onError:e=>{e.target.style.display="none",e.target.parentElement.nextElementSibling.style.display="flex"}})}):(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center",children:(0,yn.jsx)(Ns,{className:"w-6 h-6 text-white"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h3",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:o.site_name||u.companyInfo.name}),(0,yn.jsx)("p",{className:"text-sm text-gray-400",children:o.site_description||u.companyInfo.tagline})]})]}),(0,yn.jsxs)("div",{className:"items-center space-x-3",style:{display:"none"},children:[(0,yn.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center",children:(0,yn.jsx)(Ns,{className:"w-6 h-6 text-white"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h3",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:o.site_name||u.companyInfo.name}),(0,yn.jsx)("p",{className:"text-sm text-gray-400",children:o.site_description||u.companyInfo.tagline})]})]})]}),(0,yn.jsx)("p",{className:"text-gray-300 text-sm mb-6 leading-relaxed",children:u.companyInfo.description}),(0,yn.jsxs)("div",{className:"space-y-3",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-3 text-sm",children:[(0,yn.jsx)(Hs,{className:"w-4 h-4 text-blue-400"}),(0,yn.jsx)("a",{href:"mailto:".concat(u.contact.email),style:m,className:"hover:text-blue-300",children:u.contact.email})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-3 text-sm",children:[(0,yn.jsx)(li,{className:"w-4 h-4 text-blue-400"}),(0,yn.jsx)("a",{href:"tel:".concat(u.contact.phone),style:m,className:"hover:text-blue-300",children:u.contact.phone})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-3 text-sm",children:[(0,yn.jsx)(oo,{className:"w-4 h-4 text-blue-400"}),(0,yn.jsx)("span",{className:"text-gray-300",children:u.contact.address})]}),(null===c||void 0===c||null===(e=c.footerAd)||void 0===e?void 0:e.active)&&c.footerAd.logo&&c.footerAd.companyName&&(0,yn.jsxs)("div",{className:"text-sm text-gray-400 mt-4 pt-4 border-t border-gray-700 ".concat(c.footerAd.url?"cursor-pointer hover:text-gray-300 transition-colors":""),onClick:()=>{if(c.footerAd.url){try{Promise.resolve().then(r.bind(r,7784)).then(e=>{let{trackAdClick:t}=e;t("footerAd")})}catch(e){console.warn("Could not track ad click:",e)}console.log("Footer ad clicked:",c.footerAd.url),window.open(c.footerAd.url,"_blank")}},children:[(0,yn.jsx)("div",{className:"mb-2",children:(0,yn.jsx)("span",{children:"In cooperation with:"})}),(0,yn.jsx)("div",{className:"mb-2",children:(0,yn.jsx)("img",{src:c.footerAd.logo,alt:c.footerAd.companyName,className:"h-8 object-contain object-left",style:{width:"140px",display:"block"}})}),(0,yn.jsx)("div",{children:(0,yn.jsx)("span",{className:"font-medium text-gray-300",children:c.footerAd.companyName})})]})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"About"}),(0,yn.jsx)("ul",{className:"space-y-3",children:((null===(t=u.links)||void 0===t?void 0:t.about)||[]).map((e,t)=>(0,yn.jsx)("li",{children:(0,yn.jsx)(Le,{to:e.url,style:m,className:"text-sm hover:text-blue-300",children:e.label})},t))})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Marketplace"}),(0,yn.jsx)("ul",{className:"space-y-3",children:((null===(n=u.links)||void 0===n?void 0:n.marketplace)||[]).map((e,t)=>(0,yn.jsx)("li",{children:(0,yn.jsx)(Le,{to:e.url,style:m,className:"text-sm hover:text-blue-300",children:e.label})},t))})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Support"}),(0,yn.jsx)("ul",{className:"space-y-3 mb-6",children:((null===(s=u.links)||void 0===s?void 0:s.support)||[]).map((e,t)=>(0,yn.jsx)("li",{children:(0,yn.jsx)(Le,{to:e.url,style:m,className:"text-sm hover:text-blue-300",children:e.label})},t))}),(0,yn.jsx)("h5",{className:"text-md font-semibold mb-3",children:"Legal"}),(0,yn.jsx)("ul",{className:"space-y-2",children:((null===(i=u.links)||void 0===i?void 0:i.legal)||[]).map((e,t)=>(0,yn.jsx)("li",{children:(0,yn.jsx)(Le,{to:e.url,style:m,className:"text-xs hover:text-blue-300",children:e.label})},t))})]})]})}),(0,yn.jsx)("div",{style:{borderColor:u.style.borderColor},className:"border-t py-6",children:(0,yn.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-400",children:"Follow us:"}),(0,yn.jsxs)("div",{className:"flex space-x-3",children:[u.social.facebook&&(0,yn.jsx)("a",{href:u.social.facebook,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-blue-400",children:(0,yn.jsx)(lo,{className:"w-5 h-5"})}),u.social.twitter&&(0,yn.jsx)("a",{href:u.social.twitter,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-blue-400",children:(0,yn.jsx)(co,{className:"w-5 h-5"})}),u.social.instagram&&(0,yn.jsx)("a",{href:u.social.instagram,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-pink-400",children:(0,yn.jsx)(uo,{className:"w-5 h-5"})}),u.social.linkedin&&(0,yn.jsx)("a",{href:u.social.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-blue-400",children:(0,yn.jsx)(ho,{className:"w-5 h-5"})}),u.social.youtube&&(0,yn.jsx)("a",{href:u.social.youtube,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-red-400",children:(0,yn.jsx)(mo,{className:"w-5 h-5"})})]})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[(0,yn.jsxs)("span",{children:["\xa9 2025 ",u.companyInfo.name,". Made with"]}),(0,yn.jsx)(Cs,{className:"w-4 h-4 text-red-400"}),(0,yn.jsx)("span",{children:"for amazing marketplace experiences."})]})]})})]})})};const po=function(){const[e,t]=(0,a.useState)([]),{user:r,isAuthenticated:n}=Cn(),{notifications:s}=zn();(0,a.useEffect)(()=>{if(s&&s.length>0){const e=s[s.length-1];e&&e.type&&l(e.message,e.type,5e3)}},[s]),(0,a.useEffect)(()=>{if(n&&null!==r&&void 0!==r&&r.id){i();const e=setInterval(()=>{i()},6e5);return()=>clearInterval(e)}},[n,null===r||void 0===r?void 0:r.id]);const i=async()=>{try{const e=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/user/").concat(r.id,"/system-notifications"));if(e.ok){const t=await e.json();(t.notifications||[]).forEach((e,t)=>{setTimeout(()=>{l(e.message,e.type||"info",e.show_duration||5e3,e.id),o(e.id)},1e3*t)})}}catch(e){console.error("Error loading system notifications:",e)}},o=async e=>{try{await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/user/").concat(r.id,"/system-notifications/").concat(e,"/view"),{method:"POST"})}catch(t){console.error("Error marking notification as viewed:",t)}},l=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const s=Date.now()+Math.random(),i={id:s,message:e,type:r,duration:n,systemNotificationId:a};t(e=>[...e,i]),setTimeout(()=>{c(s)},n)},c=e=>{t(t=>t.filter(t=>t.id!==e))},d=e=>{switch(e){case"success":return(0,yn.jsx)(Qi,{className:"w-5 h-5 text-green-600"});case"error":return(0,yn.jsx)($i,{className:"w-5 h-5 text-red-600"});case"warning":return(0,yn.jsx)(Yi,{className:"w-5 h-5 text-orange-600"});case"welcome":return(0,yn.jsx)(Os,{className:"w-5 h-5 text-purple-600"});default:return(0,yn.jsx)(Ji,{className:"w-5 h-5 text-blue-600"})}},u=e=>{switch(e){case"success":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800 text-green-800 dark:text-green-200";case"error":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200";case"warning":return"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800 text-orange-800 dark:text-orange-200";case"welcome":return"bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800 text-purple-800 dark:text-purple-200";default:return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 text-blue-800 dark:text-blue-200"}},h=async e=>{if(n&&null!==r&&void 0!==r&&r.id)try{const t=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/user/").concat(r.id,"/system-notifications"));if(t.ok){const r=(await t.json()).notifications||[];r.filter(t=>t.event_trigger===e).forEach((e,t)=>{setTimeout(()=>{l(e.message,e.type||"info",e.show_duration||5e3,e.id),o(e.id)},1e3*t)})}}catch(t){console.error("Error loading event-triggered system notifications:",t)}};return(0,a.useEffect)(()=>(window.showToast=l,window.triggerSystemNotifications=h,()=>{delete window.showToast,delete window.triggerSystemNotifications}),[n,null===r||void 0===r?void 0:r.id]),0===e.length?null:(0,yn.jsx)("div",{className:"fixed top-20 right-4 z-50 space-y-2",children:e.map(e=>(0,yn.jsx)("div",{className:"max-w-sm w-full ".concat(u(e.type)," border rounded-lg p-4 shadow-lg backdrop-blur-sm transition-all duration-300 transform animate-slide-in-right"),children:(0,yn.jsxs)("div",{className:"flex items-start",children:[(0,yn.jsx)("div",{className:"flex-shrink-0",children:d(e.type)}),(0,yn.jsx)("div",{className:"ml-3 flex-1",children:(0,yn.jsx)("p",{className:"text-sm font-medium",children:e.message})}),(0,yn.jsx)("button",{onClick:()=>c(e.id),className:"ml-4 flex-shrink-0 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,yn.jsx)(Is,{className:"w-4 h-4"})})]})},e.id))})},go=e=>{try{const t=document.getElementById("cataloro-site-config-styles");t&&t.remove();const r=document.createElement("style");r.id="cataloro-site-config-styles";const n="\n      /* Site Configuration Styles */\n      :root {\n        --primary-color: ".concat(e.primaryColor||"#3B82F6",";\n        --secondary-color: ").concat(e.secondaryColor||"#8B5CF6",";\n        --accent-color: ").concat(e.accentColor||"#10B981",";\n      }\n      \n      /* Footer Configuration */\n      ").concat(e.footerEnabled?"":"\n      footer {\n        display: none !important;\n      }\n      ","\n      \n      /* Hero Section Control - ALWAYS ENABLED */\n      /* Hero section is essential for the marketplace experience */\n      ").concat("","\n      \n      /* Featured Products Control */\n      ").concat(e.featuredProductsEnabled?"":"\n      .featured-products-section {\n        display: none !important;\n      }\n      ","\n      \n      /* Categories Showcase Control */\n      ").concat(e.categoriesShowcase?"":"\n      .categories-showcase {\n        display: none !important;\n      }\n      ","\n      \n      /* Newsletter Signup Control */\n      ").concat(e.newsletterSignup?"":"\n      .newsletter-section {\n        display: none !important;\n      }\n      ","\n      \n      /* Wishlist/Favorites Control */\n      ").concat(e.wishlistEnabled?"":"\n      .wishlist-button,\n      .favorites-button,\n      .add-to-favorites {\n        display: none !important;\n      }\n      ","\n      \n      /* Product Reviews Control */\n      ").concat(e.productReviews?"":"\n      .reviews-section,\n      .product-reviews,\n      .review-button {\n        display: none !important;\n      }\n      ","\n      \n      /* Compare Feature Control */\n      ").concat(e.compareFeature?"":"\n      .compare-button,\n      .product-compare {\n        display: none !important;\n      }\n      ","\n      \n      /* Advanced Filters Control */\n      ").concat(e.advancedFilters?"":"\n      .advanced-filters,\n      .filter-panel {\n        display: none !important;\n      }\n      ","\n      \n      /* Search Bar Prominence */\n      ").concat(e.searchBarProminent?"\n      .search-bar-container {\n        transform: scale(1.1);\n        box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);\n        border: 2px solid var(--primary-color);\n      }\n      ":"","\n      \n      /* Compact Mode */\n      ").concat(e.compactMode?"\n      .product-card {\n        padding: 0.5rem !important;\n      }\n      .hero-section {\n        min-height: 200px !important;\n      }\n      .page-padding {\n        padding: 1rem !important;\n      }\n      ":"","\n      \n      /* Custom CSS */\n      ").concat(e.customCSS||"","\n    ");if(r.textContent=n,document.head.appendChild(r),e.footerEnabled){const t={enabled:e.footerEnabled,companyInfo:{name:e.footerCompanyName||"Cataloro",tagline:e.footerTagline||"Modern Marketplace for Everyone",description:e.footerDescription||"Discover, buy, and sell amazing products in our trusted marketplace."},contact:{email:e.footerEmail||"hello@cataloro.com",phone:e.footerPhone||"+1 (555) 123-4567",address:e.footerAddress||"123 Marketplace St, Commerce City, CC 12345"},social:{facebook:e.footerFacebook||"",twitter:e.footerTwitter||"",instagram:e.footerInstagram||"",linkedin:e.footerLinkedin||"",youtube:e.footerYoutube||""},style:{backgroundColor:e.footerBackgroundColor||"#1f2937",textColor:e.footerTextColor||"#ffffff",linkColor:e.footerLinkColor||"#60a5fa",borderColor:"#374151"}};localStorage.setItem("cataloro_footer_config",JSON.stringify(t))}else localStorage.removeItem("cataloro_footer_config");const a={heroSectionEnabled:!0,featuredProductsEnabled:!1!==e.featuredProductsEnabled,categoriesShowcase:!1!==e.categoriesShowcase,testimonialSection:!1!==e.testimonialSection,newsletterSignup:!1!==e.newsletterSignup,searchBarProminent:e.searchBarProminent||!1,userRegistration:!1!==e.userRegistration,guestBrowsing:!1!==e.guestBrowsing,productReviews:!1!==e.productReviews,wishlistEnabled:!1!==e.wishlistEnabled,compareFeature:e.compareFeature||!1,advancedFilters:!1!==e.advancedFilters,bulkOperations:e.bulkOperations||!1,productVariations:e.productVariations||!1,inventoryTracking:e.inventoryTracking||!1,compactMode:e.compactMode||!1,animationsEnabled:!1!==e.animationsEnabled};return localStorage.setItem("cataloro_feature_flags",JSON.stringify(a)),window.dispatchEvent(new CustomEvent("featureFlagsUpdated",{detail:a})),console.log("\u2705 Site configuration applied successfully",a),!0}catch(t){return console.error("\u274c Error applying site configuration:",t),!1}},xo=()=>{try{const e=localStorage.getItem("cataloro_site_config");if(e){const t=JSON.parse(e);return go(t),console.log("\u2705 Site configuration loaded and applied on startup"),!0}return!1}catch(e){return console.warn("\u26a0\ufe0f Could not load site configuration:",e),!1}};const yo=function(){const[e,t]=(0,a.useState)(!1),[r,n]=(0,a.useState)(!0),[s,i]=(0,a.useState)(!1),[o,l]=(0,a.useState)(!1),c=ee();if((0,a.useEffect)(()=>{const e=localStorage.getItem("cataloro_token"),r=localStorage.getItem("cataloro_user");if(e&&r)try{JSON.parse(r),t(!0)}catch(a){localStorage.removeItem("cataloro_token"),localStorage.removeItem("cataloro_user"),t(!1)}else t(!1);n(!1)},[]),(0,a.useEffect)(()=>{"true"===localStorage.getItem("cataloro_dark_mode")&&(i(!0),document.documentElement.classList.add("dark")),xo()},[]),(0,a.useEffect)(()=>{l(!1)},[c]),r)return(0,yn.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-purple-900 flex items-center justify-center",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,yn.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Loading Cataloro..."})]})});const d=["/profile/"].some(e=>c.pathname.startsWith(e));return e||d?(0,yn.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300 ".concat(s?"dark":""),children:[(0,yn.jsx)(so,{darkMode:s,toggleDarkMode:()=>{const e=!s;i(e),localStorage.setItem("cataloro_dark_mode",e.toString()),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},isMobileMenuOpen:o,setIsMobileMenuOpen:l}),(0,yn.jsx)(io,{isOpen:o,onClose:()=>l(!1)}),(0,yn.jsx)("main",{className:"pt-20 min-h-screen",children:(0,yn.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,yn.jsx)(ve,{})})}),(0,yn.jsx)(fo,{}),(0,yn.jsx)(po,{}),o&&(0,yn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>l(!1)})]}):(0,yn.jsx)(be,{to:"/login",replace:!0})};const bo=function(){const[e,t]=(0,a.useState)(null),[r,n]=(0,a.useState)(0),[s,i]=(0,a.useState)(0),[o,l]=(0,a.useState)(0),{isMenuItemVisible:c}=ao(),d=ee();(0,a.useEffect)(()=>{(async()=>{const e=localStorage.getItem("cataloro_user");if(e)try{const r=JSON.parse(e);t(r);try{const e=(await Hn.getUserMessages(r.id)).filter(e=>!e.is_read&&e.recipient_id===r.id).length;l(e),localStorage.setItem("cataloro_unread_messages",e.toString())}catch(a){console.error("Error loading messages:",a);const e=localStorage.getItem("cataloro_unread_messages");e&&l(parseInt(e,10)||0)}}catch(a){console.error("Error parsing user data:",a)}const r=localStorage.getItem("cataloro_cart_count");r&&n(parseInt(r,10)||0)})();const e=e=>{const{type:t,count:r}=e.detail;switch(t){case"messages":l(r),localStorage.setItem("cataloro_unread_messages",r.toString());break;case"cart":n(r),localStorage.setItem("cataloro_cart_count",r.toString())}};return window.addEventListener("updateMobileBadge",e),()=>{window.removeEventListener("updateMobileBadge",e)}},[]);const u=[{label:"Browse",path:"/browse",icon:Ns,badge:null,key:"browse"},{label:"Messages",path:"/messages",icon:Ss,badge:o>0?o:null,key:"messages"},{label:"Create",path:"/create-listing",icon:_s,badge:null,highlight:!0,key:"create"},{label:"Tenders",path:"/mobile-tenders",icon:Es,badge:null,key:"tenders"},{label:"Listings",path:"/mobile-my-listings",icon:Ms,badge:null,key:"listings"}].filter(e=>c("mobile_menu",e.key));return(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 z-40 lg:hidden safe-area-pb",children:[(0,yn.jsx)("div",{className:"flex items-center justify-between px-2 py-2 max-w-md mx-auto",children:u.map((e,t)=>{const r=e.icon,n="/browse"===(a=e.path)&&"/"===d.pathname||d.pathname===a;var a;return(0,yn.jsxs)(Le,{to:e.path,className:"relative flex flex-col items-center justify-center transition-all duration-200 touch-manipulation ".concat(e.highlight?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg rounded-2xl p-3 -mt-3 mx-2":n?"bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400 rounded-xl px-3 py-2":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 active:bg-gray-100 dark:active:bg-gray-800 rounded-xl px-3 py-2"),style:e.highlight?{width:"60px",height:"60px",minWidth:"60px"}:{minHeight:"48px",minWidth:"60px"},children:[(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(r,{className:"".concat(e.highlight?"w-6 h-6":"w-5 h-5")}),e.badge&&(0,yn.jsx)("div",{className:"absolute -top-2 -right-2 text-white text-xs rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 font-medium shadow-md ".concat("Messages"===e.label?"bg-red-500 animate-pulse":"Cart"===e.label?"bg-blue-500":"bg-green-500"),children:e.badge>99?"99+":e.badge})]}),!e.highlight&&(0,yn.jsx)("span",{className:"text-xs mt-1 font-medium truncate w-full text-center",children:e.label})]},e.path)})}),(0,yn.jsx)("div",{className:"h-safe-area-inset-bottom bg-white dark:bg-gray-900"})]}),(0,yn.jsx)("div",{className:"h-20 lg:hidden"})]})},vo=ks("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),wo=ks("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const jo=function(e){let{isOpen:t,onClose:r}=e;const[n,s]=(0,a.useState)(null),i=[{id:"overview",title:"Dashboard Overview",icon:qs,color:"bg-blue-500",items:[{label:"Admin Dashboard",path:"/admin",icon:Rs},{label:"Site Analytics",path:"/admin/analytics",icon:fi},{label:"Performance Monitor",path:"/admin/performance",icon:zs}]},{id:"users",title:"User Management",icon:ii,color:"bg-green-500",items:[{label:"All Users",path:"/admin#users",icon:ii},{label:"User Roles",path:"/admin#user-roles",icon:Rs},{label:"User Analytics",path:"/admin#user-analytics",icon:qs}]},{id:"listings",title:"Content Management",icon:Ms,color:"bg-purple-500",items:[{label:"All Listings",path:"/admin#listings",icon:Ms},{label:"Pending Approval",path:"/admin#pending",icon:Js},{label:"Categories",path:"/admin#categories",icon:_i}]},{id:"site",title:"Site Settings",icon:Ps,color:"bg-orange-500",items:[{label:"Site Branding",path:"/admin#site-branding",icon:Us},{label:"Hero Selection",path:"/admin#hero",icon:Gs},{label:"Notifications",path:"/admin#notifications",icon:Os}]},{id:"advanced",title:"Advanced Tools",icon:vo,color:"bg-red-500",items:[{label:"System Monitor",path:"/admin#system",icon:fi},{label:"Cache Management",path:"/admin#cache",icon:mi},{label:"Database Tools",path:"/admin#database",icon:vo}]}],o=()=>{r()};return(0,yn.jsxs)(yn.Fragment,{children:[t&&(0,yn.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 lg:hidden",onClick:r}),(0,yn.jsxs)("div",{className:"fixed top-0 right-0 h-full w-80 bg-white dark:bg-gray-900 shadow-2xl z-50 transform transition-transform duration-300 ease-in-out lg:hidden ".concat(t?"translate-x-0":"translate-x-full"),children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:(0,yn.jsx)(Rs,{className:"w-5 h-5"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h2",{className:"text-lg font-bold",children:"Admin Panel"}),(0,yn.jsx)("p",{className:"text-sm opacity-80",children:"Mobile Dashboard"})]})]}),(0,yn.jsx)("button",{onClick:r,className:"p-2 text-white/80 hover:text-white hover:bg-white/20 rounded-full transition-colors",children:(0,yn.jsx)(Is,{className:"w-5 h-5"})})]}),(0,yn.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,yn.jsx)("div",{className:"p-4 space-y-3",children:i.map(e=>{const t=e.icon,r=n===e.id;return(0,yn.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[(0,yn.jsxs)("button",{onClick:()=>{return t=e.id,void s(n===t?null:t);var t},className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"w-8 h-8 ".concat(e.color," rounded-lg flex items-center justify-center"),children:(0,yn.jsx)(t,{className:"w-4 h-4 text-white"})}),(0,yn.jsxs)("div",{className:"text-left",children:[(0,yn.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.title}),(0,yn.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.items.length," tools"]})]})]}),(0,yn.jsx)(wo,{className:"w-4 h-4 text-gray-400 transition-transform ".concat(r?"rotate-90":"")})]}),r&&(0,yn.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700",children:e.items.map((e,t)=>{const r=e.icon;return(0,yn.jsxs)(Le,{to:e.path,onClick:o,className:"flex items-center space-x-3 p-3 text-gray-700 dark:text-gray-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:text-blue-700 dark:hover:text-blue-300 transition-colors",children:[(0,yn.jsx)(r,{className:"w-4 h-4"}),(0,yn.jsx)("span",{className:"text-sm",children:e.label})]},t)})})]},e.id)})})}),(0,yn.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:(0,yn.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,yn.jsxs)(Le,{to:"/admin#users",onClick:o,className:"flex flex-col items-center p-3 text-center bg-white dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[(0,yn.jsx)(ii,{className:"w-5 h-5 text-blue-500 mb-1"}),(0,yn.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Users"})]}),(0,yn.jsxs)(Le,{to:"/admin#listings",onClick:o,className:"flex flex-col items-center p-3 text-center bg-white dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[(0,yn.jsx)(Ms,{className:"w-5 h-5 text-green-500 mb-1"}),(0,yn.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Listings"})]}),(0,yn.jsxs)(Le,{to:"/admin#analytics",onClick:o,className:"flex flex-col items-center p-3 text-center bg-white dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[(0,yn.jsx)(qs,{className:"w-5 h-5 text-purple-500 mb-1"}),(0,yn.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Analytics"})]})]})})]})]})};const ko=function(){var e,t;const[r,n]=(0,a.useState)(!1),[s,i]=(0,a.useState)(!0),[o,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),[m,f]=(0,a.useState)(!1),[p,g]=(0,a.useState)({});(0,a.useEffect)(()=>{(()=>{try{const e=localStorage.getItem("cataloro_site_branding");if(e){const t=JSON.parse(e);g(t)}}catch(e){console.warn("Failed to load site branding:",e)}})();const e=e=>{e.detail&&g(e.detail)};return window.addEventListener("siteBrandingUpdated",e),()=>window.removeEventListener("siteBrandingUpdated",e)},[]);const x=ee();if((0,a.useEffect)(()=>{const e=localStorage.getItem("cataloro_token"),t=localStorage.getItem("cataloro_user");if(e&&t)try{const e=JSON.parse(t);l(e),n(!0)}catch(r){localStorage.removeItem("cataloro_token"),localStorage.removeItem("cataloro_user"),n(!1)}else n(!1);i(!1)},[]),(0,a.useEffect)(()=>{"true"===localStorage.getItem("cataloro_dark_mode")&&(d(!0),document.documentElement.classList.add("dark")),xo()},[]),(0,a.useEffect)(()=>{h(!1),f(!1)},[x]),s)return(0,yn.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-purple-900 flex items-center justify-center",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,yn.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Loading Cataloro..."})]})});const y=["/profile/","/messages"].some(e=>x.pathname.startsWith(e));return r||y?(0,yn.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300 ".concat(c?"dark":""),children:[(0,yn.jsx)("div",{className:"lg:hidden fixed top-0 left-0 right-0 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 z-30 safe-top",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 h-14",children:[(0,yn.jsx)("button",{onClick:()=>h(!0),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors touch-manipulation",children:(0,yn.jsx)(Ds,{className:"w-6 h-6"})}),(0,yn.jsx)("div",{className:"flex items-center justify-center flex-1",children:p.logo_light_url||p.logo_dark_url||p.logo_url?(0,yn.jsxs)(Le,{to:"/browse",className:"header-logo",children:[(0,yn.jsx)("img",{src:c?p.logo_dark_url||p.logo_url:p.logo_light_url||p.logo_url,alt:p.site_name||"Cataloro",className:"h-8 w-auto object-contain max-w-40",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),(0,yn.jsxs)("div",{className:"hidden items-center space-x-2",children:[(0,yn.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-white font-bold text-sm",children:"C"})}),(0,yn.jsx)("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Cataloro"})]})]}):(0,yn.jsxs)(Le,{to:"/browse",className:"flex items-center space-x-2",children:[(0,yn.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-white font-bold text-sm",children:"C"})}),(0,yn.jsx)("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Cataloro"})]})}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[o&&"admin"===o.role&&(0,yn.jsx)("button",{onClick:()=>f(!0),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/20 rounded-lg transition-colors touch-manipulation",children:(0,yn.jsx)(Rs,{className:"w-5 h-5"})}),o&&(0,yn.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-white font-medium text-xs",children:(null===(e=o.full_name)||void 0===e?void 0:e.charAt(0))||(null===(t=o.username)||void 0===t?void 0:t.charAt(0))||"U"})})]})]})}),(0,yn.jsx)("div",{className:"h-14 lg:hidden safe-top-padding"}),(0,yn.jsx)("main",{className:"min-h-[calc(100vh-8rem)] lg:min-h-screen pb-20",children:(0,yn.jsx)(ve,{})}),(0,yn.jsx)(bo,{}),(0,yn.jsx)(io,{isOpen:u,onClose:()=>h(!1),darkMode:c,toggleDarkMode:()=>{const e=!c;d(e),localStorage.setItem("cataloro_dark_mode",e.toString()),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}}),o&&"admin"===o.role&&(0,yn.jsx)(jo,{isOpen:m,onClose:()=>f(!1)}),(0,yn.jsx)(po,{}),(u||m)&&(0,yn.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>{h(!1),f(!1)}})]}):(0,yn.jsx)(be,{to:"/login",replace:!0})},No=ks("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),_o=ks("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),So=ks("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);var Eo=r(7784);const Ao=ks("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);const Co=function(e){let{onSearch:t,placeholder:r="Search catalysts...",className:n="",initialValue:s=""}=e;const[i,o]=(0,a.useState)(s),[l,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(!1),[f,p]=(0,a.useState)([]),g=(0,a.useRef)(null),x=(0,a.useRef)(null);(0,a.useEffect)(()=>{const e=localStorage.getItem("cataloro_recent_searches");if(e)try{p(JSON.parse(e))}catch(t){console.error("Error loading recent searches:",t)}if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;x.current=new e,x.current.continuous=!1,x.current.interimResults=!1,x.current.lang="en-US",x.current.onresult=e=>{const t=e.results[0][0].transcript;o(t),y(t),m(!1)},x.current.onerror=()=>{m(!1)},x.current.onend=()=>{m(!1)}}},[]),(0,a.useEffect)(()=>{if(i.length>1){const e=["BMW catalytic converter","Mercedes catalyst","Ford exhaust catalyst","Audi catalytic converter","Volkswagen catalyst","Ceramic catalyst","Metallic catalyst","Diesel particulate filter"].filter(e=>e.toLowerCase().includes(i.toLowerCase())).slice(0,5);c(e),u(!0)}else c([]),u(!1)},[i]);const y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;if(e.trim()){var r;const n=[e,...f.filter(t=>t!==e)].slice(0,10);p(n),localStorage.setItem("cataloro_recent_searches",JSON.stringify(n)),t(e),u(!1),null===(r=g.current)||void 0===r||r.blur()}};(0,a.useEffect)(()=>{s!==i&&o(s)},[s]);const b=e=>{o(e),y(e)};return(0,yn.jsxs)("div",{className:"relative ".concat(n),children:[(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:(0,yn.jsx)(No,{className:"w-5 h-5"})}),(0,yn.jsx)("input",{ref:g,type:"text",value:i,onChange:e=>o(e.target.value),onKeyPress:e=>"Enter"===e.key&&y(),onFocus:()=>u(i.length>1||f.length>0),placeholder:r,className:"w-full pl-10 pr-20 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base"}),(0,yn.jsxs)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex items-center space-x-1",children:[i&&(0,yn.jsx)("button",{onClick:()=>{var e;o(""),c([]),u(!1),null===(e=g.current)||void 0===e||e.focus()},className:"p-1.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:(0,yn.jsx)(Is,{className:"w-4 h-4"})}),x.current&&(0,yn.jsx)("button",{onClick:()=>{x.current&&!h&&(m(!0),x.current.start())},className:"p-1.5 rounded-full transition-colors ".concat(h?"text-red-500 bg-red-100 dark:bg-red-900/30 animate-pulse":"text-gray-400 hover:text-blue-500 hover:bg-blue-100 dark:hover:bg-blue-900/30"),children:(0,yn.jsx)(Mi,{className:"w-4 h-4"})}),(0,yn.jsx)("button",{onClick:()=>{var e;null===(e=navigator.mediaDevices)||void 0===e||e.getUserMedia({video:!0}).then(e=>{console.log("Camera search activated"),e.getTracks().forEach(e=>e.stop())}).catch(e=>{console.log("Camera not available:",e)})},className:"p-1.5 text-gray-400 hover:text-green-500 hover:bg-green-100 dark:hover:bg-green-900/30 rounded-full transition-colors",children:(0,yn.jsx)(Ao,{className:"w-4 h-4"})})]})]}),d&&(0,yn.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-lg z-50 max-h-80 overflow-y-auto",children:[f.length>0&&0===i.length&&(0,yn.jsxs)("div",{className:"p-3 border-b border-gray-100 dark:border-gray-700",children:[(0,yn.jsx)("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Recent Searches"}),f.slice(0,5).map((e,t)=>(0,yn.jsx)("button",{onClick:()=>b(e),className:"block w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e},t))]}),l.length>0&&(0,yn.jsxs)("div",{className:"p-3",children:[(0,yn.jsx)("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Suggestions"}),l.map((e,t)=>(0,yn.jsxs)("button",{onClick:()=>b(e),className:"block w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[(0,yn.jsx)("span",{className:"font-medium",children:e.split(i.toLowerCase())[0]}),(0,yn.jsx)("span",{className:"bg-yellow-200 dark:bg-yellow-800 px-1 rounded",children:i}),(0,yn.jsx)("span",{children:e.split(i.toLowerCase())[1]})]},t))]})]})]})};const Oo=function(e){let{onSearch:t,onFilterToggle:r,quickStats:n={},searchTerm:s="",className:i=""}=e;const[o,l]=(0,a.useState)({title:"Find Catalysts",description:"Discover quality catalytic converters",search_placeholder:"Search catalysts...",height:200,background_type:"gradient",background_gradient_from:"#3f6ec7",background_gradient_to:"#ec4899",background_color:"#3B82F6",background_image:"",gradient_opacity:.8,background_size:"cover",background_repeat:"no-repeat",background_position:"center",display_mode:"full_width"});return(0,a.useEffect)(()=>{(()=>{const e=localStorage.getItem("cataloro_hero_content");if(e)try{const t=JSON.parse(e);l(e=>(0,Ie.A)((0,Ie.A)((0,Ie.A)({},e),t),{},{height:Math.min(t.height||200,250)}))}catch(t){console.error("Error parsing hero content:",t)}})();const e=e=>{e.detail&&l(t=>(0,Ie.A)((0,Ie.A)((0,Ie.A)({},t),e.detail),{},{height:Math.min(e.detail.height||200,250)}))};return window.addEventListener("heroContentUpdated",e),()=>window.removeEventListener("heroContentUpdated",e)},[]),(0,yn.jsx)("div",{className:"lg:hidden ".concat(i),children:(0,yn.jsxs)("div",{className:"hero-section relative text-white overflow-hidden w-screen",style:(()=>{const e=(e,t)=>{const r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(!r)return e;const n=parseInt(r[1],16),a=parseInt(r[2],16),s=parseInt(r[3],16);return"rgba(".concat(n,", ").concat(a,", ").concat(s,", ").concat(t,")")},t=o.gradient_opacity||.8,r={height:"".concat(o.height,"px"),minHeight:"220px",maxHeight:"280px",marginTop:"-1rem",marginBottom:"1rem",marginLeft:"calc(-50vw + 50%)",marginRight:"calc(-50vw + 50%)"};switch("image"!==o.background_type&&"image-gradient"!==o.background_type||(r.backgroundSize=o.background_size||"cover",r.backgroundPosition=o.background_position||"center",r.backgroundRepeat=o.background_repeat||"no-repeat"),o.background_type){case"gradient":return(0,Ie.A)((0,Ie.A)({},r),{},{backgroundImage:"linear-gradient(to right, ".concat(o.background_gradient_from||"#3f6ec7",", ").concat(o.background_gradient_to||"#ec4899",")")});case"solid":return(0,Ie.A)((0,Ie.A)({},r),{},{backgroundColor:o.background_color||"#3B82F6"});case"image":return(0,Ie.A)((0,Ie.A)({},r),{},{backgroundImage:o.background_image?"linear-gradient(rgba(0,0,0,".concat(.5*t,"), rgba(0,0,0,").concat(.5*t,")), url(").concat(o.background_image,")"):"linear-gradient(to right, #3f6ec7, #a855f7, #ec4899)"});case"image-gradient":const n=e(o.background_gradient_from||"#3f6ec7",t),a=e(o.background_gradient_to||"#ec4899",t);return(0,Ie.A)((0,Ie.A)({},r),{},{backgroundImage:o.background_image?"linear-gradient(to right, ".concat(n,", ").concat(a,"), url(").concat(o.background_image,")"):"linear-gradient(to right, ".concat(o.background_gradient_from||"#3f6ec7",", ").concat(o.background_gradient_to||"#ec4899",")")});default:return(0,Ie.A)((0,Ie.A)({},r),{},{backgroundImage:"linear-gradient(to right, #3f6ec7, #a855f7, #ec4899)"})}})(),children:[(0,yn.jsx)("div",{className:"absolute inset-0 bg-black/20"}),(0,yn.jsxs)("div",{className:"relative z-10 flex flex-col justify-center h-full px-6 py-6 max-w-7xl mx-auto",children:[o.image_url&&(0,yn.jsx)("div",{className:"mb-3 flex justify-center",children:(0,yn.jsx)("img",{src:o.image_url,alt:"Hero",className:"max-h-14 max-w-28 object-contain"})}),(0,yn.jsx)("div",{className:"mb-4",children:(0,yn.jsx)(Co,{onSearch:t,initialValue:s,placeholder:o.search_placeholder||"Search catalysts..."})}),(0,yn.jsx)("div",{className:"flex justify-center",children:(0,yn.jsxs)("button",{onClick:r,className:"flex items-center space-x-2 px-6 py-2 bg-white/20 backdrop-blur-sm text-white rounded-lg hover:bg-white/30 transition-colors",children:[(0,yn.jsx)(ji,{className:"w-4 h-4"}),(0,yn.jsx)("span",{className:"text-sm",children:"Filters"})]})})]})]})})},To=ks("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const Po=function(e){var t,r,n;let{isOpen:s,onClose:i,filters:o,onFiltersChange:l,availableFilters:c={}}=e;const d={category:"",priceRange:{min:0,max:1e3},location:"",condition:"",dateRange:"",rating:0,sortBy:"newest",bidFilter:"all"},[u,h]=(0,a.useState)(o||d),[m,f]=(0,a.useState)({price:!1,location:!1,category:!1,condition:!1,date:!1,rating:!1,bidFilter:!1});(0,a.useEffect)(()=>{h(e=>(0,Ie.A)((0,Ie.A)({},d),o))},[o]);const p=e=>{f(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e]:!t[e]}))},g=(e,t)=>{h(r=>(0,Ie.A)((0,Ie.A)({},r),{},{[e]:t}))},x=(e,t)=>{h(r=>(0,Ie.A)((0,Ie.A)({},r),{},{priceRange:(0,Ie.A)((0,Ie.A)({},r.priceRange),{},{[e]:parseInt(t)||0})}))},y=()=>{var e,t;if(!u)return 0;let r=0;return u.category&&r++,u.location&&r++,u.condition&&r++,u.dateRange&&r++,u.rating&&u.rating>0&&r++,((null===(e=u.priceRange)||void 0===e?void 0:e.min)>0||(null===(t=u.priceRange)||void 0===t?void 0:t.max)<1e3)&&r++,r},b=c.categories||["Catalytic Converters","Diesel Particulate Filters","Ceramic Catalysts","Metallic Catalysts","Three-way Catalysts","Oxidation Catalysts"],v=c.locations||["Germany","France","United Kingdom","Netherlands","Belgium","Italy","Spain"],w=c.conditions||["New","Like New","Good","Fair","Used"];return(0,yn.jsxs)(yn.Fragment,{children:[s&&(0,yn.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:i}),(0,yn.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 rounded-t-2xl shadow-2xl z-50 transform transition-transform duration-300 ease-out lg:hidden ".concat(s?"translate-y-0":"translate-y-full"),children:[(0,yn.jsx)("div",{className:"w-12 h-1 bg-gray-300 dark:bg-gray-600 rounded-full mx-auto mt-3"}),(0,yn.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)(ji,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"}),(0,yn.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Filters"}),y()>0&&(0,yn.jsx)("div",{className:"bg-blue-500 text-white text-xs px-2 py-1 rounded-full",children:y()})]}),(0,yn.jsx)("button",{onClick:i,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",children:(0,yn.jsx)(Is,{className:"w-5 h-5"})})]}),(0,yn.jsx)("div",{className:"max-h-[70vh] overflow-y-auto",children:(0,yn.jsxs)("div",{className:"p-4 space-y-6",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Sort By"}),(0,yn.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{key:"newest",label:"Newest"},{key:"oldest",label:"Oldest"},{key:"price_low",label:"Price: Low to High"},{key:"price_high",label:"Price: High to Low"}].map(e=>(0,yn.jsx)("button",{onClick:()=>g("sortBy",e.key),className:"p-3 text-sm rounded-lg border transition-colors ".concat((null===u||void 0===u?void 0:u.sortBy)===e.key?"bg-blue-100 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-300":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300"),children:e.label},e.key))})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"My Activity"}),(0,yn.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{key:"all",label:"All Listings"},{key:"placed_bid",label:"Placed a Bid"},{key:"not_placed_bid",label:"Not Placed a Bid"},{key:"own_listings",label:"My Listings"}].map(e=>(0,yn.jsx)("button",{onClick:()=>g("bidFilter",e.key),className:"p-3 text-sm rounded-lg border transition-colors ".concat((null===u||void 0===u?void 0:u.bidFilter)===e.key?"bg-green-100 dark:bg-green-900/30 border-green-500 text-green-700 dark:text-green-300":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300"),disabled:!c.userId,children:e.label},e.key))}),!c.userId&&(0,yn.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Login to filter by your activity"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("button",{onClick:()=>p("price"),className:"flex items-center justify-between w-full text-left",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)(Es,{className:"w-4 h-4 text-gray-500"}),(0,yn.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Price Range"})]}),m.price?(0,yn.jsx)(To,{className:"w-4 h-4"}):(0,yn.jsx)(to,{className:"w-4 h-4"})]}),m.price&&(0,yn.jsxs)("div",{className:"mt-3 space-y-4",children:[(0,yn.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Min Price"}),(0,yn.jsx)("input",{type:"number",value:(null===(t=u.priceRange)||void 0===t?void 0:t.min)||0,onChange:e=>x("min",e.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm",placeholder:"0"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Max Price"}),(0,yn.jsx)("input",{type:"number",value:(null===(r=u.priceRange)||void 0===r?void 0:r.max)||1e3,onChange:e=>x("max",e.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm",placeholder:"1000"})]})]}),(0,yn.jsx)("div",{className:"px-2",children:(0,yn.jsx)("input",{type:"range",min:"0",max:"1000",value:(null===(n=u.priceRange)||void 0===n?void 0:n.max)||1e3,onChange:e=>x("max",e.target.value),className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer"})})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("button",{onClick:()=>p("category"),className:"flex items-center justify-between w-full text-left",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)(wi,{className:"w-4 h-4 text-gray-500"}),(0,yn.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Category"})]}),m.category?(0,yn.jsx)(To,{className:"w-4 h-4"}):(0,yn.jsx)(to,{className:"w-4 h-4"})]}),m.category&&(0,yn.jsx)("div",{className:"mt-3 space-y-2",children:b.map(e=>(0,yn.jsxs)("button",{onClick:()=>g("category",e===(null===u||void 0===u?void 0:u.category)?"":e),className:"flex items-center justify-between w-full p-3 rounded-lg border transition-colors ".concat((null===u||void 0===u?void 0:u.category)===e?"bg-blue-100 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-300":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[(0,yn.jsx)("span",{className:"text-sm",children:e}),(null===u||void 0===u?void 0:u.category)===e&&(0,yn.jsx)(Gi,{className:"w-4 h-4"})]},e))})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("button",{onClick:()=>p("location"),className:"flex items-center justify-between w-full text-left",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)(oo,{className:"w-4 h-4 text-gray-500"}),(0,yn.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Location"})]}),m.location?(0,yn.jsx)(To,{className:"w-4 h-4"}):(0,yn.jsx)(to,{className:"w-4 h-4"})]}),m.location&&(0,yn.jsx)("div",{className:"mt-3 space-y-2",children:v.map(e=>(0,yn.jsxs)("button",{onClick:()=>g("location",e===(null===u||void 0===u?void 0:u.location)?"":e),className:"flex items-center justify-between w-full p-3 rounded-lg border transition-colors ".concat((null===u||void 0===u?void 0:u.location)===e?"bg-blue-100 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-300":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[(0,yn.jsx)("span",{className:"text-sm",children:e}),(null===u||void 0===u?void 0:u.location)===e&&(0,yn.jsx)(Gi,{className:"w-4 h-4"})]},e))})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("button",{onClick:()=>p("condition"),className:"flex items-center justify-between w-full text-left",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)(Gs,{className:"w-4 h-4 text-gray-500"}),(0,yn.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Condition"})]}),m.condition?(0,yn.jsx)(To,{className:"w-4 h-4"}):(0,yn.jsx)(to,{className:"w-4 h-4"})]}),m.condition&&(0,yn.jsx)("div",{className:"mt-3 grid grid-cols-2 gap-2",children:w.map(e=>(0,yn.jsx)("button",{onClick:()=>g("condition",e===(null===u||void 0===u?void 0:u.condition)?"":e),className:"p-3 text-sm rounded-lg border transition-colors ".concat((null===u||void 0===u?void 0:u.condition)===e?"bg-blue-100 dark:bg-blue-900/30 border-blue-500 text-blue-700 dark:text-blue-300":"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300"),children:e},e))})]})]})}),(0,yn.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:(0,yn.jsxs)("div",{className:"flex space-x-3",children:[(0,yn.jsx)("button",{onClick:()=>{h(d)},className:"flex-1 px-4 py-3 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Clear All"}),(0,yn.jsxs)("button",{onClick:()=>{l(u),i()},className:"flex-1 px-4 py-3 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors",children:["Apply Filters (",y(),")"]})]})}),(0,yn.jsx)("div",{className:"h-safe-area-inset-bottom"})]})]})};const Lo=function(e){var t,r,n,s,i;let{listing:o,onFavorite:l,onQuickView:c,onBidUpdate:d}=e;const{user:u}=Cn(),{showToast:h}=zn(),[m,f]=(0,a.useState)(o),[p,g]=(0,a.useState)(o.favorited||!1),[x,y]=(0,a.useState)(""),[b,v]=(0,a.useState)(!1),[w,j]=(0,a.useState)(""),[k,N]=(0,a.useState)(!1),[_,S]=(0,a.useState)({price_range_min_percent:10,price_range_max_percent:10}),[E,A]=(0,a.useState)(null),[C,O]=(0,a.useState)(!1);(0,a.useEffect)(()=>{f(o)},[o]);const T=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR"}).format(e),P=()=>{var e,t,r,n;if(!u)return!1;return!((null===(e=m.seller)||void 0===e?void 0:e.username)===u.username||m.seller_id===u.id||(null===(t=m.seller)||void 0===t?void 0:t.id)===u.id)&&(null===(r=m.bid_info)||void 0===r||!r.has_bids||(null===(n=m.bid_info)||void 0===n?void 0:n.highest_bidder_id)!==u.id)},L=()=>{var e,t;return null!==(e=m.bid_info)&&void 0!==e&&e.has_bids&&null!==(t=m.bid_info)&&void 0!==t&&t.highest_bid?m.bid_info.highest_bid+1:m.price+1};(0,a.useEffect)(()=>{(async()=>{try{const e="https://market-refactor-1.preview.emergentagent.com",t=await fetch("".concat(e,"/api/marketplace/price-range-settings"));if(t.ok){const e=await t.json();S(e)}}catch(e){console.error("Error fetching price range settings:",e)}})(),(async()=>{if("Catalysts"===m.category&&(m.catalyst_id||m.title)){O(!0);try{const e="https://market-refactor-1.preview.emergentagent.com",t=await fetch("".concat(e,"/api/admin/catalyst/calculations"));if(t.ok){const e=await t.json();let r=null;r=m.catalyst_id?e.find(e=>e.cat_id===m.catalyst_id):e.find(e=>e.name&&e.name.toLowerCase()===m.title.toLowerCase()),r&&r.total_price&&A(parseFloat(r.total_price))}}catch(e){console.error("Failed to fetch price suggestion:",e)}finally{O(!1)}}})()},[m.catalyst_id,m.title,m.category]);const M=(()=>{if(!u)return{disabled:!0,text:"Login to Bid",color:"bg-gray-400"};if(!P()){var e,t;if((null===(e=m.seller)||void 0===e?void 0:e.username)===u.username||m.seller_id===u.id)return{disabled:!0,text:"Your Listing",color:"bg-gray-400"};if((null===(t=m.bid_info)||void 0===t?void 0:t.highest_bidder_id)===u.id)return{disabled:!0,text:"Highest Bidder",color:"bg-green-500"}}return b?{disabled:!0,text:"Submitting...",color:"bg-blue-400"}:k?{disabled:!0,text:"Bid Submitted!",color:"bg-green-500"}:{disabled:!1,text:"Place Bid",color:"bg-blue-600 hover:bg-blue-700"}})();return(0,yn.jsx)("div",{className:"relative mb-4",children:(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[(0,yn.jsx)(Le,{to:"/listing/".concat(m.id),className:"block",children:(0,yn.jsxs)("div",{className:"relative aspect-video bg-gray-100 dark:bg-gray-700",children:[m.images&&m.images.length>0?(0,yn.jsx)("img",{src:m.images[0],alt:m.title,className:"w-full h-full object-cover",loading:"lazy"}):(0,yn.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,yn.jsxs)("div",{className:"text-gray-400 text-center",children:[(0,yn.jsx)("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg mx-auto mb-2 flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-lg font-bold",children:"C"})}),(0,yn.jsx)("p",{className:"text-sm",children:"No Image"})]})}),(0,yn.jsx)("div",{className:"absolute top-2 right-2 flex space-x-2",children:(0,yn.jsx)("button",{onClick:e=>{e.preventDefault(),null===c||void 0===c||c(m)},className:"p-2 bg-black/50 text-white rounded-full backdrop-blur-sm hover:bg-black/70 transition-colors",children:(0,yn.jsx)(ti,{className:"w-4 h-4"})})}),m.isHotDeal&&(0,yn.jsx)("div",{className:"absolute top-2 left-2 bg-red-500 text-white px-2 py-1 rounded-full text-xs font-medium",children:"Hot Deal"}),m.images&&m.images.length>1&&(0,yn.jsxs)("div",{className:"absolute bottom-2 right-2 bg-black/50 text-white px-2 py-1 rounded-full text-xs",children:["+",m.images.length-1]})]})}),(0,yn.jsxs)("div",{className:"p-4",children:[(0,yn.jsx)(Le,{to:"/listing/".concat(m.id),className:"block",children:(0,yn.jsxs)("div",{className:"flex justify-between items-start mb-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-lg p-2 -m-2 transition-colors",children:[(0,yn.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg leading-tight flex-1 mr-2",children:m.title}),(0,yn.jsxs)("div",{className:"text-right",children:[(0,yn.jsx)("p",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:T(null!==(t=m.bid_info)&&void 0!==t&&t.has_bids&&null!==(r=m.bid_info)&&void 0!==r&&r.highest_bid?m.bid_info.highest_bid:m.price)}),(null===(n=m.bid_info)||void 0===n?void 0:n.has_bids)&&(null===(s=m.bid_info)||void 0===s?void 0:s.total_bids)>0&&(0,yn.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[m.bid_info.total_bids," bid",1!==m.bid_info.total_bids?"s":""]})]})]})}),"Catalysts"===m.category&&(0,yn.jsx)("div",{className:"mb-3",children:C?(0,yn.jsxs)("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400 p-3 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[(0,yn.jsx)("div",{className:"w-3 h-3 border border-gray-400 border-t-transparent rounded-full animate-spin mr-2"}),"Loading market range..."]}):E?(0,yn.jsxs)("div",{className:"relative overflow-hidden rounded-xl bg-gradient-to-br from-indigo-50 via-blue-50 to-cyan-50 dark:from-indigo-900/40 dark:via-blue-900/40 dark:to-cyan-900/40 border border-indigo-100 dark:border-indigo-800/60 shadow-sm",children:[(0,yn.jsx)("div",{className:"absolute top-0 right-0 w-8 h-8 bg-gradient-to-bl from-indigo-200/20 to-transparent dark:from-indigo-600/10 rounded-bl-full"}),(0,yn.jsx)("div",{className:"relative p-3",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("div",{className:"p-1 rounded-lg bg-gradient-to-r from-indigo-500 to-blue-500 shadow-sm",children:(0,yn.jsx)(vo,{className:"w-3 h-3 text-white"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"text-xs font-medium text-indigo-700 dark:text-indigo-300 uppercase tracking-wide",children:"Market Range"}),(0,yn.jsxs)("div",{className:"text-sm font-bold text-indigo-900 dark:text-indigo-100 leading-tight",children:["\u20ac",(E*(100-_.price_range_min_percent)/100).toFixed(0)," - \u20ac",(E*(100+_.price_range_max_percent)/100).toFixed(0)]})]})]})})]}):null}),(0,yn.jsx)(Le,{to:"/listing/".concat(m.id),children:(0,yn.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 mb-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-lg p-2 -m-2 transition-colors",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)(oo,{className:"w-4 h-4 mr-1"}),(0,yn.jsx)("span",{children:m.location||"Location"})]}),(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)(Js,{className:"w-4 h-4 mr-1"}),(0,yn.jsx)("span",{children:(e=>{const t=new Date(e),r=new Date,n=Math.floor((r-t)/36e5);return n<1?"Just now":n<24?"".concat(n,"h ago"):"".concat(Math.floor(n/24),"d ago")})(m.created_at)})]})]}),m.rating&&(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)(Gs,{className:"w-4 h-4 text-yellow-400 fill-current mr-1"}),(0,yn.jsx)("span",{children:m.rating})]})]})}),(0,yn.jsxs)("div",{className:"mb-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl border border-gray-200 dark:border-gray-600",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,yn.jsx)(zs,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),(0,yn.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Quick Bid"}),(null===(i=m.bid_info)||void 0===i?void 0:i.has_bids)&&(0,yn.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Min: ",T(L())]})]}),(0,yn.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),e.stopPropagation(),!u)return void h("Please login to place bids","error");var t,r;if(!P())return void((null===(t=m.seller)||void 0===t?void 0:t.username)===u.username||m.seller_id===u.id?h("You cannot bid on your own listing","error"):(null===(r=m.bid_info)||void 0===r?void 0:r.highest_bidder_id)===u.id&&h("You are already the highest bidder","info"));const n=parseFloat(x),a=L();if(!n||n<a)j("Minimum bid: ".concat(T(a)));else{j(""),v(!0);try{const e="https://market-refactor-1.preview.emergentagent.com",t=await fetch("".concat(e,"/api/tenders/submit"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({listing_id:m.id,buyer_id:u.id,offer_amount:n})}),r=await t.json();if(t.ok){var s;const e=(0,Ie.A)((0,Ie.A)({},m),{},{bid_info:(0,Ie.A)((0,Ie.A)({},m.bid_info),{},{has_bids:!0,total_bids:((null===(s=m.bid_info)||void 0===s?void 0:s.total_bids)||0)+1,highest_bid:n,highest_bidder_id:u.id})});f(e),d&&d(o.id,e),N(!0),y(""),h("Bid of ".concat(T(n)," submitted successfully!"),"success"),setTimeout(()=>{N(!1)},3e3)}else j(r.detail||"Failed to submit bid"),h(r.detail||"Failed to submit bid","error")}catch(i){console.error("Error submitting bid:",i),j("Network error. Please try again."),h("Network error. Please try again.","error")}finally{v(!1)}}},className:"space-y-2",children:[(0,yn.jsxs)("div",{className:"flex space-x-2",children:[(0,yn.jsxs)("div",{className:"flex-1 relative",children:[(0,yn.jsx)(Es,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,yn.jsx)("input",{type:"number",min:L(),step:"1",value:x,onChange:e=>{y(e.target.value),j("")},placeholder:"Min: \u20ac".concat(L()),className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!P()&&u,onClick:e=>e.stopPropagation()})]}),(0,yn.jsxs)("button",{type:"submit",disabled:M.disabled,className:"px-4 py-2 text-white text-sm font-medium rounded-lg transition-colors flex items-center ".concat(M.color),onClick:e=>e.stopPropagation(),children:[b&&(0,yn.jsx)("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin mr-1"}),k&&(0,yn.jsx)(Qi,{className:"w-3 h-3 mr-1"}),(0,yn.jsx)("span",{className:"text-xs",children:M.text})]})]}),w&&(0,yn.jsxs)("div",{className:"flex items-center text-red-600 dark:text-red-400 text-xs",children:[(0,yn.jsx)($i,{className:"w-3 h-3 mr-1"}),w]}),k&&(0,yn.jsxs)("div",{className:"flex items-center text-green-600 dark:text-green-400 text-xs",children:[(0,yn.jsx)(Qi,{className:"w-3 h-3 mr-1"}),"Bid submitted successfully!"]})]})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100 dark:border-gray-700",children:[(0,yn.jsxs)("button",{onClick:e=>{e.preventDefault(),g(!p),null===l||void 0===l||l(m.id,!p)},className:"flex items-center space-x-1 px-4 py-2 rounded-lg transition-colors ".concat(p?"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"),children:[(0,yn.jsx)(Cs,{className:"w-4 h-4 ".concat(p?"fill-current":"")}),(0,yn.jsx)("span",{className:"text-sm",children:"Save"})]}),(0,yn.jsx)(wo,{className:"w-5 h-5 text-gray-400"})]})]})]})})};function Mo(e){let{timeInfo:t}=e;const[r,n]=(0,a.useState)(null),[s,i]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(null===t||void 0===t||!t.has_time_limit||void 0===t.time_remaining_seconds||null===t.time_remaining_seconds)return;let e=t.time_remaining_seconds;n(e),i(e<=0);const r=setInterval(()=>{n(e=>e<=1?(i(!0),0):e-1)},1e3);return()=>clearInterval(r)},[t]);return null!==t&&void 0!==t&&t.has_time_limit?(0,yn.jsx)("span",{children:s?"EXPIRED":(e=>{if(e<=0)return"EXPIRED";const t=Math.floor(e/86400),r=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),a=e%60;return t>0?"".concat(t,"d ").concat(r,"h ").concat(n,"m"):r>0?"".concat(r,"h ").concat(n,"m"):n>0?"".concat(n,"m ").concat(a,"s"):"".concat(a,"s")})(r)}):null}function Ro(e){var t,r,n,s,i,o,l,c,d,u,h,m,f,p,g,x,y,b,v,w,j,k,N,_,S,E,A,C,O,T,P,L,M,R,D,I,F,B,U,q,z,V,H,W,K,G,Y,$,J,Q,Z;let{item:X,viewMode:ee,onSubmitTender:te,onFavoriteToggle:ne,onMessageSeller:ae,isInFavorites:se,isSubmittingTender:ie,tenderConfirmation:oe,priceRangeSettings:le,userActiveBids:ce,user:de,permissions:ue}=e;const[he,me]=(0,a.useState)(0),[fe,pe]=(0,a.useState)(null),[ge,xe]=(0,a.useState)(!1),ye=re(),be="grid"===ee,ve=de&&((null===(t=X.seller)||void 0===t?void 0:t.username)===de.username||X.seller_id===de.id||(null===(r=X.seller)||void 0===r?void 0:r.id)===de.id),we=(null===ue||void 0===ue||null===(n=ue.browse)||void 0===n?void 0:n.canPlaceBid)&&!ve;a.useEffect(()=>{var e,t;console.log("\ud83d\udd0d ProductCard [".concat(null===(e=X.id)||void 0===e?void 0:e.slice(0,8),"] - ").concat(X.title,":"),{seller_username:null===(t=X.seller)||void 0===t?void 0:t.username,seller_id:X.seller_id,user_username:null===de||void 0===de?void 0:de.username,user_id:null===de||void 0===de?void 0:de.id,isOwner:ve,canPlaceBid:we})},[X.id,X.seller,X.seller_id,null===de||void 0===de?void 0:de.username,null===de||void 0===de?void 0:de.id,ve,we]),(0,a.useEffect)(()=>{(async()=>{if("Catalysts"===X.category&&(X.catalyst_id||X.title)){xe(!0);try{const e=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/admin/catalyst/calculations"));if(e.ok){const t=await e.json();let r=null;r=X.catalyst_id?t.find(e=>e.cat_id===X.catalyst_id):t.find(e=>e.name&&e.name.toLowerCase()===X.title.toLowerCase()),r&&r.total_price&&pe(parseFloat(r.total_price))}}catch(e){console.error("Failed to fetch price suggestion:",e)}finally{xe(!1)}}})()},[X.catalyst_id,X.title,X.category]);return(0,yn.jsxs)("div",{className:"product-card group bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-300 overflow-hidden cursor-pointer ".concat(be?"hover:-translate-y-1":"flex space-x-4 p-4"),onClick:()=>{ye("/product/".concat(X.id))},children:[(0,yn.jsxs)("div",{className:"relative ".concat(be?"":"w-48 h-48 flex-shrink-0"),children:[(0,yn.jsx)("div",{className:"absolute inset-0 cursor-pointer z-10",onClick:e=>{e.stopPropagation(),ye("/product/".concat(X.id))},title:"View product details"}),(0,yn.jsx)("img",{src:(null===(s=X.images)||void 0===s?void 0:s[he])||(null===(i=X.images)||void 0===i?void 0:i[0])||"/api/placeholder/400/300",alt:X.title,className:"object-cover transition-transform duration-300 group-hover:scale-[1.02] ".concat(be?"w-full h-64":"w-full h-full rounded-lg")}),X.images&&X.images.length>1&&(0,yn.jsx)("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1 z-20",children:X.images.map((e,t)=>(0,yn.jsx)("div",{className:"w-2 h-2 rounded-full cursor-pointer ".concat(t===he?"bg-white":"bg-white/50"),onClick:e=>{e.stopPropagation(),me(t)}},t))}),(0,yn.jsxs)("div",{className:"absolute top-2 left-2 space-y-1 z-20",children:[null===(o=X.tags)||void 0===o?void 0:o.map(e=>(0,yn.jsx)("span",{className:"inline-block bg-red-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:e},e)),(0,yn.jsx)("div",{children:(0,yn.jsx)("span",{className:"inline-block text-white text-xs px-2 py-1 rounded-full font-medium ".concat(null!==(l=X.seller)&&void 0!==l&&l.is_business?"bg-gradient-to-r from-blue-600 to-indigo-600":"bg-gradient-to-r from-green-600 to-emerald-600"),children:null!==(c=X.seller)&&void 0!==c&&c.is_business?"Business":"Private"})})]}),(0,yn.jsx)("div",{className:"absolute top-2 right-2 z-20",children:(0,yn.jsx)("button",{onClick:e=>ne(X,e),className:"favorites-button wishlist-button add-to-favorites p-3 backdrop-blur-lg rounded-full shadow-lg transition-all duration-300 transform hover:scale-110 ".concat(se(X.id)?"bg-red-500/90 text-white shadow-red-500/25":"bg-white/90 dark:bg-gray-800/90 text-gray-700 dark:text-gray-300 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-500"),title:se(X.id)?"Remove from favorites":"Add to favorites",children:se(X.id)?(0,yn.jsx)(Cs,{className:"w-5 h-5 fill-current animate-pulse"}):(0,yn.jsx)(Cs,{className:"w-5 h-5"})})}),(0,yn.jsxs)("div",{className:"absolute bottom-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded-full flex items-center z-20",children:[(0,yn.jsx)(ti,{className:"w-3 h-3 mr-1"}),X.views]})]}),(0,yn.jsxs)("div",{className:"".concat(be?"p-4":"flex-1 min-w-0"),children:[(0,yn.jsx)("div",{className:"mb-3",children:(0,yn.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 transition-colors ".concat(be?"text-lg line-clamp-2":"text-xl"),children:X.title})}),(0,yn.jsx)("div",{className:"mb-3",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsxs)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["\u20ac",(null!==(d=X.bid_info)&&void 0!==d&&d.has_bids&&null!==(u=X.bid_info)&&void 0!==u&&u.highest_bid?X.bid_info.highest_bid:X.price).toFixed(2)]}),(null===(h=X.bid_info)||void 0===h?void 0:h.has_bids)&&(0,yn.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400 line-through",children:["\u20ac",X.price.toFixed(2)," starting"]})]})}),"Catalysts"===X.category&&(0,yn.jsx)("div",{className:"mb-3",children:ge?(0,yn.jsxs)("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400 p-2 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,yn.jsx)("div",{className:"w-3 h-3 border border-gray-400 border-t-transparent rounded-full animate-spin mr-2"}),"Loading market range..."]}):fe?(0,yn.jsxs)("div",{className:"relative overflow-hidden rounded-xl bg-gradient-to-br from-indigo-50 via-blue-50 to-cyan-50 dark:from-indigo-900/40 dark:via-blue-900/40 dark:to-cyan-900/40 border border-indigo-100 dark:border-indigo-800/60 shadow-sm",children:[(0,yn.jsx)("div",{className:"absolute top-0 right-0 w-12 h-12 bg-gradient-to-bl from-indigo-200/20 to-transparent dark:from-indigo-600/10 rounded-bl-full"}),(0,yn.jsx)("div",{className:"relative p-3",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("div",{className:"p-1.5 rounded-lg bg-gradient-to-r from-indigo-500 to-blue-500 shadow-sm",children:(0,yn.jsx)(vo,{className:"w-3 h-3 text-white"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"text-xs font-medium text-indigo-700 dark:text-indigo-300 uppercase tracking-wide",children:"Market Range"}),(0,yn.jsxs)("div",{className:"text-sm font-bold text-indigo-900 dark:text-indigo-100 leading-tight",children:["\u20ac",(fe*(100-le.price_range_min_percent)/100).toFixed(0)," - \u20ac",(fe*(100+le.price_range_max_percent)/100).toFixed(0)]})]})]})})]}):null}),(0,yn.jsx)("div",{className:"mb-3",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-bold ".concat(null!==(m=X.seller)&&void 0!==m&&m.is_business?"bg-gradient-to-r from-blue-500 to-indigo-600":"bg-gradient-to-r from-green-500 to-emerald-600"),children:(0,yn.jsx)("span",{children:((null===(f=X.seller)||void 0===f?void 0:f.username)||(null===(p=X.seller)||void 0===p?void 0:p.name)||"U").charAt(0).toUpperCase()})}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:(null===(g=X.seller)||void 0===g?void 0:g.username)||(null===(x=X.seller)||void 0===x?void 0:x.name)||"Unknown User"}),(null===(y=X.seller)||void 0===y?void 0:y.verified)&&(0,yn.jsx)("span",{className:"text-blue-500 text-xs",children:"\u2713 Verified"})]})]})}),(0,yn.jsx)("div",{className:"mb-3",children:(0,yn.jsxs)("div",{className:"flex items-center text-gray-500 dark:text-gray-400",children:[(0,yn.jsx)(oo,{className:"w-4 h-4 mr-1"}),(0,yn.jsx)("span",{className:"text-sm",children:((e,t,r)=>{const n=(null===(e=X.address)||void 0===e?void 0:e.city)||"",a=(null===(t=X.address)||void 0===t?void 0:t.country)||"";if(n||a){const e=[n,a].filter(Boolean);return e.length>0?e.join(", "):"Location not specified"}if(null!==(r=X.seller)&&void 0!==r&&r.location){const e=X.seller.location.split(",").map(e=>e.trim());return e.length>=2?e.slice(-2).join(", "):e[0]}return"Location not specified"})()})]})}),(0,yn.jsx)("div",{className:"mb-3",children:(0,yn.jsxs)("div",{className:"relative overflow-hidden rounded-xl border-2 ".concat(null!==(b=X.time_info)&&void 0!==b&&b.has_time_limit?X.time_info.is_expired||X.time_info.time_remaining_seconds<=3600?"border-red-200 dark:border-red-800 bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/30":X.time_info.time_remaining_seconds<=21600?"border-orange-200 dark:border-orange-800 bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/30":X.time_info.time_remaining_seconds<=86400?"border-yellow-200 dark:border-yellow-800 bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/30":"border-green-200 dark:border-green-800 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/30":"border-green-200 dark:border-green-800 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/30"),children:[(0,yn.jsx)("div",{className:"absolute top-0 right-0 w-12 h-12 rounded-bl-full ".concat(null!==(v=X.time_info)&&void 0!==v&&v.has_time_limit?X.time_info.is_expired||X.time_info.time_remaining_seconds<=3600?"bg-gradient-to-bl from-red-200/20 to-transparent dark:from-red-600/10":X.time_info.time_remaining_seconds<=21600?"bg-gradient-to-bl from-orange-200/20 to-transparent dark:from-orange-600/10":X.time_info.time_remaining_seconds<=86400?"bg-gradient-to-bl from-yellow-200/20 to-transparent dark:from-yellow-600/10":"bg-gradient-to-bl from-green-200/20 to-transparent dark:from-green-600/10":"bg-gradient-to-bl from-green-200/20 to-transparent dark:from-green-600/10")}),(0,yn.jsx)("div",{className:"relative p-3",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("div",{className:"p-1.5 rounded-lg shadow-sm ".concat(null!==(w=X.time_info)&&void 0!==w&&w.has_time_limit?X.time_info.is_expired||X.time_info.time_remaining_seconds<=3600?"bg-gradient-to-r from-red-500 to-red-600":X.time_info.time_remaining_seconds<=21600?"bg-gradient-to-r from-orange-500 to-orange-600":X.time_info.time_remaining_seconds<=86400?"bg-gradient-to-r from-yellow-500 to-yellow-600":"bg-gradient-to-r from-green-500 to-green-600":"bg-gradient-to-r from-green-500 to-green-600"),children:(0,yn.jsx)(Js,{className:"w-3 h-3 text-white"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"text-xs font-medium uppercase tracking-wide ".concat(null!==(j=X.time_info)&&void 0!==j&&j.has_time_limit?X.time_info.is_expired||X.time_info.time_remaining_seconds<=3600?"text-red-700 dark:text-red-300":X.time_info.time_remaining_seconds<=21600?"text-orange-700 dark:text-orange-300":X.time_info.time_remaining_seconds<=86400?"text-yellow-700 dark:text-yellow-300":"text-green-700 dark:text-green-300":"text-green-700 dark:text-green-300"),children:null!==(k=X.time_info)&&void 0!==k&&k.has_time_limit?X.time_info.is_expired?"Expired":"Time Left":"Without Time Limit"}),(0,yn.jsx)("div",{className:"text-sm font-bold leading-tight ".concat(null!==(N=X.time_info)&&void 0!==N&&N.has_time_limit?X.time_info.is_expired||X.time_info.time_remaining_seconds<=3600?"text-red-900 dark:text-red-100":X.time_info.time_remaining_seconds<=21600?"text-orange-900 dark:text-orange-100":X.time_info.time_remaining_seconds<=86400?"text-yellow-900 dark:text-yellow-100":"text-green-900 dark:text-green-100":"text-green-900 dark:text-green-100"),children:null!==(_=X.time_info)&&void 0!==_&&_.has_time_limit?(0,yn.jsx)(Mo,{timeInfo:X.time_info}):"Always Available"})]})]})})]})}),(0,yn.jsxs)("div",{className:"mb-3",children:[(null===(S=X.bid_info)||void 0===S?void 0:S.highest_bidder_id)===(null===de||void 0===de?void 0:de.id)&&(null===(E=X.bid_info)||void 0===E?void 0:E.has_bids)&&(0,yn.jsx)("div",{className:"mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:(0,yn.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,yn.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,yn.jsxs)("div",{className:"flex-1",children:[(0,yn.jsx)("p",{className:"text-blue-800 dark:text-blue-300 font-semibold text-sm",children:"\ud83c\udf89 You're the highest bidder!"}),(0,yn.jsxs)("p",{className:"text-blue-700 dark:text-blue-400 text-xs",children:["Your bid of \u20ac",X.bid_info.highest_bid.toFixed(2)," is currently winning"]})]})]})}),we?(0,yn.jsxs)("div",{className:"flex space-x-2",onClick:e=>e.stopPropagation(),children:[(0,yn.jsx)("div",{className:"flex-1",children:(0,yn.jsx)("input",{type:"number",min:(null===(A=X.bid_info)||void 0===A?void 0:A.highest_bid)||X.price||0,step:"10",placeholder:null!==(C=X.time_info)&&void 0!==C&&C.is_expired||(null===(O=X.bid_info)||void 0===O?void 0:O.highest_bidder_id)===(null===de||void 0===de?void 0:de.id)&&null!==(T=X.bid_info)&&void 0!==T&&T.has_bids?"Bid...":"Min: \u20ac".concat(((null===(P=X.bid_info)||void 0===P?void 0:P.highest_bid)||X.price||0).toFixed(2)),disabled:(null===(L=X.time_info)||void 0===L?void 0:L.is_expired)||(null===(M=X.bid_info)||void 0===M?void 0:M.highest_bidder_id)===(null===de||void 0===de?void 0:de.id)&&(null===(R=X.bid_info)||void 0===R?void 0:R.has_bids),className:"w-full px-3 py-2.5 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(null!==(D=X.time_info)&&void 0!==D&&D.is_expired?"border-red-300 dark:border-red-600 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 cursor-not-allowed":(null===(I=X.bid_info)||void 0===I?void 0:I.highest_bidder_id)===(null===de||void 0===de?void 0:de.id)&&null!==(F=X.bid_info)&&void 0!==F&&F.has_bids?"border-blue-300 dark:border-blue-600 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 cursor-not-allowed":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"),onClick:e=>e.stopPropagation(),onFocus:e=>e.stopPropagation(),onChange:e=>{e.stopPropagation();e.target.dataset.offerAmount=e.target.value}})}),(0,yn.jsx)("button",{onClick:e=>{var t,r,n,a;if(e.stopPropagation(),null!==(t=X.time_info)&&void 0!==t&&t.is_expired)return void alert("This listing has expired. No more bids can be placed.");if((null===(r=X.bid_info)||void 0===r?void 0:r.highest_bidder_id)===(null===de||void 0===de?void 0:de.id)&&null!==(n=X.bid_info)&&void 0!==n&&n.has_bids)return void alert("You are already the highest bidder! Wait for others to place higher bids.");const s=(null===(a=e.target.parentElement.previousElementSibling)||void 0===a?void 0:a.querySelector("input"))||e.target.parentElement.parentElement.querySelector("input"),i=parseFloat((null===s||void 0===s?void 0:s.value)||0);i&&i>=(X.highest_bid||X.price||0)?(te(X,i),s.value=""):alert("Please enter an amount of at least \u20ac".concat((X.highest_bid||X.price||0).toFixed(2)))},disabled:ie||(null===(B=X.time_info)||void 0===B?void 0:B.is_expired)||(null===(U=X.bid_info)||void 0===U?void 0:U.highest_bidder_id)===(null===de||void 0===de?void 0:de.id)&&(null===(q=X.bid_info)||void 0===q?void 0:q.has_bids),className:"px-6 py-2.5 rounded-lg font-medium transition-colors flex items-center space-x-2 ".concat(null!==(z=X.time_info)&&void 0!==z&&z.is_expired?"bg-red-400 text-red-100 cursor-not-allowed":(null===(V=X.bid_info)||void 0===V?void 0:V.highest_bidder_id)===(null===de||void 0===de?void 0:de.id)&&null!==(H=X.bid_info)&&void 0!==H&&H.has_bids?"bg-blue-400 text-blue-100 cursor-not-allowed":"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white"),title:null!==(W=X.time_info)&&void 0!==W&&W.is_expired?"Listing has expired":(null===(K=X.bid_info)||void 0===K?void 0:K.highest_bidder_id)===(null===de||void 0===de?void 0:de.id)&&null!==(G=X.bid_info)&&void 0!==G&&G.has_bids?"You are the highest bidder":"Submit tender offer",children:null!==(Y=X.time_info)&&void 0!==Y&&Y.is_expired?(0,yn.jsx)("span",{children:"EXPIRED"}):(null===($=X.bid_info)||void 0===$?void 0:$.highest_bidder_id)===(null===de||void 0===de?void 0:de.id)&&null!==(J=X.bid_info)&&void 0!==J&&J.has_bids?(0,yn.jsx)("span",{children:"WINNING"}):ie?(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,yn.jsx)("span",{children:"Submitting..."})]}):(0,yn.jsx)("span",{children:"Offer"})})]}):ve?(0,yn.jsxs)("div",{className:"mt-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,yn.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,yn.jsx)("span",{className:"text-sm font-medium text-yellow-700 dark:text-yellow-300",children:"Your Listing - Bidding Disabled"})]}),(0,yn.jsx)("p",{className:"text-xs text-yellow-600 dark:text-yellow-400",children:"You cannot bid on your own listing."}),(0,yn.jsxs)("div",{className:"mt-2 flex items-center justify-between text-sm",children:[(0,yn.jsx)("span",{className:"text-yellow-600 dark:text-yellow-400",children:"Current highest bid:"}),(0,yn.jsxs)("span",{className:"font-semibold text-yellow-900 dark:text-yellow-100",children:["\u20ac",((null===(Q=X.bid_info)||void 0===Q?void 0:Q.highest_bid)||X.price||0).toFixed(2)]})]})]}):(0,yn.jsxs)("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,yn.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),(0,yn.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Seller Account - Bidding Disabled"})]}),(0,yn.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Seller accounts can view all bid information but cannot place bids. Switch to a buyer account to participate in bidding."}),(0,yn.jsxs)("div",{className:"mt-2 flex items-center justify-between text-sm",children:[(0,yn.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Current highest bid:"}),(0,yn.jsxs)("span",{className:"font-semibold text-gray-900 dark:text-white",children:["\u20ac",((null===(Z=X.bid_info)||void 0===Z?void 0:Z.highest_bid)||X.price||0).toFixed(2)]})]})]}),(null===oe||void 0===oe?void 0:oe.visible)&&(0,yn.jsx)("div",{className:"mt-2 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800 animate-pulse",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:(0,yn.jsx)("svg",{className:"w-2.5 h-2.5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,yn.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,yn.jsxs)("div",{className:"flex-1",children:[(0,yn.jsx)("p",{className:"text-green-800 dark:text-green-300 font-semibold text-sm",children:"\u2705 Tender Submitted Successfully!"}),(0,yn.jsxs)("p",{className:"text-green-700 dark:text-green-400 text-xs",children:["Your offer of \u20ac",oe.amount.toFixed(2)," has been submitted to the seller"]})]})]})}),X.highest_bid&&(0,yn.jsx)("div",{className:"mt-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,yn.jsx)("span",{className:"text-yellow-800 dark:text-yellow-300 font-medium",children:"Current highest bid:"}),(0,yn.jsxs)("span",{className:"text-yellow-900 dark:text-yellow-200 font-bold",children:["\u20ac",parseFloat(X.highest_bid).toFixed(2)]})]})})]}),(0,yn.jsx)("div",{className:"mt-2 flex items-center justify-end text-xs text-gray-500 dark:text-gray-400 border-t border-gray-100 dark:border-gray-700 pt-2",children:(0,yn.jsx)("span",{children:X.created_at?new Date(X.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):X.createdAt?new Date(X.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):X.date?new Date(X.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Date not available"})})]})]})}const Do=function(){var e,t,r,n,s,i;const{user:o}=Cn(),{showToast:l}=zn(),{permissions:c}=no(),d=(re(),function(){const[e,t]=(0,a.useState)(null),[r,n]=(0,a.useState)(0);return(0,a.useEffect)(()=>{const e=()=>{try{const e=localStorage.getItem("cataloro_site_config");if(console.log("\ud83d\udd0d ModernBrowsePage - Loading ads config from localStorage:",e?"exists":"not found"),e){const r=JSON.parse(e);console.log("\ud83d\udd0d ModernBrowsePage - Parsed config:",r),console.log("\ud83d\udd0d ModernBrowsePage - AdsManager exists:",!!r.adsManager),r.adsManager?(console.log("\ud83d\udd0d ModernBrowsePage - Setting ads config:",r.adsManager),t(r.adsManager),r.adsManager.browsePageAd&&console.log("\ud83d\udd0d ModernBrowsePage - Browse page ad image URL:",r.adsManager.browsePageAd.image)):(console.log("\u26a0\ufe0f ModernBrowsePage - No adsManager in config, using defaults"),t({browsePageAd:{active:!0,image:null,description:"Advertisement Space",runtime:"1 month",width:"300px",height:"600px",url:"",clicks:0}}))}else console.log("\u26a0\ufe0f ModernBrowsePage - No saved config found, using defaults"),t({browsePageAd:{active:!0,image:null,description:"Advertisement Space",runtime:"1 month",width:"300px",height:"600px",url:"",clicks:0}})}catch(e){console.error("\u274c ModernBrowsePage - Error loading ads configuration:",e),t({browsePageAd:{active:!0,image:null,description:"Advertisement Space",runtime:"1 month",width:"300px",height:"600px",url:"",clicks:0}})}};e();const r=t=>{console.log("\ud83d\udd0d ModernBrowsePage - Ads config update event received:",t.detail),n(e=>e+1),setTimeout(e,100)},a=t=>{"cataloro_site_config"===t.key&&(console.log("\ud83d\udd0d ModernBrowsePage - Storage change detected"),n(e=>e+1),setTimeout(e,100))};return window.addEventListener("adsConfigUpdated",r),window.addEventListener("storage",a),()=>{window.removeEventListener("adsConfigUpdated",r),window.removeEventListener("storage",a)}},[r]),(0,a.useEffect)(()=>{console.log("\ud83d\udd0d ModernBrowsePage - Current adsConfig state:",e),null!==e&&void 0!==e&&e.browsePageAd&&(console.log("\ud83d\udd0d ModernBrowsePage - Browse page ad config:",e.browsePageAd),console.log("\ud83d\udd0d ModernBrowsePage - Browse page ad image URL:",e.browsePageAd.image))},[e]),e}()),{filteredProducts:u,addToFavorites:h,removeFromFavorites:m,favorites:f,setSearchQuery:p,setFilters:g,setSortBy:x,setViewMode:y,searchQuery:b,activeFilters:v,sortBy:w,viewMode:j,isLoading:k,refreshListings:N}=Jn(),[_,S]=(0,a.useState)(!1),[E,A]=(0,a.useState)(null),[C,O]=(0,a.useState)(""),[T,P]=(0,a.useState)(!1),[L,M]=(0,a.useState)({}),[R,D]=(0,a.useState)({}),[I,F]=(0,a.useState)({price_range_min_percent:10,price_range_max_percent:10}),[B,U]=(0,a.useState)({}),[q,z]=(0,a.useState)({show:!1,bidAmount:0,itemTitle:"",itemId:"",success:!1}),[V,H]=(0,a.useState)(!1),[W,K]=(0,a.useState)({}),G=e=>f.some(t=>t.id===e),Y=async(e,t)=>{t.preventDefault(),t.stopPropagation(),o?G(e.id)?await m(e.id,o.id):await h(e,o.id):l("Please login to add favorites","info")},$=(e,t)=>{t.preventDefault(),t.stopPropagation(),o?e.seller_id!==o.id?(A(e),O("Hi! I'm interested in your listing \"".concat(e.title,'". Is it still available?')),S(!0)):l("You can't message yourself about your own listing","info"):l("Please login to message sellers","info")},[J,Q]=(0,a.useState)(!1),[Z,X]=(0,a.useState)({title:"Discover Amazing Products",description:"From electronics to fashion, find everything you need in one place",height:400,image_url:"",search_placeholder:"Search for anything you need...",display_mode:"boxed",background_type:"gradient",background_color:"#3B82F6",background_gradient_from:"#3f6ec7",background_gradient_to:"#ec4899",background_image:"",gradient_opacity:.8,background_size:"cover",background_repeat:"no-repeat",background_position:"center"}),ee=b,te=v,ne=w,ae=j,se=u;(0,a.useEffect)(()=>{(()=>{const e=localStorage.getItem("cataloro_hero_content");if(e)try{X(JSON.parse(e))}catch(t){console.error("Error loading hero content:",t)}})();const e=e=>{X(e.detail)};return window.addEventListener("heroContentUpdated",e),()=>{window.removeEventListener("heroContentUpdated",e)}},[]),(0,a.useEffect)(()=>{(()=>{const e={totalListings:se.length,newToday:se.filter(e=>{const t=new Date(e.created_at),r=new Date;return t.toDateString()===r.toDateString()}).length,hotDeals:se.filter(e=>e.isHotDeal||e.discount>0).length,avgPrice:se.length>0?Math.round(se.reduce((e,t)=>e+(t.price||0),0)/se.length):0};K(e)})()},[se]),(0,a.useEffect)(()=>{(async()=>{try{const e="https://market-refactor-1.preview.emergentagent.com",t=await fetch("".concat(e,"/api/marketplace/price-range-settings"));if(t.ok){const e=await t.json();F(e)}}catch(e){console.error("Error fetching price range settings:",e)}})(),(async()=>{if(null!==o&&void 0!==o&&o.id)try{const e="https://market-refactor-1.preview.emergentagent.com",t=await fetch("".concat(e,"/api/user/").concat(o.id,"/active-bids"));if(t.ok){const{active_bids:e}=await t.json();U(e)}}catch(e){console.error("Error fetching user active bids:",e)}})()},[null===o||void 0===o?void 0:o.id]);const ie=async(e,t)=>{var r,n;if(!o)return void l("Please login to submit tender offers","error");if((null===(r=e.seller)||void 0===r?void 0:r.username)===o.username||e.seller_id===o.id||(null===(n=e.seller)||void 0===n?void 0:n.id)===o.id)l("You cannot bid on your own listing","error");else{M(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e.id]:!0}));try{const r=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/tenders/submit"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({listing_id:e.id,buyer_id:o.id,offer_amount:parseFloat(t)})}),n=await r.json();r.ok?(z({show:!0,bidAmount:parseFloat(t),itemTitle:e.title,itemId:e.id,success:!0}),D(r=>(0,Ie.A)((0,Ie.A)({},r),{},{[e.id]:{amount:parseFloat(t),timestamp:new Date,visible:!0}})),setTimeout(()=>{D(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e.id]:(0,Ie.A)((0,Ie.A)({},t[e.id]),{},{visible:!1})}))},5e3),setTimeout(()=>{N()},1e3)):400===r.status?z({show:!0,bidAmount:parseFloat(t),itemTitle:e.title,itemId:e.id,success:!1,errorMessage:n.detail||"Invalid tender offer"}):z({show:!0,bidAmount:parseFloat(t),itemTitle:e.title,itemId:e.id,success:!1,errorMessage:"Failed to submit tender offer"})}catch(a){console.error("Error submitting tender:",a),z({show:!0,bidAmount:parseFloat(t),itemTitle:e.title,itemId:e.id,success:!1,errorMessage:"Network error. Please check your connection and try again."})}finally{M(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e.id]:!1}))}}},oe=e=>{p(e)},le=e=>{g(e)},ce=e=>{y(e)};return k?(0,yn.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading amazing products..."})]})}):(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsxs)("div",{className:"hero-section relative text-white overflow-hidden ".concat("full_width"===Z.display_mode?"w-screen":"w-full"),style:(()=>{const e=(e,t)=>{const r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(!r)return e;const n=parseInt(r[1],16),a=parseInt(r[2],16),s=parseInt(r[3],16);return"rgba(".concat(n,", ").concat(a,", ").concat(s,", ").concat(t,")")},t="full_width"===Z.display_mode,r=Z.gradient_opacity||.8,n={height:"".concat(Z.height||400,"px"),minHeight:"300px",marginTop:"-2rem",marginBottom:"2rem"};switch(t?(n.marginLeft="calc(-50vw + 50%)",n.marginRight="calc(-50vw + 50%)"):(n.marginLeft="0",n.marginRight="0",n.borderRadius="1rem"),"image"!==Z.background_type&&"image-gradient"!==Z.background_type||(n.backgroundSize=Z.background_size||"cover",n.backgroundPosition=Z.background_position||"center",n.backgroundRepeat=Z.background_repeat||"no-repeat"),Z.background_type){case"gradient":return(0,Ie.A)((0,Ie.A)({},n),{},{backgroundImage:"linear-gradient(to right, ".concat(Z.background_gradient_from||"#3f6ec7",", ").concat(Z.background_gradient_to||"#ec4899",")")});case"solid":return(0,Ie.A)((0,Ie.A)({},n),{},{backgroundColor:Z.background_color||"#3B82F6"});case"image":return(0,Ie.A)((0,Ie.A)({},n),{},{backgroundImage:Z.background_image?"linear-gradient(rgba(0,0,0,".concat(.5*r,"), rgba(0,0,0,").concat(.5*r,")), url(").concat(Z.background_image,")"):"linear-gradient(to right, #3f6ec7, #a855f7, #ec4899)"});case"image-gradient":const t=e(Z.background_gradient_from||"#3f6ec7",r),a=e(Z.background_gradient_to||"#ec4899",r);return(0,Ie.A)((0,Ie.A)({},n),{},{backgroundImage:Z.background_image?"linear-gradient(to right, ".concat(t,", ").concat(a,"), url(").concat(Z.background_image,")"):"linear-gradient(to right, ".concat(Z.background_gradient_from||"#3f6ec7",", ").concat(Z.background_gradient_to||"#ec4899",")")});default:return(0,Ie.A)((0,Ie.A)({},n),{},{backgroundImage:"linear-gradient(to right, #3f6ec7, #a855f7, #ec4899)"})}})(),children:[(0,yn.jsx)("div",{className:"absolute inset-0 bg-black/20"}),(0,yn.jsxs)("div",{className:"relative z-10 text-center flex flex-col justify-center h-full px-8 max-w-7xl mx-auto",children:[Z.image_url&&(0,yn.jsx)("div",{className:"mb-6 flex justify-center",children:(0,yn.jsx)("img",{src:Z.image_url,alt:"Hero",className:"max-h-24 max-w-48 object-contain"})}),(0,yn.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:Z.title||"Discover Amazing Products"}),(0,yn.jsx)("p",{className:"text-xl mb-8 opacity-90 max-w-3xl mx-auto",children:Z.description||"From electronics to fashion, find everything you need in one place"}),(0,yn.jsx)("div",{className:"w-full",children:(0,yn.jsx)("div",{className:"search-bar-container relative bg-white/10 backdrop-blur-sm rounded-2xl p-2 border border-white/20 max-w-4xl mx-auto",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)(No,{className:"absolute left-6 text-white/70 w-6 h-6"}),(0,yn.jsx)("input",{type:"text",placeholder:Z.search_placeholder||"Search for anything you need...",value:ee,onChange:e=>oe(e.target.value),className:"w-full pl-16 pr-4 py-4 bg-transparent text-white placeholder-white/70 text-lg focus:outline-none"}),(0,yn.jsx)("button",{onClick:()=>{var e;ee.trim()&&(null===(e=document.getElementById("search-results"))||void 0===e||e.scrollIntoView({behavior:"smooth"}))},className:"flex-shrink-0 px-8 py-4 bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white rounded-xl font-semibold transition-all duration-200 hover:scale-105",children:"Search"})]})})})]})]}),(0,yn.jsxs)("div",{className:"space-y-8",children:[(0,yn.jsxs)("div",{id:"search-results",className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between ".concat("full_width"===Z.display_mode?"mt-8":""),children:[(0,yn.jsxs)("div",{className:"flex items-center gap-4 text-gray-600 dark:text-gray-300",children:[(0,yn.jsxs)("span",{className:"text-lg font-semibold",children:[se.length," Result",1!==se.length?"s":"",ee&&' for "'.concat(ee,'"')]}),(0,yn.jsxs)("button",{onClick:async()=>{try{l("Refreshing listings...","info"),await N(),l("Listings refreshed!","success")}catch(e){console.error("Failed to refresh listings:",e),l("Failed to refresh listings","error")}},className:"flex items-center space-x-2 px-3 py-2 bg-blue-100 hover:bg-blue-200 dark:bg-blue-900/30 dark:hover:bg-blue-900/50 text-blue-700 dark:text-blue-300 rounded-lg font-medium transition-all duration-200 hover:scale-105",title:"Refresh listings from server",children:[(0,yn.jsx)(Xi,{className:"w-4 h-4"}),(0,yn.jsx)("span",{className:"hidden sm:inline",children:"Refresh"})]})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yn.jsxs)("button",{onClick:()=>Q(!J),className:"flex items-center space-x-2 px-4 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",children:[(0,yn.jsx)(_o,{className:"w-5 h-5"}),(0,yn.jsx)("span",{children:"Filters"})]}),(0,yn.jsxs)("select",{value:ne,onChange:e=>{return t=e.target.value,void x(t);var t},className:"px-4 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-700 dark:text-gray-300 focus:ring-2 focus:ring-blue-500",children:[(0,yn.jsx)("option",{value:"newest",children:"Newest First"}),(0,yn.jsx)("option",{value:"price_low",children:"Price: Low to High"}),(0,yn.jsx)("option",{value:"price_high",children:"Price: High to Low"}),(0,yn.jsx)("option",{value:"rating",children:"Highest Rated"}),(0,yn.jsx)("option",{value:"popular",children:"Most Popular"})]}),(0,yn.jsxs)("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-xl p-1",children:[(0,yn.jsx)("button",{onClick:()=>ce("grid"),className:"p-2 rounded-lg transition-all duration-200 ".concat("grid"===ae?"bg-white dark:bg-gray-700 shadow-sm text-blue-600":"text-gray-600 dark:text-gray-400"),children:(0,yn.jsx)(_i,{className:"w-5 h-5"})}),(0,yn.jsx)("button",{onClick:()=>ce("list"),className:"p-2 rounded-lg transition-all duration-200 ".concat("list"===ae?"bg-white dark:bg-gray-700 shadow-sm text-blue-600":"text-gray-600 dark:text-gray-400"),children:(0,yn.jsx)(Ni,{className:"w-5 h-5"})})]})]})]}),J&&(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-lg",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Advanced Filters"}),(0,yn.jsx)("button",{onClick:()=>Q(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,yn.jsx)(Is,{className:"w-5 h-5"})})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),(0,yn.jsxs)("select",{value:te.type,onChange:e=>le((0,Ie.A)((0,Ie.A)({},te),{},{type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white h-10 leading-none",children:[(0,yn.jsx)("option",{value:"all",children:"All Types"}),(0,yn.jsx)("option",{value:"Private",children:"Private"}),(0,yn.jsx)("option",{value:"Business",children:"Business"})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"My Activity"}),(0,yn.jsxs)("select",{value:te.bidFilter||"all",onChange:e=>le((0,Ie.A)((0,Ie.A)({},te),{},{bidFilter:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white h-10 leading-none",disabled:!o,children:[(0,yn.jsx)("option",{value:"all",children:"All Listings"}),(0,yn.jsx)("option",{value:"placed_bid",children:"Placed a Bid"}),(0,yn.jsx)("option",{value:"not_placed_bid",children:"Not Placed a Bid"}),(0,yn.jsx)("option",{value:"own_listings",children:"My Listings"})]}),!o&&(0,yn.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Login to filter by your activity"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Price Range (\u20ac)"}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2 h-10",children:[(0,yn.jsx)("div",{className:"flex-1",children:(0,yn.jsx)("input",{type:"number",placeholder:"From",min:"0",value:te.priceFrom,onChange:e=>le((0,Ie.A)((0,Ie.A)({},te),{},{priceFrom:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm h-full"})}),(0,yn.jsx)("span",{className:"text-gray-500 dark:text-gray-400 flex-shrink-0",children:"-"}),(0,yn.jsx)("div",{className:"flex-1",children:(0,yn.jsx)("input",{type:"number",placeholder:"To",min:"0",value:te.priceTo,onChange:e=>le((0,Ie.A)((0,Ie.A)({},te),{},{priceTo:parseInt(e.target.value)||1e4})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm h-full"})})]}),(0,yn.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["From \u20ac",te.priceFrom," to \u20ac",te.priceTo]})]}),(0,yn.jsxs)("div",{className:"flex flex-col md:col-span-3",children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Actions"}),(0,yn.jsxs)("div",{className:"flex space-x-4",children:[(0,yn.jsx)("button",{onClick:()=>le({type:"all",priceFrom:0,priceTo:1e4,location:"all",rating:0,bidFilter:"all"}),className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors h-10",children:"Clear All Filters"}),o&&(0,yn.jsx)("button",{onClick:()=>le((0,Ie.A)((0,Ie.A)({},te),{},{bidFilter:"own_listings"})),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors h-10",children:"Show My Listings"})]})]})]})]}),(0,yn.jsx)("div",{className:"mt-6",children:0===se.length?(0,yn.jsxs)("div",{className:"text-center py-16",children:[(0,yn.jsx)("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,yn.jsx)(No,{className:"w-8 h-8 text-gray-400"})}),(0,yn.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No products found"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:ee?"Try adjusting your search terms or filters":"Be the first to create a listing!"}),(0,yn.jsx)(Le,{to:"/create-listing",className:"inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium transition-colors",children:"Create Your First Listing"})]}):(0,yn.jsxs)("div",{className:"flex gap-6",children:[(0,yn.jsx)("div",{className:"".concat(null!==d&&void 0!==d&&null!==(e=d.browsePageAd)&&void 0!==e&&e.active?"flex-1":"w-full"),children:(0,yn.jsx)("div",{className:"grid"===ae?null!==d&&void 0!==d&&null!==(t=d.browsePageAd)&&void 0!==t&&t.active?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6":"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:se.map(e=>(0,yn.jsx)(Ro,{item:e,viewMode:ae,onSubmitTender:ie,onFavoriteToggle:Y,onMessageSeller:$,isInFavorites:G,isSubmittingTender:L[e.id]||!1,tenderConfirmation:R[e.id],priceRangeSettings:I,userActiveBids:B,user:o,permissions:c},e.id))})}),(null===d||void 0===d||null===(r=d.browsePageAd)||void 0===r?void 0:r.active)&&(0,yn.jsx)("div",{className:"flex-shrink-0",children:(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 ".concat(d.browsePageAd.url?"cursor-pointer hover:scale-[1.02]":""),style:{width:d.browsePageAd.width||"300px",height:d.browsePageAd.height||"600px"},onClick:e=>{if(console.log("\ud83d\udd17 Ad clicked!"),console.log("\ud83d\udd17 Event details:",{target:e.target.tagName,currentTarget:e.currentTarget.tagName,url:d.browsePageAd.url}),d.browsePageAd.url){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),console.log("\ud83d\udd17 Opening URL in new tab:",d.browsePageAd.url),(0,Eo.trackAdClick)("browsePageAd");try{const e=window.open(d.browsePageAd.url,"_blank","noopener,noreferrer");if(e)e.focus(),console.log("\u2705 Successfully opened URL in new tab");else{console.log("\u274c Popup blocked - trying alternative method");const e=document.createElement("a");e.href=d.browsePageAd.url,e.target="_blank",e.rel="noopener noreferrer",document.body.appendChild(e),e.click(),document.body.removeChild(e),console.log("\u2705 Opened URL using fallback method")}}catch(t){console.error("\u274c Failed to open URL:",t)}return!1}console.log("\ud83d\udd17 No URL configured for ad")},children:d.browsePageAd.image?(0,yn.jsxs)("div",{className:"relative w-full h-full",children:[(0,yn.jsx)("img",{src:d.browsePageAd.image,alt:d.browsePageAd.description||"Advertisement",className:"w-full h-full object-cover",onError:e=>{console.error("Ad image failed to load:",d.browsePageAd.image),e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),(0,yn.jsxs)("div",{className:"absolute inset-0 flex-col items-center justify-center p-6 text-center hidden",children:[(0,yn.jsx)("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,yn.jsx)(di,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"})}),(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Advertisement Space"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:d.browsePageAd.description})]})]}):(0,yn.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 text-center h-full",children:[(0,yn.jsx)("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,yn.jsx)(di,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"})}),(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Advertisement Space"}),d.browsePageAd.description?(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-3",children:d.browsePageAd.description}):(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-3",children:"Your ad will appear here"}),(0,yn.jsxs)("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-400",children:["Runtime: ",d.browsePageAd.runtime||"1 month"]}),d.browsePageAd.clicks>0&&(0,yn.jsxs)("div",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400",children:[d.browsePageAd.clicks," clicks"]})]})})})]})}),se.length>0&&(0,yn.jsx)("div",{className:"text-center pt-8",children:(0,yn.jsx)("button",{className:"px-8 py-3 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-xl hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium",children:"Load More Products"})}),_&&E&&(0,yn.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-lg w-full",children:[(0,yn.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-600 to-purple-600",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("h3",{className:"text-xl font-bold text-white flex items-center",children:[(0,yn.jsx)(Ss,{className:"w-6 h-6 mr-2"}),"Message Seller"]}),(0,yn.jsx)("button",{onClick:()=>S(!1),className:"text-white hover:text-gray-200 transition-colors",children:(0,yn.jsx)(Is,{className:"w-6 h-6"})})]})}),(0,yn.jsxs)("div",{className:"p-6",children:[(0,yn.jsxs)("div",{className:"flex items-start space-x-4 mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[(0,yn.jsx)("img",{src:(null===(n=E.images)||void 0===n?void 0:n[0])||"/api/placeholder/400/300",alt:E.title,className:"w-16 h-16 object-cover rounded-lg"}),(0,yn.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,yn.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white truncate",children:E.title}),(0,yn.jsxs)("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:["\u20ac",parseFloat(E.price||0).toFixed(2)]}),(0,yn.jsxs)("div",{className:"flex items-center mt-1 text-sm text-gray-600 dark:text-gray-400",children:[(0,yn.jsx)(Ts,{className:"w-4 h-4 mr-1"}),"Seller: ","string"===typeof E.seller?E.seller:(null===(s=E.seller)||void 0===s?void 0:s.name)||E.seller_id||"Unknown"]})]})]}),(0,yn.jsxs)("div",{className:"mb-6",children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Your Message"}),(0,yn.jsx)("textarea",{value:C,onChange:e=>O(e.target.value),rows:4,className:"w-full px-4 py-3 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"Type your message to the seller..."})]}),(0,yn.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,yn.jsx)("button",{onClick:()=>S(!1),className:"px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-xl font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),(0,yn.jsx)("button",{onClick:async()=>{if(C.trim()&&E)try{P(!0),await Hn.sendMessage(o.id,{recipient_id:E.seller_id,subject:"Inquiry about: ".concat(E.title),content:C}),l("Message sent successfully!","success"),S(!1),O(""),A(null)}catch(e){console.error("Failed to send message:",e),l("Failed to send message. Please try again.","error")}finally{P(!1)}else l("Please enter a message","error")},disabled:!C.trim()||T,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-xl font-medium transition-colors flex items-center",children:T?(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Sending..."]}):(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)(So,{className:"w-4 h-4 mr-2"}),"Send Message"]})})]})]})]})}),q.show&&(0,yn.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full",children:[(0,yn.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 ".concat(q.success?"bg-gradient-to-r from-green-600 to-emerald-600":"bg-gradient-to-r from-red-600 to-pink-600"),children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsx)("h3",{className:"text-xl font-bold text-white flex items-center",children:q.success?(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,yn.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Bid Submitted Successfully!"]}):(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,yn.jsx)("path",{fillRule:"evenodd",d:"18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Bid Submission Failed"]})}),(0,yn.jsx)("button",{onClick:()=>z((0,Ie.A)((0,Ie.A)({},q),{},{show:!1})),className:"text-white hover:text-gray-200 transition-colors",children:(0,yn.jsx)(Is,{className:"w-6 h-6"})})]})}),(0,yn.jsx)("div",{className:"p-6",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsxs)("div",{className:"mb-4",children:[(0,yn.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:q.itemTitle}),(0,yn.jsxs)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["\u20ac",null===(i=q.bidAmount)||void 0===i?void 0:i.toFixed(2)]})]}),q.success?(0,yn.jsx)("div",{className:"space-y-3",children:(0,yn.jsxs)("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[(0,yn.jsx)("p",{className:"text-green-800 dark:text-green-300 font-medium",children:"\ud83c\udf89 Your tender offer has been submitted successfully!"}),(0,yn.jsx)("p",{className:"text-green-700 dark:text-green-400 text-sm mt-1",children:"The seller will be notified and can accept or decline your offer."})]})}):(0,yn.jsx)("div",{className:"space-y-3",children:(0,yn.jsxs)("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-xl border border-red-200 dark:border-red-800",children:[(0,yn.jsxs)("p",{className:"text-red-800 dark:text-red-300 font-medium",children:["\u274c ",q.errorMessage]}),(0,yn.jsx)("p",{className:"text-red-700 dark:text-red-400 text-sm mt-1",children:"Please check your bid amount and try again."})]})}),(0,yn.jsx)("div",{className:"mt-6",children:(0,yn.jsx)("button",{onClick:()=>z((0,Ie.A)((0,Ie.A)({},q),{},{show:!1})),className:"w-full px-6 py-3 rounded-xl font-medium transition-colors ".concat(q.success?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white"),children:q.success?"Great!":"Try Again"})})]})})]})})]})]})};const Io=function(){const[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(!0),[s,i]=(0,a.useState)(""),[o,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)({category:"",priceRange:{min:0,max:1e3},location:"",condition:"",dateRange:"",rating:0,sortBy:"newest"}),[u,h]=(0,a.useState)([]),[m,f]=(0,a.useState)({totalListings:0,newToday:0,hotDeals:0,avgPrice:0});(0,a.useEffect)(()=>{(async()=>{try{n(!0),console.log("\ud83d\udcf1 Mobile browse: Loading listings directly from API");const e=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/marketplace/browse"));if(!e.ok)throw new Error("Failed to fetch");const r=await e.json();console.log("\ud83d\udcf1 Mobile browse: Loaded",r.length,"listings"),t(r),h(r);const a={totalListings:r.length,newToday:r.filter(e=>{const t=new Date(e.created_at),r=new Date;return t.toDateString()===r.toDateString()}).length,hotDeals:r.filter(e=>{const t=e.isHotDeal||e.discount>0,r=e.expires_at&&new Date(e.expires_at)<=new Date(Date.now()+864e5)&&new Date(e.expires_at)>new Date;return t||r}).length,avgPrice:r.length>0?Math.round(r.reduce((e,t)=>e+(t.price||0),0)/r.length):0};f(a)}catch(e){console.error("\u274c Mobile browse: Error loading listings:",e)}finally{n(!1)}})()},[]),(0,a.useEffect)(()=>{e.length>0&&p(e,s,c)},[e]),(0,a.useEffect)(()=>{e.length>0&&p(e,s,c)},[e]);const p=(e,t,r)=>{let n=[...e];if(t&&t.trim()){const e=t.toLowerCase();n=n.filter(t=>{var r,n,a,s;return(null===(r=t.title)||void 0===r?void 0:r.toLowerCase().includes(e))||(null===(n=t.description)||void 0===n?void 0:n.toLowerCase().includes(e))||(null===(a=t.seller)||void 0===a||null===(s=a.username)||void 0===s?void 0:s.toLowerCase().includes(e))})}switch((r.priceRange&&r.priceRange.min>0||r.priceRange.max<1e3)&&(n=n.filter(e=>{const t=e.price||0;return t>=r.priceRange.min&&t<=r.priceRange.max})),r.category&&""!==r.category&&(n=n.filter(e=>{var t;return(null===(t=e.category)||void 0===t?void 0:t.toLowerCase())===r.category.toLowerCase()})),r.condition&&""!==r.condition&&(n=n.filter(e=>{var t;return(null===(t=e.condition)||void 0===t?void 0:t.toLowerCase())===r.condition.toLowerCase()})),r.sortBy){case"price_low":n.sort((e,t)=>(e.price||0)-(t.price||0));break;case"price_high":n.sort((e,t)=>(t.price||0)-(e.price||0));break;case"newest":n.sort((e,t)=>new Date(t.created_at||0)-new Date(e.created_at||0));break;case"oldest":n.sort((e,t)=>new Date(e.created_at||0)-new Date(t.created_at||0))}h(n)},g=(e,r)=>{t(t=>t.map(t=>t.id===e?r:t))};return r?(0,yn.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading listings..."})]})}):(0,yn.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-20",children:[(0,yn.jsx)(Oo,{quickStats:m,onSearch:t=>{i(t),p(e,t,c)},onFilterToggle:()=>l(!0),searchTerm:s}),(0,yn.jsx)("div",{className:"px-4 mb-6",children:(0,yn.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl text-white p-4",children:(0,yn.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-center",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)(Ms,{className:"w-5 h-5 mx-auto mb-1 opacity-80"}),(0,yn.jsx)("div",{className:"text-lg font-bold",children:m.totalListings}),(0,yn.jsx)("div",{className:"text-xs opacity-80",children:"Total"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)(Js,{className:"w-5 h-5 mx-auto mb-1 opacity-80"}),(0,yn.jsx)("div",{className:"text-lg font-bold",children:m.newToday}),(0,yn.jsx)("div",{className:"text-xs opacity-80",children:"New Today"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)(zs,{className:"w-5 h-5 mx-auto mb-1 opacity-80"}),(0,yn.jsx)("div",{className:"text-lg font-bold",children:m.hotDeals}),(0,yn.jsx)("div",{className:"text-xs opacity-80",children:"Hot Deals"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)(Es,{className:"w-5 h-5 mx-auto mb-1 opacity-80"}),(0,yn.jsxs)("div",{className:"text-lg font-bold",children:["\u20ac",m.avgPrice]}),(0,yn.jsx)("div",{className:"text-xs opacity-80",children:"Avg Price"})]})]})})}),(0,yn.jsx)("div",{className:"px-4",children:0===u.length?(0,yn.jsxs)("div",{className:"text-center py-12",children:[(0,yn.jsx)(Ms,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No listings found"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:s?"Try adjusting your search terms":"Be the first to list an item!"})]}):(0,yn.jsx)("div",{className:"grid gap-4",children:u.map(e=>(0,yn.jsx)(Lo,{listing:e,onBidUpdate:g},e.id))})}),o&&(0,yn.jsx)(Po,{isOpen:o,onClose:()=>l(!1),filters:c,onFiltersChange:t=>{(t=>{d(t),p(e,s,t)})(t),l(!1)}})]})},Fo=e=>{let{basePrice:t,baseCurrency:r="EUR",className:n=""}=e;return(0,yn.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white ".concat(n),children:(a=t,"number"!==typeof a?"\u20ac0.00":new Intl.NumberFormat("de-DE",{style:"currency",currency:r,minimumFractionDigits:2,maximumFractionDigits:2}).format(a))});var a},Bo=ks("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Uo=ks("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);function qo(e){let{timeInfo:t}=e;const[r,n]=(0,a.useState)(null),[s,i]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(null===t||void 0===t||!t.has_time_limit||void 0===t.time_remaining_seconds||null===t.time_remaining_seconds)return;let e=t.time_remaining_seconds;n(e),i(e<=0);const r=setInterval(()=>{n(e=>e<=1?(i(!0),0):e-1)},1e3);return()=>clearInterval(r)},[t]);return null!==t&&void 0!==t&&t.has_time_limit?(0,yn.jsx)("span",{children:s?"EXPIRED":(e=>{if(e<=0)return"EXPIRED";const t=Math.floor(e/86400),r=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),a=e%60;return t>0?"".concat(t,"d ").concat(r,"h ").concat(n,"m"):r>0?"".concat(r,"h ").concat(n,"m"):n>0?"".concat(n,"m ").concat(a,"s"):"".concat(a,"s")})(r)}):null}function zo(e){let{weight:t,ptPpm:r,pdPpm:n,rhPpm:s,ptG:i,pdG:o,rhG:l}=e;const[c,d]=(0,a.useState)(null);let u,h,m;return(0,a.useEffect)(()=>{(async()=>{try{const e=localStorage.getItem("cataloro_token"),t=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/admin/catalyst/price-settings"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok){const e=await t.json();d(e)}}catch(e){console.error("Failed to fetch price settings:",e)}})()},[]),void 0!==i&&void 0!==o&&void 0!==l?(u=i,h=o,m=l):c&&t&&(r||n||s)?(u=t&&r?t*r/1e3*(c.renumeration_pt||.98):0,h=t&&n?t*n/1e3*(c.renumeration_pd||.98):0,m=t&&s?t*s/1e3*(c.renumeration_rh||.9):0):(u=0,h=0,m=0),t||u||h||m?(0,yn.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-6 border-2 border-blue-200 dark:border-blue-800",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,yn.jsx)(vo,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),(0,yn.jsx)("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100",children:"Catalyst Content"}),(0,yn.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:"Admin Only"})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,yn.jsxs)("div",{className:"text-center p-4 bg-white dark:bg-gray-800 rounded-lg border border-blue-100 dark:border-blue-800 shadow-sm",children:[(0,yn.jsx)("div",{className:"text-xs text-blue-600 dark:text-blue-400 uppercase font-medium mb-1",children:"Weight"}),(0,yn.jsxs)("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[t||0,"g"]})]}),(0,yn.jsxs)("div",{className:"text-center p-4 bg-white dark:bg-gray-800 rounded-lg border border-blue-100 dark:border-blue-800 shadow-sm",children:[(0,yn.jsx)("div",{className:"text-xs text-blue-600 dark:text-blue-400 uppercase font-medium mb-1",children:"Pt g"}),(0,yn.jsx)("div",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:(u||0).toFixed(4)})]}),(0,yn.jsxs)("div",{className:"text-center p-4 bg-white dark:bg-gray-800 rounded-lg border border-blue-100 dark:border-blue-800 shadow-sm",children:[(0,yn.jsx)("div",{className:"text-xs text-green-600 dark:text-green-400 uppercase font-medium mb-1",children:"Pd g"}),(0,yn.jsx)("div",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:(h||0).toFixed(4)})]}),(0,yn.jsxs)("div",{className:"text-center p-4 bg-white dark:bg-gray-800 rounded-lg border border-blue-100 dark:border-blue-800 shadow-sm",children:[(0,yn.jsx)("div",{className:"text-xs text-purple-600 dark:text-purple-400 uppercase font-medium mb-1",children:"Rh g"}),(0,yn.jsx)("div",{className:"text-xl font-bold text-purple-600 dark:text-purple-400",children:(m||0).toFixed(4)})]})]}),(0,yn.jsxs)("div",{className:"mt-4 text-xs text-blue-600 dark:text-blue-400",children:[(0,yn.jsx)(vo,{className:"w-4 h-4 inline mr-1"}),"Content values visible only to Admin and Manager users for catalyst analysis."]})]}):null}const Vo=function(){var e,t,r,n,s,i,o,l,c,d,u,h,m,f,p,g,x,y,b,v,w,j,k,N,_,S,E,A,C,O,T,P,L,M,R,D,I,F,B,U,q,z,V,H;const{productId:W}=ae(),K=re(),{user:G}=Cn(),{showToast:Y}=zn(),{permissions:$}=no(),J="Admin"===(null===$||void 0===$?void 0:$.userRole)||"Manager"===(null===$||void 0===$?void 0:$.userRole)||(null===$||void 0===$?void 0:$.hasPermission)&&($.hasPermission("admin")||$.hasPermission("manager"))||!1;console.log("ProductDetailPage - Permission Debug:",{userRole:null===$||void 0===$?void 0:$.userRole,isAdminOrManager:J,permissions:$});const{allProducts:Q,addToFavorites:Z,removeFromFavorites:X,favorites:ee,addToRecentlyViewed:te,showNotification:ne}=Jn(),[se,ie]=(0,a.useState)(null),[oe,le]=(0,a.useState)(0),[ce,de]=(0,a.useState)("description"),[ue,he]=(0,a.useState)(!0),[me,fe]=(0,a.useState)(""),[pe,ge]=(0,a.useState)(!1),[xe,ye]=(0,a.useState)(null),[be,ve]=(0,a.useState)(null),[we,je]=(0,a.useState)(!1);(0,a.useEffect)(()=>{se&&console.log("ProductDetailPage - Catalyst Data Debug:",{productId:se.id,title:se.title,ceramic_weight:se.ceramic_weight,pt_ppm:se.pt_ppm,pd_ppm:se.pd_ppm,rh_ppm:se.rh_ppm,pt_g:se.pt_g,pd_g:se.pd_g,rh_g:se.rh_g,hasCatalystData:!!(se.ceramic_weight||se.pt_ppm||se.pd_ppm||se.rh_ppm||se.pt_g||se.pd_g||se.rh_g)})},[se]);const ke=(null===se||void 0===se||null===(e=se.time_info)||void 0===e?void 0:e.is_expired)||!1;if((0,a.useEffect)(()=>{W&&(async()=>{try{console.log("\ud83d\udd0d Loading product details for desktop:",W);const e=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/listings/").concat(W));if(e.ok){const t=await e.json(),r=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/listings/").concat(W,"/tenders"));if(r.ok){const e=(await r.json()).filter(e=>"active"===e.status);if(e.length>0){const r=Math.max(...e.map(e=>e.offer_amount)),n=e.find(e=>e.offer_amount===r);t.bid_info={has_bids:!0,highest_bid:r,highest_bidder_id:null===n||void 0===n?void 0:n.buyer_id,total_bids:e.length}}else t.bid_info={has_bids:!1,highest_bid:null,highest_bidder_id:null,total_bids:0}}return ie(t),te(t),console.log("\u2705 Desktop product detail loaded:",t.title),console.log("\ud83d\udcb0 Desktop bid info:",t.bid_info),void he(!1)}console.log("\u26a0\ufe0f Individual listing failed, trying cached data");const t=Q.find(e=>e.id===W);if(t)return ie(t),te(t),void he(!1);if(Q.length>0){console.log("\u26a0\ufe0f Cached data failed, trying browse endpoint");const e=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/marketplace/browse"));if(e.ok){const t=(await e.json()).find(e=>e.id===W);if(t)return ie(t),te(t),void he(!1)}console.log("\u274c Product not found, redirecting to browse"),K("/browse")}}catch(e){console.error("\u274c Error loading desktop product:",e);const t=Q.find(e=>e.id===W);t?(ie(t),te(t)):K("/browse"),he(!1)}})()},[W,Q,K,te]),(0,a.useEffect)(()=>{(async()=>{if(se&&"Catalysts"===se.category&&(se.catalyst_id||se.title)){je(!0);try{const e=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/admin/catalyst/calculations"));if(e.ok){const t=await e.json();let r=null;r=se.catalyst_id?t.find(e=>e.cat_id===se.catalyst_id):t.find(e=>e.name&&e.name.toLowerCase()===se.title.toLowerCase()),r&&r.total_price&&ve(parseFloat(r.total_price))}}catch(e){console.error("Failed to fetch price suggestion:",e)}finally{je(!1)}}})()},[se]),ue||!se)return(0,yn.jsx)("div",{className:"flex items-center justify-center py-16",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading product details..."})]})});const Ne=ee.some(e=>e.id===se.id),_e=se.images||[se.image||"https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=500"],Se=Q.filter(e=>e.id!==se.id&&e.category===se.category).slice(0,4);return(0,yn.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,yn.jsx)("button",{onClick:()=>K("/browse"),className:"hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"Browse"}),(0,yn.jsx)("span",{children:"\u203a"}),(0,yn.jsx)("span",{className:"text-gray-900 dark:text-white",children:se.title})]}),(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:(0,yn.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,yn.jsxs)("div",{className:"space-y-4",children:[(0,yn.jsxs)("div",{className:"relative group",children:[(0,yn.jsx)("img",{src:_e[oe],alt:se.title,className:"w-full h-96 object-cover rounded-xl"}),_e.length>1&&(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)("button",{onClick:()=>le(e=>0===e?_e.length-1:e-1),className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,yn.jsx)(Bo,{className:"w-5 h-5"})}),(0,yn.jsx)("button",{onClick:()=>le(e=>e===_e.length-1?0:e+1),className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,yn.jsx)(wo,{className:"w-5 h-5"})})]})]}),_e.length>1&&(0,yn.jsx)("div",{className:"flex space-x-2 overflow-x-auto",children:_e.map((e,t)=>(0,yn.jsx)("button",{onClick:()=>le(t),className:"flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-colors ".concat(oe===t?"border-blue-500":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"),children:(0,yn.jsx)("img",{src:e,alt:"".concat(se.title," - ").concat(t+1),className:"w-full h-full object-cover"})},t))})]}),(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:se.title}),(0,yn.jsxs)("div",{className:"flex items-center space-x-1 text-gray-600 dark:text-gray-400 mb-4",children:[(0,yn.jsx)(ti,{className:"w-4 h-4"}),(0,yn.jsxs)("span",{children:[se.views||0," views"]})]})]}),(0,yn.jsx)("div",{className:"flex items-center space-x-4",children:(0,yn.jsxs)("button",{onClick:()=>{Ne?X(se.id):Z(se)},className:"flex items-center space-x-2 px-4 py-2 rounded-lg border transition-colors ".concat(Ne?"bg-red-50 border-red-200 text-red-600 dark:bg-red-900/20 dark:border-red-800 dark:text-red-400":"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),children:[(0,yn.jsx)(Cs,{className:"w-5 h-5 ".concat(Ne?"fill-current":"")}),(0,yn.jsx)("span",{children:Ne?"Remove from Favorites":"Add to Favorites"})]})}),(0,yn.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/40 rounded-xl p-6 border-2 border-green-200 dark:border-green-800",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"text-sm font-semibold text-green-700 dark:text-green-300 uppercase tracking-wide mb-1",children:null!==(t=se.bid_info)&&void 0!==t&&t.has_bids?"Current Highest Bid":"Starting Price"}),(0,yn.jsx)(Fo,{basePrice:null!==(r=se.bid_info)&&void 0!==r&&r.has_bids&&null!==(n=se.bid_info)&&void 0!==n&&n.highest_bid?se.bid_info.highest_bid:se.price,baseCurrency:"EUR",showAlternativePrices:!0,compact:!1}),(null===(s=se.bid_info)||void 0===s?void 0:s.has_bids)&&(0,yn.jsxs)("div",{className:"text-sm text-green-600 dark:text-green-400 mt-2",children:["Starting price: \u20ac",se.price.toLocaleString()]})]}),(0,yn.jsxs)("div",{className:"text-right",children:[(0,yn.jsx)("div",{className:"bg-green-600 text-white px-4 py-2 rounded-full text-sm font-medium",children:null!==(i=se.bid_info)&&void 0!==i&&i.has_bids?"".concat(se.bid_info.total_bids||0," bids"):"No bids yet"}),(null===(o=se.bid_info)||void 0===o?void 0:o.has_bids)&&(0,yn.jsx)("div",{className:"text-xs text-green-700 dark:text-green-300 mt-1",children:"Total bids received"})]})]})}),se.market_range&&(0,yn.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-800",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,yn.jsx)(zs,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),(0,yn.jsx)("h3",{className:"text-lg font-semibold text-purple-900 dark:text-purple-100",children:"Market Range"})]}),(0,yn.jsx)("div",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:se.market_range})]}),(0,yn.jsx)("div",{className:"rounded-xl border-2 p-6 ".concat(null!==(l=se.time_info)&&void 0!==l&&l.has_time_limit?se.time_info.is_expired||se.time_info.time_remaining_seconds<=3600?"border-red-200 dark:border-red-800 bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/30":se.time_info.time_remaining_seconds<=21600?"border-orange-200 dark:border-orange-800 bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/30":se.time_info.time_remaining_seconds<=86400?"border-yellow-200 dark:border-yellow-800 bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/30":"border-green-200 dark:border-green-800 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/30":"border-green-200 dark:border-green-800 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/30"),children:(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"p-2 rounded-lg shadow-sm ".concat(null!==(c=se.time_info)&&void 0!==c&&c.has_time_limit?se.time_info.is_expired||se.time_info.time_remaining_seconds<=3600?"bg-gradient-to-r from-red-500 to-red-600":se.time_info.time_remaining_seconds<=21600?"bg-gradient-to-r from-orange-500 to-orange-600":se.time_info.time_remaining_seconds<=86400?"bg-gradient-to-r from-yellow-500 to-yellow-600":"bg-gradient-to-r from-green-500 to-green-600":"bg-gradient-to-r from-green-500 to-green-600"),children:(0,yn.jsx)(Js,{className:"w-5 h-5 text-white"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"text-sm font-medium uppercase tracking-wide ".concat(null!==(d=se.time_info)&&void 0!==d&&d.has_time_limit?se.time_info.is_expired||se.time_info.time_remaining_seconds<=3600?"text-red-700 dark:text-red-300":se.time_info.time_remaining_seconds<=21600?"text-orange-700 dark:text-orange-300":se.time_info.time_remaining_seconds<=86400?"text-yellow-700 dark:text-yellow-300":"text-green-700 dark:text-green-300":"text-green-700 dark:text-green-300"),children:null!==(u=se.time_info)&&void 0!==u&&u.has_time_limit?se.time_info.is_expired?"Expired":"Time Left":"Without Time Limit"}),(0,yn.jsx)("div",{className:"text-xl font-bold leading-tight ".concat(null!==(h=se.time_info)&&void 0!==h&&h.has_time_limit?se.time_info.is_expired||se.time_info.time_remaining_seconds<=3600?"text-red-900 dark:text-red-100":se.time_info.time_remaining_seconds<=21600?"text-orange-900 dark:text-orange-100":se.time_info.time_remaining_seconds<=86400?"text-yellow-900 dark:text-yellow-100":"text-green-900 dark:text-green-100":"text-green-900 dark:text-green-100"),children:null!==(m=se.time_info)&&void 0!==m&&m.has_time_limit?(0,yn.jsx)(qo,{timeInfo:se.time_info}):"Always Available"})]})]})}),J&&(0,yn.jsx)(zo,{weight:se.ceramic_weight,ptPpm:se.pt_ppm,pdPpm:se.pd_ppm,rhPpm:se.rh_ppm,ptG:se.pt_g,pdG:se.pd_g,rhG:se.rh_g}),(0,yn.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-900/30 dark:to-indigo-900/40 rounded-xl p-6 border-2 border-blue-200 dark:border-blue-800",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yn.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-lg",children:((null===(f=se.seller)||void 0===f?void 0:f.username)||(null===(p=se.seller)||void 0===p?void 0:p.name)||"U").charAt(0).toUpperCase()}),(0,yn.jsxs)("div",{className:"flex-1",children:[(0,yn.jsx)("div",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 uppercase tracking-wide mb-1",children:"Sold by"}),(0,yn.jsx)("div",{className:"text-xl font-bold text-blue-900 dark:text-blue-100",children:(null===(g=se.seller)||void 0===g?void 0:g.username)||(null===(x=se.seller)||void 0===x?void 0:x.name)||"Unknown Seller"}),(null===(y=se.seller)||void 0===y?void 0:y.is_business)&&(null===(b=se.seller)||void 0===b?void 0:b.business_name)&&(0,yn.jsx)("div",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:se.seller.business_name})]}),(0,yn.jsxs)("div",{className:"text-right",children:[(0,yn.jsx)("button",{onClick:()=>K("/profile/".concat(se.seller_id)),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"View Profile"}),(null===(v=se.seller)||void 0===v?void 0:v.verified)&&(0,yn.jsxs)("div",{className:"flex items-center justify-end space-x-1 mt-2",children:[(0,yn.jsx)(Uo,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),(0,yn.jsx)("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Verified"})]})]})]})}),(0,yn.jsx)("div",{children:(0,yn.jsx)("span",{className:"inline-block bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 text-sm px-3 py-1 rounded-full font-medium",children:se.category})}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2 text-gray-600 dark:text-gray-400",children:[(0,yn.jsx)(oo,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:se.location||"Location not specified"})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2 text-gray-500 dark:text-gray-400 text-sm mb-6",children:[(0,yn.jsx)(Js,{className:"w-4 h-4"}),(0,yn.jsxs)("span",{children:["Listed on ",new Date(se.created_at).toLocaleDateString()]})]}),(0,yn.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 space-y-4",children:[(0,yn.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Bidding Information"}),(null===(w=se.bid_info)||void 0===w?void 0:w.highest_bidder_id)===(null===G||void 0===G?void 0:G.id)&&(null===(j=se.bid_info)||void 0===j?void 0:j.has_bids)&&(0,yn.jsxs)("div",{className:"mb-4 p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,yn.jsx)("div",{className:"text-green-800 dark:text-green-300 font-medium text-sm",children:"\ud83c\udf89 You're the highest bidder!"})]}),(0,yn.jsx)("div",{className:"text-green-700 dark:text-green-400 text-xs mt-1",children:"Wait for others to place higher bids before you can bid again."})]}),null!==(k=se.bid_info)&&void 0!==k&&k.has_bids?(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsx)("span",{className:"text-gray-600 dark:text-gray-300",children:"Current Highest Bid:"}),(0,yn.jsxs)("span",{className:"font-bold text-green-600 dark:text-green-400",children:["\u20ac",se.bid_info.highest_bid.toFixed(2)]})]}):(0,yn.jsx)("div",{className:"text-center text-gray-500 dark:text-gray-400 italic",children:"No bids yet - be the first to bid!"}),(null===(N=se.bid_info)||void 0===N?void 0:N.user_bid)&&(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsx)("span",{className:"text-gray-600 dark:text-gray-300",children:"Your Current Bid:"}),(0,yn.jsxs)("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:["\u20ac",se.bid_info.user_bid.toFixed(2)]})]}),(0,yn.jsxs)("div",{className:"space-y-2",children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Your Tender Offer:"}),(null===(_=se.seller)||void 0===_?void 0:_.username)===(null===G||void 0===G?void 0:G.username)||se.seller_id===(null===G||void 0===G?void 0:G.id)||(null===(S=se.seller)||void 0===S?void 0:S.id)===(null===G||void 0===G?void 0:G.id)?(0,yn.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 text-center",children:[(0,yn.jsx)("div",{className:"text-yellow-700 dark:text-yellow-300 font-medium",children:"You cannot bid on your own listing"}),(0,yn.jsx)("div",{className:"text-sm text-yellow-600 dark:text-yellow-400 mt-1",children:"This is your product listing"})]}):(0,yn.jsxs)("div",{className:"flex space-x-2",children:[(0,yn.jsx)("input",{type:"number",step:"0.01",min:(null===(E=se.bid_info)||void 0===E?void 0:E.highest_bid)||se.price,value:me,onChange:e=>fe(e.target.value),disabled:ke||(null===(A=se.bid_info)||void 0===A?void 0:A.highest_bidder_id)===(null===G||void 0===G?void 0:G.id)&&(null===(C=se.bid_info)||void 0===C?void 0:C.has_bids),className:"flex-1 px-3 py-2 border rounded-lg text-sm ".concat(ke||(null===(O=se.bid_info)||void 0===O?void 0:O.highest_bidder_id)===(null===G||void 0===G?void 0:G.id)&&null!==(T=se.bid_info)&&void 0!==T&&T.has_bids?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed":"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-blue-500"),placeholder:null!==(P=se.time_info)&&void 0!==P&&P.is_expired?"Expired":(null===(L=se.bid_info)||void 0===L?void 0:L.highest_bidder_id)===(null===G||void 0===G?void 0:G.id)&&null!==(M=se.bid_info)&&void 0!==M&&M.has_bids?"You have the highest bid":"Minimum: \u20ac".concat(((null===(R=se.bid_info)||void 0===R?void 0:R.highest_bid)||se.price||0).toFixed(2))}),(0,yn.jsx)("button",{onClick:async()=>{var e,t,r,n,a;if(!G)return void Y("Please login to submit tender offers","error");if((null===(e=se.seller)||void 0===e?void 0:e.username)===G.username||se.seller_id===G.id||(null===(t=se.seller)||void 0===t?void 0:t.id)===G.id)return void Y("You cannot bid on your own listing","error");if((null===(r=se.bid_info)||void 0===r?void 0:r.highest_bidder_id)===G.id&&null!==(n=se.bid_info)&&void 0!==n&&n.has_bids)return void Y("You are already the highest bidder! Wait for others to place higher bids.","warning");const s=parseFloat(me),i=(null===(a=se.bid_info)||void 0===a?void 0:a.highest_bid)||se.price||0;if(!s||s<i)Y("Please enter an amount of at least \u20ac".concat(i.toFixed(2)),"error");else{ge(!0);try{const e=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/tenders/submit"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({listing_id:se.id,buyer_id:G.id,offer_amount:s})}),t=await e.json();var o;if(e.ok)Y("Tender offer of \u20ac".concat(s.toFixed(2)," submitted successfully!"),"success"),fe(""),ye({amount:s,timestamp:new Date,visible:!0}),setTimeout(()=>{ye(e=>e?(0,Ie.A)((0,Ie.A)({},e),{},{visible:!1}):null)},8e3),s>((null===(o=se.bid_info)||void 0===o?void 0:o.highest_bid)||se.highest_bid||0)&&ie(e=>{var t;return(0,Ie.A)((0,Ie.A)({},e),{},{highest_bid:s,bid_info:(0,Ie.A)((0,Ie.A)({},e.bid_info),{},{has_bids:!0,highest_bid:s,total_bids:((null===(t=e.bid_info)||void 0===t?void 0:t.total_bids)||0)+1})})});else 400===e.status?Y(t.detail||"Invalid tender offer","error"):Y(t.detail||"Failed to submit tender offer","error")}catch(l){console.error("Error submitting tender:",l),Y("Failed to submit tender offer. Please try again.","error")}finally{ge(!1)}}},disabled:pe||ke||(null===(D=se.bid_info)||void 0===D?void 0:D.highest_bidder_id)===(null===G||void 0===G?void 0:G.id)&&(null===(I=se.bid_info)||void 0===I?void 0:I.has_bids),className:"px-4 py-2 rounded-lg font-medium transition-colors text-sm ".concat(pe||ke||(null===(F=se.bid_info)||void 0===F?void 0:F.highest_bidder_id)===(null===G||void 0===G?void 0:G.id)&&null!==(B=se.bid_info)&&void 0!==B&&B.has_bids?"bg-gray-300 dark:bg-gray-600 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"),children:pe?"Submitting...":"Submit Bid"})]})]}),(null===(U=se.time_info)||void 0===U?void 0:U.has_time_limit)&&(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsx)("span",{className:"text-gray-600 dark:text-gray-300",children:"Time Remaining:"}),(0,yn.jsx)("span",{className:"font-bold ".concat(se.time_info.is_expired||se.time_info.time_remaining_seconds<=3600?"text-red-600 dark:text-red-400":se.time_info.time_remaining_seconds<=86400?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400"),children:se.time_info.is_expired?"EXPIRED":se.time_info.time_remaining_display||"Active"})]})]})]})]})}),(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[(0,yn.jsx)("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[{id:"description",label:"Description"},{id:"seller",label:"Seller Info"}].map(e=>(0,yn.jsx)("button",{onClick:()=>de(e.id),className:"px-6 py-4 font-medium transition-colors ".concat(ce===e.id?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:e.label},e.id))}),(0,yn.jsxs)("div",{className:"p-6",children:["description"===ce&&(0,yn.jsx)("div",{className:"prose dark:prose-invert max-w-none",children:(0,yn.jsx)("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:se.description||"No description available for this product."})}),"seller"===ce&&(0,yn.jsx)("div",{className:"space-y-4",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yn.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-xl",children:((null===(q=se.seller)||void 0===q?void 0:q.name)||se.seller||"S")[0]}),(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center space-x-2",children:[(0,yn.jsx)("span",{children:(null===(z=se.seller)||void 0===z?void 0:z.name)||se.seller||"Verified Seller"}),(null===(V=se.seller)||void 0===V?void 0:V.verified)&&(0,yn.jsx)(Uo,{className:"w-5 h-5 text-blue-600"})]}),(0,yn.jsx)("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:(null===(H=se.seller)||void 0===H?void 0:H.location)&&(0,yn.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,yn.jsx)(oo,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:se.seller.location})]})})]})]})})]})]}),Se.length>0&&(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,yn.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Related Products"}),(0,yn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Se.map(e=>{var t;return(0,yn.jsxs)("div",{className:"group cursor-pointer",onClick:()=>K("/product/".concat(e.id)),children:[(0,yn.jsx)("div",{className:"aspect-square bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden mb-3",children:(0,yn.jsx)("img",{src:(null===(t=e.images)||void 0===t?void 0:t[0])||e.image||"https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=300",alt:e.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"})}),(0,yn.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white group-hover:text-blue-600 transition-colors line-clamp-2",children:e.title}),(0,yn.jsxs)("p",{className:"text-lg font-bold text-gray-900 dark:text-white mt-1",children:["\u20ac",e.price.toFixed(2)]})]},e.id)})})]})]})},Ho=ks("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const Wo=function(){var e,t,r,n,s,i,o,l,c,d,u,h,m,f,p,g,x,y;const b=ae(),v=re(),{user:w}=Cn(),{showToast:j}=zn(),k=b.id||b.productId;console.log("\ud83d\udd0d MobileProductDetailPage params:",b),console.log("\ud83c\udd94 Product ID resolved:",k);const[N,_]=(0,a.useState)(null),[S,E]=(0,a.useState)(!0),[A,C]=(0,a.useState)(0),[O,T]=(0,a.useState)(""),[P,L]=(0,a.useState)(!1),[M,R]=(0,a.useState)(!1);(0,a.useEffect)(()=>{k&&(async()=>{try{console.log("\ud83d\udd0d Loading product details:",k);const e=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/listings/").concat(k));if(e.ok){const t=await e.json(),r=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/listings/").concat(k,"/tenders"));if(r.ok){const e=(await r.json()).filter(e=>"active"===e.status);if(e.length>0){const r=Math.max(...e.map(e=>e.offer_amount)),n=e.find(e=>e.offer_amount===r);t.bid_info={has_bids:!0,highest_bid:r,highest_bidder_id:null===n||void 0===n?void 0:n.buyer_id,total_bids:e.length}}else t.bid_info={has_bids:!1,highest_bid:null,highest_bidder_id:null,total_bids:0}}_(t),console.log("\u2705 Product detail loaded:",t.title),console.log("\ud83d\udcb0 Bid info:",t.bid_info)}else{console.log("\u26a0\ufe0f Individual listing failed, trying browse endpoint");const e=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/marketplace/browse"));if(!e.ok)throw new Error("Failed to fetch products");{const t=(await e.json()).find(e=>e.id===k);t?(_(t),console.log("\u2705 Product loaded from browse:",t.title)):(console.log("\u274c Product not found"),j("Product not found","error"),v("/browse"))}}}catch(e){console.error("\u274c Error loading product:",e),j("Error loading product","error"),v("/browse")}finally{E(!1)}})()},[k,v,j]);const D=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return S?(0,yn.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading product details..."})]})}):N?(0,yn.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,yn.jsx)("button",{onClick:()=>v("/browse"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:(0,yn.jsx)(Ho,{className:"w-6 h-6 text-gray-700 dark:text-gray-300"})}),(0,yn.jsx)("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate mx-4",children:N.title}),(0,yn.jsxs)("div",{className:"flex space-x-2",children:[(0,yn.jsx)("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:(0,yn.jsx)(Vi,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"})}),(0,yn.jsx)("button",{onClick:()=>R(!M),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:(0,yn.jsx)(Cs,{className:"w-5 h-5 ".concat(M?"text-red-500 fill-current":"text-gray-700 dark:text-gray-300")})})]})]})}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)("div",{className:"aspect-square bg-gray-100 dark:bg-gray-700",children:N.images&&N.images.length>0?(0,yn.jsx)("img",{src:N.images[A],alt:N.title,className:"w-full h-full object-cover"}):(0,yn.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,yn.jsxs)("div",{className:"text-center text-gray-400",children:[(0,yn.jsx)("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-600 rounded-lg mx-auto mb-4 flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-2xl font-bold",children:"C"})}),(0,yn.jsx)("p",{children:"No Image"})]})})}),N.images&&N.images.length>1&&(0,yn.jsx)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:N.images.map((e,t)=>(0,yn.jsx)("button",{onClick:()=>C(t),className:"w-2 h-2 rounded-full ".concat(t===A?"bg-white":"bg-white/50")},t))})]}),(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6",children:[(0,yn.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,yn.jsxs)("div",{className:"flex-1",children:[(0,yn.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:N.title}),(0,yn.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)(oo,{className:"w-4 h-4 mr-1"}),(0,yn.jsx)("span",{children:(null===(e=N.seller)||void 0===e?void 0:e.location)||"Unknown"})]}),(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)(Js,{className:"w-4 h-4 mr-1"}),(0,yn.jsx)("span",{children:(e=>{const t=new Date(e),r=new Date,n=Math.floor((r-t)/36e5);return n<1?"Just now":n<24?"".concat(n,"h ago"):"".concat(Math.floor(n/24),"d ago")})(N.created_at)})]}),(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)(ti,{className:"w-4 h-4 mr-1"}),(0,yn.jsx)("span",{children:N.viewCount||0})]})]})]}),(0,yn.jsxs)("div",{className:"text-right",children:[(0,yn.jsx)("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:null!==(t=N.bid_info)&&void 0!==t&&t.has_bids&&null!==(r=N.bid_info)&&void 0!==r&&r.highest_bid?D(N.bid_info.highest_bid):D(N.price)}),(0,yn.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:null!==(n=N.bid_info)&&void 0!==n&&n.has_bids&&(null===(s=N.bid_info)||void 0===s?void 0:s.total_bids)>0?(0,yn.jsxs)(yn.Fragment,{children:["Current highest bid (",N.bid_info.total_bids," bid",1!==N.bid_info.total_bids?"s":"",")"]}):(0,yn.jsx)(yn.Fragment,{children:"Starting price (no bids yet)"})}),(null===(i=N.bid_info)||void 0===i?void 0:i.has_bids)&&N.price&&(0,yn.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["Original price: ",D(N.price)]}),N.rating&&(0,yn.jsxs)("div",{className:"flex items-center mt-1",children:[(0,yn.jsx)(Gs,{className:"w-4 h-4 text-yellow-500 fill-current"}),(0,yn.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400 ml-1",children:[N.rating," (",N.reviewCount||0,")"]})]})]})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,yn.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg text-center",children:[(0,yn.jsx)("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:(null===(o=N.bid_info)||void 0===o?void 0:o.total_bids)||0}),(0,yn.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Bids"})]}),(0,yn.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg text-center",children:[(0,yn.jsx)("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:null!==(l=N.bid_info)&&void 0!==l&&l.highest_bid?D(N.bid_info.highest_bid):"No bids"}),(0,yn.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Highest Bid"})]})]}),(0,yn.jsxs)("div",{className:"mb-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Description"}),(0,yn.jsx)("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:N.description||"No description available."})]}),(0,yn.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg mb-6",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center",children:(0,yn.jsx)(Ts,{className:"w-6 h-6 text-white"})}),(0,yn.jsxs)("div",{className:"flex-1",children:[(0,yn.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:(null===(c=N.seller)||void 0===c?void 0:c.name)||"Unknown Seller"}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:null!==(d=N.seller)&&void 0!==d&&d.is_business?"Business Seller":"Private Seller"})]}),(null===(u=N.seller)||void 0===u?void 0:u.verified)&&(0,yn.jsx)(Qi,{className:"w-5 h-5 text-green-500"})]})})]}),(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 border-t border-gray-200 dark:border-gray-700",children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Place Your Bid"}),(null===(h=N.bid_info)||void 0===h?void 0:h.highest_bidder_id)===(null===w||void 0===w?void 0:w.id)&&(null===(m=N.bid_info)||void 0===m?void 0:m.has_bids)&&(0,yn.jsxs)("div",{className:"mb-4 p-4 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,yn.jsx)("div",{className:"text-green-800 dark:text-green-300 font-medium text-sm",children:"\ud83c\udf89 You're the highest bidder!"})]}),(0,yn.jsx)("div",{className:"text-green-700 dark:text-green-400 text-xs mt-1",children:"Wait for others to place higher bids before you can bid again."})]}),(0,yn.jsxs)("div",{className:"flex space-x-3",children:[(0,yn.jsx)("div",{className:"flex-1",children:(0,yn.jsx)("input",{type:"number",value:O,onChange:e=>T(e.target.value),placeholder:null!==(f=N.bid_info)&&void 0!==f&&f.highest_bid?"Min bid: \u20ac".concat((N.bid_info.highest_bid+1).toFixed(0)):"Min bid: \u20ac".concat(N.price||0),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg  focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",min:null!==(p=N.bid_info)&&void 0!==p&&p.highest_bid?N.bid_info.highest_bid+1:N.price||0,step:"1",disabled:(null===(g=N.bid_info)||void 0===g?void 0:g.highest_bidder_id)===(null===w||void 0===w?void 0:w.id)})}),(0,yn.jsx)("button",{onClick:async()=>{var e;const t=parseFloat(O);if(!O||t<=0)return void j("Please enter a valid bid amount","error");const r=(null===(e=N.bid_info)||void 0===e?void 0:e.highest_bid)||0,n=N.price||0,a=r>0?r+1:n;if(t<a)j(r>0?"Bid must be higher than current highest bid of \u20ac".concat(r,". Minimum: \u20ac").concat(a):"Bid must be at least \u20ac".concat(a," (starting price)"),"error");else if(w){L(!0);try{console.log("\ud83d\udcb0 Submitting bid:",{listing_id:k,buyer_id:w.id,offer_amount:t});const e=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/tenders/submit"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({listing_id:k,buyer_id:w.id,offer_amount:t})});if(!e.ok){const t=await e.json();throw new Error(t.detail||"Failed to submit bid")}const r=await e.json();console.log("\u2705 Bid submitted successfully:",r),j("Bid submitted successfully!","success"),T("");const n=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/marketplace/browse"));if(n.ok){const e=(await n.json()).find(e=>e.id===k);e&&(_(e),console.log("\ud83d\udd04 Product data refreshed with updated bids"))}}catch(s){console.error("\u274c Error submitting bid:",s),j(s.message||"Error submitting bid","error")}finally{L(!1)}}else j("Please login to place a bid","error")},disabled:P||!O||(null===(x=N.bid_info)||void 0===x?void 0:x.highest_bidder_id)===(null===w||void 0===w?void 0:w.id),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400  text-white font-semibold rounded-lg transition-colors flex items-center space-x-2",children:P?(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,yn.jsx)("span",{children:"Bidding..."})]}):(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)(Es,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Bid"})]})})]}),(0,yn.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-3",children:["Current highest bid: ",null!==(y=N.bid_info)&&void 0!==y&&y.highest_bid?D(N.bid_info.highest_bid):"No bids yet"]})]}),(0,yn.jsx)("div",{className:"h-20"})]}):(0,yn.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,yn.jsxs)("div",{className:"text-center p-6",children:[(0,yn.jsx)($i,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Product not found"}),(0,yn.jsx)("button",{onClick:()=>v("/browse"),className:"mt-4 bg-blue-600 text-white px-6 py-2 rounded-lg",children:"Back to Browse"})]})})},Ko=ks("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);function Go(e){var t,r;let{listing:n,onDelete:s}=e;const[i,o]=(0,a.useState)(!1);return(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm",children:(0,yn.jsxs)("div",{className:"flex",children:[(0,yn.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-purple-600 flex-shrink-0 flex items-center justify-center",children:n.images&&n.images.length>0?(0,yn.jsx)("img",{src:n.images[0],alt:n.title,className:"w-full h-full object-cover"}):(0,yn.jsx)(Ms,{className:"w-8 h-8 text-white"})}),(0,yn.jsxs)("div",{className:"flex-1 p-4",children:[(0,yn.jsxs)("div",{className:"flex items-start justify-between",children:[(0,yn.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,yn.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:n.title}),(0,yn.jsxs)("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400 mt-1",children:["\u20ac",n.price]}),(0,yn.jsxs)("div",{className:"flex items-center mt-2",children:[(e=>{switch(e){case"active":return(0,yn.jsx)(Qi,{className:"w-4 h-4 text-green-500"});case"sold":return(0,yn.jsx)(Ms,{className:"w-4 h-4 text-blue-500"});case"expired":return(0,yn.jsx)(Js,{className:"w-4 h-4 text-orange-500"});default:return(0,yn.jsx)($i,{className:"w-4 h-4 text-gray-500"})}})(n.status),(0,yn.jsx)("span",{className:"ml-1 text-xs px-2 py-1 rounded-full font-medium ".concat((e=>{switch(e){case"active":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"sold":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";case"expired":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}})(n.status)),children:(null===(t=n.status)||void 0===t?void 0:t.charAt(0).toUpperCase())+(null===(r=n.status)||void 0===r?void 0:r.slice(1))})]})]}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)("button",{onClick:()=>o(!i),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,yn.jsx)(Ko,{className:"w-5 h-5"})}),i&&(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>o(!1)}),(0,yn.jsxs)("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-20",children:[(0,yn.jsxs)(Le,{to:"/listing/".concat(n.id),className:"flex items-center px-4 py-3 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",onClick:()=>o(!1),children:[(0,yn.jsx)(ti,{className:"w-4 h-4 mr-3"}),"View Details"]}),(0,yn.jsxs)("button",{onClick:()=>{o(!1)},className:"flex items-center w-full px-4 py-3 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,yn.jsx)(Xs,{className:"w-4 h-4 mr-3"}),"Edit Listing"]}),(0,yn.jsxs)("button",{onClick:()=>{o(!1),s(n.id)},className:"flex items-center w-full px-4 py-3 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:[(0,yn.jsx)(ei,{className:"w-4 h-4 mr-3"}),"Delete"]})]})]})]})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-between mt-3 text-xs text-gray-500 dark:text-gray-400",children:[(0,yn.jsxs)("span",{children:[n.total_bids||0," bid",1!==(n.total_bids||0)?"s":""]}),(0,yn.jsx)("span",{children:n.created_at?new Date(n.created_at).toLocaleDateString():"N/A"})]})]})]})})}const Yo=function(){const{user:e}=Cn(),{showToast:t}=zn(),[r,n]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[o,l]=(0,a.useState)("all"),c=re();(0,a.useEffect)(()=>{null!==e&&void 0!==e&&e.id&&d()},[e]);const d=async()=>{try{i(!0);const t=await Vn.getMyListings(e.id);n(t)}catch(r){console.error("Error fetching listings:",r),t("Failed to load listings","error")}finally{i(!1)}},u=async e=>{if(window.confirm("Are you sure you want to delete this listing?"))try{await Vn.deleteListing(e),n(r.filter(t=>t.id!==e)),t("Listing deleted successfully","success")}catch(a){console.error("Error deleting listing:",a),t("Failed to delete listing","error")}},h=r.filter(e=>"all"===o||("active"===o?"active"===e.status:"sold"===o?"sold"===e.status:"expired"!==o||"expired"===e.status));return s?(0,yn.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("button",{onClick:()=>c(-1),className:"mr-3 p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200",children:(0,yn.jsx)(Ho,{className:"w-5 h-5"})}),(0,yn.jsx)("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"My Listings"})]})}),(0,yn.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,yn.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full"})})]}):(0,yn.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-20",children:[(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3 sticky top-0 z-10",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("button",{onClick:()=>c(-1),className:"mr-3 p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200",children:(0,yn.jsx)(Ho,{className:"w-5 h-5"})}),(0,yn.jsx)("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"My Listings"})]}),(0,yn.jsx)(Le,{to:"/create-listing",className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 transition-colors",children:(0,yn.jsx)(_s,{className:"w-5 h-5"})})]}),(0,yn.jsx)("div",{className:"flex space-x-1 mt-3 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[{key:"all",label:"All"},{key:"active",label:"Active"},{key:"sold",label:"Sold"},{key:"expired",label:"Expired"}].map(e=>(0,yn.jsx)("button",{onClick:()=>l(e.key),className:"flex-1 py-2 px-3 text-sm font-medium rounded-md transition-colors ".concat(o===e.key?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:e.label},e.key))})]}),(0,yn.jsx)("div",{className:"p-4",children:0===h.length?(0,yn.jsxs)("div",{className:"text-center py-12",children:[(0,yn.jsx)(Ms,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No listings found"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"all"===o?"You haven't created any listings yet":"No ".concat(o," listings found")}),(0,yn.jsxs)(Le,{to:"/create-listing",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center",children:[(0,yn.jsx)(_s,{className:"w-5 h-5 mr-2"}),"Create Your First Listing"]})]}):(0,yn.jsx)("div",{className:"space-y-4",children:h.map(e=>(0,yn.jsx)(Go,{listing:e,onDelete:u},e.id))})})]})},$o=ks("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function Jo(e){let{bids:t}=e;return 0===t.length?(0,yn.jsxs)("div",{className:"text-center py-12",children:[(0,yn.jsx)(Es,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No bids yet"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Start bidding on items you're interested in"}),(0,yn.jsxs)(Le,{to:"/browse",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center",children:[(0,yn.jsx)(ti,{className:"w-5 h-5 mr-2"}),"Browse Items"]})]}):(0,yn.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,yn.jsx)(Zo,{bid:e},e.id))})}function Qo(e){let{tenders:t,onRefresh:r}=e;return 0===t.length?(0,yn.jsxs)("div",{className:"text-center py-12",children:[(0,yn.jsx)(Ms,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No bids on your items"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Create listings to start receiving bids"}),(0,yn.jsxs)(Le,{to:"/create-listing",className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center",children:[(0,yn.jsx)(Ms,{className:"w-5 h-5 mr-2"}),"Create Listing"]})]}):(0,yn.jsx)("div",{className:"space-y-4",children:t.map((e,t)=>{var n;return(0,yn.jsx)(Xo,{listingOverview:e,onManageTenders:r},(null===(n=e.listing)||void 0===n?void 0:n.id)||t)})})}function Zo(e){var t,r,n,a,s,i;let{bid:o}=e;return(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 shadow-sm",children:[(0,yn.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,yn.jsxs)("div",{className:"flex-1",children:[(0,yn.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:(null===(t=o.listing)||void 0===t?void 0:t.title)||"Unknown Item"}),(0,yn.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Bid placed on ",o.created_at?new Date(o.created_at).toLocaleDateString():"N/A"]}),(0,yn.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Seller: ",(null===(r=o.seller)||void 0===r?void 0:r.username)||"Unknown"]})]}),(0,yn.jsxs)("div",{className:"flex items-center",children:[(e=>{switch(e){case"accepted":return(0,yn.jsx)(Qi,{className:"w-4 h-4 text-green-500"});case"rejected":return(0,yn.jsx)($o,{className:"w-4 h-4 text-red-500"});case"pending":case"active":return(0,yn.jsx)(Js,{className:"w-4 h-4 text-orange-500"});default:return(0,yn.jsx)(Js,{className:"w-4 h-4 text-gray-500"})}})(o.status),(0,yn.jsx)("span",{className:"ml-1 text-xs px-2 py-1 rounded-full font-medium ".concat((e=>{switch(e){case"accepted":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";case"pending":case"active":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}})(o.status)),children:(null===(n=o.status)||void 0===n?void 0:n.charAt(0).toUpperCase())+(null===(a=o.status)||void 0===a?void 0:a.slice(1))||"Active"})]})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Your Bid"}),(0,yn.jsxs)("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:["\u20ac",o.offer_amount||0]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Listing Price"}),(0,yn.jsxs)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["\u20ac",(null===(s=o.listing)||void 0===s?void 0:s.price)||0]})]})]}),(0,yn.jsx)(Le,{to:"/listing/".concat(null===(i=o.listing)||void 0===i?void 0:i.id),className:"bg-blue-600 text-white px-3 py-2 rounded-lg text-sm hover:bg-blue-700 transition-colors",children:"View Item"})]})]})}function Xo(e){var t,r,n,s,i;let{listingOverview:o,onManageTenders:l}=e;const[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(null),m=re();return(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 shadow-sm relative",children:[(0,yn.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,yn.jsxs)("div",{className:"flex-1",children:[(0,yn.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:(null===(t=o.listing)||void 0===t?void 0:t.title)||"Unknown Item"}),(0,yn.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Listed for \u20ac",(null===(r=o.listing)||void 0===r?void 0:r.price)||0]})]}),(0,yn.jsxs)("div",{className:"flex items-center bg-blue-100 dark:bg-blue-900/30 px-2 py-1 rounded-full",children:[(0,yn.jsx)(ii,{className:"w-4 h-4 text-blue-600 dark:text-blue-400 mr-1"}),(0,yn.jsxs)("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:[o.tender_count||0," bid",1!==(o.tender_count||0)?"s":""]})]})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Highest Bid"}),(0,yn.jsxs)("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:["\u20ac",o.highest_offer||0]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active Tenders"}),(0,yn.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:(null===(n=o.tenders)||void 0===n?void 0:n.length)||0})]})]}),(0,yn.jsxs)("div",{className:"flex space-x-2",children:[(0,yn.jsx)(Le,{to:"/listing/".concat(null===(s=o.listing)||void 0===s?void 0:s.id),className:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-3 py-2 rounded-lg text-sm hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"View"}),(0,yn.jsx)("button",{onClick:e=>{e.preventDefault(),d(!c)},className:"bg-blue-600 text-white px-3 py-2 rounded-lg text-sm hover:bg-blue-700 transition-colors",children:"Manage"})]})]}),c&&(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25 z-10",onClick:()=>d(!1)}),(0,yn.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-20 max-h-80 overflow-y-auto",children:[(0,yn.jsx)("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700",children:(0,yn.jsxs)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["Manage Tenders (",(null===(i=o.tenders)||void 0===i?void 0:i.length)||0,")"]})}),o.tenders&&o.tenders.length>0?(0,yn.jsx)("div",{className:"max-h-60 overflow-y-auto",children:o.tenders.map((e,t)=>{var r,n,a,s,i,c;return(0,yn.jsxs)("div",{className:"p-3 border-b border-gray-100 dark:border-gray-700 last:border-b-0",children:[(0,yn.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,yn.jsxs)("div",{className:"flex-1",children:[(0,yn.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:(null===(r=e.buyer)||void 0===r?void 0:r.username)||"Anonymous"}),(0,yn.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[null!==(n=e.buyer)&&void 0!==n&&n.is_business?"Business":"Individual"," \u2022 ",e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"]})]}),(0,yn.jsxs)("div",{className:"text-right",children:[(0,yn.jsxs)("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:["\u20ac",e.offer_amount||0]}),(0,yn.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("accepted"===e.status?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"rejected"===e.status?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300"),children:(null===(a=e.status)||void 0===a?void 0:a.charAt(0).toUpperCase())+(null===(s=e.status)||void 0===s?void 0:s.slice(1))||"Active"})]})]}),(!e.status||"accepted"!==e.status.toLowerCase()&&"rejected"!==e.status.toLowerCase())&&(0,yn.jsxs)("div",{className:"flex space-x-2 mt-2",children:[(0,yn.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm("Accept this bid of \u20ac".concat(t,"?")))try{var r;h(e);const t=localStorage.getItem("cataloro_token"),n=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/tenders/").concat(e,"/accept"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({seller_id:null===(r=o.listing)||void 0===r?void 0:r.seller_id})});if(n.ok)alert("\u2705 Tender accepted successfully!"),d(!1),l&&l(),m("/mobile-my-listings");else{const e=await n.text();alert("\u274c Failed to accept tender: ".concat(e))}}catch(n){console.error("Error accepting tender:",n),alert("Error accepting tender")}finally{h(null)}})(e.id,e.offer_amount),disabled:u===e.id,className:"flex-1 bg-green-600 text-white px-3 py-2 rounded-lg text-xs font-medium hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center justify-center",children:u===e.id?(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)("div",{className:"animate-spin w-3 h-3 border border-white border-t-transparent rounded-full mr-1"}),"Processing..."]}):(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)(Qi,{className:"w-3 h-3 mr-1"}),"Accept"]})}),(0,yn.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm("Reject this bid of \u20ac".concat(t,"?")))try{var r;h(e);const t=localStorage.getItem("cataloro_token"),n=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/tenders/").concat(e,"/reject"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({seller_id:null===(r=o.listing)||void 0===r?void 0:r.seller_id})});if(n.ok)alert("\u2705 Tender rejected successfully!"),d(!1),l&&l();else{const e=await n.text();alert("\u274c Failed to reject tender: ".concat(e))}}catch(n){console.error("Error rejecting tender:",n),alert("Error rejecting tender")}finally{h(null)}})(e.id,e.offer_amount),disabled:u===e.id,className:"flex-1 bg-red-600 text-white px-3 py-2 rounded-lg text-xs font-medium hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center justify-center",children:u===e.id?(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)("div",{className:"animate-spin w-3 h-3 border border-white border-t-transparent rounded-full mr-1"}),"Processing..."]}):(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)($o,{className:"w-3 h-3 mr-1"}),"Reject"]})})]}),("accepted"===(null===(i=e.status)||void 0===i?void 0:i.toLowerCase())||"rejected"===(null===(c=e.status)||void 0===c?void 0:c.toLowerCase()))&&(0,yn.jsx)("div",{className:"mt-2 text-center",children:(0,yn.jsx)("span",{className:"text-xs px-3 py-1 rounded-full font-medium ".concat("accepted"===e.status.toLowerCase()?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"),children:"accepted"===e.status.toLowerCase()?"Tender Accepted":"Tender Rejected"})})]},e.id||t)})}):(0,yn.jsx)("div",{className:"p-4 text-center",children:(0,yn.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No tenders yet"})})]})]})]})}const el=function(){const{user:e}=Cn(),{showToast:t}=zn(),[r,n]=(0,a.useState)("my-bids"),[s,i]=(0,a.useState)([]),[o,l]=(0,a.useState)([]),[c,d]=(0,a.useState)(!0),u=re();(0,a.useEffect)(()=>{null!==e&&void 0!==e&&e.id&&h()},[e,r]);const h=async()=>{try{d(!0);const n=localStorage.getItem("cataloro_token");if("my-bids"===r){const r=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/tenders/buyer/").concat(e.id),{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});if(r.ok){const e=await r.json();i(e)}else console.error("Failed to fetch buyer tenders: ".concat(r.status)),t("Failed to load your bids","error")}else{const r=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/tenders/seller/").concat(e.id,"/overview"),{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});if(r.ok){const e=await r.json();l(e)}else console.error("Failed to fetch seller tenders: ".concat(r.status)),t("Failed to load selling tenders","error")}}catch(n){console.error("Error loading tenders data:",n),t("Failed to load tenders data","error")}finally{d(!1)}};return c?(0,yn.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("button",{onClick:()=>u(-1),className:"mr-3 p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200",children:(0,yn.jsx)(Ho,{className:"w-5 h-5"})}),(0,yn.jsx)("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Tenders"})]})}),(0,yn.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,yn.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full"})})]}):(0,yn.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-20",children:[(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3 sticky top-0 z-10",children:[(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("button",{onClick:()=>u(-1),className:"mr-3 p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200",children:(0,yn.jsx)(Ho,{className:"w-5 h-5"})}),(0,yn.jsx)("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Tenders"})]}),(0,yn.jsxs)("div",{className:"flex space-x-1 mt-3 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[(0,yn.jsxs)("button",{onClick:()=>n("my-bids"),className:"flex-1 py-2 px-3 text-sm font-medium rounded-md transition-colors flex items-center justify-center ".concat("my-bids"===r?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:[(0,yn.jsx)(Es,{className:"w-4 h-4 mr-2"}),"My Bids"]}),(0,yn.jsxs)("button",{onClick:()=>n("selling"),className:"flex-1 py-2 px-3 text-sm font-medium rounded-md transition-colors flex items-center justify-center ".concat("selling"===r?"bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:[(0,yn.jsx)(Ms,{className:"w-4 h-4 mr-2"}),"Selling"]})]})]}),(0,yn.jsx)("div",{className:"p-4",children:"my-bids"===r?(0,yn.jsx)(Jo,{bids:s}):(0,yn.jsx)(Qo,{tenders:o,onRefresh:h})})]})},tl=ks("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);function rl(e){var t;let{listing:r,onDelete:n}=e;const[s,i]=(0,a.useState)(!1);(0,a.useEffect)(()=>{const e=e=>{s&&!e.target.closest(".listing-menu-container")&&i(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[s]);return(0,yn.jsxs)("div",{className:"listing-tile",children:[(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)("img",{src:(null===(t=r.images)||void 0===t?void 0:t[0])||"/api/placeholder/400/300",alt:r.title,className:"listing-image"}),(0,yn.jsx)("span",{className:"absolute top-3 left-3 px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"active":return"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300";case"sold":default:return"bg-gray-100 dark:bg-gray-700/50 text-gray-800 dark:text-gray-300";case"draft":return"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300";case"expired":return"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300"}})(r.status||(r.is_draft?"draft":"active"))),children:(r.status||(r.is_draft?"DRAFT":"ACTIVE")).toUpperCase()}),(r.is_draft||"draft"===r.status)&&(0,yn.jsx)("div",{className:"absolute top-3 right-16 bg-yellow-500 text-white px-2 py-1 rounded-full text-xs font-bold animate-pulse",children:"DRAFT"}),(0,yn.jsxs)("div",{className:"absolute top-3 right-3 listing-menu-container",children:[(0,yn.jsx)("button",{onClick:e=>{e.stopPropagation(),i(!s)},className:"p-2 bg-white/90 dark:bg-gray-800/90 backdrop-blur-md rounded-full hover:bg-white dark:hover:bg-gray-800 transition-all duration-200 shadow-lg",children:(0,yn.jsx)(tl,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"})}),s&&(0,yn.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 py-2 z-50 backdrop-blur-xl",children:[(r.is_draft||"draft"===r.status)&&(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsxs)(Le,{to:"/edit-listing/".concat(r.id),onClick:e=>{e.stopPropagation(),i(!1)},className:"w-full text-left px-4 py-3 text-sm text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 flex items-center transition-colors duration-200",children:[(0,yn.jsx)(Xs,{className:"w-4 h-4 mr-3"}),"Finish & Publish"]}),(0,yn.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-600 my-1"})]}),!(r.is_draft||"draft"===r.status)&&(0,yn.jsxs)(Le,{to:"/product/".concat(r.id),onClick:e=>{e.stopPropagation(),i(!1)},className:"w-full text-left px-4 py-3 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center transition-colors duration-200",children:[(0,yn.jsx)(ti,{className:"w-4 h-4 mr-3"}),"View Details"]}),(0,yn.jsxs)(Le,{to:"/edit-listing/".concat(r.id),onClick:e=>{e.stopPropagation(),i(!1)},className:"w-full text-left px-4 py-3 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center transition-colors duration-200",children:[(0,yn.jsx)(Xs,{className:"w-4 h-4 mr-3"}),r.is_draft||"draft"===r.status?"Continue Editing":"Edit Listing"]}),(0,yn.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-600 my-1"}),(0,yn.jsxs)("button",{onClick:e=>{e.stopPropagation(),n(r.id),i(!1)},className:"w-full text-left px-4 py-3 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center transition-colors duration-200",children:[(0,yn.jsx)(ei,{className:"w-4 h-4 mr-3"}),"Delete Listing"]})]})]})]}),(0,yn.jsxs)("div",{className:"listing-content",children:[(0,yn.jsx)("h3",{className:"listing-title text-gray-900 dark:text-white",children:r.title}),(0,yn.jsxs)("p",{className:"listing-price",children:["\u20ac",r.price.toFixed(2)]}),(0,yn.jsx)("p",{className:"listing-description text-gray-600 dark:text-gray-300",children:r.description}),(0,yn.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,yn.jsx)("span",{className:"inline-block bg-blue-100/80 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 text-xs px-3 py-1 rounded-full font-medium backdrop-blur-md",children:r.category}),(0,yn.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(r.created_at).toLocaleDateString()})]})]})]})}const nl=function(){const{user:e}=Cn(),{showToast:t}=zn(),[r]=De(),n=r.get("filter"),[s,i]=(0,a.useState)([]),[o,l]=(0,a.useState)(!0),[c,d]=(0,a.useState)(n||"all"),u=re();(0,a.useEffect)(()=>{const e=new URLSearchParams(window.location.search);"all"!==c?e.set("filter",c):e.delete("filter");const t="".concat(window.location.pathname).concat(e.toString()?"?"+e.toString():"");window.history.replaceState({},"",t)},[c]),(0,a.useEffect)(()=>{const e=r.get("filter");e&&e!==c&&d(e)},[r]),(0,a.useEffect)(()=>{null!==e&&void 0!==e&&e.id&&h()},[null===e||void 0===e?void 0:e.id]);const h=async()=>{try{l(!0);const t=await Vn.getMyListings(e.id);i(t)}catch(r){t("Failed to load your listings","error"),console.error("Failed to fetch listings:",r)}finally{l(!1)}},m=async e=>{if(window.confirm("Are you sure you want to delete this listing?"))try{await Vn.deleteListing(e),i(s.filter(t=>t.id!==e)),t("Listing deleted successfully","success")}catch(r){t("Failed to delete listing","error")}},f=e=>{d(e)},p=()=>{u("/create-listing")},g=(()=>{switch(c){case"active":return s.filter(e=>"active"===e.status);case"drafts":return s.filter(e=>"draft"===e.status||e.is_draft);case"closed":return s.filter(e=>"sold"===e.status||"closed"===e.status);default:return s}})();return o?(0,yn.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,yn.jsx)("div",{className:"spinner"})}):(0,yn.jsxs)("div",{className:"fade-in",children:[(0,yn.jsx)("div",{className:"mb-8",children:(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"My Listings"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Manage your marketplace listings"})]}),(0,yn.jsxs)("button",{onClick:p,className:"cataloro-button-primary flex items-center",children:[(0,yn.jsx)(_s,{className:"w-5 h-5 mr-2"}),"Create New Listing"]})]})}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-4",children:[(0,yn.jsx)("button",{onClick:()=>f("all"),className:"cataloro-card-glass text-left transition-all duration-200 hover:scale-105 ".concat("all"===c?"ring-2 ring-blue-500 bg-blue-50/20 dark:bg-blue-900/20":""),children:(0,yn.jsxs)("div",{className:"p-6 text-center",children:[(0,yn.jsx)("div",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:s.length}),(0,yn.jsx)("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wide",children:"Total Listings"})]})}),(0,yn.jsx)("button",{onClick:()=>f("active"),className:"cataloro-card-glass text-left transition-all duration-200 hover:scale-105 ".concat("active"===c?"ring-2 ring-green-500 bg-green-50/20 dark:bg-green-900/20":""),children:(0,yn.jsxs)("div",{className:"p-6 text-center",children:[(0,yn.jsx)("div",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:s.filter(e=>"active"===e.status).length}),(0,yn.jsx)("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wide",children:"Active"})]})}),(0,yn.jsx)("button",{onClick:()=>f("closed"),className:"cataloro-card-glass text-left transition-all duration-200 hover:scale-105 ".concat("closed"===c?"ring-2 ring-red-500 bg-red-50/20 dark:bg-red-900/20":""),children:(0,yn.jsxs)("div",{className:"p-6 text-center",children:[(0,yn.jsx)("div",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-red-600 to-pink-600 bg-clip-text text-transparent",children:s.filter(e=>"sold"===e.status||"closed"===e.status).length}),(0,yn.jsx)("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wide",children:"Closed"}),(0,yn.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Sold & completed"})]})}),(0,yn.jsx)("button",{onClick:()=>f("drafts"),className:"cataloro-card-glass text-left transition-all duration-200 hover:scale-105 ".concat("drafts"===c?"ring-2 ring-orange-500 bg-orange-50/20 dark:bg-orange-900/20":""),children:(0,yn.jsxs)("div",{className:"p-6 text-center",children:[(0,yn.jsx)("div",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-orange-600 to-yellow-600 bg-clip-text text-transparent",children:s.filter(e=>"draft"===e.status||e.is_draft).length}),(0,yn.jsx)("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wide",children:"Drafts"}),(0,yn.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Finish & publish later"})]})})]}),"all"!==c&&(0,yn.jsxs)("div",{className:"mb-4 flex items-center justify-between bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[(0,yn.jsxs)("span",{className:"text-blue-800 dark:text-blue-300 font-medium",children:["Showing ",c," listings (",g.length," items)"]}),(0,yn.jsx)("button",{onClick:()=>d("all"),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm font-medium",children:"Show All"})]}),0===g.length?(0,yn.jsx)("div",{className:"text-center py-12",children:(0,yn.jsxs)("div",{className:"cataloro-card-glass p-12",children:[(0,yn.jsx)("div",{className:"w-24 h-24 bg-gradient-to-r from-blue-600/20 to-purple-600/20 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,yn.jsx)(_s,{className:"w-12 h-12 text-gray-600 dark:text-gray-300"})}),(0,yn.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-3",children:"No listings yet"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-8 max-w-md mx-auto",children:"Create your first listing to start selling on our modern marketplace"}),(0,yn.jsx)("button",{onClick:p,className:"cataloro-button-primary",children:"Create Your First Listing"})]})}):(0,yn.jsx)("div",{className:"listings-grid",children:g.map(e=>(0,yn.jsx)(rl,{listing:e,onDelete:m},e.id))})]})},al=ks("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const sl=function(){var e;const t=re(),r=ro(),n="Admin"===(null===r||void 0===r?void 0:r.userRole)||"Admin-Manager"===(null===r||void 0===r?void 0:r.userRole)||(null===r||void 0===r||null===(e=r.ui)||void 0===e?void 0:e.showAdminPanelLink)||!1,[s,i]=(0,a.useState)(!1),[o,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)([]),[u,h]=(0,a.useState)([]),[m,f]=(0,a.useState)({title:"",description:"",price:"",category:"General",condition:"New",street:"",post_code:"",city:"",country:"",shipping:"pickup",shipping_cost:"",tags:[],features:[],has_time_limit:!1,time_limit_hours:24}),[p,g]=(0,a.useState)(!0),[x,y]=(0,a.useState)({street:"",post_code:"",city:"",country:""}),[b,v]=(0,a.useState)([]),[w,j]=(0,a.useState)([]),[k,N]=(0,a.useState)([]),[_,S]=(0,a.useState)([]),[E,A]=(0,a.useState)(!1),[C,O]=(0,a.useState)(null),[T,P]=(0,a.useState)(!1),[L,M]=(0,a.useState)([]),[R,D]=(0,a.useState)(!1),[I,F]=(0,a.useState)(!1),[B,U]=(0,a.useState)(""),[q,z]=(0,a.useState)("");(0,a.useEffect)(()=>{H(),V()},[]),(0,a.useEffect)(()=>{var e;console.log("CreateListingPage - Debug Info:"),console.log("  permissions:",r),console.log("  permissions.ui:",null===r||void 0===r?void 0:r.ui),console.log("  permissions.ui.showAdminPanelLink:",null===r||void 0===r||null===(e=r.ui)||void 0===e?void 0:e.showAdminPanelLink),console.log("  isAdminOrManager:",n),console.log("  selectedCatalyst:",C),console.log("  unifiedCalculations length:",k.length)},[r,n,C,k]);const V=()=>{try{const e=localStorage.getItem("cataloro_user");if(e){const t=JSON.parse(e),r={street:t.street||"",post_code:t.post_code||"",city:t.city||"",country:t.country||""};y(r),p&&(r.street||r.city)&&f(e=>(0,Ie.A)((0,Ie.A)({},e),{},{street:r.street,post_code:r.post_code,city:r.city,country:r.country}))}}catch(e){console.error("Failed to load profile address:",e)}},H=async()=>{try{P(!0);const e=localStorage.getItem("cataloro_token"),t=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/admin/catalyst/unified-calculations"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok){const e=await t.json();N(e),console.log("Loaded unified calculations:",e.length,"entries"),console.log("Sample unified calculation:",e[0])}else console.error("Failed to fetch unified calculations - Status:",t.status)}catch(e){console.error("Failed to fetch unified calculations:",e)}finally{P(!1)}},W=e=>{const{name:t,value:r}=e.target;f(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:r}))},K=e=>{const t=(e=>{const t=k.find(t=>t.cat_id===e);return console.log("Looking for price for catalyst:",e,"Found calculation:",t),(null===t||void 0===t?void 0:t.total_price)||null})(e);if(!t)return null;const r=.9*t,n=1.1*t;return{basePrice:parseFloat(t),minPrice:parseFloat(r.toFixed(2)),maxPrice:parseFloat(n.toFixed(2))}};return(0,yn.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:(0,yn.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,yn.jsxs)("div",{className:"mb-8",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,yn.jsx)(Le,{to:"/my-listings",className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:(0,yn.jsx)(Ho,{className:"w-5 h-5"})}),(0,yn.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Create New Listing"})]}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Fill in the details below to create your marketplace listing"})]}),(0,yn.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e=["title","description","price"];for(let t of e)if(!m[t].trim())return alert("Please fill in the ".concat(t.replace("_"," ")," field")),!1;return parseFloat(m.price)<=0?(alert("Please enter a valid price"),!1):0!==c.length||(alert("Please add at least one image"),!1)})()){i(!0);try{const e=localStorage.getItem("cataloro_user"),r=e?JSON.parse(e):null;if(!r)return alert("Please log in to create a listing"),void t("/login");const n=(0,Ie.A)((0,Ie.A)({},m),{},{price:parseFloat(m.price),shipping_cost:m.shipping_cost?parseFloat(m.shipping_cost):0,seller_id:r.id,seller:{name:r.name||r.full_name||r.email,username:r.username||r.name||r.email,email:r.email,verified:r.verified||!1,is_business:r.is_business||!1,company_name:r.company_name||null,location:[m.street,m.city,m.country].filter(Boolean).join(", ")||"Not specified"},address:{street:m.street,post_code:m.post_code,city:m.city,country:m.country,use_profile_address:p},images:u,created_at:(new Date).toISOString(),has_time_limit:m.has_time_limit,time_limit_hours:m.has_time_limit?m.time_limit_hours:null},C&&{catalyst_id:C.cat_id,catalyst_name:C.name,is_catalyst_listing:!0,calculated_price:C.total_price,ceramic_weight:C.weight,pt_g:C.pt_g,pd_g:C.pd_g,rh_g:C.rh_g,catalyst_specs:{weight:C.weight,total_price:C.total_price,pt_g:C.pt_g,pd_g:C.pd_g,rh_g:C.rh_g,is_override:C.is_override}});await Vn.createListing(n),alert("Listing created successfully!"),t("/my-listings")}catch(r){console.error("Failed to create listing:",r),alert("Failed to create listing. Please try again.")}finally{i(!1)}}},className:"space-y-8",children:[(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,yn.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,yn.jsx)(Oi,{className:"w-6 h-6 mr-2"}),"Product Images"]}),(0,yn.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[u.map((e,t)=>(0,yn.jsxs)("div",{className:"relative group",children:[(0,yn.jsx)("img",{src:e,alt:"Preview ".concat(t+1),className:"w-full h-32 object-cover rounded-lg border-2 border-gray-200 dark:border-gray-600"}),(0,yn.jsx)("button",{type:"button",onClick:()=>(e=>{d(t=>t.filter((t,r)=>r!==e)),h(t=>t.filter((t,r)=>r!==e))})(t),className:"absolute top-2 right-2 p-1 bg-red-500 hover:bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,yn.jsx)(Is,{className:"w-4 h-4"})})]},t)),(0,yn.jsxs)("label",{className:"w-full h-32 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:border-blue-500 dark:hover:border-blue-400 transition-colors",children:[(0,yn.jsx)(Zs,{className:"w-8 h-8 text-gray-400 mb-2"}),(0,yn.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400 text-center",children:"Add Images"}),(0,yn.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{Array.from(e.target.files).forEach(e=>{if(!e.type.startsWith("image/"))return void alert("Please select only image files");if(e.size>5242880)return void alert("File size must be less than 5MB");d(t=>[...t,e]);const t=new FileReader;t.onload=e=>{h(t=>[...t,e.target.result])},t.readAsDataURL(e)})},className:"hidden"})]})]}),(0,yn.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Upload up to 8 images. First image will be the main photo. Max 5MB per image."})]}),(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,yn.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,yn.jsx)(Ws,{className:"w-6 h-6 mr-2"}),"Basic Information"]}),(0,yn.jsxs)("div",{className:"space-y-4",children:[(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Title *",(0,yn.jsxs)("span",{className:"text-blue-600 dark:text-blue-400 text-xs ml-2 flex items-center",children:[(0,yn.jsx)(vo,{className:"w-3 h-3 mr-1"}),"(Type to search Cat Database - ",k.length," catalysts available)"]})]}),(0,yn.jsx)("input",{type:"text",name:"title",value:m.title,onChange:e=>{const t=e.target.value;if(f(e=>(0,Ie.A)((0,Ie.A)({},e),{},{title:t})),t.length>0){const e=k.filter(e=>{var r,n,a;const s=t.toLowerCase();return(null===(r=e.name)||void 0===r?void 0:r.toLowerCase().includes(s))||(null===(n=e.cat_id)||void 0===n?void 0:n.toLowerCase().includes(s))||(null===(a=e.add_info)||void 0===a?void 0:a.toLowerCase().includes(s))}).slice(0,8);S(e),A(e.length>0)}else S([]),A(!1),O(null)},onFocus:()=>m.title&&A(_.length>0),placeholder:"Enter item title or search catalyst name/ID/additional info...",className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",required:!0}),E&&(0,yn.jsxs)("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-xl shadow-2xl max-h-80 overflow-y-auto",children:[(0,yn.jsx)("div",{className:"p-3 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border-b border-gray-200 dark:border-gray-600",children:(0,yn.jsxs)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center",children:[(0,yn.jsx)(vo,{className:"w-4 h-4 mr-2 text-blue-500"}),"Cat Database Matches (",_.length,")",(0,yn.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"Click to auto-fill"})]})}),_.map(e=>{const t=K(e.cat_id);return(0,yn.jsx)("div",{onClick:()=>(e=>{O(e),console.log("Selected catalyst:",e);let t="Catalyst: ".concat(e.name||"Professional Grade Catalyst","\n\nSpecifications:\n\u2022 Weight: ").concat(e.weight||"N/A","g\n\nProfessional grade catalyst suitable for automotive and industrial applications.");e.add_info&&e.add_info.trim()&&(t+="\n\nAdditional Information:\n".concat(e.add_info)),console.log("Final description:",t),f(r=>(0,Ie.A)((0,Ie.A)({},r),{},{title:e.name||e.cat_id,category:"Catalysts",description:t})),A(!1)})(e),className:"p-4 hover:bg-blue-50 dark:hover:bg-blue-900/20 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0 transition-all duration-200 group",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{className:"flex-1",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,yn.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:e.name}),(0,yn.jsx)(mi,{className:"w-4 h-4 text-yellow-500",title:"Auto-fill enabled"})]}),(0,yn.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:(0,yn.jsxs)("div",{className:"flex flex-col",children:[(0,yn.jsx)("span",{className:"text-gray-500",children:"Weight"}),(0,yn.jsxs)("span",{className:"font-medium",children:[e.ceramic_weight,"g"]})]})})]}),t&&(0,yn.jsxs)("div",{className:"ml-4 text-right",children:[(0,yn.jsxs)("div",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:["\u20ac",t.minPrice.toFixed(2)," - \u20ac",t.maxPrice.toFixed(2)]}),(0,yn.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center",children:[(0,yn.jsx)(vo,{className:"w-3 h-3 mr-1"}),"Market Range"]})]})]})},e.cat_id)}),_.length>0&&(0,yn.jsx)("div",{onClick:()=>{O(null),A(!1),f(e=>(0,Ie.A)((0,Ie.A)({},e),{},{description:"",price:"",category:"General"}))},className:"p-4 hover:bg-orange-50 dark:hover:bg-orange-900/20 cursor-pointer border-t border-gray-200 dark:border-gray-600 transition-all duration-200 group",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{className:"flex-1",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,yn.jsx)("span",{className:"font-semibold text-orange-600 dark:text-orange-400 group-hover:text-orange-700 dark:group-hover:text-orange-300 transition-colors",children:"\ud83c\udd93 Catalyst not in Database"}),(0,yn.jsx)(_s,{className:"w-4 h-4 text-orange-500",title:"Create free listing"})]}),(0,yn.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Create a free listing with custom price and description"})]}),(0,yn.jsx)("div",{className:"ml-4 text-right",children:(0,yn.jsx)("div",{className:"text-sm font-bold text-orange-600 dark:text-orange-400",children:"Custom Input"})})]})}),0===_.length&&m.title.length>2&&(0,yn.jsxs)("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:[(0,yn.jsxs)("p",{className:"mb-3",children:['No catalysts found matching "',m.title,'"']}),(0,yn.jsxs)("button",{type:"button",onClick:()=>{O(null),A(!1),f(e=>(0,Ie.A)((0,Ie.A)({},e),{},{category:"General"}))},className:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium transition-colors flex items-center space-x-2 mx-auto",children:[(0,yn.jsx)(_s,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Create Free Listing"})]})]})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Description *",C&&(0,yn.jsxs)("span",{className:"text-purple-600 dark:text-purple-400 text-xs ml-2 flex items-center",children:[(0,yn.jsx)(mi,{className:"w-3 h-3 mr-1"}),"Auto-generated from catalyst specifications"]})]}),(0,yn.jsx)("textarea",{name:"description",value:m.description,onChange:W,placeholder:"Provide a detailed description of your item...",rows:C?8:4,className:"w-full px-4 py-3 border-2 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 transition-all duration-200 ".concat(C?"border-purple-300 dark:border-purple-600 focus:border-purple-500":"border-gray-300 dark:border-gray-600 focus:border-blue-500"),required:!0}),C&&(0,yn.jsxs)("p",{className:"text-xs text-purple-600 dark:text-purple-400 mt-2 flex items-center",children:[(0,yn.jsx)(vo,{className:"w-3 h-3 mr-1"}),"Description includes catalyst specifications and current market information"]})]}),(0,yn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Starting Price * (\u20ac)",C&&(0,yn.jsxs)("span",{className:"text-green-600 dark:text-green-400 text-xs ml-2 flex items-center",children:[(0,yn.jsx)(mi,{className:"w-3 h-3 mr-1"}),"Auto-calculated from catalyst data"]})]}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400 text-lg",children:"\u20ac"}),(0,yn.jsx)("input",{type:"number",name:"price",value:m.price,onChange:W,placeholder:"0.00",min:"0",step:"0.01",className:"w-full pl-10 pr-4 py-3 border-2 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 transition-all duration-200 ".concat(C?"border-green-300 dark:border-green-600 focus:border-green-500":"border-gray-300 dark:border-gray-600 focus:border-blue-500"),required:!0}),C&&(0,yn.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,yn.jsx)("span",{className:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 px-2 py-1 rounded text-xs font-medium",children:"Auto-filled"})})]})]})}),C&&(0,yn.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border-2 border-blue-200 dark:border-blue-800 rounded-xl p-6 mt-6",children:[(0,yn.jsxs)("h4",{className:"font-bold text-blue-900 dark:text-blue-100 mb-4 flex items-center text-lg",children:[(0,yn.jsx)(vo,{className:"w-5 h-5 mr-2"}),"Selected Catalyst: ",C.name,(0,yn.jsx)("span",{className:"ml-3 bg-green-500 text-white px-3 py-1 rounded-full text-xs font-medium",children:"Auto-filled"})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4",children:[(0,yn.jsx)("span",{className:"text-gray-600 dark:text-gray-400 text-sm block mb-1",children:"Catalyst Name"}),(0,yn.jsx)("p",{className:"font-bold text-gray-900 dark:text-white text-lg",children:C.name})]}),(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4",children:[(0,yn.jsx)("span",{className:"text-gray-600 dark:text-gray-400 text-sm block mb-1",children:"Ceramic Weight"}),(0,yn.jsxs)("p",{className:"font-bold text-gray-900 dark:text-white text-lg",children:[C.weight,"g"]})]}),(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4",children:[(0,yn.jsx)("span",{className:"text-gray-600 dark:text-gray-400 text-sm block mb-1",children:"Market Range"}),(0,yn.jsx)("p",{className:"font-bold text-green-600 dark:text-green-400 text-lg",children:K(C.cat_id)?(0,yn.jsxs)(yn.Fragment,{children:["\u20ac",K(C.cat_id).minPrice.toFixed(2)," - \u20ac",K(C.cat_id).maxPrice.toFixed(2)]}):"N/A"})]})]}),(0,yn.jsx)("div",{className:"mt-4 p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:(0,yn.jsxs)("p",{className:"text-blue-800 dark:text-blue-200 text-sm",children:[(0,yn.jsx)("strong",{children:"Auto-filled fields:"})," Title, Category, Price, and Description have been automatically populated based on this catalyst's data and current market calculations."]})})]}),C&&(0,yn.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl p-6 border border-green-200 dark:border-green-800",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,yn.jsx)(zs,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),(0,yn.jsx)("h3",{className:"text-lg font-semibold text-green-900 dark:text-green-100",children:"Selected Catalyst Content"}),(0,yn.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Preview"})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,yn.jsxs)("div",{className:"text-center p-4 bg-white dark:bg-gray-800 rounded-lg border border-green-100 dark:border-green-800",children:[(0,yn.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 uppercase font-medium mb-1",children:"Weight"}),(0,yn.jsxs)("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[C.weight||0,"g"]})]}),(0,yn.jsxs)("div",{className:"text-center p-4 bg-white dark:bg-gray-800 rounded-lg border border-green-100 dark:border-green-800",children:[(0,yn.jsx)("div",{className:"text-xs text-blue-600 dark:text-blue-400 uppercase font-medium mb-1",children:"Pt g"}),(0,yn.jsx)("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:(C.pt_g||0).toFixed(4)})]}),(0,yn.jsxs)("div",{className:"text-center p-4 bg-white dark:bg-gray-800 rounded-lg border border-green-100 dark:border-green-800",children:[(0,yn.jsx)("div",{className:"text-xs text-green-600 dark:text-green-400 uppercase font-medium mb-1",children:"Pd g"}),(0,yn.jsx)("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:(C.pd_g||0).toFixed(4)})]}),(0,yn.jsxs)("div",{className:"text-center p-4 bg-white dark:bg-gray-800 rounded-lg border border-green-100 dark:border-green-800",children:[(0,yn.jsx)("div",{className:"text-xs text-purple-600 dark:text-purple-400 uppercase font-medium mb-1",children:"Rh g"}),(0,yn.jsx)("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:(C.rh_g||0).toFixed(4)})]})]}),(0,yn.jsxs)("div",{className:"mt-4 text-xs text-green-600 dark:text-green-400 flex items-center",children:[(0,yn.jsx)(vo,{className:"w-4 h-4 mr-1"}),"Content values from unified catalyst calculations - will be saved with your listing"]})]}),(0,yn.jsxs)("div",{className:"space-y-4",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("h4",{className:"text-md font-semibold text-gray-900 dark:text-white flex items-center",children:[(0,yn.jsx)(oo,{className:"w-4 h-4 mr-2"}),"Address Information"]}),(0,yn.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,yn.jsx)("input",{type:"checkbox",checked:p,onChange:e=>{return t=e.target.checked,g(t),void f(t?e=>(0,Ie.A)((0,Ie.A)({},e),{},{street:x.street,post_code:x.post_code,city:x.city,country:x.country}):e=>(0,Ie.A)((0,Ie.A)({},e),{},{street:"",post_code:"",city:"",country:""}));var t},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,yn.jsxs)("span",{className:"text-sm text-gray-700 dark:text-gray-300 flex items-center",children:[(0,yn.jsx)(Ts,{className:"w-3 h-3 mr-1"}),"Use profile address"]})]})]}),p?(0,yn.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,yn.jsxs)("div",{className:"flex items-center mb-3",children:[(0,yn.jsx)("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg mr-3",children:(0,yn.jsx)(Ts,{className:"w-4 h-4 text-blue-600 dark:text-blue-300"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h5",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Using Profile Address"}),(0,yn.jsx)("p",{className:"text-sm text-blue-600 dark:text-blue-300",children:"Address from your profile settings"})]})]}),(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-blue-100 dark:border-blue-700",children:x.street||x.city?(0,yn.jsxs)("div",{className:"space-y-1 text-sm text-gray-700 dark:text-gray-300",children:[x.street&&(0,yn.jsx)("div",{children:x.street}),(0,yn.jsxs)("div",{className:"flex space-x-2",children:[x.post_code&&(0,yn.jsx)("span",{children:x.post_code}),x.city&&(0,yn.jsx)("span",{children:x.city})]}),x.country&&(0,yn.jsx)("div",{children:x.country})]}):(0,yn.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"No address in profile. Please uncheck to enter address manually."})})]}):(0,yn.jsxs)("div",{className:"space-y-4 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[(0,yn.jsxs)("div",{className:"flex items-center mb-3",children:[(0,yn.jsx)("div",{className:"p-2 bg-green-100 dark:bg-green-800 rounded-lg mr-3",children:(0,yn.jsx)(oo,{className:"w-4 h-4 text-green-600 dark:text-green-300"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h5",{className:"font-medium text-green-900 dark:text-green-100",children:"Custom Address"}),(0,yn.jsx)("p",{className:"text-sm text-green-600 dark:text-green-300",children:"Enter address for this listing"})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Street Address"}),(0,yn.jsx)("input",{type:"text",name:"street",value:m.street,onChange:W,placeholder:"Enter street address",className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Post Code"}),(0,yn.jsx)("input",{type:"text",name:"post_code",value:m.post_code,onChange:W,placeholder:"Postal/ZIP code",className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"City"}),(0,yn.jsx)("input",{type:"text",name:"city",value:m.city,onChange:W,placeholder:"Enter city",className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Country"}),(0,yn.jsx)("input",{type:"text",name:"country",value:m.country,onChange:W,placeholder:"Enter country",className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]})]})]})]})]}),(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,yn.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,yn.jsx)(Js,{className:"w-6 h-6 mr-2"}),"Time Limit (Optional)"]}),(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("input",{type:"checkbox",id:"has_time_limit",name:"has_time_limit",checked:m.has_time_limit,onChange:e=>f((0,Ie.A)((0,Ie.A)({},m),{},{has_time_limit:e.target.checked})),className:"w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),(0,yn.jsx)("label",{htmlFor:"has_time_limit",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Set a time limit for this listing"})]}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add urgency to your listing! When time runs out, the highest bidder automatically wins."}),m.has_time_limit&&(0,yn.jsxs)("div",{className:"space-y-6 bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Duration"}),(0,yn.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{value:1,label:"1 Hour",desc:"1 hour"},{value:24,label:"24 Hours",desc:"1 day"},{value:48,label:"48 Hours",desc:"2 days"},{value:168,label:"1 Week",desc:"7 days"},{value:720,label:"1 Month",desc:"30 days"}].map(e=>(0,yn.jsxs)("label",{className:"relative",children:[(0,yn.jsx)("input",{type:"radio",name:"time_limit_hours",value:e.value,checked:m.time_limit_hours===e.value,onChange:e=>f((0,Ie.A)((0,Ie.A)({},m),{},{time_limit_hours:parseInt(e.target.value)})),className:"sr-only"}),(0,yn.jsx)("div",{className:"p-3 rounded-lg border-2 cursor-pointer transition-all ".concat(m.time_limit_hours===e.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"),children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"font-semibold text-sm",children:e.label}),(0,yn.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e.desc})]})})]},e.value))})]}),(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[(0,yn.jsx)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"}),(0,yn.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Your listing will expire in ",(0,yn.jsx)("span",{className:"font-mono text-blue-600 dark:text-blue-400",children:1===m.time_limit_hours?"1 hour":24===m.time_limit_hours?"1 day":48===m.time_limit_hours?"2 days":168===m.time_limit_hours?"1 week":"1 month"})," after publication.",(0,yn.jsx)("br",{}),"The countdown timer will appear as a ",(0,yn.jsx)("span",{className:"font-medium",children:"separate badge below the market range"})," of your listing image."]})]}),(0,yn.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:[(0,yn.jsx)(Yi,{className:"w-5 h-5 text-amber-600 dark:text-amber-400 mt-0.5"}),(0,yn.jsxs)("div",{className:"text-sm text-amber-700 dark:text-amber-300",children:[(0,yn.jsx)("strong",{children:"Important:"})," When your listing expires, the highest bidder at that moment will automatically win, regardless of how many bids were placed. You can extend the time limit later if needed."]})]})]})]})]}),(0,yn.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl p-6 text-white",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Ready to publish your listing?"}),(0,yn.jsx)("p",{className:"text-blue-100",children:"Review all information above and click create to publish your listing to the marketplace."})]}),(0,yn.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-4",children:[(0,yn.jsx)(Le,{to:"/browse",className:"w-full sm:w-auto px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg font-medium transition-colors text-center",children:"Cancel"}),(0,yn.jsx)("button",{type:"button",onClick:async()=>{l(!0);try{const e=localStorage.getItem("cataloro_user"),r=e?JSON.parse(e):null;if(!r)return alert("Please log in to save draft"),void t("/login");const n=(0,Ie.A)((0,Ie.A)({},m),{},{price:m.price?parseFloat(m.price):0,shipping_cost:m.shipping_cost?parseFloat(m.shipping_cost):0,seller_id:r.id,seller:{name:r.name||r.full_name||r.email,username:r.username||r.name||r.email,email:r.email,verified:r.verified||!1,is_business:r.is_business||!1,company_name:r.company_name||null,location:[m.street,m.city,m.country].filter(Boolean).join(", ")||"Not specified"},address:{street:m.street,post_code:m.post_code,city:m.city,country:m.country,use_profile_address:p},images:u,created_at:(new Date).toISOString(),status:"draft",is_draft:!0},C&&{catalyst_id:C.cat_id,catalyst_name:C.name,is_catalyst_listing:!0,calculated_price:C.total_price,ceramic_weight:C.weight,pt_g:C.pt_g,pd_g:C.pd_g,rh_g:C.rh_g,catalyst_specs:{weight:C.weight,total_price:C.total_price,pt_g:C.pt_g,pd_g:C.pd_g,rh_g:C.rh_g,is_override:C.is_override}});await Vn.createListing(n),alert("Draft saved successfully! You can finish it later from My Listings."),t("/my-listings")}catch(e){console.error("Failed to save draft:",e),alert("Failed to save draft. Please try again.")}finally{l(!1)}},disabled:o||s,className:"w-full sm:w-auto px-6 py-3 bg-yellow-500 hover:bg-yellow-600 disabled:bg-yellow-400 text-white rounded-lg font-medium transition-colors flex items-center justify-center space-x-2 disabled:cursor-not-allowed",children:o?(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,yn.jsx)("span",{children:"Saving..."})]}):(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)(al,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Save as Draft"})]})}),(0,yn.jsx)("button",{type:"submit",disabled:s||o,className:"w-full sm:w-auto px-8 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg font-semibold transition-colors flex items-center justify-center space-x-2 disabled:cursor-not-allowed",children:s?(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,yn.jsx)("span",{children:"Creating..."})]}):(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)(Qi,{className:"w-5 h-5"}),(0,yn.jsx)("span",{children:"Create Listing"})]})})]})]})})]})]})})},il=ks("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);const ol=function(){const e=re(),{id:t}=ae(),[r,n]=(0,a.useState)(!1),[s,i]=(0,a.useState)(!0),[o,l]=(0,a.useState)(null),[c,d]=(0,a.useState)([]),[u,h]=(0,a.useState)([]),[m,f]=(0,a.useState)({title:"",description:"",price:"",category:"General",condition:"New",street:"",post_code:"",city:"",country:"",shipping:"pickup",shipping_cost:"",tags:[],features:[]}),[p,g]=(0,a.useState)(!0),[x,y]=(0,a.useState)({street:"",post_code:"",city:"",country:""}),[b,v]=(0,a.useState)(""),[w,j]=(0,a.useState)("");(0,a.useEffect)(()=>{k(),N()},[t]);const k=async()=>{try{var e,r,n,a,s,o,c;i(!0),l(null);const d=localStorage.getItem("cataloro_user"),u=d?JSON.parse(d):null;if(!u)return void l("Please log in to edit listings");const m=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/listings/").concat(t));if(!m.ok)throw new Error("Failed to fetch listing data");const p=await m.json();if(p.seller_id!==u.id)return void l("You can only edit your own listings");f({title:p.title||"",description:p.description||"",price:(null===(e=p.price)||void 0===e?void 0:e.toString())||"",category:p.category||"General",condition:p.condition||"New",street:(null===(r=p.address)||void 0===r?void 0:r.street)||p.street||"",post_code:(null===(n=p.address)||void 0===n?void 0:n.post_code)||p.post_code||"",city:(null===(a=p.address)||void 0===a?void 0:a.city)||p.city||"",country:(null===(s=p.address)||void 0===s?void 0:s.country)||p.country||"",shipping:p.shipping||"pickup",shipping_cost:(null===(o=p.shipping_cost)||void 0===o?void 0:o.toString())||"",tags:p.tags||[],features:p.features||[]}),p.images&&p.images.length>0&&h(p.images),g((null===(c=p.address)||void 0===c?void 0:c.use_profile_address)||!1)}catch(Cc){console.error("Failed to load listing:",Cc),l("Failed to load listing data")}finally{i(!1)}},N=()=>{try{const e=localStorage.getItem("cataloro_user");if(e){const t=JSON.parse(e),r={street:t.street||"",post_code:t.post_code||"",city:t.city||"",country:t.country||""};y(r)}}catch(o){console.error("Failed to load profile address:",o)}},_=e=>{const{name:t,value:r}=e.target;f(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:r}))},S=()=>{b.trim()&&!m.tags.includes(b.trim())&&(f(e=>(0,Ie.A)((0,Ie.A)({},e),{},{tags:[...e.tags,b.trim()]})),v(""))},E=()=>{w.trim()&&!m.features.includes(w.trim())&&(f(e=>(0,Ie.A)((0,Ie.A)({},e),{},{features:[...e.features,w.trim()]})),j(""))};return s?(0,yn.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:(0,yn.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,yn.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)(il,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-4"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading listing data..."})]})})})}):o?(0,yn.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:(0,yn.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,yn.jsxs)("div",{className:"text-center py-16",children:[(0,yn.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"\u26a0\ufe0f"}),(0,yn.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Error Loading Listing"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:o}),(0,yn.jsxs)(Le,{to:"/my-listings",className:"inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[(0,yn.jsx)(Ho,{className:"w-5 h-5 mr-2"}),"Back to My Listings"]})]})})}):(0,yn.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:(0,yn.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,yn.jsxs)("div",{className:"mb-8",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,yn.jsx)(Le,{to:"/my-listings",className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:(0,yn.jsx)(Ho,{className:"w-5 h-5"})}),(0,yn.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Edit Listing"})]}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Update your listing details below"})]}),(0,yn.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),(()=>{const e=["title","description","price"];for(let t of e)if(!m[t].trim())return alert("Please fill in the ".concat(t.replace("_"," ")," field")),!1;return parseFloat(m.price)<=0?(alert("Please enter a valid price"),!1):0!==u.length||(alert("Please add at least one image"),!1)})()){n(!0);try{const r=localStorage.getItem("cataloro_user"),n=r?JSON.parse(r):null;if(!n)return alert("Please log in to update listing"),void e("/login");const a=(0,Ie.A)((0,Ie.A)({},m),{},{price:parseFloat(m.price),shipping_cost:m.shipping_cost?parseFloat(m.shipping_cost):0,seller_id:n.id,seller:{name:n.name||n.full_name||n.email,username:n.username||n.name||n.email,email:n.email,verified:n.verified||!1,is_business:n.is_business||!1,company_name:n.company_name||null,location:[m.street,m.city,m.country].filter(Boolean).join(", ")||"Not specified"},address:{street:m.street,post_code:m.post_code,city:m.city,country:m.country,use_profile_address:p},images:u,updated_at:(new Date).toISOString()});if(!(await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/listings/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw new Error("Failed to update listing");alert("Listing updated successfully!"),e("/my-listings")}catch(o){console.error("Failed to update listing:",o),alert("Failed to update listing. Please try again.")}finally{n(!1)}}},className:"space-y-8",children:[(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,yn.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,yn.jsx)(Oi,{className:"w-6 h-6 mr-2"}),"Product Images"]}),(0,yn.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[u.map((e,t)=>(0,yn.jsxs)("div",{className:"relative group",children:[(0,yn.jsx)("img",{src:e,alt:"Preview ".concat(t+1),className:"w-full h-32 object-cover rounded-lg border-2 border-gray-200 dark:border-gray-600"}),(0,yn.jsx)("button",{type:"button",onClick:()=>(e=>{d(t=>t.filter((t,r)=>r!==e)),h(t=>t.filter((t,r)=>r!==e))})(t),className:"absolute top-2 right-2 p-1 bg-red-500 hover:bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,yn.jsx)(Is,{className:"w-4 h-4"})})]},t)),(0,yn.jsxs)("label",{className:"w-full h-32 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:border-blue-500 dark:hover:border-blue-400 transition-colors",children:[(0,yn.jsx)(Zs,{className:"w-8 h-8 text-gray-400 mb-2"}),(0,yn.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400 text-center",children:"Add Images"}),(0,yn.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{Array.from(e.target.files).forEach(e=>{if(!e.type.startsWith("image/"))return void alert("Please select only image files");if(e.size>5242880)return void alert("File size must be less than 5MB");d(t=>[...t,e]);const t=new FileReader;t.onload=e=>{h(t=>[...t,e.target.result])},t.readAsDataURL(e)})},className:"hidden"})]})]}),(0,yn.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Upload up to 8 images. First image will be the main photo. Max 5MB per image."})]}),(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,yn.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,yn.jsx)(Ws,{className:"w-6 h-6 mr-2"}),"Basic Information"]}),(0,yn.jsxs)("div",{className:"space-y-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title *"}),(0,yn.jsx)("input",{type:"text",name:"title",value:m.title,onChange:_,placeholder:"Enter item title",className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",required:!0})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description *"}),(0,yn.jsx)("textarea",{name:"description",value:m.description,onChange:_,placeholder:"Provide a detailed description of your item...",rows:4,className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",required:!0})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Price * (\u20ac)"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400 text-lg",children:"\u20ac"}),(0,yn.jsx)("input",{type:"number",name:"price",value:m.price,onChange:_,placeholder:"0.00",min:"0",step:"0.01",className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",required:!0})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),(0,yn.jsx)("select",{name:"category",value:m.category,onChange:_,className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",children:["Catalysts","Electronics","Fashion & Clothing","Home & Garden","Sports & Outdoors","Books & Media","Music & Instruments","Automotive","Real Estate","Jobs & Services","Collectibles & Antiques","Health & Beauty","Toys & Games"].map(e=>(0,yn.jsx)("option",{value:e,children:e},e))})]})]}),(0,yn.jsxs)("div",{className:"space-y-4",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("h4",{className:"text-md font-semibold text-gray-900 dark:text-white flex items-center",children:[(0,yn.jsx)(oo,{className:"w-4 h-4 mr-2"}),"Address Information"]}),(0,yn.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,yn.jsx)("input",{type:"checkbox",checked:p,onChange:e=>{return t=e.target.checked,g(t),void(t&&f(e=>(0,Ie.A)((0,Ie.A)({},e),{},{street:x.street,post_code:x.post_code,city:x.city,country:x.country})));var t},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,yn.jsxs)("span",{className:"text-sm text-gray-700 dark:text-gray-300 flex items-center",children:[(0,yn.jsx)(Ts,{className:"w-3 h-3 mr-1"}),"Use profile address"]})]})]}),p?(0,yn.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,yn.jsxs)("div",{className:"flex items-center mb-3",children:[(0,yn.jsx)("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg mr-3",children:(0,yn.jsx)(Ts,{className:"w-4 h-4 text-blue-600 dark:text-blue-300"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h5",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Using Profile Address"}),(0,yn.jsx)("p",{className:"text-sm text-blue-600 dark:text-blue-300",children:"Address from your profile settings"})]})]}),(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-blue-100 dark:border-blue-700",children:x.street||x.city?(0,yn.jsxs)("div",{className:"space-y-1 text-sm text-gray-700 dark:text-gray-300",children:[x.street&&(0,yn.jsx)("div",{children:x.street}),(0,yn.jsxs)("div",{className:"flex space-x-2",children:[x.post_code&&(0,yn.jsx)("span",{children:x.post_code}),x.city&&(0,yn.jsx)("span",{children:x.city})]}),x.country&&(0,yn.jsx)("div",{children:x.country})]}):(0,yn.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"No address in profile. Please uncheck to enter address manually."})})]}):(0,yn.jsxs)("div",{className:"space-y-4 border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Street Address"}),(0,yn.jsx)("input",{type:"text",name:"street",value:m.street,onChange:_,placeholder:"Enter street address",className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Post Code"}),(0,yn.jsx)("input",{type:"text",name:"post_code",value:m.post_code,onChange:_,placeholder:"Postal/ZIP code",className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"City"}),(0,yn.jsx)("input",{type:"text",name:"city",value:m.city,onChange:_,placeholder:"Enter city",className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Country"}),(0,yn.jsx)("input",{type:"text",name:"country",value:m.country,onChange:_,placeholder:"Enter country",className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]})]})]})]})]}),(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,yn.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Shipping & Delivery"}),(0,yn.jsxs)("div",{className:"space-y-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Shipping Options"}),(0,yn.jsxs)("div",{className:"space-y-2",children:[(0,yn.jsxs)("label",{className:"flex items-center",children:[(0,yn.jsx)("input",{type:"radio",name:"shipping",value:"pickup",checked:"pickup"===m.shipping,onChange:_,className:"mr-2"}),(0,yn.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Local pickup only"})]}),(0,yn.jsxs)("label",{className:"flex items-center",children:[(0,yn.jsx)("input",{type:"radio",name:"shipping",value:"shipping",checked:"shipping"===m.shipping,onChange:_,className:"mr-2"}),(0,yn.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"I can ship this item"})]}),(0,yn.jsxs)("label",{className:"flex items-center",children:[(0,yn.jsx)("input",{type:"radio",name:"shipping",value:"both",checked:"both"===m.shipping,onChange:_,className:"mr-2"}),(0,yn.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Both pickup and shipping"})]})]})]}),("shipping"===m.shipping||"both"===m.shipping)&&(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Shipping Cost (\u20ac)"}),(0,yn.jsx)("input",{type:"number",name:"shipping_cost",value:m.shipping_cost,onChange:_,placeholder:"0.00",min:"0",step:"0.01",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,yn.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,yn.jsx)(wi,{className:"w-6 h-6 mr-2"}),"Tags & Features"]}),(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tags (Optional)"}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,yn.jsx)("input",{type:"text",value:b,onChange:e=>v(e.target.value),placeholder:"Add a tag",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),S())}),(0,yn.jsx)("button",{type:"button",onClick:S,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:(0,yn.jsx)(_s,{className:"w-4 h-4"})})]}),(0,yn.jsx)("div",{className:"flex flex-wrap gap-2",children:m.tags.map((e,t)=>(0,yn.jsxs)("span",{className:"inline-flex items-center px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm",children:[e,(0,yn.jsx)("button",{type:"button",onClick:()=>(e=>{f(t=>(0,Ie.A)((0,Ie.A)({},t),{},{tags:t.tags.filter(t=>t!==e)}))})(e),className:"ml-2 text-blue-600 dark:text-blue-300 hover:text-blue-800 dark:hover:text-blue-100",children:(0,yn.jsx)(Is,{className:"w-3 h-3"})})]},t))})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Key Features (Optional)"}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,yn.jsx)("input",{type:"text",value:w,onChange:e=>j(e.target.value),placeholder:"Add a feature",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),E())}),(0,yn.jsx)("button",{type:"button",onClick:E,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:(0,yn.jsx)(_s,{className:"w-4 h-4"})})]}),(0,yn.jsx)("div",{className:"space-y-2",children:m.features.map((e,t)=>(0,yn.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[(0,yn.jsx)("span",{className:"text-green-800 dark:text-green-200",children:e}),(0,yn.jsx)("button",{type:"button",onClick:()=>(e=>{f(t=>(0,Ie.A)((0,Ie.A)({},t),{},{features:t.features.filter(t=>t!==e)}))})(e),className:"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-200",children:(0,yn.jsx)(ei,{className:"w-4 h-4"})})]},t))})]})]})]}),(0,yn.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl p-6 text-white",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Ready to update your listing?"}),(0,yn.jsx)("p",{className:"text-blue-100",children:"Review all information above and click update to save your changes."})]}),(0,yn.jsxs)("div",{className:"flex space-x-4",children:[(0,yn.jsx)(Le,{to:"/my-listings",className:"px-6 py-3 bg-white/20 hover:bg-white/30 text-white rounded-lg font-medium transition-colors",children:"Cancel"}),(0,yn.jsx)("button",{type:"submit",disabled:r,className:"px-8 py-3 bg-white/20 hover:bg-white/30 disabled:bg-white/10 text-white rounded-lg font-semibold transition-colors flex items-center space-x-2 disabled:cursor-not-allowed",children:r?(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,yn.jsx)("span",{children:"Updating..."})]}):(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)(al,{className:"w-5 h-5"}),(0,yn.jsx)("span",{children:"Update Listing"})]})})]})]})})]})]})})},ll=ks("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);const cl=function(){const{user:e}=Cn(),{showToast:t}=zn(),[r,n]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[o,l]=(0,a.useState)(null);(0,a.useEffect)(()=>{e&&c()},[e]);const c=async()=>{if(e){i(!0);try{const r=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/orders/seller/").concat(e.id));if(r.ok){const e=await r.json();n(e)}else console.error("Failed to fetch pending orders"),t("Failed to load pending orders","error")}catch(r){console.error("Error fetching pending orders:",r),t("Failed to load pending orders","error")}finally{i(!1)}}},d=e=>{const t=new Date,r=new Date(e).getTime()-t.getTime();if(r<=0)return"Expired";const n=Math.floor(r/36e5),a=Math.floor(r%36e5/6e4);if(n>24){const e=Math.floor(n/24),t=n%24;return"".concat(e,"d ").concat(t,"h remaining")}return n>0?"".concat(n,"h ").concat(a,"m remaining"):"".concat(a,"m remaining")},u=e=>{const t=new Date,r=(new Date(e).getTime()-t.getTime())/36e5;return r<=0?"text-red-600 dark:text-red-400":r<=6?"text-orange-600 dark:text-orange-400":r<=24?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400"};return s?(0,yn.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading pending sales..."})]})}):(0,yn.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Pending Sales"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Manage incoming buy requests for your listings"})]}),(0,yn.jsxs)("button",{onClick:c,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,yn.jsx)(Xi,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Refresh"})]})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-xl",children:(0,yn.jsx)(Ms,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.length}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Pending Requests"})]})]})}),(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-xl",children:(0,yn.jsx)(ll,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsxs)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["\u20ac",r.reduce((e,t)=>{var r;return e+((null===(r=t.listing)||void 0===r?void 0:r.price)||0)},0).toFixed(2)]}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Potential Revenue"})]})]})}),(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-xl",children:(0,yn.jsx)(Js,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.filter(e=>{const t=new Date(e.expires_at),r=new Date;return(t.getTime()-r.getTime())/36e5<=6}).length}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Expiring Soon"})]})]})})]}),0===r.length?(0,yn.jsxs)("div",{className:"text-center py-12",children:[(0,yn.jsx)(Ms,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,yn.jsx)("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"No pending buy requests"}),(0,yn.jsx)("p",{className:"text-gray-500 dark:text-gray-500",children:"When someone wants to buy your items, they'll appear here."})]}):(0,yn.jsx)("div",{className:"space-y-6",children:r.map(r=>{var n,a,s,i,h,m,f;return(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:(0,yn.jsxs)("div",{className:"p-6",children:[(0,yn.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,yn.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,yn.jsx)("div",{className:"w-20 h-20 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-700 flex-shrink-0",children:null!==(n=r.listing)&&void 0!==n&&n.image?(0,yn.jsx)("img",{src:r.listing.image,alt:r.listing.title,className:"w-full h-full object-cover"}):(0,yn.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,yn.jsx)(Ms,{className:"w-8 h-8 text-gray-400"})})}),(0,yn.jsxs)("div",{className:"flex-1",children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:(null===(a=r.listing)||void 0===a?void 0:a.title)||"Unknown Item"}),(0,yn.jsxs)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mb-2",children:["\u20ac",(null===(s=r.listing)||void 0===s||null===(i=s.price)||void 0===i?void 0:i.toFixed(2))||"0.00"]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)(Ts,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:(null===(h=r.buyer)||void 0===h?void 0:h.full_name)||(null===(m=r.buyer)||void 0===m?void 0:m.username)||"Unknown Buyer"})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)(Hs,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:(null===(f=r.buyer)||void 0===f?void 0:f.email)||"N/A"})]})]})]})]}),(0,yn.jsxs)("div",{className:"text-right",children:[(0,yn.jsxs)("div",{className:"text-sm font-medium ".concat(u(r.expires_at)),children:[(0,yn.jsx)(Js,{className:"w-4 h-4 inline mr-1"}),d(r.expires_at)]}),(0,yn.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[(0,yn.jsx)($s,{className:"w-3 h-3 inline mr-1"}),"Requested ",new Date(r.created_at).toLocaleDateString()]})]})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,yn.jsxs)("button",{onClick:()=>(async r=>{l(r);try{const n=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/orders/").concat(r,"/reject"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({seller_id:e.id})}),a=await n.json();n.ok?(t("Buy request rejected. The buyer has been notified.","info"),c()):t(a.detail||"Failed to reject request","error")}catch(n){console.error("Error rejecting order:",n),t("Failed to reject request. Please try again.","error")}finally{l(null)}})(r.id),disabled:o===r.id,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50",children:[(0,yn.jsx)($o,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Reject"})]}),(0,yn.jsxs)("button",{onClick:()=>(async r=>{l(r);try{const n=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/orders/").concat(r,"/approve"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({seller_id:e.id})}),a=await n.json();n.ok?(t("Buy request approved! The buyer has been notified.","success"),c()):410===n.status?(t("This request has expired","warning"),c()):t(a.detail||"Failed to approve request","error")}catch(n){console.error("Error approving order:",n),t("Failed to approve request. Please try again.","error")}finally{l(null)}})(r.id),disabled:o===r.id,className:"flex items-center space-x-2 px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:[(0,yn.jsx)(Qi,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:o===r.id?"Processing...":"Approve Sale"})]})]})]})},r.id)})})]})},dl=ks("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),ul=ks("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);const hl=function(){const{user:e}=Cn(),{showToast:t}=zn(),[r,n]=(0,a.useState)([]),[s,i]=(0,a.useState)([]),[o,l]=(0,a.useState)(!0),[c,d]=(0,a.useState)(null),[u,h]=(0,a.useState)("buyer"),[m,f]=(0,a.useState)("all"),[p,g]=(0,a.useState)("newest");(0,a.useEffect)(()=>{e&&x()},[e]);const x=async()=>{if(e){l(!0);try{const t=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/orders/buyer/").concat(e.id));if(t.ok){const e=await t.json();n(e)}const r=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/orders/seller/").concat(e.id));if(r.ok){const e=await r.json();i(e)}}catch(r){console.error("Error fetching orders:",r),t("Failed to load requests","error")}finally{l(!1)}}},y=e=>{const t=new Date,r=new Date(e).getTime()-t.getTime();if(r<=0)return"Expired";const n=Math.floor(r/36e5),a=Math.floor(r%36e5/6e4);if(n>24){const e=Math.floor(n/24),t=n%24;return"".concat(e,"d ").concat(t,"h")}return n>0?"".concat(n,"h ").concat(a,"m"):"".concat(a,"m")},b=e=>{switch(e){case"pending":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"approved":return"text-green-600 bg-green-50 border-green-200";case"rejected":return"text-red-600 bg-red-50 border-red-200";case"expired":default:return"text-gray-600 bg-gray-50 border-gray-200";case"cancelled":return"text-orange-600 bg-orange-50 border-orange-200"}},v=e=>{switch(e){case"pending":return(0,yn.jsx)(Js,{className:"w-4 h-4"});case"approved":return(0,yn.jsx)(Qi,{className:"w-4 h-4"});case"rejected":case"cancelled":return(0,yn.jsx)($o,{className:"w-4 h-4"});case"expired":return(0,yn.jsx)($s,{className:"w-4 h-4"});default:return(0,yn.jsx)(Ms,{className:"w-4 h-4"})}},w=(e,t)=>{let r=e;return"all"!==m&&(r=r.filter(e=>e.status===m)),r.sort((e,t)=>{var r,n,a,s;switch(p){case"oldest":return new Date(e.created_at)-new Date(t.created_at);case"price_high":return((null===(r=t.listing)||void 0===r?void 0:r.price)||0)-((null===(n=e.listing)||void 0===n?void 0:n.price)||0);case"price_low":return((null===(a=e.listing)||void 0===a?void 0:a.price)||0)-((null===(s=t.listing)||void 0===s?void 0:s.price)||0);default:return new Date(t.created_at)-new Date(e.created_at)}}),r},j=(()=>{const e=[...r,...s];return{total:e.length,pending:e.filter(e=>"pending"===e.status).length,approved:e.filter(e=>"approved"===e.status).length,totalValue:e.reduce((e,t)=>{var r;return e+((null===(r=t.listing)||void 0===r?void 0:r.price)||0)},0)}})(),k=w("buyer"===u?r:"seller"===u?s:[...r,...s]);return o?(0,yn.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading all requests..."})]})}):(0,yn.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,yn.jsx)(dl,{className:"w-8 h-8 mr-3 text-blue-600"}),"All Requests"]}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Manage all your buy and sell requests in one place"})]}),(0,yn.jsxs)("button",{onClick:x,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,yn.jsx)(Xi,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Refresh"})]})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-xl",children:(0,yn.jsx)(Ms,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:j.total}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Total Requests"})]})]})}),(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-xl",children:(0,yn.jsx)(Js,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:j.pending}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Pending"})]})]})}),(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-xl",children:(0,yn.jsx)(Qi,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:j.approved}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Approved"})]})]})}),(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-xl",children:(0,yn.jsx)(Es,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsxs)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["\u20ac",j.totalValue.toFixed(2)]}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Total Value"})]})]})})]}),(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:(0,yn.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[(0,yn.jsxs)("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[(0,yn.jsxs)("button",{onClick:()=>h("buyer"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("buyer"===u?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow":"text-gray-600 dark:text-gray-400"),children:["My Purchases (",r.length,")"]}),(0,yn.jsxs)("button",{onClick:()=>h("seller"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("seller"===u?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow":"text-gray-600 dark:text-gray-400"),children:["My Sales (",s.length,")"]}),(0,yn.jsxs)("button",{onClick:()=>h("all"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("all"===u?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow":"text-gray-600 dark:text-gray-400"),children:["All Requests (",j.total,")"]})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)(ji,{className:"w-4 h-4 text-gray-500"}),(0,yn.jsxs)("select",{value:m,onChange:e=>f(e.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,yn.jsx)("option",{value:"all",children:"All Status"}),(0,yn.jsx)("option",{value:"pending",children:"Pending"}),(0,yn.jsx)("option",{value:"approved",children:"Approved"}),(0,yn.jsx)("option",{value:"rejected",children:"Rejected"}),(0,yn.jsx)("option",{value:"expired",children:"Expired"}),(0,yn.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)(ul,{className:"w-4 h-4 text-gray-500"}),(0,yn.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,yn.jsx)("option",{value:"newest",children:"Newest First"}),(0,yn.jsx)("option",{value:"oldest",children:"Oldest First"}),(0,yn.jsx)("option",{value:"price_high",children:"Price: High to Low"}),(0,yn.jsx)("option",{value:"price_low",children:"Price: Low to High"})]})]})]})]})}),0===k.length?(0,yn.jsxs)("div",{className:"text-center py-12",children:[(0,yn.jsx)(Ms,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,yn.jsx)("h3",{className:"text-xl font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"No requests found"}),(0,yn.jsxs)("p",{className:"text-gray-500 dark:text-gray-500",children:["buyer"===u&&"You haven't made any purchase requests yet.","seller"===u&&"You haven't received any sale requests yet.","all"===u&&"No requests match your current filters."]})]}):(0,yn.jsx)("div",{className:"space-y-6",children:k.map(n=>{var a,s,i,o,l,u,h,m;const f=r.some(e=>e.id===n.id);return(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:(0,yn.jsxs)("div",{className:"p-6",children:[(0,yn.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,yn.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,yn.jsx)("div",{className:"w-20 h-20 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-700 flex-shrink-0",children:null!==(a=n.listing)&&void 0!==a&&a.image?(0,yn.jsx)("img",{src:n.listing.image,alt:n.listing.title,className:"w-full h-full object-cover"}):(0,yn.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,yn.jsx)(Ms,{className:"w-8 h-8 text-gray-400"})})}),(0,yn.jsxs)("div",{className:"flex-1",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:(null===(s=n.listing)||void 0===s?void 0:s.title)||"Unknown Item"}),(0,yn.jsxs)("span",{className:"px-3 py-1 rounded-full text-xs font-medium border ".concat(b(n.status)),children:[v(n.status),(0,yn.jsx)("span",{className:"ml-1 capitalize",children:n.status})]}),(0,yn.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(f?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"),children:f?"Purchase":"Sale"})]}),(0,yn.jsxs)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mb-2",children:["\u20ac",(null===(i=n.listing)||void 0===i||null===(o=i.price)||void 0===o?void 0:o.toFixed(2))||"0.00"]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)(Ts,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:f?"Seller: ".concat((null===(l=n.seller)||void 0===l?void 0:l.username)||"Unknown"):"Buyer: ".concat((null===(u=n.buyer)||void 0===u?void 0:u.username)||"Unknown")})]}),"approved"===n.status&&(null===(h=n.seller)||void 0===h?void 0:h.email)&&(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)(Hs,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:n.seller.email})]})]})]})]}),(0,yn.jsxs)("div",{className:"text-right",children:["pending"===n.status&&(0,yn.jsxs)("div",{className:"text-sm font-medium text-yellow-600 dark:text-yellow-400 mb-1",children:[(0,yn.jsx)(Js,{className:"w-4 h-4 inline mr-1"}),y(n.expires_at)," remaining"]}),(0,yn.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[(0,yn.jsx)($s,{className:"w-3 h-3 inline mr-1"}),"Created ",new Date(n.created_at).toLocaleDateString()]}),n.approved_at&&(0,yn.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Approved ",new Date(n.approved_at).toLocaleDateString()]})]})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:["pending"===n.status&&!f&&(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsxs)("button",{onClick:()=>(async r=>{d(r);try{const n=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/orders/").concat(r,"/reject"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({seller_id:e.id})});if(n.ok)t("Request rejected","info"),x();else{const e=await n.json();t(e.detail||"Failed to reject request","error")}}catch(n){console.error("Error rejecting order:",n),t("Failed to reject request","error")}finally{d(null)}})(n.id),disabled:c===n.id,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50",children:[(0,yn.jsx)($o,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Reject"})]}),(0,yn.jsxs)("button",{onClick:()=>(async r=>{d(r);try{const n=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/orders/").concat(r,"/approve"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({seller_id:e.id})});if(n.ok)t("Request approved successfully!","success"),x();else{const e=await n.json();t(e.detail||"Failed to approve request","error")}}catch(n){console.error("Error approving order:",n),t("Failed to approve request","error")}finally{d(null)}})(n.id),disabled:c===n.id,className:"flex items-center space-x-2 px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:[(0,yn.jsx)(Qi,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:c===n.id?"Processing...":"Approve Sale"})]})]}),"pending"===n.status&&f&&(0,yn.jsxs)("button",{onClick:()=>(async r=>{d(r);try{const n=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/orders/").concat(r,"/cancel"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({buyer_id:e.id})});if(n.ok)t("Request cancelled successfully","success"),x();else{const e=await n.json();t(e.detail||"Failed to cancel request","error")}}catch(n){console.error("Error cancelling order:",n),t("Failed to cancel request","error")}finally{d(null)}})(n.id),disabled:c===n.id,className:"flex items-center space-x-2 px-4 py-2 border border-red-300 text-red-700 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",children:[(0,yn.jsx)($o,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Cancel Request"})]}),(0,yn.jsxs)(Le,{to:"/product/".concat(null===(m=n.listing)||void 0===m?void 0:m.id),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[(0,yn.jsx)(ti,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"View Listing"})]}),"approved"===n.status&&(0,yn.jsxs)("button",{className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:[(0,yn.jsx)(Ss,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Message"})]})]})]})},n.id)})})]})},ml=ks("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);const fl=new class{async getDashboard(){try{return(await cn.get("".concat(mn.ADMIN.DASHBOARD,"?_t=").concat(Date.now()))).data}catch(r){var e,t;throw new Error((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to fetch dashboard data")}}async getKPIs(){try{return(await cn.get(mn.ADMIN.KPIS)).data}catch(r){var e,t;throw new Error((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to fetch KPIs")}}async getAllUsers(){try{return(await cn.get(mn.ADMIN.USERS)).data}catch(r){var e,t;throw new Error((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to fetch users")}}async updateUser(e,t){try{return(await cn.put(mn.ADMIN.USERS.replace("{user_id}",e),t)).data}catch(a){var r,n;throw new Error((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||"Failed to update user")}}async deleteUser(e){try{await cn.delete("".concat(mn.ADMIN.USERS,"/").concat(e))}catch(n){var t,r;throw new Error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to delete user")}}async suspendUser(e){try{return(await cn.put("".concat(mn.ADMIN.USERS,"/").concat(e,"/suspend"))).data}catch(n){var t,r;throw new Error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to suspend user")}}async activateUser(e){try{return(await cn.put("".concat(mn.ADMIN.USERS,"/").concat(e,"/activate"))).data}catch(n){var t,r;throw new Error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to activate user")}}async getSettings(){try{return(await cn.get(mn.ADMIN.SETTINGS)).data}catch(r){var e,t;throw new Error((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to fetch settings")}}async updateSettings(e){try{return(await cn.put(mn.ADMIN.SETTINGS,e)).data}catch(n){var t,r;throw new Error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to update settings")}}async uploadLogo(e){try{const t=new FormData;t.append("logo",e);return(await cn.post(mn.ADMIN.LOGO,t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){var t,r;throw new Error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to upload logo")}}async getSystemStats(){try{return(await cn.get("".concat(mn.ADMIN.DASHBOARD,"/stats"))).data}catch(r){var e,t;throw new Error((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to fetch system stats")}}};r(2823);const pl=ks("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),gl=ks("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),xl=ks("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),yl=ks("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),bl=ks("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),vl=ks("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),wl=ks("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);const jl=function(e){let{showToast:t}=e;const[r,n]=(0,a.useState)(null),[s,i]=(0,a.useState)("visual"),[o,l]=(0,a.useState)({}),[c,d]=(0,a.useState)(null),[u,h]=(0,a.useState)([]),[m,f]=(0,a.useState)(!0);(0,a.useEffect)(()=>{p()},[]);const p=async()=>{try{f(!0);const e=localStorage.getItem("cataloro_token");if(!e)return void t("Authentication required","error");const r=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/admin/dashboard"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(r.ok){const e=await r.json();d(e)}const n=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/admin/users"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(n.ok){const e=await n.json();h(e)}}catch(e){console.error("Failed to fetch real data:",e),t("Failed to load business data","error")}finally{f(!1)}},g=(()=>{var e,t,r,n,a;if(!c||!u)return{userMetrics:{totalUsers:"N/A",activeBuyers:"N/A",activeSellers:"N/A",adminsManagers:"N/A",pendingApproval:"N/A"},businessMetrics:{totalBusiness:"N/A",verifiedBusiness:"N/A",pendingVerification:"N/A",premiumBusiness:"N/A",revenueShare:"N/A"},activityMetrics:{activeListings:"N/A",totalBids:"N/A",completedDeals:"N/A",messagesSent:"N/A",avgResponseTime:"N/A"},financialMetrics:{monthlyRevenue:"N/A",transactionFees:"N/A",subscriptionRevenue:"N/A",averageDealValue:"N/A",growthRate:"N/A"},roleDistribution:{userBuyer:"N/A",userSeller:"N/A",adminManager:"N/A",admin:"N/A"}};const s=(null===(e=c.kpis)||void 0===e?void 0:e.total_users)||0,i=u.filter(e=>"User-Buyer"===e.user_role||!e.user_role&&"user"===e.role).length,o=u.filter(e=>"User-Seller"===e.user_role).length,l=u.filter(e=>"Admin"===e.user_role||!e.user_role&&"admin"===e.role).length,d=u.filter(e=>"Admin-Manager"===e.user_role).length,h=u.filter(e=>"Pending"===e.registration_status).length,m=u.filter(e=>!0===e.is_business).length,f=u.filter(e=>!0===e.is_business&&"Approved"===e.registration_status).length,p=u.filter(e=>!0===e.is_business&&"Pending"===e.registration_status).length,g=(null===(t=c.kpis)||void 0===t?void 0:t.revenue)||0,x=(null===(r=c.kpis)||void 0===r?void 0:r.total_deals)||0,y=x>0?g/x:0,b=(null===(n=c.kpis)||void 0===n?void 0:n.growth_rate)||0,v=3.7*x,w=1.5*x;return{userMetrics:{totalUsers:s.toLocaleString(),activeBuyers:i.toLocaleString(),activeSellers:o.toLocaleString(),adminsManagers:(l+d).toLocaleString(),pendingApproval:h.toLocaleString()},businessMetrics:{totalBusiness:m.toLocaleString(),verifiedBusiness:f.toLocaleString(),pendingVerification:p.toLocaleString(),premiumBusiness:"N/A",revenueShare:g>0?"\u20ac".concat((.05*g).toFixed(1),"K"):"N/A"},activityMetrics:{activeListings:((null===(a=c.kpis)||void 0===a?void 0:a.active_listings)||0).toLocaleString(),totalBids:Math.round(w).toLocaleString(),completedDeals:x.toLocaleString(),messagesSent:Math.round(v).toLocaleString(),avgResponseTime:"N/A"},financialMetrics:{monthlyRevenue:g>0?"\u20ac".concat(g.toFixed(1),"K"):"\u20ac0.0K",transactionFees:g>0?"\u20ac".concat((.03*g).toFixed(1),"K"):"\u20ac0.0K",subscriptionRevenue:"N/A",averageDealValue:y>0?"\u20ac".concat(Math.round(y)):"\u20ac0",growthRate:b>0?"+".concat(b.toFixed(1),"%"):"0.0%"},roleDistribution:{userBuyer:i,userSeller:o,adminManager:d,admin:l}}})(),x=[{id:"user_onboarding",title:"User Onboarding & Registration",category:"Authentication",icon:oi,color:"bg-blue-500",status:"active",pages:["/login","/register","/profile"],steps:[{id:1,title:"Visit Homepage",page:"/",icon:Us,status:"completed"},{id:2,title:"Click Register",page:"/login",icon:oi,status:"completed"},{id:3,title:"Fill Registration Form",page:"/register",icon:Ws,status:"completed"},{id:4,title:"Email Verification",page:"/verify",icon:Hs,status:"completed"},{id:5,title:"Profile Setup",page:"/profile",icon:Ts,status:"completed"},{id:6,title:"Welcome Dashboard",page:"/browse",icon:Ks,status:"completed"}],metrics:{completion_rate:"89%",avg_time:"3.5 min",drop_off_rate:"11%"}},{id:"product_listing",title:"Product Listing Creation",category:"Marketplace",icon:Ms,color:"bg-green-500",status:"active",pages:["/sell","/my-listings"],steps:[{id:1,title:"Navigate to Sell",page:"/sell",icon:Ms,status:"completed"},{id:2,title:"Choose Category",page:"/sell",icon:ji,status:"completed"},{id:3,title:"Add Product Details",page:"/sell",icon:Xs,status:"completed"},{id:4,title:"Upload Images",page:"/sell",icon:Zs,status:"completed"},{id:5,title:"Set Price & Condition",page:"/sell",icon:Es,status:"completed"},{id:6,title:"Review & Publish",page:"/sell",icon:pl,status:"completed"},{id:7,title:"Listing Goes Live",page:"/browse",icon:ti,status:"completed"}],metrics:{success_rate:"94%",avg_time:"7.2 min",active_listings:"2,847"}},{id:"buy_process",title:"Buy/Purchase Process",category:"Transactions",icon:As,color:"bg-purple-500",status:"active",pages:["/browse","/product/:id","/my-deals","/pending-sales"],steps:[{id:1,title:"Browse Products",page:"/browse",icon:No,status:"completed"},{id:2,title:"View Product Details",page:"/product/:id",icon:ti,status:"completed"},{id:3,title:"Click Buy Now",page:"/product/:id",icon:As,status:"completed"},{id:4,title:"Send Buy Request",page:"/cart",icon:Hs,status:"completed"},{id:5,title:"Seller Approval",page:"/pending-sales",icon:Qi,status:"completed"},{id:6,title:"Payment Processing",page:"/payment",icon:gl,status:"in_progress"},{id:7,title:"Order Completion",page:"/my-deals",icon:pl,status:"completed"}],metrics:{conversion_rate:"67%",approval_rate:"82%",avg_transaction_value:"$249"}},{id:"messaging_system",title:"Real-time Messaging",category:"Communication",icon:Ss,color:"bg-indigo-500",status:"active",pages:["/messages"],steps:[{id:1,title:"Click Message Button",page:"/product/:id",icon:Ss,status:"completed"},{id:2,title:"Open Chat Interface",page:"/messages",icon:Ss,status:"completed"},{id:3,title:"Send/Receive Messages",page:"/messages",icon:Hs,status:"completed"},{id:4,title:"Real-time Notifications",page:"/messages",icon:Os,status:"completed"},{id:5,title:"Message History",page:"/messages",icon:Js,status:"completed"}],metrics:{response_rate:"78%",avg_response_time:"12 min",daily_messages:"1,234"}},{id:"notification_system",title:"Notification Management",category:"Communication",icon:Os,color:"bg-yellow-500",status:"active",pages:["/notifications"],steps:[{id:1,title:"Trigger Event",page:"Any",icon:mi,status:"completed"},{id:2,title:"Generate Notification",page:"Backend",icon:Os,status:"completed"},{id:3,title:"Show in Header Bell",page:"Header",icon:Os,status:"completed"},{id:4,title:"Quick Actions Available",page:"Header",icon:pl,status:"completed"},{id:5,title:"View All Notifications",page:"/notifications",icon:ti,status:"completed"}],metrics:{delivery_rate:"99.2%",read_rate:"73%",action_rate:"45%"}},{id:"admin_management",title:"Admin Management",category:"Administration",icon:Rs,color:"bg-red-500",status:"active",pages:["/admin"],steps:[{id:1,title:"Admin Login",page:"/admin",icon:Rs,status:"completed"},{id:2,title:"Dashboard Overview",page:"/admin",icon:qs,status:"completed"},{id:3,title:"User Management",page:"/admin",icon:ii,status:"completed"},{id:4,title:"Listings Management",page:"/admin",icon:Ms,status:"completed"},{id:5,title:"Business Process View",page:"/admin",icon:Ns,status:"completed"},{id:6,title:"Site Settings",page:"/admin",icon:Ps,status:"completed"}],metrics:{admin_sessions:"89/month",actions_per_session:"12.4",system_uptime:"99.8%"}},{id:"favorites_wishlist",title:"Favorites & Wishlist",category:"User Experience",icon:Cs,color:"bg-pink-500",status:"active",pages:["/favorites"],steps:[{id:1,title:"Heart Icon on Product",page:"/browse",icon:Cs,status:"completed"},{id:2,title:"Add to Favorites",page:"/product/:id",icon:Cs,status:"completed"},{id:3,title:"View Favorites List",page:"/favorites",icon:Gs,status:"completed"},{id:4,title:"Manage Favorites",page:"/favorites",icon:Xs,status:"completed"}],metrics:{favorites_per_user:"8.3",wishlist_conversion:"34%",total_favorites:"12,847"}},{id:"search_discovery",title:"Search & Discovery",category:"User Experience",icon:No,color:"bg-teal-500",status:"active",pages:["/browse","/search"],steps:[{id:1,title:"Enter Search Query",page:"/browse",icon:No,status:"completed"},{id:2,title:"Apply Filters",page:"/browse",icon:ji,status:"completed"},{id:3,title:"View Results",page:"/browse",icon:ti,status:"completed"},{id:4,title:"Sort & Refine",page:"/browse",icon:ji,status:"completed"},{id:5,title:"Product Selection",page:"/product/:id",icon:gi,status:"completed"}],metrics:{search_success_rate:"87%",avg_results:"23.7",filter_usage:"45%"}}],y=e=>{switch(e){case"completed":return"text-green-600 bg-green-100 dark:text-green-400 dark:bg-green-900/30";case"in_progress":return"text-yellow-600 bg-yellow-100 dark:text-yellow-400 dark:bg-yellow-900/30";case"pending":return"text-orange-600 bg-orange-100 dark:text-orange-400 dark:bg-orange-900/30";case"failed":return"text-red-600 bg-red-100 dark:text-red-400 dark:bg-red-900/30";default:return"text-gray-600 bg-gray-100 dark:text-gray-400 dark:bg-gray-900/30"}},b=(e,t)=>{const r=e.icon;return(0,yn.jsx)("div",{className:"p-3 rounded-full ".concat("completed"===e.status?"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400":"in_progress"===e.status?"bg-yellow-100 text-yellow-600 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-gray-100 text-gray-600 dark:bg-gray-900/30 dark:text-gray-400"),children:(0,yn.jsx)(r,{className:"w-5 h-5"})})};return m?(0,yn.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"w-12 h-12 border-4 border-purple-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading business analytics..."})]})}):(0,yn.jsxs)("div",{className:"space-y-8",children:[(0,yn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 rounded-2xl p-8 text-white",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yn.jsx)("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:(0,yn.jsx)(Ns,{className:"w-8 h-8"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h2",{className:"text-3xl font-bold",children:"Business Process Map"}),(0,yn.jsx)("p",{className:"text-purple-100",children:"Visual overview of all marketplace business processes and user journeys"})]})]}),(0,yn.jsx)("div",{className:"flex items-center space-x-4",children:(0,yn.jsx)("div",{className:"bg-white/20 px-4 py-2 rounded-lg backdrop-blur-sm",children:(0,yn.jsxs)("span",{className:"text-sm font-medium",children:[x.length," Active Processes"]})})})]})}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6",children:[(0,yn.jsxs)("div",{className:"cataloro-card-glass p-6",children:[(0,yn.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-xl",children:(0,yn.jsx)(ii,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"User Base"}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total registered users"})]})]})}),(0,yn.jsxs)("div",{className:"space-y-3",children:[(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Users"}),(0,yn.jsx)("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:m?"...":g.userMetrics.totalUsers})]}),(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Buyers"}),(0,yn.jsx)("span",{className:"text-md font-semibold text-blue-600 dark:text-blue-400",children:m?"...":g.userMetrics.activeBuyers})]}),(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Sellers"}),(0,yn.jsx)("span",{className:"text-md font-semibold text-green-600 dark:text-green-400",children:m?"...":g.userMetrics.activeSellers})]}),(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Admins/Managers"}),(0,yn.jsx)("span",{className:"text-md font-semibold text-purple-600 dark:text-purple-400",children:m?"...":g.userMetrics.adminsManagers})]}),(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending Approval"}),(0,yn.jsx)("span",{className:"text-md font-semibold text-orange-600 dark:text-orange-400",children:m?"...":g.userMetrics.pendingApproval})]})]})]}),(0,yn.jsxs)("div",{className:"cataloro-card-glass p-6",children:[(0,yn.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-xl",children:(0,yn.jsx)(Ns,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Business Accounts"}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Commercial registrations"})]})]})}),(0,yn.jsxs)("div",{className:"space-y-3",children:[(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Business"}),(0,yn.jsx)("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:m?"...":g.businessMetrics.totalBusiness})]}),(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Verified Business"}),(0,yn.jsx)("span",{className:"text-md font-semibold text-green-600 dark:text-green-400",children:m?"...":g.businessMetrics.verifiedBusiness})]}),(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending Verification"}),(0,yn.jsx)("span",{className:"text-md font-semibold text-orange-600 dark:text-orange-400",children:m?"...":g.businessMetrics.pendingVerification})]}),(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Premium Business"}),(0,yn.jsx)("span",{className:"text-md font-semibold text-purple-600 dark:text-purple-400",children:m?"...":g.businessMetrics.premiumBusiness})]}),(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Revenue Share"}),(0,yn.jsx)("span",{className:"text-md font-semibold text-blue-600 dark:text-blue-400",children:m?"...":g.businessMetrics.revenueShare})]})]})]}),(0,yn.jsxs)("div",{className:"cataloro-card-glass p-6",children:[(0,yn.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-xl",children:(0,yn.jsx)(fi,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Activity Overview"}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Platform engagement"})]})]})}),(0,yn.jsxs)("div",{className:"space-y-3",children:[(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Listings"}),(0,yn.jsx)("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:m?"...":g.activityMetrics.activeListings})]}),(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Bids"}),(0,yn.jsx)("span",{className:"text-md font-semibold text-blue-600 dark:text-blue-400",children:m?"...":g.activityMetrics.totalBids})]}),(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completed Deals"}),(0,yn.jsx)("span",{className:"text-md font-semibold text-green-600 dark:text-green-400",children:m?"...":g.activityMetrics.completedDeals})]}),(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Messages Sent"}),(0,yn.jsx)("span",{className:"text-md font-semibold text-purple-600 dark:text-purple-400",children:m?"...":g.activityMetrics.messagesSent})]}),(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg Response Time"}),(0,yn.jsx)("span",{className:"text-md font-semibold text-orange-600 dark:text-orange-400",children:m?"...":g.activityMetrics.avgResponseTime})]})]})]}),(0,yn.jsxs)("div",{className:"cataloro-card-glass p-6",children:[(0,yn.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-xl",children:(0,yn.jsx)(Es,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Financial Summary"}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Revenue metrics"})]})]})}),(0,yn.jsxs)("div",{className:"space-y-3",children:[(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Revenue"}),(0,yn.jsx)("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:m?"...":g.financialMetrics.monthlyRevenue})]}),(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Transaction Fees"}),(0,yn.jsx)("span",{className:"text-md font-semibold text-green-600 dark:text-green-400",children:m?"...":g.financialMetrics.transactionFees})]}),(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Subscription Revenue"}),(0,yn.jsx)("span",{className:"text-md font-semibold text-blue-600 dark:text-blue-400",children:m?"...":g.financialMetrics.subscriptionRevenue})]}),(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Average Deal Value"}),(0,yn.jsx)("span",{className:"text-md font-semibold text-purple-600 dark:text-purple-400",children:m?"...":g.financialMetrics.averageDealValue})]}),(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Growth Rate"}),(0,yn.jsx)("span",{className:"text-md font-semibold text-green-600 dark:text-green-400",children:m?"...":g.financialMetrics.growthRate})]})]})]})]}),(0,yn.jsxs)("div",{className:"cataloro-card-glass p-6",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900/30 rounded-xl",children:(0,yn.jsx)(qs,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"User Role Distribution"}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"RBAC system implementation overview"})]})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,yn.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,yn.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Buyers"})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,yn.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,yn.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Sellers"})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,yn.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),(0,yn.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Managers"})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,yn.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),(0,yn.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Admins"})]})]})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,yn.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-900/30 p-4 rounded-xl border border-blue-200 dark:border-blue-800",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)(Rs,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),(0,yn.jsx)("span",{className:"font-semibold text-blue-900 dark:text-blue-100",children:"User-Buyer"})]}),(0,yn.jsx)("span",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:m?"...":g.roleDistribution.userBuyer})]}),(0,yn.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,yn.jsxs)("div",{className:"flex justify-between",children:[(0,yn.jsx)("span",{className:"text-blue-700 dark:text-blue-300",children:"Active Bidders"}),(0,yn.jsx)("span",{className:"font-medium text-blue-900 dark:text-blue-100",children:m?"...":"N/A"})]}),(0,yn.jsxs)("div",{className:"flex justify-between",children:[(0,yn.jsx)("span",{className:"text-blue-700 dark:text-blue-300",children:"Avg Bids/User"}),(0,yn.jsx)("span",{className:"font-medium text-blue-900 dark:text-blue-100",children:m?"...":"N/A"})]}),(0,yn.jsxs)("div",{className:"flex justify-between",children:[(0,yn.jsx)("span",{className:"text-blue-700 dark:text-blue-300",children:"Success Rate"}),(0,yn.jsx)("span",{className:"font-medium text-blue-900 dark:text-blue-100",children:m?"...":"N/A"})]})]})]}),(0,yn.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-900/30 p-4 rounded-xl border border-green-200 dark:border-green-800",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)(Ns,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),(0,yn.jsx)("span",{className:"font-semibold text-green-900 dark:text-green-100",children:"User-Seller"})]}),(0,yn.jsx)("span",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:m?"...":g.roleDistribution.userSeller})]}),(0,yn.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,yn.jsxs)("div",{className:"flex justify-between",children:[(0,yn.jsx)("span",{className:"text-green-700 dark:text-green-300",children:"Active Listings"}),(0,yn.jsx)("span",{className:"font-medium text-green-900 dark:text-green-100",children:m?"...":g.activityMetrics.activeListings})]}),(0,yn.jsxs)("div",{className:"flex justify-between",children:[(0,yn.jsx)("span",{className:"text-green-700 dark:text-green-300",children:"Avg Price"}),(0,yn.jsx)("span",{className:"font-medium text-green-900 dark:text-green-100",children:m?"...":"N/A"})]}),(0,yn.jsxs)("div",{className:"flex justify-between",children:[(0,yn.jsx)("span",{className:"text-green-700 dark:text-green-300",children:"Completion Rate"}),(0,yn.jsx)("span",{className:"font-medium text-green-900 dark:text-green-100",children:m?"...":"N/A"})]})]})]}),(0,yn.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-900/30 p-4 rounded-xl border border-purple-200 dark:border-purple-800",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)(Ps,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),(0,yn.jsx)("span",{className:"font-semibold text-purple-900 dark:text-purple-100",children:"Admin-Manager"})]}),(0,yn.jsx)("span",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:m?"...":g.roleDistribution.adminManager})]}),(0,yn.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,yn.jsxs)("div",{className:"flex justify-between",children:[(0,yn.jsx)("span",{className:"text-purple-700 dark:text-purple-300",children:"Users Managed"}),(0,yn.jsx)("span",{className:"font-medium text-purple-900 dark:text-purple-100",children:m?"...":g.userMetrics.totalUsers})]}),(0,yn.jsxs)("div",{className:"flex justify-between",children:[(0,yn.jsx)("span",{className:"text-purple-700 dark:text-purple-300",children:"Approvals/Day"}),(0,yn.jsx)("span",{className:"font-medium text-purple-900 dark:text-purple-100",children:m?"...":"N/A"})]}),(0,yn.jsxs)("div",{className:"flex justify-between",children:[(0,yn.jsx)("span",{className:"text-purple-700 dark:text-purple-300",children:"Response Time"}),(0,yn.jsx)("span",{className:"font-medium text-purple-900 dark:text-purple-100",children:m?"...":"N/A"})]})]})]}),(0,yn.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-900/30 p-4 rounded-xl border border-yellow-200 dark:border-yellow-800",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)(Rs,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"}),(0,yn.jsx)("span",{className:"font-semibold text-yellow-900 dark:text-yellow-100",children:"Admin"})]}),(0,yn.jsx)("span",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:m?"...":g.roleDistribution.admin})]}),(0,yn.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,yn.jsxs)("div",{className:"flex justify-between",children:[(0,yn.jsx)("span",{className:"text-yellow-700 dark:text-yellow-300",children:"System Access"}),(0,yn.jsx)("span",{className:"font-medium text-yellow-900 dark:text-yellow-100",children:"Full"})]}),(0,yn.jsxs)("div",{className:"flex justify-between",children:[(0,yn.jsx)("span",{className:"text-yellow-700 dark:text-yellow-300",children:"Actions/Day"}),(0,yn.jsx)("span",{className:"font-medium text-yellow-900 dark:text-yellow-100",children:m?"...":"N/A"})]}),(0,yn.jsxs)("div",{className:"flex justify-between",children:[(0,yn.jsx)("span",{className:"text-yellow-700 dark:text-yellow-300",children:"Uptime"}),(0,yn.jsx)("span",{className:"font-medium text-yellow-900 dark:text-yellow-100",children:"99.8%"})]})]})]})]})]}),(0,yn.jsx)("div",{className:"cataloro-card-glass p-6",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Process View"}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2 bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[(0,yn.jsxs)("button",{onClick:()=>i("visual"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("visual"===s?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:[(0,yn.jsx)(xl,{className:"w-4 h-4 mr-2 inline"}),"Visual Map"]}),(0,yn.jsxs)("button",{onClick:()=>i("list"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("list"===s?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:[(0,yn.jsx)(Si,{className:"w-4 h-4 mr-2 inline"}),"List View"]})]})]})}),"visual"===s&&(0,yn.jsxs)("div",{className:"cataloro-card-glass p-8",children:[(0,yn.jsxs)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-8 flex items-center",children:[(0,yn.jsx)(xl,{className:"w-6 h-6 mr-3"}),"Business Process Flow Diagram"]}),(0,yn.jsx)("div",{className:"space-y-8",children:x.map((e,r)=>(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsxs)("div",{className:"flex items-center mb-6",children:[(0,yn.jsx)("div",{className:"p-4 rounded-2xl ".concat(e.color," text-white mr-4"),children:(0,yn.jsx)(e.icon,{className:"w-8 h-8"})}),(0,yn.jsxs)("div",{className:"flex-1",children:[(0,yn.jsx)("h4",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e.title}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:e.category})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yn.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(y(e.status)),children:e.status.toUpperCase()}),(0,yn.jsx)("button",{onClick:()=>{return t=e.id,void l(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:!e[t]}));var t},className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:o[e.id]?(0,yn.jsx)(yl,{className:"w-5 h-5"}):(0,yn.jsx)(bl,{className:"w-5 h-5"})})]})]}),(0,yn.jsxs)("div",{className:"ml-16 transition-all duration-300 ".concat(o[e.id]?"max-h-full opacity-100":"max-h-0 opacity-0 overflow-hidden"),children:[(0,yn.jsx)("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:e.steps.map((r,n)=>(0,yn.jsxs)(a.Fragment,{children:[(0,yn.jsxs)("div",{className:"flex flex-col items-center group cursor-pointer hover:scale-105 transition-transform",onClick:()=>t("Step: ".concat(r.title," (Page: ").concat(r.page,")"),"info"),children:[b(r),(0,yn.jsxs)("div",{className:"mt-2 text-center min-w-[120px]",children:[(0,yn.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400",children:r.title}),(0,yn.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.page})]})]}),n<e.steps.length-1&&(0,yn.jsx)(vl,{className:"w-6 h-6 text-gray-400 dark:text-gray-600 flex-shrink-0"})]},r.id))}),(0,yn.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4",children:[(0,yn.jsx)("h5",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Process Metrics"}),(0,yn.jsx)("div",{className:"grid grid-cols-3 gap-4",children:Object.entries(e.metrics).map(e=>{let[t,r]=e;return(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:r}),(0,yn.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 capitalize",children:t.replace("_"," ")})]},t)})})]})]}),r<x.length-1&&(0,yn.jsx)("div",{className:"flex justify-center mt-8",children:(0,yn.jsx)(wl,{className:"w-8 h-8 text-gray-400 dark:text-gray-600"})})]},e.id))})]}),"list"===s&&(0,yn.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:x.map(e=>(0,yn.jsxs)("div",{className:"cataloro-card-glass p-6",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"p-3 rounded-xl ".concat(e.color," text-white"),children:(0,yn.jsx)(e.icon,{className:"w-6 h-6"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"text-lg font-bold text-gray-900 dark:text-white",children:e.title}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.category})]})]}),(0,yn.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(y(e.status)),children:e.status.toUpperCase()})]}),(0,yn.jsx)("div",{className:"grid grid-cols-3 gap-2 mb-4",children:Object.entries(e.metrics).map(e=>{let[t,r]=e;return(0,yn.jsxs)("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[(0,yn.jsx)("div",{className:"text-sm font-bold text-gray-900 dark:text-white",children:r}),(0,yn.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400 capitalize",children:t.replace("_"," ")})]},t)})}),(0,yn.jsxs)("div",{className:"space-y-2",children:[(0,yn.jsx)("h5",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Related Pages:"}),(0,yn.jsx)("div",{className:"flex flex-wrap gap-2",children:e.pages.map((e,t)=>(0,yn.jsxs)("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 rounded-md text-xs",children:[(0,yn.jsx)(oo,{className:"w-3 h-3 mr-1"}),e]},t))})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,yn.jsxs)("button",{onClick:()=>n(e),className:"flex items-center space-x-2 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 text-sm",children:[(0,yn.jsx)(ti,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"View Details"})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-400",children:[(0,yn.jsx)(Js,{className:"w-3 h-3"}),(0,yn.jsxs)("span",{children:[e.steps.length," steps"]})]})]})]},e.id))}),r&&(0,yn.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,yn.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yn.jsx)("div",{className:"p-3 rounded-xl ".concat(r.color," text-white"),children:(0,yn.jsx)(r.icon,{className:"w-8 h-8"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.title}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:r.category})]})]}),(0,yn.jsx)("button",{onClick:()=>n(null),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:(0,yn.jsx)(Is,{className:"w-6 h-6"})})]})}),(0,yn.jsxs)("div",{className:"p-6 space-y-6",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Process Steps"}),(0,yn.jsx)("div",{className:"space-y-4",children:r.steps.map((e,t)=>(0,yn.jsxs)("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-xl",children:[(0,yn.jsx)("div",{className:"flex-shrink-0",children:(0,yn.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ".concat("completed"===e.status?"bg-green-500 text-white":"in_progress"===e.status?"bg-yellow-500 text-white":"bg-gray-300 text-gray-600"),children:t+1})}),(0,yn.jsxs)("div",{className:"flex-1",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("h5",{className:"font-medium text-gray-900 dark:text-white",children:e.title}),(0,yn.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(y(e.status)),children:e.status.replace("_"," ").toUpperCase()})]}),(0,yn.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Page: ",e.page]})]}),b(e)]},e.id))})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"Performance Metrics"}),(0,yn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(r.metrics).map(e=>{let[t,r]=e;return(0,yn.jsxs)("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-xl",children:[(0,yn.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r}),(0,yn.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 capitalize mt-1",children:t.replace("_"," ")})]},t)})})]})]})]})}),(0,yn.jsxs)("div",{className:"cataloro-card-glass p-6",children:[(0,yn.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Business Process Summary"}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:x.length}),(0,yn.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Processes"})]}),(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:x.filter(e=>"active"===e.status).length}),(0,yn.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Processes"})]}),(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"text-3xl font-bold text-yellow-600 dark:text-yellow-400",children:x.reduce((e,t)=>e+t.steps.length,0)}),(0,yn.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Steps"})]}),(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:new Set(x.flatMap(e=>e.pages)).size}),(0,yn.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Unique Pages"})]})]})]})]})},kl=ks("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),Nl=e=>{let{showToast:t}=e;const[r,n]=(0,a.useState)([]),[s,i]=(0,a.useState)(!1),[o,l]=(0,a.useState)(0),[c,d]=(0,a.useState)({start:new Date(Date.now()-2592e6).toISOString().split("T")[0],end:(new Date).toISOString().split("T")[0]}),[u,h]=(0,a.useState)("comprehensive"),[m,f]=(0,a.useState)({includeCharts:!0,includeImages:!0,includeAnalytics:!0,watermark:!0,headerFooter:!0}),p=[{id:"users",title:"User Management Report",description:"Complete user database with profiles, activity, and statistics",icon:ii,color:"blue",estimatedSize:"2-5 MB",includes:["User profiles","Registration dates","Activity logs","Ratings","Transaction history"]},{id:"listings",title:"Listings & Products Report",description:"All marketplace listings with details and performance metrics",icon:Ms,color:"green",estimatedSize:"3-8 MB",includes:["Product details","Images","Pricing history","Views & favorites","Seller information"]},{id:"transactions",title:"Financial Transactions Report",description:"Complete transaction history and revenue analytics",icon:Es,color:"yellow",estimatedSize:"1-3 MB",includes:["Transaction records","Payment methods","Revenue by period","Fee calculations","Refunds"]},{id:"analytics",title:"Platform Analytics Report",description:"Comprehensive performance metrics and user behavior",icon:qs,color:"purple",estimatedSize:"4-10 MB",includes:["Traffic analytics","Conversion rates","User engagement","Popular listings","Growth metrics"]},{id:"orders",title:"Orders & Fulfillment Report",description:"Order management and delivery tracking information",icon:As,color:"orange",estimatedSize:"2-6 MB",includes:["Order details","Delivery status","Customer feedback","Processing times","Returns"]},{id:"communications",title:"Communications Log",description:"Message history, notifications, and system communications",icon:Hs,color:"indigo",estimatedSize:"1-4 MB",includes:["Message threads","Notifications sent","Email campaigns","System alerts","Support tickets"]},{id:"system",title:"System Health Report",description:"Technical performance, errors, and maintenance logs",icon:kl,color:"red",estimatedSize:"1-2 MB",includes:["Error logs","Performance metrics","Database status","Security events","Backup history"]},{id:"business",title:"Business Intelligence Report",description:"Strategic insights, trends, and forecasting data",icon:gi,color:"teal",estimatedSize:"3-7 MB",includes:["Market trends","Competitor analysis","Growth forecasts","ROI calculations","KPI dashboard"]}];return(0,yn.jsxs)("div",{className:"space-y-8",children:[(0,yn.jsx)("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 rounded-xl p-6 text-white",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("h2",{className:"text-2xl font-bold mb-2 flex items-center",children:[(0,yn.jsx)(Qs,{className:"w-8 h-8 mr-3"}),"PDF Export Center"]}),(0,yn.jsx)("p",{className:"text-green-100",children:"Export comprehensive reports and data in professional PDF format"})]}),(0,yn.jsx)("div",{className:"flex items-center space-x-4",children:(0,yn.jsxs)("div",{className:"text-right",children:[(0,yn.jsxs)("div",{className:"text-sm text-green-100",children:["Selected: ",r.length," reports"]}),(0,yn.jsxs)("div",{className:"text-sm text-green-100",children:["Est. Size: ",(()=>{if(0===r.length)return"0 MB";const e=p.filter(e=>r.includes(e.id)),t=e.reduce((e,t)=>{const[r]=t.estimatedSize.split("-").map(e=>parseInt(e));return e+r},0),n=e.reduce((e,t)=>e+(t.estimatedSize.includes("-")?parseInt(t.estimatedSize.split("-")[1]):parseInt(t.estimatedSize)),0);return"".concat(t,"-").concat(n," MB")})()]})]})})]})}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,yn.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,yn.jsx)(Ps,{className:"w-5 h-5 mr-2"}),"Export Settings"]}),(0,yn.jsxs)("div",{className:"space-y-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date Range"}),(0,yn.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,yn.jsx)("input",{type:"date",value:c.start,onChange:e=>d(t=>(0,Ie.A)((0,Ie.A)({},t),{},{start:e.target.value})),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"}),(0,yn.jsx)("input",{type:"date",value:c.end,onChange:e=>d(t=>(0,Ie.A)((0,Ie.A)({},t),{},{end:e.target.value})),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Report Format"}),(0,yn.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,yn.jsx)("option",{value:"comprehensive",children:"Comprehensive Report"}),(0,yn.jsx)("option",{value:"summary",children:"Executive Summary"}),(0,yn.jsx)("option",{value:"detailed",children:"Detailed Analysis"}),(0,yn.jsx)("option",{value:"technical",children:"Technical Report"})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Include Options"}),(0,yn.jsx)("div",{className:"space-y-2",children:[{key:"includeCharts",label:"Charts & Graphs"},{key:"includeImages",label:"Product Images"},{key:"includeAnalytics",label:"Analytics Data"},{key:"watermark",label:"Company Watermark"},{key:"headerFooter",label:"Header & Footer"}].map(e=>(0,yn.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,yn.jsx)("input",{type:"checkbox",checked:m[e.key],onChange:t=>f(r=>(0,Ie.A)((0,Ie.A)({},r),{},{[e.key]:t.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,yn.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.label})]},e.key))})]})]})]}),(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,yn.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,yn.jsx)(fi,{className:"w-5 h-5 mr-2"}),"Export Controls"]}),(0,yn.jsxs)("div",{className:"space-y-4",children:[(0,yn.jsxs)("div",{className:"flex space-x-2",children:[(0,yn.jsx)("button",{onClick:()=>{n(p.map(e=>e.id))},className:"flex-1 px-3 py-2 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-lg text-sm font-medium hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:"Select All"}),(0,yn.jsx)("button",{onClick:()=>{n([])},className:"flex-1 px-3 py-2 bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-lg text-sm font-medium hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:"Clear All"})]}),s&&(0,yn.jsxs)("div",{className:"space-y-2",children:[(0,yn.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,yn.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Generating PDF..."}),(0,yn.jsxs)("span",{className:"text-gray-900 dark:text-white font-medium",children:[Math.round(o),"%"]})]}),(0,yn.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,yn.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(o,"%")}})})]}),(0,yn.jsx)("button",{onClick:async()=>{if(0!==r.length){i(!0),l(0);try{const e=setInterval(()=>{l(t=>t>=95?(clearInterval(e),95):t+15*Math.random())},500),n="https://market-refactor-1.preview.emergentagent.com",a={types:r,dateRange:c,format:u,options:m},s=await fetch("".concat(n,"/api/admin/export-pdf"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(a)});if(!s.ok)throw new Error("Export failed: ".concat(s.statusText));const o=await s.blob(),d=window.URL.createObjectURL(o),h=document.createElement("a");h.href=d;const f=(new Date).toISOString().slice(0,19).replace(/:/g,"-");h.download="cataloro-export-".concat(f,".pdf"),document.body.appendChild(h),h.click(),document.body.removeChild(h),window.URL.revokeObjectURL(d),clearInterval(e),l(100),setTimeout(()=>{i(!1),l(0),t("PDF export completed successfully!","success")},1e3)}catch(e){console.error("Export error:",e),i(!1),l(0),t("Export failed: ".concat(e.message),"error")}}else t("Please select at least one export type","warning")},disabled:s||0===r.length,className:"w-full px-6 py-3 rounded-lg font-semibold transition-all duration-200 flex items-center justify-center space-x-2 ".concat(s||0===r.length?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-green-600 to-blue-600 text-white hover:from-green-700 hover:to-blue-700 transform hover:scale-105"),children:s?(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)(Xi,{className:"w-5 h-5 animate-spin"}),(0,yn.jsx)("span",{children:"Generating PDF..."})]}):(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)(Qs,{className:"w-5 h-5"}),(0,yn.jsx)("span",{children:"Export Selected Reports"})]})}),(0,yn.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[(0,yn.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Export Summary:"}),(0,yn.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,yn.jsxs)("div",{className:"flex justify-between",children:[(0,yn.jsx)("span",{children:"Reports Selected:"}),(0,yn.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:r.length})]}),(0,yn.jsxs)("div",{className:"flex justify-between",children:[(0,yn.jsx)("span",{children:"Date Range:"}),(0,yn.jsxs)("span",{className:"font-medium text-gray-900 dark:text-white",children:[Math.ceil((new Date(c.end)-new Date(c.start))/864e5)," days"]})]}),(0,yn.jsxs)("div",{className:"flex justify-between",children:[(0,yn.jsx)("span",{children:"Format:"}),(0,yn.jsx)("span",{className:"font-medium text-gray-900 dark:text-white capitalize",children:u})]})]})]})]})]}),(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,yn.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,yn.jsx)(Js,{className:"w-5 h-5 mr-2"}),"Recent Exports"]}),(0,yn.jsx)("div",{className:"space-y-3",children:[{date:"2025-09-08",type:"Complete Report",size:"12.5 MB",status:"completed"},{date:"2025-09-07",type:"User Analytics",size:"4.2 MB",status:"completed"},{date:"2025-09-06",type:"Financial Report",size:"2.8 MB",status:"completed"}].map((e,t)=>(0,yn.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.type}),(0,yn.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.date," \u2022 ",e.size]})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)(Qi,{className:"w-4 h-4 text-green-500"}),(0,yn.jsx)("button",{className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300",children:(0,yn.jsx)(ti,{className:"w-4 h-4"})})]})]},t))})]})]}),(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Available Export Types"}),(0,yn.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Select the reports you want to include in your PDF export"})]}),(0,yn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:p.map(e=>{const t=e.icon,a=r.includes(e.id);return(0,yn.jsxs)("div",{onClick:()=>{return t=e.id,void n(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"relative p-4 rounded-xl border-2 cursor-pointer transition-all duration-200 transform hover:scale-105 ".concat(a?"border-".concat(e.color,"-500 bg-").concat(e.color,"-50 dark:bg-").concat(e.color,"-900/20 shadow-lg"):"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:border-gray-300 dark:hover:border-gray-600"),children:[a&&(0,yn.jsx)("div",{className:"absolute top-2 right-2",children:(0,yn.jsx)(Qi,{className:"w-5 h-5 text-".concat(e.color,"-600")})}),(0,yn.jsx)("div",{className:"w-12 h-12 rounded-lg bg-".concat(e.color,"-100 dark:bg-").concat(e.color,"-900/30 flex items-center justify-center mb-3"),children:(0,yn.jsx)(t,{className:"w-6 h-6 text-".concat(e.color,"-600 dark:text-").concat(e.color,"-400")})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1 text-sm",children:e.title}),(0,yn.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-3",children:e.description}),(0,yn.jsxs)("div",{className:"space-y-2",children:[(0,yn.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,yn.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Size:"}),(0,yn.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:e.estimatedSize})]}),(0,yn.jsxs)("div",{className:"space-y-1",children:[(0,yn.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Includes:"}),(0,yn.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.includes.slice(0,2).map((t,r)=>(0,yn.jsx)("span",{className:"text-xs px-2 py-1 bg-".concat(e.color,"-100 dark:bg-").concat(e.color,"-900/20 text-").concat(e.color,"-700 dark:text-").concat(e.color,"-300 rounded"),children:t},r)),e.includes.length>2&&(0,yn.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",e.includes.length-2," more"]})]})]})]})]})]},e.id)})})]})]})};const _l=ks("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const Sl=function(e){let{dashboardData:t,loading:r}=e;const[n,s]=(0,a.useState)({}),[i,o]=(0,a.useState)("7d"),[l,c]=(0,a.useState)([]);if((0,a.useEffect)(()=>{const e=setInterval(()=>{const e={timestamp:(new Date).toLocaleTimeString(),users:Math.floor(50*Math.random())+20,revenue:Math.floor(1e3*Math.random())+500,orders:Math.floor(10*Math.random())+5};c(t=>[...t.slice(-9),e])},6e4);return()=>clearInterval(e)},[]),(0,a.useEffect)(()=>{if(t){const e=()=>{var e,r,n;const a="7d"===i?7:"30d"===i?30:90,s=[],o=[],l=[],c=[],d=(null===(e=t.kpis)||void 0===e?void 0:e.total_users)||0,u=(null===(r=t.kpis)||void 0===r?void 0:r.revenue)||0,h=(null===(n=t.kpis)||void 0===n?void 0:n.total_deals)||0,m=u/Math.max(a,1),f=Math.max(Math.floor(d/Math.max(3*a,1)),1);for(let t=a-1;t>=0;t--){const e=new Date;e.setDate(e.getDate()-t),s.push(e.toLocaleDateString("en-US",{month:"short",day:"numeric"}));const r=.4*Math.random()-.2,n=.4*Math.random()-.2;o.push(Math.max(1,Math.floor(f*(1+r)))),l.push(Math.max(0,Math.floor(m*(1+n)))),c.push(Math.max(0,Math.floor(h/a*(1+n))))}return{labels:s,userData:o,revenueData:l,orderData:c}};s(e())}},[t,i]),r||!t)return(0,yn.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"w-12 h-12 border-4 border-purple-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading comprehensive dashboard..."})]})});const{kpis:d,recent_activity:u}=t,h={userGrowth:(d.total_users||0)/Math.max(1,(d.total_users||1)-10)*100-100,revenueGrowth:d.growth_rate||0,conversionRate:(d.total_deals||0)/Math.max(1,d.total_users||1)*100,avgOrderValue:(d.revenue||0)/Math.max(1,d.total_deals||1)};return(0,yn.jsxs)("div",{className:"space-y-8",children:[(0,yn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 via-blue-600 to-emerald-600 rounded-2xl p-8 text-white",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Admin Dashboard"}),(0,yn.jsx)("p",{className:"text-purple-100",children:"Comprehensive marketplace analytics and insights"})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yn.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"bg-white/20 backdrop-blur-md text-white px-4 py-2 rounded-lg border border-white/30 focus:border-white/50 focus:outline-none",children:[(0,yn.jsx)("option",{value:"7d",className:"text-gray-900",children:"Last 7 days"}),(0,yn.jsx)("option",{value:"30d",className:"text-gray-900",children:"Last 30 days"}),(0,yn.jsx)("option",{value:"90d",className:"text-gray-900",children:"Last 90 days"})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,yn.jsx)("span",{className:"text-sm",children:"Live Data"})]})]})]})}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,yn.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-2xl p-6 border border-blue-200 dark:border-blue-800",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,yn.jsx)("div",{className:"p-3 bg-blue-500 rounded-xl",children:(0,yn.jsx)(ii,{className:"w-6 h-6 text-white"})}),(0,yn.jsxs)("div",{className:"text-xs font-semibold px-2 py-1 rounded-full ".concat(h.userGrowth>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:[h.userGrowth>0?"+":"",h.userGrowth.toFixed(1),"%"]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-1",children:(d.total_users||0).toLocaleString()}),(0,yn.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Total Users"}),(0,yn.jsxs)("div",{className:"text-xs text-blue-600 dark:text-blue-400 mb-3",children:["+",Math.floor(5*Math.random())+2," new today"]}),(0,yn.jsx)("div",{className:"mt-3 bg-blue-200 dark:bg-blue-800 rounded-full h-2",children:(0,yn.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"78%"}})}),(0,yn.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"78% retention rate"})]})]}),(0,yn.jsxs)("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 rounded-2xl p-6 border border-emerald-200 dark:border-emerald-800",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,yn.jsx)("div",{className:"p-3 bg-emerald-500 rounded-xl",children:(0,yn.jsx)(Es,{className:"w-6 h-6 text-white"})}),(0,yn.jsxs)("div",{className:"text-xs font-semibold px-2 py-1 rounded-full bg-green-100 text-green-700",children:["+",h.revenueGrowth.toFixed(1),"%"]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("div",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-1",children:["\u20ac",(d.revenue||0).toLocaleString()]}),(0,yn.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Total Revenue"}),(0,yn.jsxs)("div",{className:"text-xs text-emerald-600 dark:text-emerald-400 mb-3",children:["\u20ac",Math.floor((d.revenue||0)/Math.max(1,d.total_deals||1)).toLocaleString()," avg/deal"]}),(0,yn.jsx)("div",{className:"mt-3 flex items-center space-x-1",children:[...Array(8)].map((e,t)=>(0,yn.jsx)("div",{className:"bg-emerald-300 w-1 rounded-full",style:{height:"".concat(20*Math.random()+10,"px")}},t))}),(0,yn.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Monthly trend: \u2197 +12%"})]})]}),(0,yn.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-2xl p-6 border border-orange-200 dark:border-orange-800",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,yn.jsx)("div",{className:"p-3 bg-orange-500 rounded-xl",children:(0,yn.jsx)(Ms,{className:"w-6 h-6 text-white"})}),(0,yn.jsx)("div",{className:"text-xs font-semibold px-2 py-1 rounded-full bg-blue-100 text-blue-700",children:"Live"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-1",children:(d.active_listings||0).toLocaleString()}),(0,yn.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Active Listings"}),(0,yn.jsxs)("div",{className:"text-xs text-orange-600 dark:text-orange-400 mb-3",children:[(d.total_listings||0)-(d.active_listings||0)," inactive"]}),(0,yn.jsxs)("div",{className:"mt-3 grid grid-cols-3 gap-1",children:[(0,yn.jsx)("div",{className:"bg-green-400 h-2 rounded",title:"Active"}),(0,yn.jsx)("div",{className:"bg-yellow-400 h-2 rounded",title:"Pending"}),(0,yn.jsx)("div",{className:"bg-gray-400 h-2 rounded",title:"Inactive"})]}),(0,yn.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[Math.round((d.active_listings||0)/Math.max(1,d.total_listings||1)*100),"% active rate"]})]})]}),(0,yn.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-2xl p-6 border border-purple-200 dark:border-purple-800",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,yn.jsx)("div",{className:"p-3 bg-purple-500 rounded-xl",children:(0,yn.jsx)(zs,{className:"w-6 h-6 text-white"})}),(0,yn.jsx)("div",{className:"text-xs font-semibold px-2 py-1 rounded-full bg-green-100 text-green-700",children:"Excellent"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("div",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-1",children:[h.conversionRate.toFixed(1),"%"]}),(0,yn.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Conversion Rate"}),(0,yn.jsxs)("div",{className:"text-xs text-purple-600 dark:text-purple-400 mb-3",children:[d.total_deals||0," successful deals"]}),(0,yn.jsx)("div",{className:"mt-3",children:(0,yn.jsx)("div",{className:"bg-purple-200 dark:bg-purple-800 rounded-full h-2",children:(0,yn.jsx)("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:"".concat(Math.min(h.conversionRate,100),"%")}})})}),(0,yn.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Industry avg: 2.8%"})]})]})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow border",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg",children:(0,yn.jsx)(ti,{className:"w-5 h-5 text-indigo-600"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:(4.2*(d.total_users||0)).toLocaleString(void 0,{maximumFractionDigits:0})}),(0,yn.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Page Views"})]})]})}),(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow border",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg",children:(0,yn.jsx)(_l,{className:"w-5 h-5 text-red-600"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"23.4%"}),(0,yn.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Bounce Rate"})]})]})}),(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow border",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:(0,yn.jsx)(Js,{className:"w-5 h-5 text-green-600"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"4m 32s"}),(0,yn.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Avg Session"})]})]})}),(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow border",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:(0,yn.jsx)(ci,{className:"w-5 h-5 text-blue-600"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"67.2%"}),(0,yn.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Mobile"})]})]})}),(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow border",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:(0,yn.jsx)(Ss,{className:"w-5 h-5 text-yellow-600"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:(3.7*(d.total_deals||0)).toLocaleString(void 0,{maximumFractionDigits:0})}),(0,yn.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Messages"})]})]})}),(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow border",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:(0,yn.jsx)(No,{className:"w-5 h-5 text-purple-600"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:(2.1*(d.total_users||0)).toLocaleString(void 0,{maximumFractionDigits:0})}),(0,yn.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Searches"})]})]})})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,yn.jsxs)("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,yn.jsxs)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,yn.jsx)(fi,{className:"w-5 h-5 mr-2 text-green-500"}),"Live Activity Stream"]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-ping"}),(0,yn.jsx)("span",{className:"text-sm text-green-600 font-medium",children:"Live Updates"})]})]}),(0,yn.jsx)("div",{className:"space-y-4 max-h-80 overflow-y-auto",children:null===u||void 0===u?void 0:u.map((e,t)=>(0,yn.jsxs)("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[(0,yn.jsx)("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:(0,yn.jsx)(fi,{className:"w-4 h-4 text-blue-600"})}),(0,yn.jsxs)("div",{className:"flex-1",children:[(0,yn.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.action}),(0,yn.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,yn.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()}),(0,yn.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:"Priority: High"})]})]})]},t))})]}),(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[(0,yn.jsxs)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[(0,yn.jsx)(kl,{className:"w-5 h-5 mr-2 text-green-500"}),"System Health"]}),(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,yn.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"CPU Usage"}),(0,yn.jsx)("span",{className:"text-sm text-green-600",children:"23%"})]}),(0,yn.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,yn.jsx)("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"23%"}})})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,yn.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Memory"}),(0,yn.jsx)("span",{className:"text-sm text-yellow-600",children:"67%"})]}),(0,yn.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,yn.jsx)("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:"67%"}})})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,yn.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Storage"}),(0,yn.jsx)("span",{className:"text-sm text-blue-600",children:"45%"})]}),(0,yn.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,yn.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"45%"}})})]}),(0,yn.jsxs)("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-600",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,yn.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"API Response"}),(0,yn.jsx)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:"Excellent"})]}),(0,yn.jsx)("div",{className:"text-2xl font-bold text-green-600",children:"142ms"}),(0,yn.jsx)("div",{className:"text-xs text-gray-500",children:"Average response time"})]})]})]})]}),(0,yn.jsxs)("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 rounded-2xl p-8",children:[(0,yn.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 text-center",children:"Quick Management Actions"}),(0,yn.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,yn.jsxs)("button",{onClick:async()=>{try{const{kpis:e}=t,r=["Metric,Value,Date","Total Users,".concat(e.total_users||0,",").concat((new Date).toISOString()),"Total Revenue,".concat(e.total_revenue||0,",").concat((new Date).toISOString()),"Active Listings,".concat(e.active_products||0,",").concat((new Date).toISOString()),"Growth Rate,".concat(e.growth_rate||0,"%,").concat((new Date).toISOString())].join("\n"),n=new Blob([r],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),s=URL.createObjectURL(n);a.setAttribute("href",s),a.setAttribute("download","dashboard-export-".concat((new Date).toISOString().split("T")[0],".csv")),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),console.log("Data exported successfully")}catch(e){console.error("Export failed:",e)}},className:"flex flex-col items-center space-y-3 p-6 bg-white dark:bg-gray-800 rounded-xl shadow hover:shadow-lg transition-all duration-200 border border-gray-200 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-500",children:[(0,yn.jsx)("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-xl",children:(0,yn.jsx)(Qs,{className:"w-6 h-6 text-purple-600"})}),(0,yn.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"Export Data"})]}),(0,yn.jsxs)("button",{onClick:async()=>{try{window.location.reload()}catch(e){console.error("Refresh failed:",e)}},className:"flex flex-col items-center space-y-3 p-6 bg-white dark:bg-gray-800 rounded-xl shadow hover:shadow-lg transition-all duration-200 border border-gray-200 dark:border-gray-600 hover:border-green-300 dark:hover:border-green-500",children:[(0,yn.jsx)("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-xl",children:(0,yn.jsx)(Xi,{className:"w-6 h-6 text-green-600"})}),(0,yn.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"Refresh Stats"})]}),(0,yn.jsxs)("button",{onClick:async()=>{try{console.log("System backup initiated"),alert("System backup has been initiated successfully!")}catch(e){console.error("Backup failed:",e)}},className:"flex flex-col items-center space-y-3 p-6 bg-white dark:bg-gray-800 rounded-xl shadow hover:shadow-lg transition-all duration-200 border border-gray-200 dark:border-gray-600 hover:border-blue-300 dark:hover:border-blue-500",children:[(0,yn.jsx)("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-xl",children:(0,yn.jsx)(Rs,{className:"w-6 h-6 text-blue-600"})}),(0,yn.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"System Backup"})]}),(0,yn.jsxs)("button",{onClick:()=>{const{kpis:e,recent_activity:r}=t,n=window.open("","_blank");n.document.write('\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Cataloro Dashboard Report</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 20px; }\n            .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; }\n            .metric { background: #f8f9fa; padding: 15px; margin: 10px 0; border-radius: 8px; display: flex; justify-content: space-between; }\n            .value { font-weight: bold; color: #333; }\n            .section { margin: 20px 0; }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <h1>Cataloro Marketplace Dashboard Report</h1>\n            <p>Generated on: '.concat((new Date).toLocaleString(),'</p>\n          </div>\n          \n          <div class="section">\n            <h2>Key Performance Indicators</h2>\n            <div class="metric"><span>Total Users:</span><span class="value">').concat((e.total_users||0).toLocaleString(),'</span></div>\n            <div class="metric"><span>Total Revenue:</span><span class="value">\u20ac').concat((e.total_revenue||0).toLocaleString(),'</span></div>\n            <div class="metric"><span>Active Listings:</span><span class="value">').concat((e.active_products||0).toLocaleString(),'</span></div>\n            <div class="metric"><span>Total Deals:</span><span class="value">').concat((e.total_deals||0).toLocaleString(),"</span></div>\n          </div>\n        </body>\n      </html>\n    ")),n.document.close()},className:"flex flex-col items-center space-y-3 p-6 bg-white dark:bg-gray-800 rounded-xl shadow hover:shadow-lg transition-all duration-200 border border-gray-200 dark:border-gray-600 hover:border-orange-300 dark:hover:border-orange-500",children:[(0,yn.jsx)("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-xl",children:(0,yn.jsx)(qs,{className:"w-6 h-6 text-orange-600"})}),(0,yn.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"View Reports"})]})]})]})]})},El=ks("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),Al=e=>{let{user:t,onClose:r,onSave:n}=e;const[s,i]=(0,a.useState)({first_name:(null===t||void 0===t?void 0:t.first_name)||(null!==t&&void 0!==t&&t.full_name?t.full_name.split(" ")[0]:""),last_name:(null===t||void 0===t?void 0:t.last_name)||(null!==t&&void 0!==t&&t.full_name?t.full_name.split(" ").slice(1).join(" "):""),username:(null===t||void 0===t?void 0:t.username)||"",email:(null===t||void 0===t?void 0:t.email)||"",user_role:null!==t&&void 0!==t&&t.user_role||"admin"===(null===t||void 0===t?void 0:t.role)?"Admin":"User-Buyer",registration_status:(null===t||void 0===t?void 0:t.registration_status)||"Approved",is_active:void 0===(null===t||void 0===t?void 0:t.is_active)||t.is_active,password:"",confirmPassword:"",is_business:(null===t||void 0===t?void 0:t.is_business)||!1,company_name:(null===t||void 0===t?void 0:t.company_name)||"",country:(null===t||void 0===t?void 0:t.country)||"",vat_number:(null===t||void 0===t?void 0:t.vat_number)||""}),[o,l]=(0,a.useState)({}),[c,d]=(0,a.useState)(null),[u,h]=(0,a.useState)(!1),m=e=>{const{name:r,value:n,type:a,checked:c}=e.target;i((0,Ie.A)((0,Ie.A)({},s),{},{[r]:"checkbox"===a?c:n})),o[r]&&l(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[r]:void 0})),"username"===r&&n.length>=3?(async e=>{if(t&&t.username===e)d(!0);else{h(!0);try{const t=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/auth/check-username/").concat(e));if(t.ok){const e=await t.json();d(e.available)}else d(null)}catch(r){console.error("Error checking username:",r),d(null)}finally{h(!1)}}})(n):"username"===r&&d(null)};return(0,yn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md mx-4",children:[(0,yn.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t?"Edit User":"Create New User"})}),(0,yn.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!(()=>{const e={};return s.first_name.trim()||(e.first_name="First name is required"),s.last_name.trim()||(e.last_name="Last name is required"),s.username.trim()||(e.username="Username is required"),s.username.length<3&&(e.username="Username must be at least 3 characters"),!1===c&&(e.username="Username is not available"),s.email.trim()?/\S+@\S+\.\S+/.test(s.email)||(e.email="Email is invalid"):e.email="Email is required",t||s.password||(e.password="Password is required for new users"),s.password&&s.password.length<6&&(e.password="Password must be at least 6 characters"),s.password&&s.password!==s.confirmPassword&&(e.confirmPassword="Passwords do not match"),s.is_business&&(s.company_name.trim()||(e.company_name="Company name is required for business accounts"),s.country.trim()||(e.country="Country is required for business accounts")),l(e),0===Object.keys(e).length})())return;const r=(0,Ie.A)((0,Ie.A)({},s),{},{full_name:"".concat(s.first_name," ").concat(s.last_name).trim()});t&&(r.id=t.id),r.password||delete r.password,delete r.confirmPassword,n(r)},className:"p-6 space-y-4",children:[(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"First Name *"}),(0,yn.jsx)("input",{type:"text",value:s.first_name,onChange:m,name:"first_name",className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white ".concat(o.first_name?"border-red-500":"border-gray-300 dark:border-gray-600"),placeholder:"Enter first name"}),o.first_name&&(0,yn.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.first_name})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Last Name *"}),(0,yn.jsx)("input",{type:"text",value:s.last_name,onChange:m,name:"last_name",className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white ".concat(o.last_name?"border-red-500":"border-gray-300 dark:border-gray-600"),placeholder:"Enter last name"}),o.last_name&&(0,yn.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.last_name})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Username *"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)("input",{type:"text",name:"username",value:s.username,onChange:m,className:"w-full px-3 py-2 pr-10 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white ".concat(o.username?"border-red-500":"border-gray-300 dark:border-gray-600"),placeholder:"Enter username"}),s.username.length>=3&&(0,yn.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:u?(0,yn.jsx)("div",{className:"w-5 h-5 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}):!0===c?(0,yn.jsx)(Gi,{className:"w-5 h-5 text-green-500"}):!1===c?(0,yn.jsx)(Is,{className:"w-5 h-5 text-red-500"}):null})]}),s.username.length>=3&&null!==c&&(0,yn.jsx)("div",{className:"mt-1 text-sm ".concat(c?"text-green-600":"text-red-600"),children:c?"Username is available":"Username is not available"}),o.username&&(0,yn.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.username})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),(0,yn.jsx)("input",{type:"email",name:"email",value:s.email,onChange:m,className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white ".concat(o.email?"border-red-500":"border-gray-300 dark:border-gray-600"),placeholder:"Enter email address"}),o.email&&(0,yn.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.email})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"User Role *"}),(0,yn.jsxs)("select",{name:"user_role",value:s.user_role,onChange:m,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,yn.jsx)("option",{value:"User-Buyer",children:"User-Buyer"}),(0,yn.jsx)("option",{value:"User-Seller",children:"User-Seller"}),(0,yn.jsx)("option",{value:"Admin-Manager",children:"Admin-Manager"}),(0,yn.jsx)("option",{value:"Admin",children:"Admin"})]}),(0,yn.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Determines user permissions and access level"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Registration Status *"}),(0,yn.jsxs)("select",{name:"registration_status",value:s.registration_status,onChange:m,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,yn.jsx)("option",{value:"Approved",children:"Approved"}),(0,yn.jsx)("option",{value:"Pending",children:"Pending"}),(0,yn.jsx)("option",{value:"Rejected",children:"Rejected"})]}),(0,yn.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Controls user login access and approval status"})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("input",{type:"checkbox",name:"is_active",checked:s.is_active,onChange:m,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,yn.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Account Active"}),(0,yn.jsx)("span",{className:"text-xs text-gray-500",children:s.is_active?"User can access the platform":"User account is suspended"})]}),(0,yn.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-6",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,yn.jsx)("input",{type:"checkbox",id:"is_business",name:"is_business",checked:s.is_business,onChange:m,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),(0,yn.jsxs)("label",{htmlFor:"is_business",className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center",children:[(0,yn.jsx)(Ts,{className:"w-4 h-4 mr-2 text-blue-600"}),"Business Account"]})]}),s.is_business&&(0,yn.jsxs)("div",{className:"space-y-4 bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,yn.jsxs)("h4",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 flex items-center",children:[(0,yn.jsx)(Ts,{className:"w-4 h-4 mr-2"}),"Business Information"]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Company Name *"}),(0,yn.jsx)("input",{type:"text",name:"company_name",value:s.company_name,onChange:m,className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white ".concat(o.company_name?"border-red-500":"border-gray-300 dark:border-gray-600"),placeholder:"Enter company name"}),o.company_name&&(0,yn.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.company_name})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Country *"}),(0,yn.jsx)("input",{type:"text",name:"country",value:s.country,onChange:m,className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white ".concat(o.country?"border-red-500":"border-gray-300 dark:border-gray-600"),placeholder:"Enter country"}),o.country&&(0,yn.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.country})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["VAT Number",(0,yn.jsx)("span",{className:"text-xs text-gray-500 ml-1",children:"(Optional)"})]}),(0,yn.jsx)("input",{type:"text",name:"vat_number",value:s.vat_number,onChange:m,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter VAT number (if applicable)"})]})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Password ",t&&(0,yn.jsx)("span",{className:"text-xs text-gray-500",children:"(leave blank to keep current)"})]}),(0,yn.jsx)("input",{type:"password",name:"password",value:s.password,onChange:m,className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white ".concat(o.password?"border-red-500":"border-gray-300 dark:border-gray-600"),placeholder:t?"Enter new password (optional)":"Enter password"}),o.password&&(0,yn.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.password})]}),s.password&&(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm Password"}),(0,yn.jsx)("input",{type:"password",name:"confirmPassword",value:s.confirmPassword,onChange:m,className:"w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white ".concat(o.confirmPassword?"border-red-500":"border-gray-300 dark:border-gray-600"),placeholder:"Confirm password"}),o.confirmPassword&&(0,yn.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.confirmPassword})]}),(0,yn.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,yn.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),(0,yn.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:t?"Update User":"Create User"})]})]})]})})};const Cl=function(e){let{users:t,onUpdateUser:r,showToast:n}=e;const[s,i]=(0,a.useState)(null),[o,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)([]),[u,h]=(0,a.useState)(""),[m,f]=(0,a.useState)(""),[p,g]=(0,a.useState)("all"),[x,y]=(0,a.useState)("all"),[b,v]=(0,a.useState)("all"),w=t.filter(e=>{var t,r,n;const a=(null===(t=e.username)||void 0===t?void 0:t.toLowerCase().includes(m.toLowerCase()))||(null===(r=e.email)||void 0===r?void 0:r.toLowerCase().includes(m.toLowerCase()))||(null===(n=e.full_name)||void 0===n?void 0:n.toLowerCase().includes(m.toLowerCase())),s="all"===p||e.user_role===p||!e.user_role&&e.role===p,i="all"===x||"active"===x&&e.is_active||"inactive"===x&&!e.is_active,o="all"===b||e.registration_status===b||"Approved"===b&&!e.registration_status;return a&&s&&i&&o}),j=async function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||u;if(e&&0!==c.length){if(["delete","suspend","reject"].includes(e)){const t="delete"===e?"delete":"suspend"===e?"suspend":"reject";if(!window.confirm("Are you sure you want to ".concat(t," ").concat(c.length," users? This action cannot be undone.")))return}try{const t=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/admin/users/bulk-action"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e,user_ids:c})});if(t.ok){const a=await t.json(),{results:s}=a;s.success_count>0&&n("Successfully ".concat(e,"d ").concat(s.success_count," user").concat(1!==s.success_count?"s":""),"success"),s.failed_count>0&&(n("Failed to ".concat(e," ").concat(s.failed_count," user").concat(1!==s.failed_count?"s":""),"warning"),console.warn("Bulk action errors:",s.errors)),d([]),h(""),r()}else{const r=await t.json().catch(()=>({}));n("Failed to perform bulk ".concat(e,": ").concat(r.detail||"Unknown error"),"error")}}catch(t){console.error("Bulk action error:",t),n("Error performing bulk ".concat(e),"error")}}else n("No action selected or no users selected","warning")};return(0,yn.jsxs)("div",{className:"space-y-8",children:[(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[(0,yn.jsx)("div",{className:"cataloro-card-glass p-6",children:(0,yn.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-3 h-full min-h-[140px]",children:[(0,yn.jsx)("div",{className:"p-4 bg-blue-100/80 dark:bg-blue-900/30 rounded-2xl backdrop-blur-md flex items-center justify-center",children:(0,yn.jsx)(ii,{className:"w-8 h-8 text-blue-500"})}),(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"text-3xl font-bold mb-1 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent flex items-center justify-center",children:t.length}),(0,yn.jsx)("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Total Users"})]})]})}),(0,yn.jsx)("div",{className:"cataloro-card-glass p-6",children:(0,yn.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-3 h-full min-h-[140px]",children:[(0,yn.jsx)("div",{className:"p-4 bg-green-100/80 dark:bg-green-900/30 rounded-2xl backdrop-blur-md flex items-center justify-center",children:(0,yn.jsx)(Qi,{className:"w-8 h-8 text-green-500"})}),(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"text-3xl font-bold mb-1 bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent flex items-center justify-center",children:t.filter(e=>"Approved"===e.registration_status).length}),(0,yn.jsx)("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Active Users"})]})]})}),(0,yn.jsx)("div",{className:"cataloro-card-glass p-6",children:(0,yn.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-3 h-full min-h-[140px]",children:[(0,yn.jsx)("div",{className:"p-4 bg-purple-100/80 dark:bg-purple-900/30 rounded-2xl backdrop-blur-md flex items-center justify-center",children:(0,yn.jsx)(Rs,{className:"w-8 h-8 text-purple-500"})}),(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"text-3xl font-bold mb-1 bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent flex items-center justify-center",children:t.filter(e=>"Admin"===e.user_role||"Admin-Manager"===e.user_role||!e.user_role&&"admin"===e.role).length}),(0,yn.jsx)("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Admins"})]})]})}),(0,yn.jsx)("div",{className:"cataloro-card-glass p-6",children:(0,yn.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-3 h-full min-h-[140px]",children:[(0,yn.jsx)("div",{className:"p-4 bg-red-100/80 dark:bg-red-900/30 rounded-2xl backdrop-blur-md flex items-center justify-center",children:(0,yn.jsx)(El,{className:"w-8 h-8 text-red-500"})}),(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"text-3xl font-bold mb-1 bg-gradient-to-r from-red-600 to-pink-600 bg-clip-text text-transparent flex items-center justify-center",children:t.filter(e=>"Rejected"===e.registration_status||!e.is_active).length}),(0,yn.jsx)("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Suspended"})]})]})}),(0,yn.jsx)("div",{className:"cataloro-card-glass p-6",children:(0,yn.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-3 h-full min-h-[140px]",children:[(0,yn.jsx)("div",{className:"p-4 bg-yellow-100/80 dark:bg-yellow-900/30 rounded-2xl backdrop-blur-md flex items-center justify-center",children:(0,yn.jsx)(Js,{className:"w-8 h-8 text-yellow-500"})}),(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"text-3xl font-bold mb-1 bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent flex items-center justify-center",children:t.filter(e=>"Pending"===e.registration_status).length}),(0,yn.jsx)("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Pending"})]})]})})]}),(0,yn.jsx)("div",{className:"cataloro-card-glass p-6",children:(0,yn.jsxs)("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between space-y-6 xl:space-y-0",children:[(0,yn.jsxs)("div",{className:"flex-1 max-w-md",children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search Users"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(No,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 w-5 h-5"}),(0,yn.jsx)("input",{type:"text",placeholder:"Search by name, email, or username...",value:m,onChange:e=>f(e.target.value),className:"pl-10 cataloro-input w-full"})]})]}),(0,yn.jsxs)("div",{className:"flex items-end space-x-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Filter by Role"}),(0,yn.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"cataloro-input w-auto min-w-[140px]",children:[(0,yn.jsx)("option",{value:"all",children:"All Roles"}),(0,yn.jsx)("option",{value:"Admin",children:"Admin"}),(0,yn.jsx)("option",{value:"Admin-Manager",children:"Admin Manager"}),(0,yn.jsx)("option",{value:"User-Seller",children:"User Seller"}),(0,yn.jsx)("option",{value:"User-Buyer",children:"User Buyer"}),(0,yn.jsx)("option",{value:"admin",children:"Legacy Admin"}),(0,yn.jsx)("option",{value:"user",children:"Legacy User"})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Filter by Status"}),(0,yn.jsxs)("select",{value:x,onChange:e=>y(e.target.value),className:"cataloro-input w-auto min-w-[120px]",children:[(0,yn.jsx)("option",{value:"all",children:"All Status"}),(0,yn.jsx)("option",{value:"active",children:"Active"}),(0,yn.jsx)("option",{value:"inactive",children:"Suspended"})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Registration Status"}),(0,yn.jsxs)("select",{value:b,onChange:e=>v(e.target.value),className:"cataloro-input w-auto min-w-[120px]",children:[(0,yn.jsx)("option",{value:"all",children:"All Status"}),(0,yn.jsx)("option",{value:"Pending",children:"Pending"}),(0,yn.jsx)("option",{value:"Approved",children:"Approved"}),(0,yn.jsx)("option",{value:"Rejected",children:"Rejected"})]})]})]})]})}),c.length>0&&(0,yn.jsxs)("div",{className:"cataloro-card-glass p-6 border-2 border-blue-200 dark:border-blue-800 shadow-xl",children:[(0,yn.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-6 lg:space-y-0",children:[(0,yn.jsx)("div",{className:"flex items-center space-x-4",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"w-4 h-4 bg-blue-500 rounded-full animate-pulse"}),(0,yn.jsxs)("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[c.length," user",1!==c.length?"s":""," selected"]}),(0,yn.jsx)("div",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 text-sm font-medium rounded-full",children:"Ready for action"})]})}),(0,yn.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-3",children:[(0,yn.jsxs)("button",{onClick:()=>j("activate"),className:"flex items-center justify-center space-x-2 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-medium transition-all duration-200 transform hover:scale-105 shadow-lg",title:"Activate selected users",children:[(0,yn.jsx)(Qi,{className:"w-4 h-4"}),(0,yn.jsx)("span",{className:"hidden sm:inline",children:"Activate"})]}),(0,yn.jsxs)("button",{onClick:()=>j("suspend"),className:"flex items-center justify-center space-x-2 px-4 py-3 bg-orange-600 hover:bg-orange-700 text-white rounded-xl font-medium transition-all duration-200 transform hover:scale-105 shadow-lg",title:"Suspend selected users",children:[(0,yn.jsx)(El,{className:"w-4 h-4"}),(0,yn.jsx)("span",{className:"hidden sm:inline",children:"Suspend"})]}),(0,yn.jsxs)("button",{onClick:()=>j("delete"),className:"flex items-center justify-center space-x-2 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-medium transition-all duration-200 transform hover:scale-105 shadow-lg",title:"Delete selected users",children:[(0,yn.jsx)(ei,{className:"w-4 h-4"}),(0,yn.jsx)("span",{className:"hidden sm:inline",children:"Delete"})]}),(0,yn.jsxs)("button",{onClick:()=>j("approve"),className:"flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium transition-all duration-200 transform hover:scale-105 shadow-lg",title:"Approve pending users",children:[(0,yn.jsx)(Qi,{className:"w-4 h-4"}),(0,yn.jsx)("span",{className:"hidden sm:inline",children:"Approve"})]}),(0,yn.jsxs)("button",{onClick:()=>j("reject"),className:"flex items-center justify-center space-x-2 px-4 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-xl font-medium transition-all duration-200 transform hover:scale-105 shadow-lg",title:"Reject pending users",children:[(0,yn.jsx)(Is,{className:"w-4 h-4"}),(0,yn.jsx)("span",{className:"hidden sm:inline",children:"Reject"})]})]})]}),(0,yn.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,yn.jsxs)("div",{className:"flex flex-wrap gap-3 justify-center lg:justify-start",children:[(0,yn.jsxs)("button",{onClick:()=>{const e=t.filter(e=>c.includes(e.id)),r=[["ID","Name","Email","Role","Status","Registration Status"].join(","),...e.map(e=>[e.id,e.full_name||e.username,e.email,e.user_role||("admin"===e.role?"Admin":"User-Buyer"),e.is_active?"Active":"Suspended",e.registration_status||"Approved"].join(","))].join("\n"),a=new Blob([r],{type:"text/csv"}),s=window.URL.createObjectURL(a),i=document.createElement("a");i.href=s,i.download="selected_users_".concat((new Date).toISOString().split("T")[0],".csv"),i.click(),window.URL.revokeObjectURL(s),n("Exported ".concat(c.length," users to CSV"),"success")},className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors",title:"Export selected users to CSV",children:[(0,yn.jsx)(Qs,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Export CSV"})]}),(0,yn.jsxs)("button",{onClick:()=>{d([]),h("")},className:"flex items-center space-x-2 px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors",title:"Clear selection",children:[(0,yn.jsx)(Is,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Clear Selection"})]})]})})]}),(0,yn.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"User Management"}),(0,yn.jsxs)("button",{onClick:()=>{i(null),l(!0)},className:"cataloro-button-primary flex items-center space-x-2",children:[(0,yn.jsx)(_s,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Create New User"})]})]}),(0,yn.jsx)("div",{className:"cataloro-card-glass overflow-hidden",children:(0,yn.jsx)("div",{className:"overflow-x-auto",children:(0,yn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,yn.jsx)("thead",{className:"bg-gray-50/80 dark:bg-gray-800/80 backdrop-blur-md",children:(0,yn.jsxs)("tr",{children:[(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:(0,yn.jsx)("input",{type:"checkbox",onChange:e=>{return t=e.target.checked,void d(t?w.map(e=>e.id):[]);var t},checked:c.length===w.length&&w.length>0,className:"admin-checkbox purple-theme"})}),(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role & Badge"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Registration Status"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Active Status"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Joined"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,yn.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:w.map(e=>{var t,a;return(0,yn.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yn.jsx)("input",{type:"checkbox",checked:c.includes(e.id),onChange:t=>{return r=e.id,n=t.target.checked,void d(n?[...c,r]:c.filter(e=>e!==r));var r,n},className:"admin-checkbox purple-theme"})}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-white font-medium text-sm",children:(null===(t=e.full_name)||void 0===t?void 0:t.charAt(0))||(null===(a=e.username)||void 0===a?void 0:a.charAt(0))})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.full_name}),(0,yn.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.email})]})]})}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yn.jsx)("div",{className:"space-y-1",children:(0,yn.jsx)("div",{className:"flex items-center space-x-2",children:(0,yn.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("Admin"===e.user_role||"Admin-Manager"===e.user_role||!e.user_role&&"admin"===e.role?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300":"User-Seller"===e.user_role?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"),children:e.user_role||("admin"===e.role?"Admin":"User-Buyer")})})})}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("Approved"!==e.registration_status&&e.registration_status?"Pending"===e.registration_status?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"),children:e.registration_status||"APPROVED"}),"Pending"===e.registration_status&&(0,yn.jsxs)("div",{className:"flex space-x-1",children:[(0,yn.jsx)("button",{onClick:()=>(async e=>{try{const t=localStorage.getItem("cataloro_token");(await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/admin/users/").concat(e,"/approve"),{method:"PUT",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})).ok?(n("User approved successfully","success"),r()):n("Failed to approve user","error")}catch(t){n("Error approving user","error"),console.error("Approve user error:",t)}})(e.id),className:"p-1 text-green-600 hover:text-green-900 hover:bg-green-50 rounded transition-colors",title:"Approve User",children:(0,yn.jsx)(Qi,{className:"w-3 h-3"})}),(0,yn.jsx)("button",{onClick:()=>(async e=>{const t=prompt("Please provide a reason for rejection (optional):");if(null!==t)try{const a=localStorage.getItem("cataloro_token");(await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/admin/users/").concat(e,"/reject"),{method:"PUT",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({reason:t||"No reason provided"})})).ok?(n("User rejected successfully","success"),r()):n("Failed to reject user","error")}catch(a){n("Error rejecting user","error"),console.error("Reject user error:",a)}})(e.id),className:"p-1 text-red-600 hover:text-red-900 hover:bg-red-50 rounded transition-colors",title:"Reject User",children:(0,yn.jsx)(Is,{className:"w-3 h-3"})})]})]})}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yn.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.is_active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"),children:e.is_active?"ACTIVE":"SUSPENDED"})}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(e.created_at).toLocaleDateString()}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,yn.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,yn.jsx)("button",{onClick:()=>{i(e),l(!0)},className:"p-2 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Edit User",children:(0,yn.jsx)(Xs,{className:"w-4 h-4"})}),e.is_active?(0,yn.jsx)("button",{onClick:()=>(async e=>{try{const t=localStorage.getItem("cataloro_token");(await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/admin/users/").concat(e,"/suspend"),{method:"PUT",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})).ok?(n("User suspended successfully","success"),r()):n("Failed to suspend user","error")}catch(t){n("Error suspending user","error"),console.error("Suspend user error:",t)}})(e.id),className:"p-2 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Suspend User",children:(0,yn.jsx)(El,{className:"w-4 h-4"})}):(0,yn.jsx)("button",{onClick:()=>(async e=>{try{const t=localStorage.getItem("cataloro_token");(await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/admin/users/").concat(e,"/activate"),{method:"PUT",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})).ok?(n("User activated successfully","success"),r()):n("Failed to activate user","error")}catch(t){n("Error activating user","error"),console.error("Activate user error:",t)}})(e.id),className:"p-2 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 hover:bg-green-50 dark:hover:bg-green-900/30 rounded-lg transition-colors",title:"Activate User",children:(0,yn.jsx)(Qi,{className:"w-4 h-4"})}),(0,yn.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{const t=localStorage.getItem("cataloro_token");(await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/admin/users/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})).ok?(n("User deleted successfully","success"),r()):n("Failed to delete user","error")}catch(t){n("Error deleting user","error"),console.error("Delete user error:",t)}})(e.id),className:"p-2 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete User",children:(0,yn.jsx)(ei,{className:"w-4 h-4"})})]})})]},e.id)})})]})})}),o&&(0,yn.jsx)(Al,{user:s,onClose:()=>{l(!1),i(null)},onSave:s?async e=>{try{const t=localStorage.getItem("cataloro_token");(await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/admin/users/").concat(e.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(n("User updated successfully","success"),l(!1),i(null),r()):n("Failed to update user","error")}catch(t){n("Error updating user","error"),console.error("Update user error:",t)}}:async e=>{try{const t=localStorage.getItem("cataloro_token"),a=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/admin/users"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(e)});if(a.ok)n("User created successfully","success"),l(!1),i(null),r();else{const e=await a.json();n(e.detail||"Failed to create user","error")}}catch(t){n("Error creating user","error"),console.error("Create user error:",t)}}})]})},Ol=e=>{let{listing:t,onSave:r,onClose:n}=e;const[s,i]=(0,a.useState)((0,Ie.A)({title:(null===t||void 0===t?void 0:t.title)||"",price:(null===t||void 0===t?void 0:t.price)||"",description:(null===t||void 0===t?void 0:t.description)||"",condition:(null===t||void 0===t?void 0:t.condition)||"New",location:(null===t||void 0===t?void 0:t.location)||"",status:(null===t||void 0===t?void 0:t.status)||"active"},t));return(0,yn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold mb-4",children:t?"Edit Listing":"Create New Listing"}),(0,yn.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(s)},className:"space-y-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Title"}),(0,yn.jsx)("input",{type:"text",value:s.title,onChange:e=>i((0,Ie.A)((0,Ie.A)({},s),{},{title:e.target.value})),className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",required:!0})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Price (\u20ac)"}),(0,yn.jsx)("input",{type:"number",value:s.price,onChange:e=>i((0,Ie.A)((0,Ie.A)({},s),{},{price:parseFloat(e.target.value)})),className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",required:!0})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Description"}),(0,yn.jsx)("textarea",{value:s.description,onChange:e=>i((0,Ie.A)((0,Ie.A)({},s),{},{description:e.target.value})),className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",rows:"3"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Condition"}),(0,yn.jsxs)("select",{value:s.condition,onChange:e=>i((0,Ie.A)((0,Ie.A)({},s),{},{condition:e.target.value})),className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",children:[(0,yn.jsx)("option",{value:"New",children:"New"}),(0,yn.jsx)("option",{value:"Like New",children:"Like New"}),(0,yn.jsx)("option",{value:"Good",children:"Good"}),(0,yn.jsx)("option",{value:"Fair",children:"Fair"}),(0,yn.jsx)("option",{value:"Poor",children:"Poor"})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Location"}),(0,yn.jsx)("input",{type:"text",value:s.location,onChange:e=>i((0,Ie.A)((0,Ie.A)({},s),{},{location:e.target.value})),className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600"})]}),(0,yn.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,yn.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-600 border rounded-md hover:bg-gray-50",children:"Cancel"}),(0,yn.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:t?"Update":"Create"})]})]})]})})};const Tl=function(e){let{showToast:t}=e;const[r,n]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[o,l]=(0,a.useState)(""),[c,d]=(0,a.useState)("all"),[u,h]=(0,a.useState)("active"),[m,f]=(0,a.useState)([]),[p,g]=(0,a.useState)(!1),[x,y]=(0,a.useState)(null),[b,v]=(0,a.useState)(""),{allProducts:w}=Jn();(0,a.useEffect)(()=>{j()},[]);const j=async()=>{try{i(!0),console.log("\ud83d\udd04 Fetching listings from backend...");const a=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/listings?status=all"));if(a.ok){const t=await a.json();console.log("\ud83d\udcca Backend listings response:",t);let s=[];Array.isArray(t)?s=t:t.listings&&Array.isArray(t.listings)&&(s=t.listings);let i=[];try{const e=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/admin/orders"));if(e.ok)i=await e.json();else{const e=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/orders/seller/admin"));e.ok&&(i=await e.json())}}catch(e){console.log("\u26a0\ufe0f Could not fetch orders data:",e)}let o=[];try{const e=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/admin/users"));e.ok&&(o=await e.json())}catch(r){console.log("\u26a0\ufe0f Could not fetch users data:",r)}const l=s.map((e,t)=>{var r;const n=i.filter(t=>t.listing_id===e.id&&"pending"===t.status).length,a=o.find(t=>t.id===e.seller_id),s={id:e.seller_id,username:(null===a||void 0===a?void 0:a.username)||"Unknown User",full_name:(null===a||void 0===a?void 0:a.full_name)||(null===a||void 0===a?void 0:a.username)||"Unknown User"};return{id:e.id||e._id||"backend-".concat(t),title:e.title,price:e.price,status:e.status||"active",seller_id:e.seller_id,seller_username:s.username,seller_full_name:s.full_name,created_date:e.created_at?new Date(e.created_at).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],views:e.views||Math.floor(1e3*Math.random()),image:(null===(r=e.images)||void 0===r?void 0:r[0])||e.image,description:e.description,condition:e.condition||"New",location:e.location||"Unknown Location",pendingOrders:n}});console.log("\u2705 Successfully loaded",l.length,"listings from backend with seller info"),n(l)}else console.error("\u274c Backend fetch failed with status:",a.status),null===t||void 0===t||t("Failed to load listings from backend","error"),n([])}catch(a){console.error("\u274c Error fetching listings:",a),null===t||void 0===t||t("Error loading listings from backend","error"),n([])}finally{i(!1)}},k=r.filter(e=>{var t;const r=!o||e.title.toLowerCase().includes(o.toLowerCase())||(null===(t=e.seller_username)||void 0===t?void 0:t.toLowerCase().includes(o.toLowerCase()));let n=!0;switch(u){case"active":n="active"===e.status||"approved"===e.status;break;case"pending":const t=e.pendingOrders&&e.pendingOrders>0;n="pending"===e.status||"awaiting_approval"===e.status||t;break;case"inactive":n="inactive"===e.status||"deactivated"===e.status||"paused"===e.status;break;case"expired":n="expired"===e.status;break;case"sold":n="sold"===e.status||"completed"===e.status||"finished"===e.status;break;default:n=!0}return r&&n}),N=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;console.log("\ud83d\ude80 HANDLEBULKACTION CALLED!","Action:",e,"Selected:",m);const a=e||b;if(console.log("\ud83d\udd0d handleBulkAction called with:",a,"selectedListings:",m.length),!a||0===m.length)return console.log("\u274c Early return: no action or no selected listings"),void(null===t||void 0===t||t("No action selected or no listings selected","error"));try{if(console.log("\ud83d\udd0d Starting bulk action:",a),["activate","deactivate","delete","feature","unfeature","approve","reject"].includes(a)){console.log("\ud83d\udd0d Performing backend operations for:",m);const e=m.map(async e=>{const t=r.find(t=>t.id===e);if(!t)return console.log("\u274c Listing not found:",e),null;if(console.log("\ud83d\udd0d Processing listing:",e,"action:",a),"delete"===a){console.log("\ud83d\uddd1\ufe0f Deleting listing:",e);const t="".concat("https://market-refactor-1.preview.emergentagent.com","/api/listings/").concat(e);console.log("\ud83d\udd0d Delete URL:",t);const r=await fetch(t,{method:"DELETE"});return console.log("\ud83d\udd0d Delete request completed for:",e,"Status:",r.status),r}{let r=(0,Ie.A)({},t);switch(a){case"activate":r.status="active";break;case"deactivate":r.status="inactive";break;case"feature":r.featured=!0;break;case"unfeature":r.featured=!1;break;case"approve":r.status="approved",r.approved=!0;break;case"reject":r.status="rejected",r.rejected=!0}return fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/listings/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})}});console.log("\u23f3 Waiting for all operations to complete...");const t=await Promise.all(e);console.log("\u2705 All operations completed. Results:",t.map(e=>e?e.status:"null"));const n=t.filter(e=>e&&!e.ok);if(console.log("\ud83d\udd0d Failed operations count:",n.length),n.length>0)throw console.error("\u274c Failed operations:",n),new Error("".concat(n.length," operations failed"));console.log("\u2705 All operations successful, updating local state...")}switch(console.log("\ud83d\udd04 Updating local state for action:",a),a){case"activate":n(r.map(e=>m.includes(e.id)?(0,Ie.A)((0,Ie.A)({},e),{},{status:"active"}):e)),null===t||void 0===t||t("".concat(m.length," listings activated"),"success");break;case"deactivate":n(r.map(e=>m.includes(e.id)?(0,Ie.A)((0,Ie.A)({},e),{},{status:"inactive"}):e)),null===t||void 0===t||t("".concat(m.length," listings deactivated"),"success");break;case"delete":console.log("\ud83d\uddd1\ufe0f Executing delete case. Filtering out listings:",m);const e=r.length,s=r.filter(e=>!m.includes(e.id));console.log("\ud83d\udd0d Before: ".concat(e," listings, After: ").concat(s.length," listings")),n(s),null===t||void 0===t||t("".concat(m.length," listings deleted successfully"),"success"),console.log("\ud83d\udd04 Refreshing listings from backend after bulk delete..."),await j(),console.log("\u2705 Listings refreshed after bulk delete");break;case"feature":n(r.map(e=>m.includes(e.id)?(0,Ie.A)((0,Ie.A)({},e),{},{featured:!0}):e)),null===t||void 0===t||t("".concat(m.length," listings featured"),"success");break;case"unfeature":n(r.map(e=>m.includes(e.id)?(0,Ie.A)((0,Ie.A)({},e),{},{featured:!1}):e)),null===t||void 0===t||t("".concat(m.length," listings unfeatured"),"success");break;case"approve":n(r.map(e=>m.includes(e.id)?(0,Ie.A)((0,Ie.A)({},e),{},{status:"approved",approved:!0}):e)),null===t||void 0===t||t("".concat(m.length," listings approved"),"success");break;case"reject":n(r.map(e=>m.includes(e.id)?(0,Ie.A)((0,Ie.A)({},e),{},{status:"rejected",rejected:!0}):e)),null===t||void 0===t||t("".concat(m.length," listings rejected"),"success");break;case"duplicate":const i=m.map(async e=>{const t=r.find(t=>t.id===e),n=(0,Ie.A)((0,Ie.A)({},t),{},{title:"".concat(t.title," (Copy)"),created_date:(new Date).toISOString().split("T")[0]});return delete n.id,fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/listings"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})});await Promise.all(i),await j(),null===t||void 0===t||t("".concat(m.length," listings duplicated"),"success");break;case"export":null===t||void 0===t||t("".concat(m.length," listings exported"),"success");break;case"bulk-edit":null===t||void 0===t||t("Bulk edit mode activated for ".concat(m.length," listings"),"info");break;default:null===t||void 0===t||t("Unknown action: ".concat(a),"error")}f([]),v(""),console.log("\u2705 Bulk action completed successfully")}catch(s){console.error("\u274c Bulk action error:",s),null===t||void 0===t||t("Error performing bulk action: ".concat(s.message),"error")}},[_,S]=(0,a.useState)(!1),[E,A]=(0,a.useState)(null),[C,O]=(0,a.useState)([]),T=e=>{console.log("\ud83d\udd0d Requesting bulk action:",e,"for",m.length,"listings"),0!==m.length?["delete","reject"].includes(e)?(A(e),O([...m]),S(!0)):N(e):null===t||void 0===t||t("No listings selected","error")};return s?(0,yn.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"w-12 h-12 border-4 border-purple-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading listings..."})]})}):(0,yn.jsxs)("div",{className:"space-y-8",children:[(0,yn.jsx)("div",{className:"cataloro-card-glass p-8",children:(0,yn.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-6 lg:space-y-0",children:[(0,yn.jsxs)("div",{className:"text-center lg:text-left",children:[(0,yn.jsx)("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-3",children:"Listings Management"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-lg",children:"Comprehensive marketplace listings control center"})]}),(0,yn.jsxs)("div",{className:"flex justify-center lg:justify-end items-center space-x-4",children:[(0,yn.jsxs)("button",{onClick:async()=>{console.log("\ud83d\udd04 Refreshing listings..."),null===t||void 0===t||t("Refreshing listings...","info"),n([]),await j(),null===t||void 0===t||t("\u2705 Listings refreshed successfully","success")},className:"cataloro-button-secondary flex items-center px-4 py-3",title:"Refresh listings from server",children:[(0,yn.jsx)(Xi,{className:"w-5 h-5 mr-2"}),"Refresh"]}),(0,yn.jsxs)("button",{onClick:()=>g(!0),className:"cataloro-button-primary flex items-center px-6 py-3",children:[(0,yn.jsx)(Ms,{className:"w-5 h-5 mr-2"}),"Create New Listing"]})]})]})}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,yn.jsx)("div",{className:"cataloro-card-glass p-6 text-center",children:(0,yn.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,yn.jsx)("div",{className:"p-4 bg-blue-100/80 dark:bg-blue-900/30 rounded-2xl backdrop-blur-md",children:(0,yn.jsx)(Ms,{className:"w-8 h-8 text-blue-500"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:r.length}),(0,yn.jsx)("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wide",children:"Total Listings"})]})]})}),(0,yn.jsx)("div",{className:"cataloro-card-glass p-6 text-center",children:(0,yn.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,yn.jsx)("div",{className:"p-4 bg-green-100/80 dark:bg-green-900/30 rounded-2xl backdrop-blur-md",children:(0,yn.jsx)(Qi,{className:"w-8 h-8 text-green-500"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:r.filter(e=>"active"===e.status).length}),(0,yn.jsx)("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wide",children:"Active"})]})]})}),(0,yn.jsx)("div",{className:"cataloro-card-glass p-6 text-center",children:(0,yn.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,yn.jsx)("div",{className:"p-4 bg-orange-100/80 dark:bg-orange-900/30 rounded-2xl backdrop-blur-md",children:(0,yn.jsx)(ti,{className:"w-8 h-8 text-orange-500"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-orange-600 to-yellow-600 bg-clip-text text-transparent",children:r.reduce((e,t)=>e+(t.views||0),0)}),(0,yn.jsx)("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wide",children:"Total Views"})]})]})}),(0,yn.jsx)("div",{className:"cataloro-card-glass p-6 text-center",children:(0,yn.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,yn.jsx)("div",{className:"p-4 bg-red-100/80 dark:bg-red-900/30 rounded-2xl backdrop-blur-md",children:(0,yn.jsx)(Es,{className:"w-8 h-8 text-red-500"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("div",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-red-600 to-pink-600 bg-clip-text text-transparent",children:["\u20ac",r.reduce((e,t)=>e+(t.price||0),0).toLocaleString()]}),(0,yn.jsx)("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wide",children:"Total Value"})]})]})})]}),(0,yn.jsx)("div",{className:"cataloro-card-glass p-6",children:(0,yn.jsxs)("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between space-y-6 xl:space-y-0",children:[(0,yn.jsxs)("div",{className:"flex-1 max-w-md",children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search Listings"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(No,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 w-5 h-5"}),(0,yn.jsx)("input",{type:"text",placeholder:"Search by title, seller, or category...",value:o,onChange:e=>l(e.target.value),className:"pl-10 cataloro-input w-full"})]})]}),(0,yn.jsx)("div",{className:"flex items-end space-x-4",children:(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Filter by Status"}),(0,yn.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"cataloro-input w-auto min-w-[150px]",children:[(0,yn.jsx)("option",{value:"all",children:"All Status"}),(0,yn.jsx)("option",{value:"active",children:"Active"}),(0,yn.jsx)("option",{value:"inactive",children:"Inactive"})]})]})})]})}),m.length>0&&(0,yn.jsxs)("div",{className:"cataloro-card-glass p-6 border-2 border-green-200 dark:border-green-800 shadow-xl",children:[(0,yn.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-6 lg:space-y-0",children:[(0,yn.jsx)("div",{className:"flex items-center space-x-4",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded-full animate-pulse"}),(0,yn.jsxs)("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[m.length," listing",1!==m.length?"s":""," selected"]}),(0,yn.jsx)("div",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 text-sm font-medium rounded-full",children:"Ready for management"})]})}),(0,yn.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-3",children:[(0,yn.jsxs)("button",{onClick:()=>T("activate"),className:"flex items-center justify-center space-x-2 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-medium transition-all duration-200 transform hover:scale-105 shadow-lg",title:"Activate selected listings",children:[(0,yn.jsx)(Qi,{className:"w-4 h-4"}),(0,yn.jsx)("span",{className:"hidden sm:inline",children:"Activate"})]}),(0,yn.jsxs)("button",{onClick:()=>T("deactivate"),className:"flex items-center justify-center space-x-2 px-4 py-3 bg-orange-600 hover:bg-orange-700 text-white rounded-xl font-medium transition-all duration-200 transform hover:scale-105 shadow-lg",title:"Deactivate selected listings",children:[(0,yn.jsx)(El,{className:"w-4 h-4"}),(0,yn.jsx)("span",{className:"hidden sm:inline",children:"Deactivate"})]}),(0,yn.jsxs)("button",{onClick:()=>T("delete"),className:"flex items-center justify-center space-x-2 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-medium transition-all duration-200 transform hover:scale-105 shadow-lg",title:"Delete selected listings",children:[(0,yn.jsx)(ei,{className:"w-4 h-4"}),(0,yn.jsx)("span",{className:"hidden sm:inline",children:"Delete"})]}),(0,yn.jsxs)("button",{onClick:()=>T("feature"),className:"flex items-center justify-center space-x-2 px-4 py-3 bg-yellow-600 hover:bg-yellow-700 text-white rounded-xl font-medium transition-all duration-200 transform hover:scale-105 shadow-lg",title:"Feature selected listings",children:[(0,yn.jsx)(Gs,{className:"w-4 h-4"}),(0,yn.jsx)("span",{className:"hidden sm:inline",children:"Feature"})]}),(0,yn.jsxs)("button",{onClick:()=>T("approve"),className:"flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium transition-all duration-200 transform hover:scale-105 shadow-lg",title:"Approve selected listings",children:[(0,yn.jsx)(Rs,{className:"w-4 h-4"}),(0,yn.jsx)("span",{className:"hidden sm:inline",children:"Approve"})]})]})]}),(0,yn.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,yn.jsxs)("div",{className:"flex flex-wrap items-center justify-center lg:justify-start gap-3",children:[(0,yn.jsxs)("button",{onClick:()=>N("reject"),className:"flex items-center space-x-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium transition-colors",children:[(0,yn.jsx)(Is,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Reject"})]}),(0,yn.jsxs)("button",{onClick:()=>N("duplicate"),className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors",children:[(0,yn.jsx)(Ms,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Duplicate"})]}),(0,yn.jsxs)("button",{onClick:()=>N("export"),className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors",children:[(0,yn.jsx)(Qs,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Export Selected"})]}),(0,yn.jsxs)("button",{onClick:()=>N("bulk-edit"),className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors",children:[(0,yn.jsx)(Xs,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Bulk Edit"})]}),(0,yn.jsxs)("button",{onClick:()=>f([]),className:"flex items-center space-x-2 px-4 py-2 bg-gray-400 hover:bg-gray-500 text-white rounded-lg font-medium transition-colors",children:[(0,yn.jsx)(Is,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Clear Selection"})]})]})})]}),(0,yn.jsxs)("div",{className:"cataloro-card-glass overflow-hidden",children:[(0,yn.jsxs)("div",{className:"px-6 py-4 border-b border-white/10 dark:border-white/10",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,yn.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Listings Management"}),(0,yn.jsxs)("span",{className:"bg-blue-100/80 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 px-3 py-1 rounded-full text-sm font-medium backdrop-blur-md",children:[k.length," results"]})]}),(0,yn.jsx)("div",{className:"flex items-center space-x-1 bg-gray-100/50 dark:bg-gray-800/50 rounded-lg p-1",children:[{id:"active",label:"Active",count:r.filter(e=>"active"===e.status||"approved"===e.status).length,color:"green"},{id:"pending",label:"Pending",count:r.filter(e=>"pending"===e.status||"awaiting_approval"===e.status||e.pendingOrders&&e.pendingOrders>0).length,color:"yellow"},{id:"inactive",label:"Inactive",count:r.filter(e=>"inactive"===e.status||"deactivated"===e.status||"paused"===e.status).length,color:"gray"},{id:"expired",label:"Expired",count:r.filter(e=>"expired"===e.status).length,color:"red"},{id:"sold",label:"Sold",count:r.filter(e=>"sold"===e.status||"completed"===e.status||"finished"===e.status).length,color:"blue"}].map(e=>(0,yn.jsxs)("button",{onClick:()=>{h(e.id),d(e.id)},className:"flex items-center space-x-2 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ".concat(u===e.id?"".concat("green"===e.color?"bg-green-600 text-white":"yellow"===e.color?"bg-yellow-600 text-white":"gray"===e.color?"bg-gray-600 text-white":"red"===e.color?"bg-red-600 text-white":"bg-blue-600 text-white"," shadow-lg"):"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-white/50 dark:hover:bg-gray-700/50"),children:[(0,yn.jsx)("span",{children:e.label}),(0,yn.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs ".concat(u===e.id?"bg-white/20 text-white":"".concat("green"===e.color?"bg-green-100 text-green-800":"yellow"===e.color?"bg-yellow-100 text-yellow-800":"gray"===e.color?"bg-gray-100 text-gray-800":"red"===e.color?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"," dark:bg-opacity-20")),children:e.count})]},e.id))})]}),"active"!==u&&(0,yn.jsx)("div",{className:"px-6 py-3 bg-blue-50/50 dark:bg-blue-900/20 border-b border-blue-200/50 dark:border-blue-800/50",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("span",{className:"text-blue-800 dark:text-blue-300 text-sm font-medium",children:["Showing ",u," listings (",k.length," items)"]}),(0,yn.jsx)("button",{onClick:()=>{h("active"),d("active")},className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm font-medium",children:"Show Active"})]})}),(0,yn.jsx)("div",{className:"max-w-full",children:(0,yn.jsxs)("table",{className:"w-full min-w-full",children:[(0,yn.jsx)("thead",{className:"bg-gray-50/80 dark:bg-gray-800/50 backdrop-blur-sm",children:(0,yn.jsxs)("tr",{children:[(0,yn.jsx)("th",{className:"px-3 py-4 text-left w-12",children:(0,yn.jsx)("input",{type:"checkbox",checked:m.length===k.length&&k.length>0,onChange:e=>{return t=e.target.checked,void f(t?k.map(e=>e.id):[]);var t},className:"admin-checkbox"})}),(0,yn.jsx)("th",{className:"px-4 py-4 text-left text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wider min-w-[280px]",children:"Listing Details"}),(0,yn.jsx)("th",{className:"px-3 py-4 text-left text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wider w-24",children:"Price"}),(0,yn.jsx)("th",{className:"px-3 py-4 text-left text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wider w-32",children:"Seller"}),(0,yn.jsx)("th",{className:"px-3 py-4 text-left text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wider w-24",children:"Status"}),(0,yn.jsx)("th",{className:"px-3 py-4 text-left text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wider w-20",children:"Views"}),(0,yn.jsx)("th",{className:"px-3 py-4 text-left text-sm font-bold text-gray-900 dark:text-white uppercase tracking-wider w-24",children:"Actions"})]})}),(0,yn.jsx)("tbody",{className:"divide-y divide-gray-200/50 dark:divide-gray-700/50",children:k.map(e=>{var a;return(0,yn.jsxs)("tr",{className:"group",children:[(0,yn.jsx)("td",{className:"px-3 py-4",children:(0,yn.jsx)("input",{type:"checkbox",checked:m.includes(e.id),onChange:t=>{return r=e.id,n=t.target.checked,void f(n?[...m,r]:m.filter(e=>e!==r));var r,n},className:"admin-checkbox"})}),(0,yn.jsx)("td",{className:"px-4 py-4",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"w-12 h-12 rounded-lg overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center flex-shrink-0",children:e.image?(0,yn.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover"}):(0,yn.jsx)(Ms,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})}),(0,yn.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,yn.jsx)("h4",{className:"text-base font-semibold text-gray-900 dark:text-white truncate",title:e.title,children:e.title}),(0,yn.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.created_date})]})]})}),(0,yn.jsx)("td",{className:"px-3 py-4",children:(0,yn.jsxs)("span",{className:"text-lg font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent whitespace-nowrap",children:["\u20ac",e.price]})}),(0,yn.jsx)("td",{className:"px-3 py-4",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("div",{className:"w-6 h-6 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,yn.jsx)("span",{className:"text-white font-medium text-xs",children:(null===(a=e.seller_username)||void 0===a?void 0:a.charAt(0))||"U"})}),(0,yn.jsx)(Le,{to:"/profile/".concat(e.seller_id),className:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium truncate hover:underline",title:"View ".concat(e.seller_full_name,"'s profile"),children:e.seller_username})]})}),(0,yn.jsx)("td",{className:"px-3 py-4",children:(0,yn.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium backdrop-blur-md ".concat("active"===e.status?"bg-green-100/80 dark:bg-green-900/30 text-green-800 dark:text-green-300":"bg-red-100/80 dark:bg-red-900/30 text-red-800 dark:text-red-300"),children:"active"===e.status?"ACTIVE":"INACTIVE"})}),(0,yn.jsx)("td",{className:"px-3 py-4",children:(0,yn.jsx)("div",{className:"flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-sm text-gray-900 dark:text-white font-medium",children:e.views})})}),(0,yn.jsx)("td",{className:"px-3 py-4",children:(0,yn.jsxs)("div",{className:"flex items-center justify-center space-x-1",children:[(0,yn.jsx)("button",{onClick:()=>y(e),className:"p-1.5 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 rounded hover:bg-blue-50/50 dark:hover:bg-blue-900/20",title:"Edit listing",children:(0,yn.jsx)(Xs,{className:"w-3.5 h-3.5"})}),(0,yn.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this listing? This action cannot be undone."))try{console.log("\ud83d\uddd1\ufe0f Deleting individual listing:",e);const a="".concat("https://market-refactor-1.preview.emergentagent.com","/api/listings/").concat(e);console.log("\ud83d\udd0d Delete URL:",a);const s=await fetch(a,{method:"DELETE"});if(!s.ok)throw new Error("Failed to delete listing: ".concat(s.status));console.log("\u2705 Backend delete successful for listing:",e),n(r.filter(t=>t.id!==e)),null===t||void 0===t||t("Listing deleted successfully","success")}catch(a){console.error("\u274c Error deleting listing:",a),null===t||void 0===t||t("Failed to delete listing: ".concat(a.message),"error")}})(e.id),className:"p-1.5 text-gray-400 hover:text-red-600 dark:hover:text-red-400 rounded hover:bg-red-50/50 dark:hover:bg-red-900/20",title:"Delete listing",children:(0,yn.jsx)(ei,{className:"w-3.5 h-3.5"})})]})})]},e.id)})})]})}),0===k.length&&(0,yn.jsxs)("div",{className:"text-center py-16",children:[(0,yn.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-gray-400/20 to-gray-500/20 dark:from-gray-600/20 dark:to-gray-700/20 rounded-2xl flex items-center justify-center mx-auto mb-6",children:(0,yn.jsx)(Ms,{className:"w-10 h-10 text-gray-400 dark:text-gray-500"})}),(0,yn.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:"No listings found"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:o?"Try adjusting your search terms":"Create your first listing to get started"}),(0,yn.jsx)("button",{onClick:()=>g(!0),className:"cataloro-button-primary",children:"Create New Listing"})]})]}),(p||x)&&(0,yn.jsx)(Ol,{listing:x,onSave:x?e=>{n(r.map(t=>t.id===x.id?(0,Ie.A)((0,Ie.A)({},t),e):t)),y(null),null===t||void 0===t||t("Listing updated successfully","success")}:e=>{const a=(0,Ie.A)((0,Ie.A)({id:"new-".concat(Date.now())},e),{},{created_date:(new Date).toISOString().split("T")[0],views:0,status:"active"});n([a,...r]),g(!1),null===t||void 0===t||t("Listing created successfully","success")},onClose:()=>{g(!1),y(null)}}),_&&(0,yn.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl max-w-md mx-4 shadow-2xl",children:(0,yn.jsxs)("div",{className:"p-6",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,yn.jsx)("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:"delete"===E?(0,yn.jsx)(ei,{className:"w-6 h-6 text-red-600 dark:text-red-400"}):(0,yn.jsx)(Yi,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Confirm ","delete"===E?"Deletion":"Action"]}),(0,yn.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"This action cannot be undone"})]})]}),(0,yn.jsxs)("div",{className:"mb-6",children:[(0,yn.jsxs)("p",{className:"text-gray-700 dark:text-gray-300",children:["Are you sure you want to ",(0,yn.jsx)("span",{className:"font-semibold text-red-600 dark:text-red-400",children:E})," these"," ",(0,yn.jsx)("span",{className:"font-semibold",children:C.length})," listing",1!==C.length?"s":"","?"]}),"delete"===E&&(0,yn.jsx)("div",{className:"mt-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:(0,yn.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,yn.jsx)(Yi,{className:"w-4 h-4 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0"}),(0,yn.jsxs)("p",{className:"text-sm text-red-800 dark:text-red-200",children:[(0,yn.jsx)("strong",{children:"Warning:"})," Deleted listings will be permanently removed from the marketplace and cannot be recovered."]})]})})]}),(0,yn.jsxs)("div",{className:"flex space-x-3",children:[(0,yn.jsx)("button",{onClick:()=>S(!1),className:"flex-1 px-4 py-3 bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500 text-gray-800 dark:text-gray-200 rounded-xl font-medium transition-colors",children:"Cancel"}),(0,yn.jsx)("button",{onClick:async()=>{if(console.log("\ud83d\ude80 EXECUTING confirmed bulk action:",E),console.log("\ud83d\udd0d Listings to process:",C),S(!1),E&&C.length>0){console.log("\ud83c\udfaf Calling handleBulkAction directly with confirmed listings");f(C),await N(E),A(null),O([])}else console.log("\u274c No confirmAction or confirmListings")},className:"flex-1 px-4 py-3 text-white rounded-xl font-medium transition-colors ".concat("delete"===E?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"),children:"delete"===E?"Delete Forever":"Confirm ".concat(E)})]})]})})})]})};const Pl=function(){const[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(!0);(0,a.useEffect)(()=>{s()},[]);const s=async()=>{n(!0);try{const e=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/admin/notifications"));if(e.ok){const r=await e.json();t(r.slice(0,10))}else{const e=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/user/notifications/admin"));if(e.ok){const r=await e.json();t(r.slice(0,10))}}}catch(e){console.error("Failed to fetch system notifications:",e),t([])}finally{n(!1)}};return r?(0,yn.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,yn.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,yn.jsx)("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading notifications..."})]}):0===e.length?(0,yn.jsxs)("div",{className:"text-center py-8",children:[(0,yn.jsx)(Os,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No System Notifications"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"No notifications are currently active in the system."})]}):(0,yn.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,yn.jsx)("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:(0,yn.jsxs)("div",{className:"flex items-start justify-between",children:[(0,yn.jsxs)("div",{className:"flex-1",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,yn.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("message"===e.type?"bg-blue-500":"buy_approved"===e.type?"bg-green-500":"favorite"===e.type?"bg-pink-500":"buy_request"===e.type?"bg-orange-500":"payment"===e.type?"bg-green-600":"bg-gray-500")}),(0,yn.jsx)("h5",{className:"font-medium text-gray-900 dark:text-white",children:e.title}),(0,yn.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(e.is_read?"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"),children:e.is_read?"Read":"Unread"})]}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:e.message}),(0,yn.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-500",children:[(0,yn.jsxs)("span",{children:["To: ",e.user_email||"System"]}),(0,yn.jsx)("span",{children:"\u2022"}),(0,yn.jsx)("span",{children:new Date(e.created_at).toLocaleString()})]})]}),(0,yn.jsx)("button",{onClick:()=>(async e=>{try{(await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/admin/notifications/").concat(e),{method:"DELETE"})).ok&&t(t=>t.filter(t=>t.id!==e))}catch(r){console.error("Failed to delete notification:",r)}})(e.id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 rounded-md hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",title:"Delete notification",children:(0,yn.jsx)(Os,{className:"w-4 h-4"})})]})},e.id))})};function Ll(e){let{activeTab:t,setActiveTab:r,tabs:n,isMobile:a=!1}=e;return(0,yn.jsx)("div",{className:a?"flex overflow-x-auto scrollbar-hide bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6":"flex flex-wrap bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:n.map(e=>{const n=e.icon,s=t===e.id;return(0,yn.jsxs)("button",{onClick:()=>r(e.id),className:"\n              flex items-center space-x-2 px-4 py-3 font-medium transition-all duration-200 whitespace-nowrap\n              ".concat(s?"bg-purple-600 text-white shadow-lg scale-105":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-purple-600 dark:hover:text-purple-400","\n              ").concat(a?"flex-shrink-0":"flex-1 justify-center first:rounded-l-lg last:rounded-r-lg","\n            "),children:[(0,yn.jsx)(n,{className:"w-4 h-4"}),(0,yn.jsx)("span",{className:a?"text-sm":"hidden md:block",children:a?e.shortLabel:e.label})]},e.id)})})}function Ml(e){let{user:t,onShowToast:r}=e;return(0,yn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-2xl p-8 text-white mb-8",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:"Admin Panel"}),(0,yn.jsx)("p",{className:"text-purple-100 text-lg",children:"Manage your marketplace with comprehensive tools and insights"})]}),(0,yn.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[(0,yn.jsxs)("div",{className:"bg-white/20 backdrop-blur-md rounded-lg px-4 py-2",children:[(0,yn.jsx)("p",{className:"text-sm text-purple-100",children:"Welcome back,"}),(0,yn.jsx)("p",{className:"font-semibold",children:(null===t||void 0===t?void 0:t.first_name)||(null===t||void 0===t?void 0:t.email)||"Admin"})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),(0,yn.jsx)("span",{className:"text-sm",children:"System Operational"})]})]})]})})}function Rl(e){let{showToast:t}=e;return(0,yn.jsxs)("div",{className:"cataloro-card-glass p-8 text-center",children:[(0,yn.jsx)(gi,{className:"w-16 h-16 mx-auto mb-4 text-yellow-500"}),(0,yn.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Ads Management"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Ads management functionality will be available soon."})]})}function Dl(e){let{showToast:t}=e;return(0,yn.jsxs)("div",{className:"cataloro-card-glass p-8 text-center",children:[(0,yn.jsx)(Ws,{className:"w-16 h-16 mx-auto mb-4 text-blue-500"}),(0,yn.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Content Management"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Content management functionality will be available soon."})]})}function Il(e){let{siteConfiguration:t,onUpdateConfiguration:r,showToast:n}=e;return(0,yn.jsxs)("div",{className:"cataloro-card-glass p-8 text-center",children:[(0,yn.jsx)(Ps,{className:"w-16 h-16 mx-auto mb-4 text-purple-500"}),(0,yn.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Site Settings"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Site settings functionality will be available soon."})]})}function Fl(e){let{showToast:t}=e;return(0,yn.jsxs)("div",{className:"cataloro-card-glass p-8 text-center",children:[(0,yn.jsx)(vo,{className:"w-16 h-16 mx-auto mb-4 text-green-500"}),(0,yn.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Catalyst Database"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Catalyst database functionality will be available soon."})]})}function Bl(e){let{showToast:t}=e;return(0,yn.jsxs)("div",{className:"cataloro-card-glass p-8 text-center",children:[(0,yn.jsx)(Us,{className:"w-16 h-16 mx-auto mb-4 text-indigo-500"}),(0,yn.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Site Administration"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Site administration functionality will be available soon."})]})}const Ul=function(){const[e,t]=(0,a.useState)("dashboard"),[r,n]=(0,a.useState)(null),[s,i]=(0,a.useState)([]),[o,l]=(0,a.useState)(!0),[c,d]=(0,a.useState)([]),[u,h]=(0,a.useState)({site_title:"Cataloro Marketplace",hero_title:"Leading European Catalytic Converter Marketplace",hero_subtitle:"Connecting buyers and sellers across the catalyst industry",primary_color:"#4F46E5",secondary_color:"#7C3AED",logo_url:"",footer_logo_url:"",contact_email:"contact@cataloro.com",support_email:"support@cataloro.com",phone:"+1-800-CATALYST",address:"123 Business Avenue, Commerce City, CC 12345",social_links:{facebook:"",twitter:"",linkedin:"",instagram:""},business_hours:"Monday - Friday: 9:00 AM - 6:00 PM",timezone:"UTC",default_language:"en",supported_languages:["en","de","fr","es"],maintenance_mode:!1,maintenance_message:"",analytics_enabled:!0,google_analytics_id:"",facebook_pixel_id:"",seo_title:"Cataloro - Premium Catalytic Converter Marketplace",seo_description:"Europe's leading marketplace for catalytic converters and automotive exhaust components.",seo_keywords:"catalytic converter, marketplace, automotive, exhaust, catalyst"}),{user:m,showToast:f}=Cn(),{updateSiteConfig:p}=Jn(),{notifications:g}=zn(),{hasPermission:x}=no();(0,a.useEffect)(()=>{y(),b(),v(),w()},[]);const y=async()=>{try{const e=await fl.getDashboardData();n(e)}catch(e){console.error("Failed to fetch dashboard data:",e),null===f||void 0===f||f("Failed to load dashboard data","error")}finally{l(!1)}},b=async()=>{try{const e=await fl.getUsers();i(e)}catch(e){console.error("Failed to fetch users:",e),null===f||void 0===f||f("Failed to load users","error")}},v=async()=>{try{const e=await fl.getSystemNotifications();d(e)}catch(e){console.error("Failed to fetch system notifications:",e)}},w=async()=>{try{const e=await fl.getSiteConfiguration();e&&h(e)}catch(e){console.error("Failed to fetch site configuration:",e)}},j=async e=>{try{const t=await fl.updateSiteConfiguration(e);h(t),p(t),go(t),null===f||void 0===f||f("Site configuration updated successfully","success")}catch(t){console.error("Failed to update site configuration:",t),null===f||void 0===f||f("Failed to update site configuration","error")}},k=async e=>{try{const t=await fl.updateUser(e);i(s.map(e=>e.id===t.id?t:e)),null===f||void 0===f||f("User updated successfully","success")}catch(t){console.error("Failed to update user:",t),null===f||void 0===f||f("Failed to update user","error")}},N=[{id:"dashboard",label:"Dashboard",icon:qs,component:Sl},{id:"users",label:"Users",icon:ii,component:Cl},{id:"listings",label:"Listings",icon:Ms,component:Tl},{id:"business",label:"Business",icon:ml,component:jl},{id:"ads",label:"Ads Management",icon:gi,component:Rl},{id:"content",label:"Content",icon:Ws,component:Dl},{id:"settings",label:"Settings",icon:Ps,component:Il},{id:"catalyst",label:"Cat Database",icon:vo,component:Fl},{id:"site-admin",label:"Site Administration",icon:Us,component:Bl},{id:"export",label:"PDF Export",icon:Qs,component:Nl}];return o?(0,yn.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading admin panel..."})]})}):null!==m&&void 0!==m&&m.isAdmin?(0,yn.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:[(0,yn.jsx)(Ml,{user:m}),(0,yn.jsxs)("div",{className:"flex",children:[(0,yn.jsx)(Ll,{tabs:N,activeTab:e,onTabChange:t}),(0,yn.jsx)("main",{className:"flex-1 p-8",children:(0,yn.jsx)("div",{className:"max-w-7xl mx-auto",children:(()=>{const t=N.find(t=>t.id===e);if(!t)return null;t.component;switch(e){case"dashboard":default:return(0,yn.jsx)(Sl,{dashboardData:r,showToast:f});case"users":return(0,yn.jsx)(Cl,{users:s,onUpdateUser:k,showToast:f});case"listings":return(0,yn.jsx)(Tl,{showToast:f});case"business":return(0,yn.jsx)(jl,{showToast:f});case"ads":return(0,yn.jsx)(Rl,{showToast:f});case"content":return(0,yn.jsx)(Dl,{showToast:f});case"settings":return(0,yn.jsx)(Il,{siteConfiguration:u,onUpdateConfiguration:j,showToast:f});case"catalyst":return(0,yn.jsx)(Fl,{showToast:f});case"site-admin":return(0,yn.jsx)(Bl,{showToast:f});case"export":return(0,yn.jsx)(Nl,{showToast:f})}})()})})]}),(0,yn.jsx)(Pl,{notifications:c,onDismiss:e=>{d(t=>t.filter(t=>t.id!==e))}})]}):(0,yn.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,yn.jsxs)("div",{className:"text-center p-8",children:[(0,yn.jsx)(Rs,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,yn.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Access Denied"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"You don't have permission to access the admin panel."})]})})};function ql(e){var t,r,n,s,i,o,l,c,d,u;let{item:h,onRemove:m,onNavigate:f}=e;const[p,g]=(0,a.useState)(0),x=()=>{f("/product/".concat(h.id))};return(0,yn.jsxs)("div",{className:"product-card group bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-300 overflow-hidden cursor-pointer hover:-translate-y-1",onClick:x,children:[(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)("div",{className:"absolute inset-0 cursor-pointer z-10",onClick:e=>{e.stopPropagation(),x()},title:"View product details"}),(0,yn.jsx)("img",{src:(null===(t=h.images)||void 0===t?void 0:t[p])||(null===(r=h.images)||void 0===r?void 0:r[0])||"/api/placeholder/400/300",alt:h.title,className:"w-full h-64 object-cover transition-transform duration-300 group-hover:scale-[1.02]"}),h.images&&h.images.length>1&&(0,yn.jsx)("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1 z-20",children:h.images.map((e,t)=>(0,yn.jsx)("div",{className:"w-2 h-2 rounded-full cursor-pointer ".concat(t===p?"bg-white":"bg-white/50"),onClick:e=>{e.stopPropagation(),g(t)}},t))}),(0,yn.jsxs)("div",{className:"absolute top-2 left-2 space-y-1 z-20",children:[null===(n=h.tags)||void 0===n?void 0:n.map(e=>(0,yn.jsx)("span",{className:"inline-block bg-red-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:e},e)),(0,yn.jsx)("div",{children:(0,yn.jsx)("span",{className:"inline-block text-white text-xs px-2 py-1 rounded-full font-medium ".concat(null!==(s=h.seller)&&void 0!==s&&s.is_business?"bg-gradient-to-r from-blue-600 to-indigo-600":"bg-gradient-to-r from-green-600 to-emerald-600"),children:null!==(i=h.seller)&&void 0!==i&&i.is_business?"Business":"Private"})})]}),(0,yn.jsx)("div",{className:"absolute top-2 right-2 z-20",children:(0,yn.jsx)("button",{onClick:e=>{e.stopPropagation(),m(h.id)},className:"favorites-button wishlist-button add-to-favorites p-3 bg-red-500/90 text-white backdrop-blur-lg rounded-full shadow-lg transition-all duration-300 transform hover:scale-110 shadow-red-500/25",title:"Remove from favorites",children:(0,yn.jsx)(Cs,{className:"w-4 h-4 fill-current"})})})]}),(0,yn.jsxs)("div",{className:"p-4",children:[(0,yn.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,yn.jsx)("h3",{className:"font-bold text-gray-900 dark:text-white text-lg line-clamp-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors flex-1 mr-2",children:h.title})}),(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,yn.jsxs)("span",{className:"price-display text-2xl font-bold text-blue-600 dark:text-blue-400",children:["\u20ac","number"===typeof h.price?h.price.toLocaleString():h.price]}),(0,yn.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400 capitalize bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full",children:h.condition||"New"})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-300 mb-2",children:[(0,yn.jsx)(oo,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:h.location||"Location not specified"})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 mb-4",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,yn.jsx)(Js,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:new Date(h.created_at||Date.now()).toLocaleDateString()})]}),h.views&&(0,yn.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,yn.jsx)(ti,{className:"w-4 h-4"}),(0,yn.jsxs)("span",{children:[h.views," views"]})]})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-3 mb-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,yn.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-sm",children:((null===(o=h.seller)||void 0===o?void 0:o.name)||(null===(l=h.seller)||void 0===l?void 0:l.username)||"U").charAt(0).toUpperCase()}),(0,yn.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,yn.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:(null===(c=h.seller)||void 0===c?void 0:c.name)||(null===(d=h.seller)||void 0===d?void 0:d.username)||"Unknown Seller"}),(0,yn.jsx)("div",{className:"flex items-center space-x-2",children:(0,yn.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:(null===(u=h.seller)||void 0===u?void 0:u.location)&&(0,yn.jsxs)("span",{className:"flex items-center",children:[(0,yn.jsx)(oo,{className:"w-3 h-3 mr-1"}),h.seller.location]})})})]})]}),(0,yn.jsxs)("button",{onClick:x,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg font-medium transition-all duration-200 flex items-center justify-center space-x-2 group-hover:bg-blue-700",children:[(0,yn.jsx)(ti,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"View Details"})]})]})]})}const zl=function(){var e;const{user:t}=Cn(),{showToast:n}=zn(),s=re(),i=function(){const[e,t]=(0,a.useState)(null);return(0,a.useEffect)(()=>{const e=()=>{try{const e=localStorage.getItem("cataloro_site_config");if(e){const r=JSON.parse(e);t(r.adsManager||null)}}catch(e){console.warn("Could not load ads configuration")}};e();const r=()=>{e()};return window.addEventListener("adsConfigUpdated",r),window.addEventListener("storage",r),()=>{window.removeEventListener("adsConfigUpdated",r),window.removeEventListener("storage",r)}},[]),e}(),{favorites:o,removeFromFavorites:l,loadUserFavorites:c,isLoading:d}=Jn();(0,a.useEffect)(()=>{null!==t&&void 0!==t&&t.id&&c(t.id)},[null===t||void 0===t?void 0:t.id,c]);const u=async e=>{try{await l(e,t.id),n("Removed from favorites","success")}catch(r){n("Failed to remove from favorites","error")}};return d?(0,yn.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading your favorites..."})]})}):(0,yn.jsxs)("div",{className:"space-y-8",children:[(0,yn.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 text-white rounded-2xl p-8",children:[(0,yn.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"My Favorites"}),(0,yn.jsx)("p",{className:"text-xl opacity-90",children:"Items you've saved for later"}),o.length>0&&(0,yn.jsxs)("p",{className:"text-lg opacity-80 mt-2",children:["You have ",o.length," favorite items"]})]}),(null===i||void 0===i||null===(e=i.favoriteAd)||void 0===e?void 0:e.active)&&i.favoriteAd.image&&(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm hover:shadow-md transition-shadow ".concat(i.favoriteAd.url?"cursor-pointer":""),style:{width:i.favoriteAd.width||"100%",maxWidth:"100%"},onClick:()=>{if(i.favoriteAd.url){try{Promise.resolve().then(r.bind(r,7784)).then(e=>{let{trackAdClick:t}=e;t("favoriteAd")})}catch(e){console.warn("Could not track ad click:",e)}console.log("Favorites ad clicked:",i.favoriteAd.url),window.open(i.favoriteAd.url,"_blank")}},children:(0,yn.jsx)("img",{src:i.favoriteAd.image,alt:i.favoriteAd.description||"Advertisement",className:"w-full object-cover",style:{height:i.favoriteAd.height||"200px"}})}),0===o.length?(0,yn.jsxs)("div",{className:"text-center py-16",children:[(0,yn.jsx)("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,yn.jsx)(Cs,{className:"w-8 h-8 text-gray-400"})}),(0,yn.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No favorites yet"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Start browsing and save items you love"}),(0,yn.jsx)(Le,{to:"/browse",className:"inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium transition-colors",children:"Browse Marketplace"})]}):(0,yn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:o.map(e=>(0,yn.jsx)(ql,{item:e,onRemove:u,onNavigate:s},e.id))})]})};const Vl=function(){const{user:e}=Cn(),[t,r]=(0,a.useState)([]),[n,s]=(0,a.useState)(!0),[i,o]=(0,a.useState)("all"),[l,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(!0),[h,m]=(0,a.useState)([]),[f,p]=(0,a.useState)(!1),[g,x]=(0,a.useState)(0),y=async()=>{if(null!==e&&void 0!==e&&e.id){s(!0);try{const t=localStorage.getItem("cataloro_token"),n=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/user/").concat(e.id,"/notifications"),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!n.ok)throw new Error("Failed to fetch notifications: ".concat(n.status));{const e=await n.json();console.log("Fetched real notifications:",e),r(e||[]),x(e.filter(e=>!e.is_read).length)}}catch(t){console.error("Failed to load real notifications:",t),r([]),x(0)}finally{s(!1)}}};(0,a.useEffect)(()=>{y()},[e]);const b=async n=>{try{const a=localStorage.getItem("cataloro_token");(await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/user/").concat(null===e||void 0===e?void 0:e.id,"/notifications/").concat(n,"/read"),{method:"PUT",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}})).ok&&(r(t.map(e=>e.id===n?(0,Ie.A)((0,Ie.A)({},e),{},{is_read:!0}):e)),x(e=>Math.max(0,e-1)))}catch(a){console.error("Failed to mark notification as read:",a)}},v=t.filter(e=>{const t="all"===i||"unread"===i&&!e.is_read||"read"===i&&e.is_read||i===e.type,r=!l||e.title.toLowerCase().includes(l.toLowerCase())||e.message.toLowerCase().includes(l.toLowerCase());return t&&r}),w=e=>{const t={className:"w-5 h-5"};switch(e){case"message":return(0,yn.jsx)(Ss,(0,Ie.A)({},t));case"favorite":return(0,yn.jsx)(Cs,(0,Ie.A)({},t));case"buy_request":return(0,yn.jsx)(As,(0,Ie.A)({},t));case"buy_approved":return(0,yn.jsx)(Gi,(0,Ie.A)({},t));case"buy_rejected":return(0,yn.jsx)(Is,(0,Ie.A)({},t));case"payment":return(0,yn.jsx)(Es,(0,Ie.A)({},t));case"profile_view":return(0,yn.jsx)(ti,(0,Ie.A)({},t));case"system":return(0,yn.jsx)(Ps,(0,Ie.A)({},t));default:return(0,yn.jsx)(Os,(0,Ie.A)({},t))}},j=async e=>{await b(e)},k=async n=>{await(async n=>{try{if((await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/user/").concat(null===e||void 0===e?void 0:e.id,"/notifications/").concat(n),{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok){const e=t.find(e=>e.id===n);r(t.filter(e=>e.id!==n)),e&&!e.is_read&&x(e=>Math.max(0,e-1))}}catch(a){console.error("Failed to delete notification:",a)}})(n)};return(0,yn.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,yn.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,yn.jsx)("div",{className:"cataloro-card-glass p-8 mb-8",children:(0,yn.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-4 mb-6 lg:mb-0",children:[(0,yn.jsx)("div",{className:"p-4 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl",children:(0,yn.jsx)(Os,{className:"w-8 h-8 text-white"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Notifications"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:g>0?"".concat(g," unread notification").concat(g>1?"s":""):"All caught up!"})]})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yn.jsx)("button",{onClick:()=>{const e=!d;u(e),localStorage.setItem("cataloro_notification_sound",e.toString())},className:"p-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:d?"Disable sounds":"Enable sounds",children:d?(0,yn.jsx)(Ri,{className:"w-5 h-5"}):(0,yn.jsx)(Zi,{className:"w-5 h-5"})}),(0,yn.jsx)("button",{onClick:()=>{y()},disabled:n,className:"p-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Refresh notifications",children:(0,yn.jsx)(Xi,{className:"w-5 h-5 ".concat(n?"animate-spin":"")})}),g>0&&(0,yn.jsx)("button",{onClick:async()=>{await(async()=>{try{const e=t.filter(e=>!e.is_read);await Promise.all(e.map(e=>b(e.id))),r(t.map(e=>(0,Ie.A)((0,Ie.A)({},e),{},{is_read:!0}))),x(0)}catch(e){console.error("Failed to mark all as read:",e)}})()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Mark All Read"})]})]})}),(0,yn.jsx)("div",{className:"cataloro-card-glass p-6 mb-8",children:(0,yn.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:gap-6",children:[(0,yn.jsxs)("div",{className:"relative flex-1 lg:max-w-md",children:[(0,yn.jsx)(No,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,yn.jsx)("input",{type:"text",placeholder:"Search notifications...",value:l,onChange:e=>c(e.target.value),className:"pl-10 pr-4 py-3 w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500"})]}),(0,yn.jsx)("div",{className:"flex flex-wrap items-center justify-center lg:justify-end gap-2 lg:ml-6",children:[{id:"all",label:"All",count:t.length},{id:"unread",label:"Unread",count:g},{id:"message",label:"Messages",count:t.filter(e=>"message"===e.type).length},{id:"buy_request",label:"Requests",count:t.filter(e=>"buy_request"===e.type).length}].map(e=>(0,yn.jsxs)("button",{onClick:()=>o(e.id),className:"flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 whitespace-nowrap ".concat(i===e.id?"bg-blue-600 text-white shadow-md transform scale-105":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 hover:shadow-sm"),children:[(0,yn.jsx)("span",{children:e.label}),e.count>0&&(0,yn.jsx)("span",{className:"ml-1.5 px-1.5 py-0.5 rounded-full text-xs font-bold min-w-[20px] text-center ".concat(i===e.id?"bg-white/30 text-white":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300"),children:e.count})]},e.id))})]})}),(0,yn.jsx)("div",{className:"space-y-4",children:n?(0,yn.jsxs)("div",{className:"cataloro-card-glass p-12 text-center",children:[(0,yn.jsx)("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Loading notifications..."})]}):0===v.length?(0,yn.jsxs)("div",{className:"cataloro-card-glass p-12 text-center",children:[(0,yn.jsx)("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,yn.jsx)(Os,{className:"w-12 h-12 text-gray-400"})}),(0,yn.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:l?"No matching notifications":"No notifications"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:l?"Try adjusting your search terms.":"When you have new activity, it will appear here."})]}):v.map(e=>{const t=(e=>{switch(e){case"message":default:return"blue";case"favorite":return"pink";case"buy_request":return"yellow";case"buy_approved":case"payment":return"green";case"buy_rejected":return"red";case"profile_view":return"purple";case"system":return"gray"}})(e.type),r=h.includes(e.id);return(0,yn.jsx)("div",{className:"cataloro-card-glass p-6 transition-all duration-300 hover:scale-[1.02] cursor-pointer ".concat(e.is_read?"":"ring-2 ring-blue-500/30 bg-blue-50/30 dark:bg-blue-900/20"," ").concat(r?"ring-2 ring-purple-500/50":""),onClick:()=>{e.is_read||j(e.id),e.action_url&&(window.location.href=e.action_url)},children:(0,yn.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,yn.jsx)("div",{className:"p-3 rounded-xl ".concat("blue"===t?"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":"pink"===t?"bg-pink-100 text-pink-600 dark:bg-pink-900/30 dark:text-pink-400":"yellow"===t?"bg-yellow-100 text-yellow-600 dark:bg-yellow-900/30 dark:text-yellow-400":"green"===t?"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400":"red"===t?"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400":"purple"===t?"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400":"bg-gray-100 text-gray-600 dark:bg-gray-900/30 dark:text-gray-400"),children:w(e.type)}),(0,yn.jsx)("div",{className:"flex-1 min-w-0",children:(0,yn.jsxs)("div",{className:"flex items-start justify-between",children:[(0,yn.jsxs)("div",{className:"flex-1",children:[(0,yn.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:e.title}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-3",children:e.message}),e.metadata&&(0,yn.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400 mb-3",children:[e.metadata.amount&&(0,yn.jsxs)("span",{className:"flex items-center",children:[(0,yn.jsx)(Es,{className:"w-4 h-4 mr-1"}),"$",e.metadata.amount]}),e.metadata.item&&(0,yn.jsxs)("span",{className:"flex items-center",children:[(0,yn.jsx)(Ms,{className:"w-4 h-4 mr-1"}),e.metadata.item]}),e.metadata.views&&(0,yn.jsxs)("span",{className:"flex items-center",children:[(0,yn.jsx)(ti,{className:"w-4 h-4 mr-1"}),e.metadata.views," views"]})]}),(0,yn.jsxs)("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[(0,yn.jsx)(Js,{className:"w-4 h-4 mr-2"}),new Date(e.created_at).toLocaleString()]})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[!e.is_read&&(0,yn.jsx)("button",{onClick:t=>{t.stopPropagation(),j(e.id)},className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Mark as read",children:(0,yn.jsx)(Gi,{className:"w-4 h-4"})}),(0,yn.jsx)("button",{onClick:t=>{t.stopPropagation(),k(e.id)},className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete notification",children:(0,yn.jsx)(ei,{className:"w-4 h-4"})}),e.action_url&&(0,yn.jsx)(Le,{to:e.action_url,className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Go to related page",onClick:e=>e.stopPropagation(),children:(0,yn.jsx)(vl,{className:"w-4 h-4"})})]})]})}),!e.is_read&&(0,yn.jsx)("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-pulse mt-1"})]})},e.id)})}),v.length>0&&(0,yn.jsx)("div",{className:"cataloro-card-glass p-6 mt-8",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-300",children:[(0,yn.jsxs)("span",{children:["Showing ",v.length," of ",t.length," notifications"]}),(0,yn.jsxs)("span",{children:[g," unread"]})]})})]})})},Hl=ks("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);const Wl=function(){const{user:e,updateUser:t}=Cn(),{showToast:r}=zn(),{allProducts:n,favorites:s,orderHistory:i,refreshListings:o}=Jn(),[l,c]=(0,a.useState)("profile"),[d,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(!1),[f,p]=(0,a.useState)(!1),[g,x]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[y,b]=(0,a.useState)({full_name:(null===e||void 0===e?void 0:e.full_name)||"",username:(null===e||void 0===e?void 0:e.username)||"",email:(null===e||void 0===e?void 0:e.email)||"",phone:(null===e||void 0===e?void 0:e.phone)||"",street:(null===e||void 0===e?void 0:e.street)||"",post_code:(null===e||void 0===e?void 0:e.post_code)||"",city:(null===e||void 0===e?void 0:e.city)||"",country:(null===e||void 0===e?void 0:e.country)||"",bio:(null===e||void 0===e?void 0:e.bio)||"Marketplace enthusiast and trusted seller.",avatar_url:(null===e||void 0===e?void 0:e.avatar_url)||"",date_joined:(null===e||void 0===e?void 0:e.date_joined)||"2024-01-15",verified:(null===e||void 0===e?void 0:e.verified)||!1,seller_rating:(null===e||void 0===e?void 0:e.seller_rating)||4.8,total_sales:(null===e||void 0===e?void 0:e.total_sales)||0,is_business:(null===e||void 0===e?void 0:e.is_business)||!1,company_name:(null===e||void 0===e?void 0:e.company_name)||"",business_country:(null===e||void 0===e?void 0:e.business_country)||"",vat_number:(null===e||void 0===e?void 0:e.vat_number)||""}),[v,w]=(0,a.useState)([]),[j,k]=(0,a.useState)([]),[N,_]=(0,a.useState)([]),[S,E]=(0,a.useState)(!1),[A,C]=(0,a.useState)(!1),[O,T]=(0,a.useState)(!1),[P,L]=(0,a.useState)({emailNotifications:!0,smsNotifications:!1,marketingEmails:!1,browserNotifications:!0,darkMode:!1,language:"en",currency:"USD",timezone:"UTC",publicProfile:!0,showEmail:!1,showPhone:!1}),[M,R]=(0,a.useState)({totalListings:0,activeListings:0,totalDeals:0,completedDeals:0,totalRevenue:0,avgRating:0,totalFavorites:0,profileViews:0,joinDate:"",lastActive:""}),D=["Berlin","Munich","Hamburg","Frankfurt","Cologne","Stuttgart","D\xfcsseldorf","Dortmund","Essen","Bremen","Paris","Lyon","Marseille","Toulouse","Nice","Nantes","Strasbourg","Montpellier","Bordeaux","Lille","Amsterdam","Rotterdam","The Hague","Utrecht","Eindhoven","Tilburg","Groningen","Almere","Brussels","Antwerp","Ghent","Bruges","Leuven","Li\xe8ge","Madrid","Barcelona","Valencia","Seville","Bilbao","M\xe1laga","Zaragoza","Rome","Milan","Naples","Turin","Palermo","Genoa","Bologna","Florence","Venice","London","Birmingham","Manchester","Glasgow","Liverpool","Leeds","Sheffield","Edinburgh","Bristol","Cardiff","Vienna","Zurich","Geneva","Copenhagen","Stockholm","Oslo","Helsinki","Prague","Warsaw","Budapest","Dublin","Lisbon","Athens"],I=["Germany","France","Netherlands","Belgium","Spain","Italy","United Kingdom","Austria","Switzerland","Denmark","Sweden","Norway","Finland","Czech Republic","Poland","Hungary","Ireland","Portugal","Greece","Luxembourg","Slovenia","Slovakia","Estonia","Latvia","Lithuania","Malta","Cyprus","Croatia","Romania","Bulgaria"];(0,a.useEffect)(()=>{(()=>{const t=n.filter(t=>t.seller_id===(null===e||void 0===e?void 0:e.id)),r=t.filter(e=>!1!==e.inStock),a=i||[],o=a.filter(e=>"completed"===e.status),l={totalListings:t.length,activeListings:r.length,totalDeals:a.length,completedDeals:o.length,totalRevenue:t.reduce((e,t)=>e+(t.price||0),0),avgRating:y.seller_rating,totalFavorites:s.length,profileViews:Math.floor(500*Math.random())+100,joinDate:y.date_joined,lastActive:(new Date).toISOString().split("T")[0]};R(l)})()},[n,i,s,e,y]);const F=e=>{const{name:t,value:r}=e.target;b(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:r}))},B=(e,t)=>{L((0,Ie.A)((0,Ie.A)({},P),{},{[e]:t})),r("".concat(e," ").concat(t?"enabled":"disabled"),"success")},U=e=>{x((0,Ie.A)((0,Ie.A)({},g),{},{[e.target.name]:e.target.value}))};return(0,yn.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,yn.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-700 rounded-xl p-8 mb-8 text-white relative overflow-hidden",children:[(0,yn.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -translate-y-32 translate-x-32"}),(0,yn.jsx)("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-white/5 rounded-full translate-y-24 -translate-x-24"}),(0,yn.jsxs)("div",{className:"relative flex items-center space-x-6",children:[(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)("div",{className:"w-32 h-32 rounded-full bg-white/20 flex items-center justify-center overflow-hidden border-4 border-white/30",children:y.avatar_url?(0,yn.jsx)("img",{src:y.avatar_url,alt:"Profile",className:"w-full h-full object-cover"}):(0,yn.jsx)(Ts,{className:"w-16 h-16 text-white/80"})}),d&&(0,yn.jsx)("div",{className:"absolute bottom-0 right-0",children:(0,yn.jsxs)("label",{className:"w-10 h-10 bg-blue-600 hover:bg-blue-700 rounded-full flex items-center justify-center cursor-pointer shadow-lg transition-colors",children:[(0,yn.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(t)if(t.size>5242880)r("File size must be less than 5MB","error");else try{m(!0);const e=new FileReader;e.onload=e=>{b(t=>(0,Ie.A)((0,Ie.A)({},t),{},{avatar_url:e.target.result}))},e.readAsDataURL(t),await new Promise(e=>setTimeout(e,2e3)),r("Profile picture updated successfully!","success")}catch(n){r("Failed to upload image","error")}finally{m(!1)}},className:"hidden"}),h?(0,yn.jsx)(Xi,{className:"w-5 h-5 text-white animate-spin"}):(0,yn.jsx)(Ys,{className:"w-5 h-5 text-white"})]})})]}),(0,yn.jsxs)("div",{className:"flex-1",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,yn.jsx)("h1",{className:"text-3xl font-bold",children:y.full_name||"Anonymous User"}),y.verified&&(0,yn.jsxs)("div",{className:"flex items-center space-x-1 bg-green-500/20 text-green-100 px-3 py-1 rounded-full text-sm",children:[(0,yn.jsx)(Qi,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Verified"})]}),y.is_business&&(0,yn.jsxs)("div",{className:"flex items-center space-x-1 bg-blue-500/20 text-blue-100 px-3 py-1 rounded-full text-sm",children:[(0,yn.jsx)(Ps,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Business"})]})]}),(0,yn.jsxs)("p",{className:"text-white/80 mb-4",children:["@",y.username]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)(Gs,{className:"w-5 h-5 text-yellow-400 fill-current"}),(0,yn.jsx)("span",{className:"font-semibold",children:y.seller_rating}),(0,yn.jsx)("span",{className:"text-white/60",children:"rating"})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)(Ms,{className:"w-5 h-5"}),(0,yn.jsx)("span",{className:"font-semibold",children:M.totalListings}),(0,yn.jsx)("span",{className:"text-white/60",children:"listings"})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)($s,{className:"w-5 h-5"}),(0,yn.jsxs)("span",{className:"text-white/60",children:["Joined ",y.date_joined]})]})]})]}),(0,yn.jsx)("div",{className:"text-right",children:(0,yn.jsxs)("button",{onClick:()=>u(!d),className:"bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white px-6 py-3 rounded-lg transition-colors flex items-center space-x-2",children:[(0,yn.jsx)(Hl,{className:"w-5 h-5"}),(0,yn.jsx)("span",{children:d?"Cancel Edit":"Edit Profile"})]})})]})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,yn.jsxs)("div",{className:"lg:col-span-2",children:[(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 mb-8",children:(0,yn.jsx)("div",{className:"flex space-x-1 p-2",children:[{id:"profile",label:"Profile Info",icon:Ts},{id:"security",label:"Security",icon:Rs},{id:"preferences",label:"Preferences",icon:Ps},{id:"stats",label:"Statistics",icon:zs}].map(e=>(0,yn.jsxs)("button",{onClick:()=>c(e.id),className:"flex items-center space-x-2 px-4 py-3 rounded-lg font-medium transition-colors flex-1 justify-center ".concat(l===e.id?"bg-blue-600 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[(0,yn.jsx)(e.icon,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:e.label})]},e.id))})}),"profile"===l&&(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,yn.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Profile Information"}),d&&(0,yn.jsxs)("button",{onClick:async()=>{try{const n=(null===e||void 0===e?void 0:e.is_business)!==y.is_business;await new Promise(e=>setTimeout(e,1e3));const a=(0,Ie.A)((0,Ie.A)({},e),y);localStorage.setItem("cataloro_user",JSON.stringify(a)),"function"===typeof t&&t(a),u(!1),r("Profile updated successfully!","success"),n&&(o(),r("Account switched to ".concat(y.is_business?"Business":"Private"),"success"))}catch(n){r("Failed to update profile","error")}},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[(0,yn.jsx)(al,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Save Changes"})]})]}),(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),(0,yn.jsx)("input",{type:"text",name:"full_name",value:y.full_name,onChange:F,disabled:!d,className:"cataloro-input ".concat(d?"":"cursor-not-allowed"),placeholder:"Enter your full name"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Username"}),(0,yn.jsx)("input",{type:"text",name:"username",value:y.username,onChange:F,disabled:!d,className:"cataloro-input ".concat(d?"":"cursor-not-allowed"),placeholder:"Enter your username"})]})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),(0,yn.jsx)("input",{type:"email",name:"email",value:y.email,onChange:F,disabled:!d,className:"cataloro-input ".concat(d?"":"cursor-not-allowed"),placeholder:"Enter your email"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),(0,yn.jsx)("input",{type:"tel",name:"phone",value:y.phone,onChange:F,disabled:!d,className:"cataloro-input ".concat(d?"":"cursor-not-allowed"),placeholder:"Enter your phone number"})]})]}),(0,yn.jsxs)("div",{className:"space-y-4",children:[(0,yn.jsx)("h4",{className:"text-md font-semibold text-gray-900 dark:text-white",children:"Address Information"}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Street Address"}),(0,yn.jsx)("input",{type:"text",name:"street",value:y.street,onChange:F,disabled:!d,className:"cataloro-input ".concat(d?"":"cursor-not-allowed"),placeholder:"Enter your street address"})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Postal Code"}),(0,yn.jsx)("input",{type:"text",name:"post_code",value:y.post_code,onChange:F,disabled:!d,className:"cataloro-input ".concat(d?"":"cursor-not-allowed"),placeholder:"Enter your postal code"})]}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["City",d&&(0,yn.jsx)("span",{className:"text-blue-600 dark:text-blue-400 text-xs ml-2",children:"(Type to search)"})]}),(0,yn.jsx)("input",{type:"text",name:"city",value:y.city,onChange:e=>{const t=e.target.value;if(b(e=>(0,Ie.A)((0,Ie.A)({},e),{},{city:t})),t.length>1){const e=D.filter(e=>e.toLowerCase().includes(t.toLowerCase())).slice(0,8);w(e),E(e.length>0)}else w([]),E(!1)},onFocus:()=>y.city&&E(v.length>0),disabled:!d,className:"cataloro-input ".concat(d?"":"cursor-not-allowed"),placeholder:"Enter your city"}),S&&d&&(0,yn.jsxs)("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-xl shadow-2xl max-h-60 overflow-y-auto",children:[(0,yn.jsx)("div",{className:"p-3 bg-gradient-to-r from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 border-b border-gray-200 dark:border-gray-600",children:(0,yn.jsxs)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center",children:[(0,yn.jsx)(oo,{className:"w-4 h-4 mr-2 text-blue-500"}),"Popular Cities (",v.length,")",(0,yn.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"Click to select"})]})}),v.map((e,t)=>(0,yn.jsx)("div",{onClick:()=>(e=>{b(t=>(0,Ie.A)((0,Ie.A)({},t),{},{city:e})),E(!1),w([])})(e),className:"p-3 hover:bg-blue-50 dark:hover:bg-blue-900/20 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0 transition-all duration-200 group",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-green-500 rounded-full flex items-center justify-center text-white text-sm font-bold",children:e.charAt(0)}),(0,yn.jsx)("div",{className:"font-medium text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:e})]})},t))]})]})]}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Country",d&&(0,yn.jsx)("span",{className:"text-blue-600 dark:text-blue-400 text-xs ml-2",children:"(Type to search)"})]}),(0,yn.jsx)("input",{type:"text",name:"country",value:y.country,onChange:e=>{const t=e.target.value;if(b(e=>(0,Ie.A)((0,Ie.A)({},e),{},{country:t})),t.length>1){const e=I.filter(e=>e.toLowerCase().includes(t.toLowerCase())).slice(0,8);k(e),C(e.length>0)}else k([]),C(!1)},onFocus:()=>y.country&&C(j.length>0),disabled:!d,className:"cataloro-input ".concat(d?"":"cursor-not-allowed"),placeholder:"Enter your country"}),A&&d&&(0,yn.jsxs)("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-xl shadow-2xl max-h-60 overflow-y-auto",children:[(0,yn.jsx)("div",{className:"p-3 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 border-b border-gray-200 dark:border-gray-600",children:(0,yn.jsxs)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center",children:[(0,yn.jsx)(Us,{className:"w-4 h-4 mr-2 text-green-500"}),"Popular Countries (",j.length,")",(0,yn.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"Click to select"})]})}),j.map((e,t)=>(0,yn.jsx)("div",{onClick:()=>(e=>{b(t=>(0,Ie.A)((0,Ie.A)({},t),{},{country:e})),C(!1),k([])})(e),className:"p-3 hover:bg-green-50 dark:hover:bg-green-900/20 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0 transition-all duration-200 group",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center text-white text-sm font-bold",children:e.charAt(0)}),(0,yn.jsx)("div",{className:"font-medium text-gray-900 dark:text-white group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors",children:e})]})},t))]})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bio"}),(0,yn.jsx)("textarea",{name:"bio",rows:4,value:y.bio,onChange:F,disabled:!d,className:"cataloro-input ".concat(d?"":"cursor-not-allowed"),placeholder:"Tell us about yourself..."}),(0,yn.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[y.bio.length,"/500 characters"]})]}),(0,yn.jsxs)("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-700 rounded-xl p-6 border border-gray-200 dark:border-gray-600",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yn.jsx)("div",{className:"p-3 rounded-xl ".concat(y.is_business?"bg-gradient-to-r from-blue-500 to-indigo-600":"bg-gradient-to-r from-green-500 to-emerald-600"),children:y.is_business?(0,yn.jsx)(Ps,{className:"w-6 h-6 text-white"}):(0,yn.jsx)(Ts,{className:"w-6 h-6 text-white"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Account Type"}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:y.is_business?"Professional business marketplace seller":"Personal marketplace account for individuals"})]})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:y.is_business?"Business":"Personal"}),(0,yn.jsx)("button",{onClick:()=>{return e=!y.is_business,void b(t=>(0,Ie.A)((0,Ie.A)({},t),{},{is_business:e},!e&&{company_name:"",business_country:"",vat_number:""}));var e},disabled:!d,className:"w-11 h-6 rounded-full transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(y.is_business?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"," ").concat(d?"":"opacity-50 cursor-not-allowed"),children:(0,yn.jsx)("div",{className:"w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-200 ease-in-out ".concat(y.is_business?"translate-x-5":"translate-x-0.5")})})]})]}),y.is_business&&(0,yn.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-600",children:[(0,yn.jsxs)("h4",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,yn.jsx)(Qi,{className:"w-5 h-5 text-green-600 mr-2"}),"Business Information"]}),(0,yn.jsxs)("div",{className:"space-y-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Company Name *"}),(0,yn.jsx)("input",{type:"text",name:"company_name",value:y.company_name,onChange:F,disabled:!d,className:"cataloro-input ".concat(d?"":"cursor-not-allowed"),placeholder:"Enter your company name",required:y.is_business})]}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Business Country *",d&&(0,yn.jsx)("span",{className:"text-blue-600 dark:text-blue-400 text-xs ml-2",children:"(Type to search)"})]}),(0,yn.jsx)("input",{type:"text",name:"business_country",value:y.business_country,onChange:e=>{const t=e.target.value;if(b(e=>(0,Ie.A)((0,Ie.A)({},e),{},{business_country:t})),t.length>1){const e=I.filter(e=>e.toLowerCase().includes(t.toLowerCase())).slice(0,8);_(e),T(e.length>0)}else _([]),T(!1)},onFocus:()=>y.business_country&&T(N.length>0),disabled:!d,className:"cataloro-input ".concat(d?"":"cursor-not-allowed"),placeholder:"Enter business country",required:y.is_business}),O&&d&&(0,yn.jsxs)("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-xl shadow-2xl max-h-60 overflow-y-auto",children:[(0,yn.jsx)("div",{className:"p-3 bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 border-b border-gray-200 dark:border-gray-600",children:(0,yn.jsxs)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center",children:[(0,yn.jsx)(Us,{className:"w-4 h-4 mr-2 text-indigo-500"}),"Business Countries (",N.length,")",(0,yn.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"Click to select"})]})}),N.map((e,t)=>(0,yn.jsx)("div",{onClick:()=>(e=>{b(t=>(0,Ie.A)((0,Ie.A)({},t),{},{business_country:e})),T(!1),_([])})(e),className:"p-3 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0 transition-all duration-200 group",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full flex items-center justify-center text-white text-sm font-bold",children:e.charAt(0)}),(0,yn.jsx)("div",{className:"font-medium text-gray-900 dark:text-white group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:e})]})},t))]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"VAT Number"}),(0,yn.jsx)("input",{type:"text",name:"vat_number",value:y.vat_number,onChange:F,disabled:!d,className:"cataloro-input ".concat(d?"":"cursor-not-allowed"),placeholder:"Enter your VAT number (optional)"})]})]})]})]})]})]}),"security"===l&&(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,yn.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Security Settings"}),(0,yn.jsxs)("div",{className:"space-y-8",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,yn.jsx)(ni,{className:"w-5 h-5 mr-2"}),"Change Password"]}),(0,yn.jsxs)("div",{className:"space-y-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Password"}),(0,yn.jsx)("input",{type:f?"text":"password",name:"currentPassword",value:g.currentPassword,onChange:U,className:"cataloro-input",placeholder:"Enter current password"})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),(0,yn.jsx)("input",{type:f?"text":"password",name:"newPassword",value:g.newPassword,onChange:U,className:"cataloro-input",placeholder:"Enter new password"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),(0,yn.jsx)("input",{type:f?"text":"password",name:"confirmPassword",value:g.confirmPassword,onChange:U,className:"cataloro-input",placeholder:"Confirm new password"})]})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("button",{type:"button",onClick:()=>p(!f),className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:[f?(0,yn.jsx)(ri,{className:"w-4 h-4"}):(0,yn.jsx)(ti,{className:"w-4 h-4"}),(0,yn.jsxs)("span",{children:[f?"Hide":"Show"," passwords"]})]}),(0,yn.jsxs)("button",{onClick:async()=>{if(g.newPassword===g.confirmPassword)if(g.newPassword.length<8)r("Password must be at least 8 characters long","error");else try{await new Promise(e=>setTimeout(e,1e3)),x({currentPassword:"",newPassword:"",confirmPassword:""}),r("Password updated successfully!","success")}catch(e){r("Failed to update password","error")}else r("New passwords do not match","error")},className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[(0,yn.jsx)(si,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Update Password"})]})]})]})]}),(0,yn.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-8",children:[(0,yn.jsxs)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,yn.jsx)(Rs,{className:"w-5 h-5 mr-2"}),"Two-Factor Authentication"]}),(0,yn.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Authenticator App"}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Use an authenticator app to generate secure codes"})]}),(0,yn.jsx)("button",{className:"text-blue-600 hover:text-blue-700 font-medium",children:"Set up"})]})})]})]})]}),"preferences"===l&&(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,yn.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Preferences"}),(0,yn.jsxs)("div",{className:"space-y-8",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,yn.jsx)(Os,{className:"w-5 h-5 mr-2"}),"Notifications"]}),(0,yn.jsx)("div",{className:"space-y-6",children:[{key:"emailNotifications",label:"Email Notifications",description:"Receive notifications via email"},{key:"smsNotifications",label:"SMS Notifications",description:"Receive notifications via SMS"},{key:"marketingEmails",label:"Marketing Emails",description:"Receive promotional content"},{key:"browserNotifications",label:"Browser Notifications",description:"Show desktop notifications"}].map(e=>(0,yn.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/30 rounded-lg",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.label}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.description})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:P[e.key]?"On":"Off"}),(0,yn.jsx)("button",{onClick:()=>B(e.key,!P[e.key]),className:"w-11 h-6 rounded-full transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(P[e.key]?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"),children:(0,yn.jsx)("div",{className:"w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-200 ease-in-out ".concat(P[e.key]?"translate-x-5":"translate-x-0.5")})})]})]},e.key))})]}),(0,yn.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-8",children:[(0,yn.jsxs)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,yn.jsx)(ti,{className:"w-5 h-5 mr-2"}),"Privacy"]}),(0,yn.jsx)("div",{className:"space-y-6",children:[{key:"publicProfile",label:"Public Profile",description:"Make your profile visible to everyone"},{key:"showEmail",label:"Show Email",description:"Display email on public profile"},{key:"showPhone",label:"Show Phone",description:"Display phone number on public profile"}].map(e=>(0,yn.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/30 rounded-lg",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.label}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.description})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:P[e.key]?"On":"Off"}),(0,yn.jsx)("button",{onClick:()=>B(e.key,!P[e.key]),className:"w-11 h-6 rounded-full transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(P[e.key]?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"),children:(0,yn.jsx)("div",{className:"w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-200 ease-in-out ".concat(P[e.key]?"translate-x-5":"translate-x-0.5")})})]})]},e.key))})]})]})]}),"stats"===l&&(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,yn.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Account Statistics"}),(0,yn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[{label:"Total Listings",value:M.totalListings,icon:Ms,color:"blue"},{label:"Active Listings",value:M.activeListings,icon:Qi,color:"green"},{label:"Total Deals",value:M.totalDeals,icon:Es,color:"purple"},{label:"Completed Deals",value:M.completedDeals,icon:pi,color:"yellow"},{label:"Total Revenue",value:"\u20ac".concat(M.totalRevenue.toFixed(2)),icon:zs,color:"indigo"},{label:"Favorites",value:M.totalFavorites,icon:Cs,color:"red"}].map((e,t)=>(0,yn.jsx)("div",{className:"bg-gradient-to-r from-".concat(e.color,"-50 to-").concat(e.color,"-100 dark:from-").concat(e.color,"-900/20 dark:to-").concat(e.color,"-800/30 border border-").concat(e.color,"-200 dark:border-").concat(e.color,"-800 rounded-lg p-4"),children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("p",{className:"text-".concat(e.color,"-600 dark:text-").concat(e.color,"-400 text-sm font-medium"),children:e.label}),(0,yn.jsx)("p",{className:"text-".concat(e.color,"-900 dark:text-").concat(e.color,"-100 text-2xl font-bold"),children:e.value})]}),(0,yn.jsx)("div",{className:"p-3 bg-".concat(e.color,"-500 rounded-lg"),children:(0,yn.jsx)(e.icon,{className:"w-6 h-6 text-white"})})]})},t))}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Recent Activity"}),(0,yn.jsx)("div",{className:"space-y-4",children:(0,yn.jsxs)("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,yn.jsx)("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center",children:(0,yn.jsx)(Ts,{className:"w-5 h-5 text-white"})}),(0,yn.jsxs)("div",{className:"flex-1",children:[(0,yn.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:"Profile updated"}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Updated profile information"})]}),(0,yn.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Today"})]})})]})]})]}),(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Stats"}),(0,yn.jsxs)("div",{className:"space-y-4",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Profile Views"}),(0,yn.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:M.profileViews})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Seller Rating"}),(0,yn.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,yn.jsx)(Gs,{className:"w-4 h-4 text-yellow-400 fill-current"}),(0,yn.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:y.seller_rating})]})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Last Active"}),(0,yn.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:M.lastActive})]})]})]}),(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Account Actions"}),(0,yn.jsxs)("div",{className:"space-y-3",children:[(0,yn.jsxs)("button",{className:"w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[(0,yn.jsx)(Qs,{className:"w-5 h-5 text-gray-400"}),(0,yn.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Export Data"})]}),(0,yn.jsxs)("button",{className:"w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[(0,yn.jsx)(Rs,{className:"w-5 h-5 text-gray-400"}),(0,yn.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Privacy Settings"})]}),(0,yn.jsxs)("button",{className:"w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors text-red-600 dark:text-red-400",children:[(0,yn.jsx)($i,{className:"w-5 h-5"}),(0,yn.jsx)("span",{children:"Delete Account"})]})]})]})]})]})]})};const Kl=function(){var e;const{userId:t}=ae(),{user:r}=Cn(),{allProducts:n}=Jn(),{getUserDisplay:s}=no(),[i,o]=(0,a.useState)(null),[l,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)({totalListings:0,activeListings:0,totalSales:0,avgRating:0,responseRate:0,memberSince:"",lastActive:""}),[h,m]=(0,a.useState)([]),[f,p]=(0,a.useState)({messages:[],deals:[],totalInteractions:0}),g=e=>{switch(e){case"Admin":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300 border border-yellow-200 dark:border-yellow-800";case"Manager":return"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300 border border-purple-200 dark:border-purple-800";case"Seller":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 border border-green-200 dark:border-green-800";default:return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 border border-blue-200 dark:border-blue-800"}};return(0,a.useEffect)(()=>{t&&(async()=>{try{var e;c(!0);let s=null;try{const e=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/auth/profile/").concat(t));if(e.ok)s=await e.json(),console.log("Fetched user data:",s);else{console.log("Primary profile endpoint failed, trying user endpoint...");const e=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/user/").concat(t));if(e.ok)s=await e.json();else{console.log("Both profile endpoints failed, trying listings endpoint...");const e=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/listings?seller_id=").concat(t));if(e.ok){const r=await e.json();if(r.length>0&&r[0].seller){s=r[0].seller;const e=r.filter(e=>e.seller===s.username||e.seller===s.full_name||e.seller_id===t);m(e.slice(0,6))}}}}}catch(a){console.log("Backend API error:",a)}if(!s)return o(null),void c(!1);const i={id:s.id,full_name:s.full_name||s.name||"Unknown User",username:s.username||(null===(e=s.email)||void 0===e?void 0:e.split("@")[0])||"unknown",email:s.email,bio:s.bio||"".concat(s.full_name||"User"," is a marketplace member."),avatar_url:s.avatar_url||"",city:s.city||"Not specified",country:s.country||"Not specified",date_joined:s.date_joined||s.created_at||"2023-01-01",verified:s.verified||!1,is_business:s.is_business||!1,company_name:s.company_name||"",seller_rating:s.seller_rating||0,phone:s.phone||"",publicProfile:!1!==s.publicProfile,showEmail:s.showEmail||!1,showPhone:s.showPhone||!1};o(i),t!==(null===r||void 0===r?void 0:r.id)&&await(async e=>{try{const t={messages:[],deals:[]};try{const n=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/messages/conversations/").concat(null===r||void 0===r?void 0:r.id));if(n.ok){const r=(await n.json()).filter(t=>{var r;return(null===(r=t.participants)||void 0===r?void 0:r.some(t=>t.id===e))||t.user_id===e||t.id===e});t.messages=r.slice(0,3).map(e=>{var t,r;return{id:e.id||e.conversation_id,subject:e.subject||"Message conversation",last_message:e.last_message||(null===(t=e.messages)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.content)||"Chat conversation",created_at:e.created_at||e.last_message_at||(new Date).toISOString()}})}}catch(a){console.log("Could not fetch real messages:",a)}try{const n=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/user/my-deals/").concat(null===r||void 0===r?void 0:r.id));if(n.ok){const r=(await n.json()).filter(t=>{var r,n;return t.buyer_id===e||t.seller_id===e||(null===(r=t.buyer)||void 0===r?void 0:r.id)===e||(null===(n=t.seller)||void 0===n?void 0:n.id)===e});t.deals=r.slice(0,3).map(e=>{var t,r;return{id:e.id,item_title:(null===(t=e.listing)||void 0===t?void 0:t.title)||"Deal item",amount:e.amount||(null===(r=e.listing)||void 0===r?void 0:r.price)||0,status:e.status||"completed",date:e.approved_at||e.created_at||(new Date).toISOString()}})}}catch(a){console.log("Could not fetch real deals:",a)}p((0,Ie.A)((0,Ie.A)({},t),{},{totalInteractions:t.messages.length+t.deals.length}))}catch(a){console.error("Failed to load user interactions:",a),p({messages:[],deals:[],totalInteractions:0})}})(t);const l=n.filter(e=>e.seller===s.username||e.seller===s.full_name||e.seller_id===t);m(l.slice(0,6));let d=0,h=0,f="Active today";try{const e=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/user/my-deals/").concat(t));if(e.ok){const r=await e.json();d=r.filter(e=>e.seller_id===t&&"completed"===e.status).length}const r=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/messages/conversations/").concat(t));if(r.ok){const e=await r.json(),t=e.length,n=e.filter(e=>e.messages&&e.messages.length>1).length;h=t>0?Math.round(n/t*100):95}else h=95;if(l.length>0){const e=l.sort((e,t)=>new Date(t.created_at||t.date_added||0)-new Date(e.created_at||e.date_added||0))[0],t=new Date(e.created_at||e.date_added),r=Math.floor((new Date-t)/864e5);f=0===r?"Active today":1===r?"Active yesterday":r<7?"Active ".concat(r," days ago"):r<30?"Active ".concat(Math.floor(r/7)," weeks ago"):"Active over a month ago"}}catch(a){console.log("Could not fetch additional stats:",a),d=0,h=95}const g={totalListings:l.length,activeListings:l.filter(e=>!1!==e.inStock&&"active"===e.status).length,totalSales:d,avgRating:s.seller_rating||4.5,responseRate:h,memberSince:s.date_joined,lastActive:f};u(g)}catch(a){console.error("Failed to load public profile:",a)}finally{c(!1)}})()},[t,n]),l?(0,yn.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-purple-900 flex items-center justify-center",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,yn.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Loading Profile..."})]})}):i&&i.publicProfile?(0,yn.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-purple-900 fade-in",children:(0,yn.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,yn.jsx)("div",{className:"cataloro-card-glass p-8 mb-8",children:(0,yn.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-6 lg:space-y-0 lg:space-x-8",children:[(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)("div",{className:"w-32 h-32 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center mx-auto lg:mx-0",children:i.avatar_url?(0,yn.jsx)("img",{src:i.avatar_url,alt:"Profile",className:"w-32 h-32 rounded-full object-cover"}):(0,yn.jsx)("span",{className:"text-white font-bold text-4xl",children:(null===(e=i.full_name)||void 0===e?void 0:e.charAt(0))||"U"})}),i.verified&&(0,yn.jsx)("div",{className:"absolute -bottom-2 -right-2 bg-green-500 rounded-full p-2",children:(0,yn.jsx)(Qi,{className:"w-6 h-6 text-white"})})]}),(0,yn.jsxs)("div",{className:"flex-1 text-center lg:text-left",children:[(0,yn.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:space-x-4 mb-4",children:[(0,yn.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:i.username||i.full_name}),(0,yn.jsxs)("div",{className:"flex items-center justify-center lg:justify-start space-x-2 mt-2 lg:mt-0",children:[(()=>{const e=(e=>{if((null===e||void 0===e?void 0:e.id)===(null===r||void 0===r?void 0:r.id)){const e=s();return{badge:(null===e||void 0===e?void 0:e.badge)||"Buyer",role:(null===e||void 0===e?void 0:e.role)||"User-Buyer"}}const t=(null===e||void 0===e?void 0:e.email)||"",n=(null===e||void 0===e?void 0:e.full_name)||(null===e||void 0===e?void 0:e.username)||"";return t.includes("admin")||"admin"===(null===e||void 0===e?void 0:e.role)?{badge:"Admin",role:"Admin"}:n.toLowerCase().includes("seller")||"User-Seller"===(null===e||void 0===e?void 0:e.user_role)?{badge:"Seller",role:"User-Seller"}:"Admin-Manager"===(null===e||void 0===e?void 0:e.user_role)?{badge:"Manager",role:"Admin-Manager"}:{badge:"Buyer",role:"User-Buyer"}})(i);return(0,yn.jsxs)("span",{className:"inline-flex px-3 py-1 text-sm font-semibold rounded-full ".concat(g(e.badge)),children:[(0,yn.jsx)(Rs,{className:"w-4 h-4 mr-1"}),e.badge]})})(),i.verified&&(0,yn.jsxs)("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium flex items-center",children:[(0,yn.jsx)(Qi,{className:"w-4 h-4 mr-1"}),"Verified"]}),i.is_business?(0,yn.jsxs)("span",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-3 py-1 rounded-full text-sm font-medium flex items-center",children:[(0,yn.jsx)(Ps,{className:"w-4 h-4 mr-1"}),"Business"]}):(0,yn.jsxs)("span",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white px-3 py-1 rounded-full text-sm font-medium flex items-center",children:[(0,yn.jsx)(Ts,{className:"w-4 h-4 mr-1"}),"Private"]})]})]}),(0,yn.jsxs)("p",{className:"text-gray-600 dark:text-gray-300 mb-2 text-lg",children:["@",i.username]}),i.is_business&&i.company_name&&(0,yn.jsx)("p",{className:"text-blue-600 dark:text-blue-400 font-medium mb-4",children:i.company_name}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-6 max-w-2xl",children:i.bio}),(0,yn.jsxs)("div",{className:"flex items-center justify-center lg:justify-start text-gray-600 dark:text-gray-300 mb-6",children:[(0,yn.jsx)(oo,{className:"w-5 h-5 mr-2"}),(0,yn.jsxs)("span",{children:[i.city,", ",i.country]})]}),(0,yn.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center lg:justify-start",children:[(null===r||void 0===r?void 0:r.id)!==t&&(0,yn.jsxs)("button",{onClick:()=>{window.location.href="/messages?user=".concat(t)},className:"cataloro-button-primary flex items-center justify-center",children:[(0,yn.jsx)(Ss,{className:"w-5 h-5 mr-2"}),"Send Message"]}),i.showEmail&&(0,yn.jsxs)("a",{href:"mailto:".concat(i.email),className:"cataloro-button-secondary flex items-center justify-center",children:[(0,yn.jsx)(Hs,{className:"w-5 h-5 mr-2"}),"Send Email"]}),i.showPhone&&(0,yn.jsxs)("a",{href:"tel:".concat(i.phone),className:"cataloro-button-secondary flex items-center justify-center",children:[(0,yn.jsx)(li,{className:"w-5 h-5 mr-2"}),"Call"]})]})]})]})}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,yn.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(null===r||void 0===r?void 0:r.id)!==t&&f.totalInteractions>0&&(0,yn.jsxs)("div",{className:"cataloro-card-glass p-6",children:[(0,yn.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6 flex items-center",children:[(0,yn.jsx)(Ss,{className:"w-5 h-5 mr-2 text-blue-600"}),"Interactions with this user"]}),(0,yn.jsxs)("div",{className:"space-y-4",children:[f.messages.length>0&&(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Recent Messages (",f.messages.length,")"]}),(0,yn.jsx)("div",{className:"space-y-2",children:f.messages.slice(0,3).map(e=>(0,yn.jsxs)("div",{className:"p-3 bg-blue-50/50 dark:bg-blue-900/20 rounded-lg",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,yn.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.subject}),(0,yn.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]}),(0,yn.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:e.last_message})]},e.id))})]}),f.deals.length>0&&(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Past Deals (",f.deals.length,")"]}),(0,yn.jsx)("div",{className:"space-y-2",children:f.deals.slice(0,3).map(e=>(0,yn.jsxs)("div",{className:"p-3 bg-green-50/50 dark:bg-green-900/20 rounded-lg",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,yn.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.item_title}),(0,yn.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("completed"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("span",{className:"text-sm font-bold text-green-600",children:["$",e.amount]}),(0,yn.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.date).toLocaleDateString()})]})]},e.id))})]}),(0,yn.jsx)("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:f.totalInteractions}),(0,yn.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Interactions"})]})})]})]}),(0,yn.jsxs)("div",{className:"cataloro-card-glass p-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Statistics"}),(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)(Ms,{className:"w-5 h-5 text-blue-600 mr-3"}),(0,yn.jsx)("span",{className:"text-gray-600 dark:text-gray-300",children:"Total Listings"})]}),(0,yn.jsx)("span",{className:"font-bold text-gray-900 dark:text-white",children:d.totalListings})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)(Es,{className:"w-5 h-5 text-green-600 mr-3"}),(0,yn.jsx)("span",{className:"text-gray-600 dark:text-gray-300",children:"Total Sales"})]}),(0,yn.jsx)("span",{className:"font-bold text-gray-900 dark:text-white",children:d.totalSales})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)(Gs,{className:"w-5 h-5 text-yellow-500 mr-3"}),(0,yn.jsx)("span",{className:"text-gray-600 dark:text-gray-300",children:"Rating"})]}),(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)(Gs,{className:"w-4 h-4 text-yellow-400 mr-1"}),(0,yn.jsx)("span",{className:"font-bold text-gray-900 dark:text-white",children:d.avgRating})]})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)(Ss,{className:"w-5 h-5 text-purple-600 mr-3"}),(0,yn.jsx)("span",{className:"text-gray-600 dark:text-gray-300",children:"Response Rate"})]}),(0,yn.jsxs)("span",{className:"font-bold text-gray-900 dark:text-white",children:[d.responseRate,"%"]})]})]})]}),(0,yn.jsxs)("div",{className:"cataloro-card-glass p-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Additional Information"}),(0,yn.jsxs)("div",{className:"space-y-4",children:[i.is_business&&i.company_name&&(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)(Ps,{className:"w-5 h-5 text-blue-600 mr-3"}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Company"}),(0,yn.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:i.company_name})]})]}),(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)(Rs,{className:"w-5 h-5 text-green-600 mr-3"}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Account Status"}),(0,yn.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:i.verified?"Verified Member":"Standard Member"})]})]}),(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)(Us,{className:"w-5 h-5 text-purple-600 mr-3"}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Profile Type"}),(0,yn.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:i.is_business?"Business Account":"Personal Account"})]})]})]})]}),(0,yn.jsxs)("div",{className:"cataloro-card-glass p-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Member Info"}),(0,yn.jsxs)("div",{className:"space-y-4",children:[(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)($s,{className:"w-5 h-5 text-blue-600 mr-3"}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Member since"}),(0,yn.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:new Date(d.memberSince).toLocaleDateString("en-US",{year:"numeric",month:"long"})})]})]}),(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)(ti,{className:"w-5 h-5 text-green-600 mr-3"}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Last active"}),(0,yn.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:d.lastActive})]})]})]})]})]}),(0,yn.jsx)("div",{className:"lg:col-span-2",children:(0,yn.jsxs)("div",{className:"cataloro-card-glass p-6",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,yn.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Recent Listings (",d.activeListings," active)"]}),h.length>6&&(0,yn.jsx)("button",{className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 font-medium",children:"View All \u2192"})]}),0===h.length?(0,yn.jsxs)("div",{className:"text-center py-12",children:[(0,yn.jsx)(Ms,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,yn.jsx)("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Listings Yet"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"This user hasn't created any listings."})]}):(0,yn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h.map((e,t)=>{var r;return(0,yn.jsx)("div",{className:"group cursor-pointer",children:(0,yn.jsxs)("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-xl p-4 hover:bg-white/80 dark:hover:bg-gray-800/80 transition-all duration-300 border border-gray-200/50 dark:border-gray-700/50",children:[(0,yn.jsx)("div",{className:"aspect-w-16 aspect-h-9 mb-4",children:(0,yn.jsx)("img",{src:(null===(r=e.images)||void 0===r?void 0:r[0])||"/api/placeholder/300/200",alt:e.title,className:"w-full h-32 object-cover rounded-lg"})}),(0,yn.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:e.title}),(0,yn.jsxs)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-2",children:["$",e.price]}),(0,yn.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:[e.condition," \u2022 ",e.location]})]})},t)})})]})})]})]})}):(0,yn.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-purple-900 flex items-center justify-center",children:(0,yn.jsxs)("div",{className:"text-center max-w-md mx-auto p-8",children:[(0,yn.jsx)("div",{className:"w-24 h-24 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,yn.jsx)(Ts,{className:"w-12 h-12 text-gray-400"})}),(0,yn.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"Profile Not Available"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"This user's profile is private or doesn't exist."})]})})},Gl=ks("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),Yl=ks("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);const $l=function(e){let{conversations:t=[],activeConversation:r=null,onBack:n}=e;console.log("\ud83d\ude80 MobileMessenger component rendered - props:",{onBack:!!n,activeConversation:r});const{user:s}=Cn(),{showToast:i}=zn();console.log("\ud83d\udd10 Auth context in MobileMessenger:",{user:s,hasUser:!!s});const[o,l]=(0,a.useState)(r?"conversation":"list"),[c,d]=(0,a.useState)(r),[u,h]=(0,a.useState)(""),[m,f]=(0,a.useState)(""),[p,g]=(0,a.useState)(!1),[x,y]=(0,a.useState)(!0),[b,v]=(0,a.useState)([]),[w,j]=(0,a.useState)([]),[k,N]=(0,a.useState)([]),_=(0,a.useRef)(null),[S,E]=(0,a.useState)(!0);(0,a.useEffect)(()=>{const e=setTimeout(()=>{E(!1)},3e3);return()=>clearTimeout(e)},[]),(0,a.useEffect)(()=>{console.log("\ud83d\udd0d MobileMessenger useEffect triggered - user state:",s),console.log("\ud83d\udd0d User keys:",s?Object.keys(s):"user is null/undefined")},[s]),(0,a.useEffect)(()=>{console.log("\ud83c\udfaf loadConversations useEffect triggered - user:",s),A()},[s]),(0,a.useEffect)(()=>{if(k.length>0&&"conversation"===o){const e=setTimeout(()=>{T()},50);return()=>clearTimeout(e)}},[k,o]);const A=async()=>{if(console.log("\ud83d\udd04 Loading conversations - user:",s),s)try{y(!0),console.log("\ud83d\udcde Calling liveService.getUserMessages with user.id:",s.id);const e=await Hn.getUserMessages(s.id);console.log("\u2705 Got user messages:",e);const t=new Map,r=new Date(Date.now()-6048e5);e.forEach(e=>{if(new Date(e.created_at)<r)return;const n=e.sender_id===s.id?e.recipient_id:e.sender_id,a=e.sender_id===s.id?e.recipient_name:e.sender_name;t.has(n)||t.set(n,{id:n,name:a||"Unknown User",initials:(a||"UN").substring(0,2).toUpperCase(),messages:[],lastMessage:null,unreadCount:0,online:Math.random()>.5});const i=t.get(n);i.messages.push(e),(!i.lastMessage||new Date(e.created_at)>new Date(i.lastMessage.created_at))&&(i.lastMessage=e),e.is_read||e.sender_id===s.id||i.unreadCount++});const n=Array.from(t.values()).sort((e,t)=>e.lastMessage||t.lastMessage?e.lastMessage?t.lastMessage?new Date(t.lastMessage.created_at)-new Date(e.lastMessage.created_at):-1:1:0);n.forEach(e=>{e.messages.sort((e,t)=>new Date(e.created_at)-new Date(t.created_at))}),console.log("\ud83d\udccb Setting conversations list:",n),v(n)}catch(e){console.error("\u274c Error loading conversations:",e),i("Error loading conversations","error")}finally{console.log("\u2705 Loading complete, setting loading to false"),y(!1)}else console.log("\u274c No user found in loadConversations")},C=e=>{d(e),l("conversation"),(async e=>{if(e&&e.messages){const t=e.messages.map(e=>({id:e.id,text:e.content,sender:e.sender_id===s.id?"me":"them",timestamp:new Date(e.created_at),status:e.is_read?"read":"delivered"}));t.sort((e,t)=>e.timestamp-t.timestamp),N(t)}})(e)},O=async()=>{if(!u.trim()||!c)return void alert("No message or conversation selected");console.log("\ud83d\udd04 Sending message:",u,"to conversation:",c.id);const e=u,t=Date.now(),r={id:t,text:e,sender:"me",timestamp:new Date,status:"sending"};N(e=>[...e,r]),h("");try{console.log("\ud83d\udce4 Calling liveService.sendMessage...");const r=await Hn.sendMessage({recipient_id:c.id,content:e,sender_id:s.id});console.log("\u2705 Message sent successfully:",r),N(e=>e.map(e=>e.id===t?(0,Ie.A)((0,Ie.A)({},e),{},{status:"sent"}):e)),A()}catch(n){console.error("\u274c Error sending message:",n),i("Failed to send message: "+n.message,"error"),N(e=>e.filter(e=>e.id!==t)),h(e)}},T=()=>{const e=document.getElementById("messages-container");e&&(e.scrollTop=e.scrollHeight)},P=e=>e.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),L=b.filter(e=>e.name.toLowerCase().includes(m.toLowerCase())),M=e=>{switch(e){case"sending":return(0,yn.jsx)(Js,{className:"w-3 h-3 text-gray-400"});case"sent":return(0,yn.jsx)(Gi,{className:"w-3 h-3 text-gray-400"});case"delivered":return(0,yn.jsx)(eo,{className:"w-3 h-3 text-gray-400"});case"read":return(0,yn.jsx)(eo,{className:"w-3 h-3 text-blue-500"});default:return null}};return"list"===o?(0,yn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 dark:bg-gray-900",style:{height:"100vh",height:"100dvh"},children:[(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,yn.jsx)(Ho,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"})}),(0,yn.jsx)("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Messages"})]}),(0,yn.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[b.filter(e=>e.unreadCount>0).length," unread"]})]}),(0,yn.jsxs)("div",{className:"mt-3 relative",children:[(0,yn.jsx)(No,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,yn.jsx)("input",{type:"text",placeholder:"Search conversations...",value:m,onChange:e=>f(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-gray-700 border-0 rounded-lg text-sm placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:bg-white dark:focus:bg-gray-600"})]})]}),(0,yn.jsxs)("div",{className:"flex-1 overflow-y-auto",style:{paddingBottom:"calc(80px + env(safe-area-inset-bottom))"},children:["  ",x?(0,yn.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-center px-4",children:[(0,yn.jsx)("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4 animate-pulse",children:(0,yn.jsx)(No,{className:"w-8 h-8 text-gray-400"})}),(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Loading conversations..."}),(0,yn.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Please wait while we fetch your messages"})]}):0===L.length?(0,yn.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-center px-4",children:[(0,yn.jsx)("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4",children:(0,yn.jsx)(No,{className:"w-8 h-8 text-gray-400"})}),(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No conversations found"}),(0,yn.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Try adjusting your search terms or start a new conversation"})]}):L.map(e=>(0,yn.jsxs)("div",{onClick:()=>C(e),className:"flex items-center space-x-3 p-4 hover:bg-gray-100 dark:hover:bg-gray-800 border-b border-gray-100 dark:border-gray-700 cursor-pointer transition-colors",children:[(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-white font-medium",children:e.initials})}),e.online&&(0,yn.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-4 h-4 bg-green-500 border-2 border-white dark:border-gray-800 rounded-full"})]}),(0,yn.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,yn.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,yn.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white truncate",children:e.name}),(0,yn.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.lastMessage?P(new Date(e.lastMessage.created_at)):""})]}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:e.lastMessage?(0,yn.jsxs)(yn.Fragment,{children:[e.lastMessage.sender_id===(null===s||void 0===s?void 0:s.id)?"You: ":"",e.lastMessage.content]}):"No messages yet"})]}),e.unreadCount>0&&(0,yn.jsx)("div",{className:"bg-blue-500 text-white text-xs rounded-full min-w-[20px] h-5 flex items-center justify-center px-1.5",children:e.unreadCount})]},e.id))]})]}):(0,yn.jsxs)("div",{className:"relative flex flex-col h-full bg-white dark:bg-gray-900",style:{height:"100vh",height:"100dvh"},children:[(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("button",{onClick:()=>l("list"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,yn.jsx)(Ho,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"})}),(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-white font-medium text-sm",children:(null===c||void 0===c?void 0:c.initials)||"UN"})}),(null===c||void 0===c?void 0:c.online)&&(0,yn.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 border-2 border-white dark:border-gray-800 rounded-full"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h2",{className:"font-medium text-gray-900 dark:text-white",children:(null===c||void 0===c?void 0:c.name)||"Unknown User"}),(0,yn.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:null!==c&&void 0!==c&&c.online?"Active now":(e=>{const t=new Date,r=Math.floor((t-e)/36e5);return r<1?"Active now":r<24?"Active ".concat(r,"h ago"):"Active ".concat(Math.floor(r/24),"d ago")})(new Date(Date.now()-36e5))})]})]})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,yn.jsx)(li,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),(0,yn.jsx)("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,yn.jsx)(Ti,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),(0,yn.jsx)("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,yn.jsx)(Ko,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})]})}),(0,yn.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",id:"messages-container",style:{paddingBottom:"calc(80px + env(safe-area-inset-bottom))"},children:[k.map(e=>(0,yn.jsx)("div",{className:"flex ".concat("me"===e.sender?"justify-end":"justify-start"),children:(0,yn.jsxs)("div",{className:"max-w-[75%] ".concat("me"===e.sender?"order-2":"order-1"),children:[(0,yn.jsx)("div",{className:"px-4 py-2 rounded-2xl ".concat("me"===e.sender?"bg-blue-500 text-white rounded-br-md":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-bl-md"),children:(0,yn.jsx)("p",{className:"text-sm",children:e.text})}),(0,yn.jsxs)("div",{className:"flex items-center mt-1 space-x-1 ".concat("me"===e.sender?"justify-end":"justify-start"),children:[(0,yn.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:P(e.timestamp)}),"me"===e.sender&&M(e.status)]})]})},e.id)),(0,yn.jsx)("div",{ref:_})]}),(0,yn.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-4",style:{paddingBottom:"max(16px, env(safe-area-inset-bottom))",transform:"translateZ(0)"},children:(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:["  ",(0,yn.jsx)("button",{className:"p-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:(0,yn.jsx)(Yl,{className:"w-5 h-5"})}),(0,yn.jsxs)("div",{className:"flex-1 relative",children:[(0,yn.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),onKeyPress:e=>"Enter"===e.key&&O(),placeholder:"Type a message...",autoFocus:!1,autoComplete:"off",onFocus:e=>{S&&e.target.blur()},className:"w-full px-4 py-3 bg-gray-100 dark:bg-gray-700 border-0 rounded-2xl text-sm placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:bg-white dark:focus:bg-gray-600 resize-none",rows:"1"}),(0,yn.jsx)("button",{onClick:()=>g(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:(0,yn.jsx)(Gl,{className:"w-5 h-5"})})]}),(0,yn.jsx)("button",{onClick:O,disabled:!u.trim(),className:"p-3 rounded-full transition-colors ".concat(u.trim()?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-200 dark:bg-gray-700 text-gray-400 cursor-not-allowed"),children:(0,yn.jsx)(So,{className:"w-5 h-5"})})]})})]})};const Jl=function(){var e,t;const{user:n}=Cn(),{showToast:s}=zn(),{getUserDisplay:i}=no(),o=function(){const[e,t]=(0,a.useState)(null);return(0,a.useEffect)(()=>{const e=()=>{try{const e=localStorage.getItem("cataloro_site_config");if(e){const r=JSON.parse(e);t(r.adsManager||null)}}catch(e){console.warn("Could not load ads configuration")}};e();const r=()=>{e()};return window.addEventListener("adsConfigUpdated",r),window.addEventListener("storage",r),()=>{window.removeEventListener("adsConfigUpdated",r),window.removeEventListener("storage",r)}},[]),e}(),l=re(),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)([]),[m,f]=(0,a.useState)(null),[p,g]=(0,a.useState)([]),[x,y]=(0,a.useState)({recipient:"",subject:"",content:""}),[b,v]=(0,a.useState)(""),[w,j]=(0,a.useState)(""),[k,N]=(0,a.useState)(!1),[_,S]=(0,a.useState)("all"),[E,A]=(0,a.useState)(!0),[C,O]=(0,a.useState)(0),[T,P]=(0,a.useState)(!1),[L,M]=(0,a.useState)(null),[R,D]=(0,a.useState)(!1),[I,F]=(0,a.useState)([]),[B,U]=(0,a.useState)(!1),[q,z]=(0,a.useState)(!1),[V,H]=(0,a.useState)(null),[W,K]=(0,a.useState)(new Set),[G,Y]=(0,a.useState)(""),[$,J]=(0,a.useState)([]),[Q,Z]=(0,a.useState)(!1),[X,ee]=(0,a.useState)(null),te=(0,a.useRef)(null),ne=(0,a.useRef)(null),ae=(0,a.useRef)({});if((0,a.useEffect)(()=>{const e=()=>{d(window.innerWidth<1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.useEffect)(()=>()=>{console.log("\ud83d\udd04 Leaving Messages area - resetting read status"),window.dispatchEvent(new CustomEvent("messagesSessionReset"))},[]),(0,a.useEffect)(()=>{n&&!c&&(console.log("\ud83d\udd04 Loading messages for desktop version..."),le())},[n,c]),(0,a.useEffect)(()=>{p.length>0&&!c&&setTimeout(()=>{oe()},100)},[p,c]),c)return(0,yn.jsx)("div",{className:"fixed inset-0 z-50 bg-gray-50 dark:bg-gray-900",children:(0,yn.jsx)($l,{onBack:()=>l("/browse")})});const se=(e,t)=>{if(e===(null===n||void 0===n?void 0:n.id)){const e=i();return{badge:(null===e||void 0===e?void 0:e.badge)||"Buyer",role:(null===e||void 0===e?void 0:e.role)||"User-Buyer"}}return null!==t&&void 0!==t&&t.toLowerCase().includes("seller")||null!==t&&void 0!==t&&t.toLowerCase().includes("john")?{badge:"Seller",role:"User-Seller"}:null!==t&&void 0!==t&&t.toLowerCase().includes("admin")?{badge:"Admin",role:"Admin"}:{badge:"Buyer",role:"User-Buyer"}},ie=e=>{switch(e){case"Admin":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"Manager":return"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300";case"Seller":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";default:return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}},oe=()=>{const e=document.getElementById("desktop-messages-container");e&&(e.scrollTop=e.scrollHeight)},le=async()=>{if(n)try{A(!0);const e=await Hn.getUserMessages(n.id),t=new Map,r=new Date(Date.now()-6048e5);e.forEach(e=>{if(new Date(e.created_at)<r)return;const a=e.sender_id===n.id?e.recipient_id:e.sender_id,s=e.sender_id===n.id?e.recipient_name:e.sender_name;t.has(a)||t.set(a,{id:a,name:s||"Unknown User",messages:[],lastMessage:null,unreadCount:0});const i=t.get(a);i.messages.push(e),(!i.lastMessage||new Date(e.created_at)>new Date(i.lastMessage.created_at))&&(i.lastMessage=e),e.is_read||e.sender_id===n.id||i.unreadCount++});const a=Array.from(t.values()).sort((e,t)=>e.lastMessage||t.lastMessage?e.lastMessage?t.lastMessage?new Date(t.lastMessage.created_at)-new Date(e.lastMessage.created_at):-1:1:0);e.length>a.reduce((e,t)=>e+t.messages.length,0)&&s("\u26a0\ufe0f Some conversations older than 7 days have been automatically removed","info"),h(a)}catch(e){console.error("Failed to load messages:",e),s("Failed to load messages","error"),h(me)}finally{A(!1)}},ce=e=>{console.log("\ud83c\udfaf selectConversation called for:",e.name),f(e);const t=e.messages.sort((e,t)=>new Date(e.created_at)-new Date(t.created_at));g(t),h(t=>t.map(t=>t.id===e.id?(0,Ie.A)((0,Ie.A)({},t),{},{unreadCount:0}):t));const r=e.unreadCount||0;if(r>0){console.log("\ud83d\udce7 Immediately updating header - reducing count by ".concat(r)),window.dispatchEvent(new CustomEvent("messagesMarkedAsRead",{detail:{count:r}}));e.messages.filter(e=>!e.is_read&&e.sender_id!==n.id).forEach(e=>{console.log("\ud83d\udcdd Marking message ".concat(e.id," as read on server")),ue(e.id)})}},de=async()=>{if(!b.trim()||!m)return;const e=b;try{var t,r;U(!0),await Hn.sendMessage({sender_id:n.id,recipient_id:m.id,subject:"Re: ".concat((null===(t=p[0])||void 0===t?void 0:t.subject)||"Conversation"),content:e}),v("");const a={id:"temp_".concat(Date.now()),sender_id:n.id,sender_name:(null===n||void 0===n?void 0:n.full_name)||(null===n||void 0===n?void 0:n.username)||"You",recipient_id:m.id,subject:"Re: ".concat((null===(r=p[0])||void 0===r?void 0:r.subject)||"Conversation"),content:e,is_read:!0,created_at:(new Date).toISOString()};g(e=>[...e,a]),setTimeout(()=>le(),1e3)}catch(a){console.error("Failed to send reply:",a),s("Failed to send reply","error")}finally{U(!1)}},ue=async e=>{if(n)try{await Hn.markMessageRead(n.id,e),g(t=>t.map(t=>t.id===e?(0,Ie.A)((0,Ie.A)({},t),{},{is_read:!0}):t)),h(t=>t.map(t=>(0,Ie.A)((0,Ie.A)({},t),{},{messages:t.messages.map(t=>t.id===e?(0,Ie.A)((0,Ie.A)({},t),{},{is_read:!0}):t),unreadCount:Math.max(0,t.unreadCount-1)})))}catch(t){console.error("Failed to mark message as read:",t)}},he=u.filter(e=>{var t,r,a,s,i,o;const l=(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(w.toLowerCase()))||(null===(r=e.lastMessage)||void 0===r||null===(a=r.subject)||void 0===a?void 0:a.toLowerCase().includes(w.toLowerCase()))||(null===(s=e.lastMessage)||void 0===s||null===(i=s.content)||void 0===i?void 0:i.toLowerCase().includes(w.toLowerCase())),c="all"===_||"unread"===_&&e.unreadCount>0||"sent"===_&&(null===(o=e.lastMessage)||void 0===o?void 0:o.sender_id)===(null===n||void 0===n?void 0:n.id);return l&&c}),me=[{id:"user1",conversation_id:"conv1",name:"John Seller",participants:[{id:"user1",name:"John Seller"},{id:(null===n||void 0===n?void 0:n.id)||"demo_user",name:(null===n||void 0===n?void 0:n.full_name)||"Demo User"}],messages:[{id:"1",sender_id:"user1",sender_name:"John Seller",recipient_id:(null===n||void 0===n?void 0:n.id)||"demo_user",subject:"Question about your MacBook Pro listing",content:"Hi! Is the MacBook Pro still available? I'm very interested and can pick it up today. I can offer the full asking price.",is_read:!1,created_at:new Date(Date.now()-72e5).toISOString()},{id:"4",sender_id:(null===n||void 0===n?void 0:n.id)||"demo_user",sender_name:(null===n||void 0===n?void 0:n.full_name)||"Demo User",recipient_id:"user1",subject:"Re: Question about your MacBook Pro listing",content:"Yes, it's still available! When would be a good time for you to pick it up?",is_read:!0,created_at:new Date(Date.now()-36e5).toISOString()},{id:"5",sender_id:"user1",sender_name:"John Seller",recipient_id:(null===n||void 0===n?void 0:n.id)||"demo_user",subject:"Re: Question about your MacBook Pro listing",content:"Great! When would be a good time to meet?",is_read:!0,created_at:new Date(Date.now()-18e5).toISOString()}],lastMessage:null,unreadCount:0},{id:"user2",conversation_id:"conv2",name:"Sarah Buyer",participants:[{id:"user2",name:"Sarah Buyer"},{id:(null===n||void 0===n?void 0:n.id)||"demo_user",name:(null===n||void 0===n?void 0:n.full_name)||"Demo User"}],messages:[{id:"2",sender_id:"user2",sender_name:"Sarah Buyer",recipient_id:null===n||void 0===n?void 0:n.id,subject:"Purchase inquiry",content:"Hello, I saw your vintage guitar listing. Would you consider $800? I'm a serious buyer and can meet today.",is_read:!1,created_at:new Date(Date.now()-18e5).toISOString()}],lastMessage:null,unreadCount:1}];return me.forEach(e=>{e.lastMessage=e.messages[e.messages.length-1],e.unreadCount=e.messages.filter(e=>!e.is_read&&e.sender_id!==(null===n||void 0===n?void 0:n.id)).length}),(0,yn.jsxs)("div",{className:"".concat(q?"fixed inset-0 z-50 bg-white dark:bg-gray-900":"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900"),children:[(0,yn.jsxs)("div",{className:"".concat(q?"h-full":"max-w-6xl mx-auto min-h-[calc(100vh-8rem)] max-h-[calc(100vh-8rem)]"," flex flex-col ").concat(q?"p-0":"m-4"),children:[(0,yn.jsx)("div",{className:"border-b border-white/20 p-6",children:(0,yn.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2 flex items-center",children:[(0,yn.jsx)(Ss,{className:"w-8 h-8 mr-3 text-blue-600"}),"Messages",u.reduce((e,t)=>e+t.unreadCount,0)>0&&(0,yn.jsxs)("span",{className:"ml-3 bg-red-500 text-white text-sm px-3 py-1 rounded-full",children:[u.reduce((e,t)=>e+t.unreadCount,0)," unread"]})]}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Communicate with buyers and sellers"})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-4 mt-4 lg:mt-0",children:[(0,yn.jsx)("button",{onClick:()=>{z(!q)},className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-xl font-medium transition-all duration-200 flex items-center shadow-lg hover:shadow-xl transform hover:scale-105",title:q?"Exit full page":"Enter full page chat",children:q?(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)(yl,{className:"w-5 h-5 mr-2"}),"Exit Full Page"]}):(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)(bl,{className:"w-5 h-5 mr-2"}),"Full Page Chat"]})}),(0,yn.jsxs)("select",{value:_,onChange:e=>S(e.target.value),className:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-700 dark:text-gray-300 focus:ring-2 focus:ring-blue-500",children:[(0,yn.jsx)("option",{value:"all",children:"All Messages"}),(0,yn.jsx)("option",{value:"unread",children:"Unread"}),(0,yn.jsx)("option",{value:"sent",children:"Sent"})]})]})]})}),(0,yn.jsxs)("div",{className:"flex flex-1 min-h-0",children:[(0,yn.jsxs)("div",{className:"".concat(null!==o&&void 0!==o&&null!==(e=o.messengerAd)&&void 0!==e&&e.active?"w-1/4":"w-1/3"," border-r border-gray-200/30 dark:border-gray-700/30"),children:[(0,yn.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(No,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 w-5 h-5"}),(0,yn.jsx)("input",{type:"text",placeholder:"Search conversations...",value:w,onChange:e=>j(e.target.value),className:"pl-10 pr-4 py-3 w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500"})]})}),(0,yn.jsx)("div",{className:"overflow-y-auto flex-1",children:E?(0,yn.jsxs)("div",{className:"p-6 text-center",children:[(0,yn.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-2"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading conversations..."})]}):0===he.length?(0,yn.jsxs)("div",{className:"p-6 text-center",children:[(0,yn.jsx)(Ss,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No conversations"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Start a conversation with buyers and sellers"})]}):he.map(e=>{var t,r,a;return(0,yn.jsx)("div",{onClick:()=>ce(e),className:"p-4 border-b border-gray-100 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-all duration-200 ".concat((null===m||void 0===m?void 0:m.id)===e.id?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700":""),children:(0,yn.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,yn.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,yn.jsx)(Ts,{className:"w-6 h-6 text-white"})}),(0,yn.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2 min-w-0",children:[(0,yn.jsx)("p",{className:"text-sm font-medium ".concat(e.unreadCount>0?"text-gray-900 dark:text-white font-bold":"text-gray-700 dark:text-gray-300"," truncate"),children:e.name}),((t,r,a,s,i,o)=>{const l=(null===(t=e.messages)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.sender_id)===(null===n||void 0===n?void 0:n.id)?null===(a=e.messages)||void 0===a||null===(s=a[0])||void 0===s?void 0:s.recipient_id:null===(i=e.messages)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.sender_id,c=se(l,e.name);return(0,yn.jsx)("span",{className:"inline-flex px-2 py-0.5 text-xs font-medium rounded-full flex-shrink-0 ".concat(ie(c.badge)),children:c.badge})})()]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[e.unreadCount>0&&(0,yn.jsx)("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full font-medium animate-pulse",children:e.unreadCount}),(0,yn.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.lastMessage?new Date(e.lastMessage.created_at).toLocaleDateString():""})]})]}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate mb-1 cursor-pointer hover:text-blue-600 dark:hover:text-blue-400",onClick:t=>{t.stopPropagation(),e.lastMessage&&(ce(e),setTimeout(()=>(e=>{const t=ae.current[e];t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),H(e),setTimeout(()=>{H(null)},3e3))})(e.lastMessage.id),100))},title:"Click to scroll to this message",children:(null===(t=e.lastMessage)||void 0===t?void 0:t.subject)||"No subject"}),(0,yn.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-500 truncate",children:[(null===(r=e.lastMessage)||void 0===r?void 0:r.sender_id)===(null===n||void 0===n?void 0:n.id)?"You: ":"",(null===(a=e.lastMessage)||void 0===a?void 0:a.content)||"No messages yet"]})]})]})},e.id)})})]}),(0,yn.jsx)("div",{className:"flex-1 flex flex-col",children:m?(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)("div",{className:"p-4 border-b border-gray-200/30 dark:border-gray-700/30 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center",children:(0,yn.jsx)(Ts,{className:"w-5 h-5 text-white"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:m.name}),((e,t)=>{const r=null===(e=m.participants)||void 0===e||null===(t=e.find(e=>e.id!==(null===n||void 0===n?void 0:n.id)))||void 0===t?void 0:t.id,a=se(r,m.name);return(0,yn.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(ie(a.badge)),children:a.badge})})()]}),(0,yn.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[p.length," messages"]})]})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this conversation? This action cannot be undone."))try{h(u.filter(t=>t.conversation_id!==e)),(null===m||void 0===m?void 0:m.conversation_id)===e&&(f(null),g([])),s("Conversation deleted successfully","success")}catch(t){console.error("Failed to delete conversation:",t),s("Failed to delete conversation","error")}})(m.conversation_id),className:"p-2 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",title:"Delete conversation",children:(0,yn.jsx)(ei,{className:"w-5 h-5"})}),(0,yn.jsx)("button",{onClick:()=>{var e,t;const r=(null===(e=m.participants)||void 0===e||null===(t=e.find(e=>e.id!==(null===n||void 0===n?void 0:n.id)))||void 0===t?void 0:t.id)||"unknown";window.location.href="/profile/".concat(r)},className:"p-2 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",title:"View user profile",children:(0,yn.jsx)(Ts,{className:"w-5 h-5"})})]})]})}),(0,yn.jsxs)("div",{id:"desktop-messages-container",className:"flex-1 overflow-y-auto p-6 space-y-3 bg-gradient-to-b from-gray-50/30 to-white/50 dark:from-gray-900/30 dark:to-gray-800/50",children:[p.slice().map((e,t,r)=>{const a=e.sender_id===(null===n||void 0===n?void 0:n.id),i=0===t||r[t-1].sender_id!==e.sender_id,o=V===e.id;return(0,yn.jsx)("div",{ref:t=>ae.current[e.id]=t,className:"flex ".concat(a?"justify-end":"justify-start"," ").concat(i?"mt-4":"mt-2"," ").concat(o?"animate-pulse":""),children:(0,yn.jsxs)("div",{className:"flex space-x-3 max-w-xs lg:max-w-md ".concat(a?"flex-row-reverse space-x-reverse":""),children:[i&&(0,yn.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-medium ".concat(a?"bg-blue-600":"bg-gray-600"),children:(a?(null===n||void 0===n?void 0:n.full_name)||(null===n||void 0===n?void 0:n.username)||"You":e.sender_name||"U").charAt(0)}),(0,yn.jsxs)("div",{className:"".concat(i?"":a?"mr-11":"ml-11"),children:[(0,yn.jsxs)("div",{className:"group relative px-4 py-3 rounded-2xl transition-all duration-300 ".concat(o?"ring-2 ring-yellow-400 bg-yellow-50 dark:bg-yellow-900/20":a?"bg-blue-600 text-white":"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600"),children:[(0,yn.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(window.confirm("Are you sure you want to delete this message?"))try{g(p.filter(t=>t.id!==e)),s("Message deleted successfully","success")}catch(t){console.error("Failed to delete message:",t),s("Failed to delete message","error")}})(e.id)},className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 p-1 rounded-full transition-all duration-200 hover:scale-110 ".concat(a?"bg-red-500/20 text-red-200 hover:bg-red-500/30":"bg-red-500/10 text-red-600 hover:bg-red-500/20"),title:"Delete message",children:(0,yn.jsx)(ei,{className:"w-3 h-3"})}),(0,yn.jsx)("p",{className:"text-sm whitespace-pre-wrap pr-6",children:e.content})]}),(0,yn.jsxs)("div",{className:"flex items-center mt-1 space-x-2 text-xs text-gray-500 dark:text-gray-400 ".concat(a?"justify-end":"justify-start"),children:[(0,yn.jsx)("span",{children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),a&&(e.is_read?(0,yn.jsx)(eo,{className:"w-3 h-3 text-blue-500"}):(0,yn.jsx)(Gi,{className:"w-3 h-3"}))]})]})]})},e.id)}),(0,yn.jsx)("div",{ref:te})]}),(0,yn.jsx)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl",children:(0,yn.jsxs)("div",{className:"flex items-end space-x-4",children:[(0,yn.jsxs)("div",{className:"flex-1 relative",children:[(0,yn.jsx)("textarea",{ref:ne,value:b,onChange:e=>{var t;v(e.target.value),(t=e.target).style.height="auto",t.style.height=Math.min(t.scrollHeight,120)+"px"},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),de())},placeholder:"Type your message... (Press Enter to send, Shift+Enter for new line)",className:"w-full px-4 py-3 pr-12 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 resize-none min-h-[3rem] max-h-[8rem]",rows:"1"}),(0,yn.jsx)("button",{className:"absolute right-3 bottom-3 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:(0,yn.jsx)(Gl,{className:"w-5 h-5"})})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("button",{className:"p-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:(0,yn.jsx)(Yl,{className:"w-5 h-5"})}),(0,yn.jsx)("button",{onClick:de,disabled:!b.trim()||B,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white p-3 rounded-xl transition-all duration-200 transform hover:scale-105 disabled:scale-100",children:B?(0,yn.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,yn.jsx)(So,{className:"w-5 h-5"})})]})]})})]}):(0,yn.jsx)("div",{className:"flex items-center justify-center h-full bg-gradient-to-br from-gray-50 to-white dark:from-gray-900 dark:to-gray-800",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)(Ss,{className:"w-20 h-20 text-gray-400 mx-auto mb-4"}),(0,yn.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Select a conversation"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Choose a conversation from the list to start messaging"})]})})}),(null===o||void 0===o||null===(t=o.messengerAd)||void 0===t?void 0:t.active)&&o.messengerAd.image&&(0,yn.jsx)("div",{className:"border-l border-gray-200/30 dark:border-gray-700/30 p-4",style:{width:o.messengerAd.width||"250px",minWidth:o.messengerAd.width||"250px"},children:(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm hover:shadow-md transition-shadow h-fit ".concat(o.messengerAd.url?"cursor-pointer":""),onClick:()=>{if(o.messengerAd.url){try{Promise.resolve().then(r.bind(r,7784)).then(e=>{let{trackAdClick:t}=e;t("messengerAd")})}catch(e){console.warn("Could not track ad click:",e)}console.log("Messenger ad clicked:",o.messengerAd.url),window.open(o.messengerAd.url,"_blank")}},children:(0,yn.jsx)("img",{src:o.messengerAd.image,alt:o.messengerAd.description||"Advertisement",className:"w-full object-cover",style:{height:o.messengerAd.height||"400px"}})})})]})]}),T&&L&&(0,yn.jsxs)("div",{className:"fixed top-4 right-4 z-[10000] bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl p-4 max-w-sm animate-slide-in-right",children:[(0,yn.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:(0,yn.jsx)(Ss,{className:"w-4 h-4 text-white"})}),(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["New message from ",L.sender]}),(0,yn.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:L.timestamp.toLocaleTimeString()})]})]}),(0,yn.jsx)("button",{onClick:()=>P(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,yn.jsx)(Is,{className:"w-4 h-4"})})]}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:L.content}),(0,yn.jsxs)("div",{className:"flex space-x-2",children:[(0,yn.jsx)("button",{onClick:()=>{P(!1);const e=u.find(e=>e.name===L.sender);e&&ce(e)},className:"flex-1 bg-blue-600 text-white px-3 py-2 rounded-md text-xs hover:bg-blue-700 transition-colors",children:"Reply"}),(0,yn.jsx)("button",{onClick:()=>P(!1),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md text-xs hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Dismiss"})]})]})]})},Ql=ks("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);const Zl=function(){const e=re(),{login:t}=Cn(),[r,n]=(0,a.useState)("login"),[s,i]=(0,a.useState)(null),[o,l]=(0,a.useState)({email:"",password:""}),[c,d]=(0,a.useState)({username:"",email:"",password:"",confirmPassword:"",firstName:"",lastName:""}),[u,h]=(0,a.useState)(!1),[m,f]=(0,a.useState)(!1),[p,g]=(0,a.useState)(null),[x,y]=(0,a.useState)({}),[b,v]=(0,a.useState)({});(0,a.useEffect)(()=>{const t=localStorage.getItem("cataloro_token"),r=localStorage.getItem("cataloro_user");if(t&&r)try{"admin"===JSON.parse(r).role?e("/admin"):e("/browse")}catch(Ac){localStorage.removeItem("cataloro_token"),localStorage.removeItem("cataloro_user")}(async()=>{try{const e=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/admin/logo"));if(e.ok){const t=await e.json();t.logo_url&&i(t.logo_url)}}catch(p){console.log("No admin logo found, using default")}})()},[e]);const w=e=>{l((0,Ie.A)((0,Ie.A)({},o),{},{[e.target.name]:e.target.value})),g(null)},j=e=>{d((0,Ie.A)((0,Ie.A)({},c),{},{[e.target.name]:e.target.value})),g(null),y(t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e.target.name]:null}))};return(0,a.useEffect)(()=>{const e={};return c.username&&(e.username=setTimeout(()=>(async e=>{if(e&&!(e.length<3)){v(e=>(0,Ie.A)((0,Ie.A)({},e),{},{username:!0}));try{const t=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/check-username?username=").concat(encodeURIComponent(e)));(await t.json()).available||y(e=>(0,Ie.A)((0,Ie.A)({},e),{},{username:"Username already taken"}))}catch(p){console.error("Error checking username:",p)}finally{v(e=>(0,Ie.A)((0,Ie.A)({},e),{},{username:!1}))}}})(c.username),1e3)),c.email&&(e.email=setTimeout(()=>(async e=>{if(e&&e.includes("@")){v(e=>(0,Ie.A)((0,Ie.A)({},e),{},{email:!0}));try{const t=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/check-email?email=").concat(encodeURIComponent(e)));(await t.json()).available||y(e=>(0,Ie.A)((0,Ie.A)({},e),{},{email:"Email already registered"}))}catch(p){console.error("Error checking email:",p)}finally{v(e=>(0,Ie.A)((0,Ie.A)({},e),{},{email:!1}))}}})(c.email),1e3)),()=>{Object.values(e).forEach(e=>clearTimeout(e))}},[c.username,c.email]),(0,yn.jsxs)("div",{className:"min-h-screen relative overflow-hidden bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:[(0,yn.jsxs)("div",{className:"absolute inset-0",children:[(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-900/80 via-purple-900/80 to-pink-900/80"}),(0,yn.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden",children:[(0,yn.jsx)("div",{className:"absolute -top-40 -left-40 w-80 h-80 bg-gradient-to-r from-cyan-400/30 to-blue-500/30 rounded-full blur-3xl animate-blob"}),(0,yn.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-r from-purple-400/30 to-pink-500/30 rounded-full blur-3xl animate-blob animation-delay-2000"}),(0,yn.jsx)("div",{className:"absolute -bottom-40 left-1/2 transform -translate-x-1/2 w-80 h-80 bg-gradient-to-r from-emerald-400/30 to-cyan-500/30 rounded-full blur-3xl animate-blob animation-delay-4000"})]}),(0,yn.jsxs)("div",{className:"absolute inset-0",children:[(0,yn.jsx)("div",{className:"absolute top-1/4 left-1/4 w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),(0,yn.jsx)("div",{className:"absolute top-1/3 right-1/4 w-1 h-1 bg-purple-400 rounded-full animate-ping animation-delay-1000"}),(0,yn.jsx)("div",{className:"absolute bottom-1/3 left-1/3 w-1.5 h-1.5 bg-pink-400 rounded-full animate-pulse animation-delay-2000"}),(0,yn.jsx)("div",{className:"absolute top-2/3 right-1/3 w-1 h-1 bg-emerald-400 rounded-full animate-ping animation-delay-3000"})]}),(0,yn.jsxs)("div",{className:"absolute inset-0 opacity-30",children:[(0,yn.jsx)("div",{className:"w-2 h-2 bg-white/5 rounded-full absolute top-10 left-10"}),(0,yn.jsx)("div",{className:"w-1 h-1 bg-white/5 rounded-full absolute top-20 left-32"}),(0,yn.jsx)("div",{className:"w-1.5 h-1.5 bg-white/5 rounded-full absolute top-32 left-16"}),(0,yn.jsx)("div",{className:"w-1 h-1 bg-white/5 rounded-full absolute top-40 left-48"})]})]}),(0,yn.jsx)("div",{className:"relative min-h-screen flex items-center justify-center p-4 z-10",children:(0,yn.jsxs)("div",{className:"w-full max-w-md",children:[(0,yn.jsxs)("div",{className:"text-center mb-8",children:[(0,yn.jsx)("div",{className:"mb-6 relative",children:s?(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)("div",{className:"w-20 h-20 mx-auto bg-white/10 backdrop-blur-xl rounded-3xl border border-white/20 flex items-center justify-center p-2",children:(0,yn.jsx)("img",{src:s,alt:"Company Logo",className:"max-w-full max-h-full object-contain"})}),(0,yn.jsx)("div",{className:"absolute inset-0 w-20 h-20 mx-auto bg-gradient-to-r from-cyan-500/20 to-purple-500/20 rounded-3xl blur-xl animate-pulse"}),(0,yn.jsx)(Ql,{className:"absolute -top-2 -right-2 w-6 h-6 text-cyan-400 animate-spin",style:{animationDuration:"3s"}})]}):(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)("div",{className:"w-20 h-20 mx-auto bg-gradient-to-br from-cyan-500/20 to-purple-500/20 backdrop-blur-xl rounded-3xl border border-white/20 flex items-center justify-center",children:(0,yn.jsx)(Ns,{className:"w-10 h-10 text-white drop-shadow-lg"})}),(0,yn.jsx)("div",{className:"absolute inset-0 w-20 h-20 mx-auto bg-gradient-to-r from-cyan-500/20 to-purple-500/20 rounded-3xl blur-xl animate-pulse"}),(0,yn.jsx)(Ql,{className:"absolute -top-2 -right-2 w-6 h-6 text-cyan-400 animate-spin",style:{animationDuration:"3s"}})]})}),(0,yn.jsx)("h1",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-cyan-200 to-purple-200 mb-2",children:"Welcome to Cataloro"}),(0,yn.jsx)("p",{className:"text-gray-300/80 text-lg",children:"Your premium marketplace experience"})]}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)("div",{className:"absolute inset-0 bg-white/5 backdrop-blur-2xl rounded-3xl border border-white/10"}),(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-500/5 via-transparent to-purple-500/5 rounded-3xl"}),(0,yn.jsxs)("div",{className:"relative p-8",children:[(0,yn.jsxs)("div",{className:"flex mb-8 relative",children:[(0,yn.jsx)("div",{className:"absolute inset-0 bg-white/5 rounded-2xl"}),(0,yn.jsxs)("button",{type:"button",onClick:()=>n("login"),className:"relative flex-1 py-4 px-6 text-center font-semibold rounded-xl transition-all duration-500 ".concat("login"===r?"bg-gradient-to-r from-cyan-500/20 to-purple-500/20 text-white shadow-lg transform scale-105":"text-gray-300/70"),children:[(0,yn.jsx)(Ts,{className:"w-5 h-5 inline mr-2"}),"Sign In","login"===r&&(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/10 to-purple-500/10 rounded-xl blur-lg"})]}),(0,yn.jsxs)("button",{type:"button",onClick:()=>n("register"),className:"relative flex-1 py-4 px-6 text-center font-semibold rounded-xl transition-all duration-500 ".concat("register"===r?"bg-gradient-to-r from-cyan-500/20 to-purple-500/20 text-white shadow-lg transform scale-105":"text-gray-300/70"),children:[(0,yn.jsx)(oi,{className:"w-5 h-5 inline mr-2"}),"Sign Up","register"===r&&(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/10 to-purple-500/10 rounded-xl blur-lg"})]})]}),p&&(0,yn.jsx)("div",{className:"mb-6 p-4 bg-red-500/10 backdrop-blur-sm border border-red-500/20 rounded-2xl",children:(0,yn.jsx)("p",{className:"text-red-300 text-sm font-medium",children:p})}),"login"===r&&(0,yn.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),f(!0),g(null);try{const e=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o.email,password:o.password})});if(!e.ok)throw new Error("Login failed: ".concat(e.status));const t=await e.json();localStorage.setItem("cataloro_token",t.token),localStorage.setItem("cataloro_user",JSON.stringify(t.user)),window.location.href="/browse"}catch(p){g(p.message||"Login failed. Please check your credentials."),console.error("Login error:",p)}finally{f(!1)}},className:"space-y-6",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-semibold text-gray-200 mb-3",children:"Email Address"}),(0,yn.jsxs)("div",{className:"relative group",children:[(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/10 to-purple-500/10 rounded-2xl blur-lg group-focus-within:blur-xl transition-all duration-300"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(Hs,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 z-10"}),(0,yn.jsx)("input",{type:"email",name:"email",value:o.email,onChange:w,required:!0,className:"w-full pl-12 pr-4 py-4 bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl focus:border-cyan-500/50 focus:ring-2 focus:ring-cyan-500/20 text-white placeholder-gray-400 transition-all duration-300",placeholder:"Enter your email"})]})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-semibold text-gray-200 mb-3",children:"Password"}),(0,yn.jsxs)("div",{className:"relative group",children:[(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/10 to-purple-500/10 rounded-2xl blur-lg group-focus-within:blur-xl transition-all duration-300"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(ni,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 z-10"}),(0,yn.jsx)("input",{type:u?"text":"password",name:"password",value:o.password,onChange:w,required:!0,className:"w-full pl-12 pr-14 py-4 bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl focus:border-cyan-500/50 focus:ring-2 focus:ring-cyan-500/20 text-white placeholder-gray-400 transition-all duration-300",placeholder:"Enter your password"}),(0,yn.jsx)("button",{type:"button",onClick:()=>h(!u),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 z-10",children:u?(0,yn.jsx)(ri,{className:"w-5 h-5"}):(0,yn.jsx)(ti,{className:"w-5 h-5"})})]})]})]}),(0,yn.jsxs)("button",{type:"submit",disabled:m,className:"relative w-full py-4 px-6 bg-gradient-to-r from-cyan-500 to-purple-500 text-white font-semibold rounded-2xl disabled:opacity-50 disabled:cursor-not-allowed overflow-hidden group",children:[(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-600 to-purple-600 opacity-0 group-active:opacity-100 transition-opacity duration-200"}),(0,yn.jsx)("div",{className:"relative flex items-center justify-center",children:m?(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),"Signing In..."]}):(0,yn.jsxs)(yn.Fragment,{children:["Sign In",(0,yn.jsx)(vl,{className:"w-5 h-5 ml-3"})]})}),(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/20 to-purple-500/20 rounded-2xl blur-xl"})]})]}),"register"===r&&(0,yn.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),f(!0),g(null),c.password!==c.confirmPassword)return g("Passwords do not match"),void f(!1);if(c.password.length<6)return g("Password must be at least 6 characters long"),void f(!1);try{const e=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:c.username,email:c.email,password:c.password,first_name:c.firstName,last_name:c.lastName,full_name:"".concat(c.firstName," ").concat(c.lastName).trim()})});if(!e.ok){const t=await e.json();throw new Error(t.detail||"Registration failed: ".concat(e.status))}const t=await e.json();localStorage.setItem("cataloro_token",t.token),localStorage.setItem("cataloro_user",JSON.stringify(t.user)),window.location.href="/browse"}catch(p){g(p.message||"Registration failed. Please try again."),console.error("Registration error:",p)}finally{f(!1)}},className:"space-y-6",children:[(0,yn.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-semibold text-gray-200 mb-3",children:"First Name"}),(0,yn.jsxs)("div",{className:"relative group",children:[(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/10 to-purple-500/10 rounded-2xl blur-lg group-focus-within:blur-xl transition-all duration-300"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(Ts,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 z-10"}),(0,yn.jsx)("input",{type:"text",name:"firstName",value:c.firstName,onChange:j,required:!0,className:"w-full pl-12 pr-4 py-4 bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl focus:border-cyan-500/50 focus:ring-2 focus:ring-cyan-500/20 text-white placeholder-gray-400 transition-all duration-300",placeholder:"First name"})]})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-semibold text-gray-200 mb-3",children:"Last Name"}),(0,yn.jsxs)("div",{className:"relative group",children:[(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/10 to-purple-500/10 rounded-2xl blur-lg group-focus-within:blur-xl transition-all duration-300"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(Ts,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 z-10"}),(0,yn.jsx)("input",{type:"text",name:"lastName",value:c.lastName,onChange:j,required:!0,className:"w-full pl-12 pr-4 py-4 bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl focus:border-cyan-500/50 focus:ring-2 focus:ring-cyan-500/20 text-white placeholder-gray-400 transition-all duration-300",placeholder:"Last name"})]})]})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-semibold text-gray-200 mb-3",children:"Username"}),(0,yn.jsxs)("div",{className:"relative group",children:[(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/10 to-purple-500/10 rounded-2xl blur-lg group-focus-within:blur-xl transition-all duration-300"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(Ts,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 z-10"}),(0,yn.jsx)("input",{type:"text",name:"username",value:c.username,onChange:j,required:!0,className:"w-full pl-12 pr-4 py-4 bg-white/5 backdrop-blur-xl border rounded-2xl focus:ring-2 text-white placeholder-gray-400 transition-all duration-300 ".concat(x.username?"border-red-500/50 focus:border-red-500/50 focus:ring-red-500/20":"border-white/10 focus:border-cyan-500/50 focus:ring-cyan-500/20"),placeholder:"Choose a username"}),b.username&&(0,yn.jsx)("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:(0,yn.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-cyan-500"})})]})]}),x.username&&(0,yn.jsx)("div",{className:"text-red-400 text-sm mt-2",children:x.username})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-semibold text-gray-200 mb-3",children:"Email Address"}),(0,yn.jsxs)("div",{className:"relative group",children:[(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/10 to-purple-500/10 rounded-2xl blur-lg group-focus-within:blur-xl transition-all duration-300"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(Hs,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 z-10"}),(0,yn.jsx)("input",{type:"email",name:"email",value:c.email,onChange:j,required:!0,className:"w-full pl-12 pr-4 py-4 bg-white/5 backdrop-blur-xl border rounded-2xl focus:ring-2 text-white placeholder-gray-400 transition-all duration-300 ".concat(x.email?"border-red-500/50 focus:border-red-500/50 focus:ring-red-500/20":"border-white/10 focus:border-cyan-500/50 focus:ring-cyan-500/20"),placeholder:"Enter your email"}),b.email&&(0,yn.jsx)("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:(0,yn.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-cyan-500"})})]})]}),x.email&&(0,yn.jsx)("div",{className:"text-red-400 text-sm mt-2",children:x.email})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-semibold text-gray-200 mb-3",children:"Password"}),(0,yn.jsxs)("div",{className:"relative group",children:[(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/10 to-purple-500/10 rounded-2xl blur-lg group-focus-within:blur-xl transition-all duration-300"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(ni,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 z-10"}),(0,yn.jsx)("input",{type:u?"text":"password",name:"password",value:c.password,onChange:j,required:!0,minLength:6,className:"w-full pl-12 pr-14 py-4 bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl focus:border-cyan-500/50 focus:ring-2 focus:ring-cyan-500/20 text-white placeholder-gray-400 transition-all duration-300",placeholder:"Create a password (min 6 characters)"}),(0,yn.jsx)("button",{type:"button",onClick:()=>h(!u),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 z-10",children:u?(0,yn.jsx)(ri,{className:"w-5 h-5"}):(0,yn.jsx)(ti,{className:"w-5 h-5"})})]})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-semibold text-gray-200 mb-3",children:"Confirm Password"}),(0,yn.jsxs)("div",{className:"relative group",children:[(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/10 to-purple-500/10 rounded-2xl blur-lg group-focus-within:blur-xl transition-all duration-300"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(ni,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 z-10"}),(0,yn.jsx)("input",{type:u?"text":"password",name:"confirmPassword",value:c.confirmPassword,onChange:j,required:!0,className:"w-full pl-12 pr-4 py-4 bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl focus:border-cyan-500/50 focus:ring-2 focus:ring-cyan-500/20 text-white placeholder-gray-400 transition-all duration-300",placeholder:"Confirm your password"})]})]})]}),(0,yn.jsxs)("button",{type:"submit",disabled:m,className:"relative w-full py-4 px-6 bg-gradient-to-r from-cyan-500 to-purple-500 text-white font-semibold rounded-2xl disabled:opacity-50 disabled:cursor-not-allowed overflow-hidden group",children:[(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-600 to-purple-600 opacity-0 group-active:opacity-100 transition-opacity duration-200"}),(0,yn.jsx)("div",{className:"relative flex items-center justify-center",children:m?(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),"Creating Account..."]}):(0,yn.jsxs)(yn.Fragment,{children:["Create Account",(0,yn.jsx)(oi,{className:"w-5 h-5 ml-3"})]})}),(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/20 to-purple-500/20 rounded-2xl blur-xl"})]})]})]})]}),(0,yn.jsx)("div",{className:"text-center mt-8",children:(0,yn.jsx)("p",{className:"text-sm text-gray-400/60",children:"\xa9 2024 Cataloro. Premium marketplace experience."})})]})})]})};const Xl=function(){const[e,t]=(0,a.useState)({first_name:"",last_name:"",username:"",email:"",password:"",confirmPassword:"",account_type:"buyer",is_business:!1,company_name:"",country:"",vat_number:""}),[r,n]=(0,a.useState)(!1),[s,i]=(0,a.useState)(!1),[o,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(!1),{register:u,isAuthenticated:h,isLoading:m,error:f,clearError:p}=Cn(),g=re();(0,a.useEffect)(()=>{h&&g(fn.BROWSE)},[h,g]),(0,a.useEffect)(()=>()=>p(),[p]);const x=r=>{const{name:n,value:a,type:s,checked:i}=r.target;t((0,Ie.A)((0,Ie.A)({},e),{},{[n]:"checkbox"===s?i:a})),p(),"username"===n&&a.length>=3?y(a):"username"===n&&l(null)},y=async e=>{d(!0);try{const t=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/auth/check-username/").concat(e));if(t.ok){const e=await t.json();l(e.available)}else l(null)}catch(f){console.error("Error checking username:",f),l(null)}finally{d(!1)}},b=()=>{if(!e.first_name.trim())return"First name is required";if(!e.last_name.trim())return"Last name is required";if(!e.username.trim())return"Username is required";if(e.username.length<3)return"Username must be at least 3 characters";if(!1===o)return"Username is not available";if(!e.email.trim())return"Email is required";if(e.password!==e.confirmPassword)return"Passwords do not match";if(e.password.length<6)return"Password must be at least 6 characters";if(e.is_business){if(!e.company_name.trim())return"Company name is required for business accounts";if(!e.country.trim())return"Country is required for business accounts"}return null},v=b();return(0,yn.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:(0,yn.jsxs)("div",{className:"max-w-md w-full",children:[(0,yn.jsxs)("div",{className:"text-center mb-8",children:[(0,yn.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,yn.jsx)("span",{className:"text-white font-bold text-2xl",children:"C"})}),(0,yn.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Join ",pn.APP_NAME]}),(0,yn.jsx)("p",{className:"text-gray-600",children:"Create your marketplace account"})]}),(0,yn.jsxs)("div",{className:"cataloro-card p-8",children:[(0,yn.jsxs)("form",{onSubmit:async t=>{t.preventDefault();if(!b())try{await u({username:e.username,email:e.email,first_name:e.first_name,last_name:e.last_name,full_name:"".concat(e.first_name," ").concat(e.last_name).trim(),password:e.password,account_type:e.account_type,is_business:e.is_business,company_name:e.is_business?e.company_name:"",country:e.is_business?e.country:"",vat_number:e.is_business?e.vat_number:""}),alert("Registration submitted successfully! Your account is pending admin approval. You will be notified once approved."),g(fn.LOGIN)}catch(f){console.error("Registration failed:",f)}},className:"space-y-6",children:[(f||v)&&(0,yn.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:f||v}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(Ts,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,yn.jsx)("input",{type:"text",name:"first_name",required:!0,value:e.first_name,onChange:x,className:"cataloro-input pl-10",placeholder:"Enter your first name"})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(Ts,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,yn.jsx)("input",{type:"text",name:"last_name",required:!0,value:e.last_name,onChange:x,className:"cataloro-input pl-10",placeholder:"Enter your last name"})]})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username *"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(Ts,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,yn.jsx)("input",{type:"text",name:"username",required:!0,value:e.username,onChange:x,className:"cataloro-input pl-10 pr-10",placeholder:"Choose a username"}),e.username.length>=3&&(0,yn.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:c?(0,yn.jsx)($i,{className:"w-5 h-5 text-gray-400 animate-spin"}):!0===o?(0,yn.jsx)(Gi,{className:"w-5 h-5 text-green-500"}):!1===o?(0,yn.jsx)(Is,{className:"w-5 h-5 text-red-500"}):null})]}),e.username.length>=3&&null!==o&&(0,yn.jsx)("div",{className:"mt-1 text-sm ".concat(o?"text-green-600":"text-red-600"),children:o?"Username is available":"Username is not available"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(Hs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,yn.jsx)("input",{type:"email",name:"email",required:!0,value:e.email,onChange:x,className:"cataloro-input pl-10",placeholder:"Enter your email"})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(ni,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,yn.jsx)("input",{type:r?"text":"password",name:"password",required:!0,value:e.password,onChange:x,className:"cataloro-input pl-10 pr-10",placeholder:"Create a password"}),(0,yn.jsx)("button",{type:"button",onClick:()=>n(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r?(0,yn.jsx)(ri,{className:"w-5 h-5"}):(0,yn.jsx)(ti,{className:"w-5 h-5"})})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password *"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(ni,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,yn.jsx)("input",{type:s?"text":"password",name:"confirmPassword",required:!0,value:e.confirmPassword,onChange:x,className:"cataloro-input pl-10 pr-10",placeholder:"Confirm your password"}),(0,yn.jsx)("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s?(0,yn.jsx)(ri,{className:"w-5 h-5"}):(0,yn.jsx)(ti,{className:"w-5 h-5"})})]})]}),(0,yn.jsx)("div",{className:"space-y-4",children:(0,yn.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Account Type *"}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,yn.jsxs)("div",{className:"relative p-4 border-2 rounded-lg cursor-pointer ".concat("buyer"===e.account_type?"border-blue-500 bg-blue-50 ring-2 ring-blue-200":"border-gray-200 hover:border-gray-300"),onClick:()=>t((0,Ie.A)((0,Ie.A)({},e),{},{account_type:"buyer"})),children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("input",{type:"radio",name:"account_type",value:"buyer",checked:"buyer"===e.account_type,onChange:x,className:"w-4 h-4 text-blue-600"}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"font-medium text-gray-900",children:"Buyer Account"}),(0,yn.jsx)("div",{className:"text-sm text-gray-500",children:"Browse and bid on listings"})]})]}),"buyer"===e.account_type&&(0,yn.jsx)("div",{className:"absolute top-2 right-2",children:(0,yn.jsx)(Gi,{className:"w-5 h-5 text-blue-600"})})]}),(0,yn.jsxs)("div",{className:"relative p-4 border-2 rounded-lg cursor-pointer ".concat("seller"===e.account_type?"border-green-500 bg-green-50 ring-2 ring-green-200":"border-gray-200 hover:border-gray-300"),onClick:()=>t((0,Ie.A)((0,Ie.A)({},e),{},{account_type:"seller"})),children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("input",{type:"radio",name:"account_type",value:"seller",checked:"seller"===e.account_type,onChange:x,className:"w-4 h-4 text-green-600"}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"font-medium text-gray-900",children:"Seller Account"}),(0,yn.jsx)("div",{className:"text-sm text-gray-500",children:"Create and manage listings"})]})]}),"seller"===e.account_type&&(0,yn.jsx)("div",{className:"absolute top-2 right-2",children:(0,yn.jsx)(Gi,{className:"w-5 h-5 text-green-600"})})]})]}),(0,yn.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"You can switch between buying and selling after account approval. Both account types are free."})]})}),(0,yn.jsxs)("div",{className:"space-y-4",children:[(0,yn.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yn.jsx)("input",{type:"checkbox",id:"is_business",name:"is_business",checked:e.is_business,onChange:x,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),(0,yn.jsxs)("label",{htmlFor:"is_business",className:"text-sm font-medium text-gray-700 flex items-center",children:[(0,yn.jsx)(ml,{className:"w-4 h-4 mr-2 text-blue-600"}),"Register as Business"]})]}),(0,yn.jsx)("p",{className:"text-xs text-gray-500 ml-7 mt-1",children:"Check this box if you're registering for your company or business"})]}),e.is_business&&(0,yn.jsxs)("div",{className:"space-y-4 bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,yn.jsxs)("h4",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 flex items-center",children:[(0,yn.jsx)(ml,{className:"w-4 h-4 mr-2"}),"Business Information"]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name *"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(ml,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,yn.jsx)("input",{type:"text",name:"company_name",required:e.is_business,value:e.company_name,onChange:x,className:"cataloro-input pl-10",placeholder:"Enter your company name"})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country *"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(Us,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,yn.jsx)("input",{type:"text",name:"country",required:e.is_business,value:e.country,onChange:x,className:"cataloro-input pl-10",placeholder:"Enter your country"})]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["VAT Number",(0,yn.jsx)("span",{className:"text-xs text-gray-500 ml-1",children:"(Optional)"})]}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(ml,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,yn.jsx)("input",{type:"text",name:"vat_number",value:e.vat_number,onChange:x,className:"cataloro-input pl-10",placeholder:"Enter your VAT number (if applicable)"})]})]})]})]}),(0,yn.jsx)("button",{type:"submit",disabled:m||v,className:"w-full cataloro-button-primary disabled:opacity-50 disabled:cursor-not-allowed",children:m?(0,yn.jsxs)("div",{className:"flex items-center justify-center",children:[(0,yn.jsx)("div",{className:"spinner mr-2"}),"Creating Account..."]}):"Create Account"})]}),(0,yn.jsx)("div",{className:"mt-6 text-center",children:(0,yn.jsxs)("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",(0,yn.jsx)(Le,{to:fn.LOGIN,className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign in here"})]})})]})]})})},ec=ks("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),tc=ks("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]),rc=ks("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),nc={users:ii,package:Ms,trending:zs,star:Gs,zap:mi,target:gi,store:Ns,"shopping-cart":As,"message-circle":Ss,settings:Ps,shield:Rs,search:No,heart:Cs,bell:Os,"bar-chart":qs,award:pi,lightbulb:ec,rocket:tc,clock:Js},ac={blue:"from-blue-500 to-blue-600",green:"from-green-500 to-green-600",purple:"from-purple-500 to-purple-600",yellow:"from-yellow-500 to-yellow-600",red:"from-red-500 to-red-600",pink:"from-pink-500 to-pink-600","blue-purple":"from-blue-500 to-purple-600","green-teal":"from-green-500 to-teal-600","orange-red":"from-orange-500 to-red-600","purple-pink":"from-purple-500 to-pink-600"};const sc=function(){const[e,t]=(0,a.useState)(null),[r,n]=(0,a.useState)(!0),[s,i]=(0,a.useState)(null);if((0,a.useEffect)(()=>{(async()=>{try{n(!0);const e=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/admin/content"));if(!e.ok)throw new Error("Failed to load content");{const r=await e.json();if(t(r),r.seo){document.title=r.seo.title||"Cataloro - Ultra-Modern Marketplace Platform";let e=document.querySelector('meta[name="description"]');e||(e=document.createElement("meta"),e.name="description",document.head.appendChild(e)),e.content=r.seo.description||"Experience the future of online commerce";let t=document.querySelector('meta[name="keywords"]');if(t||(t=document.createElement("meta"),t.name="keywords",document.head.appendChild(t)),t.content=Array.isArray(r.seo.keywords)?r.seo.keywords.join(", "):r.seo.keywords||"",r.seo.ogImage){let e=document.querySelector('meta[property="og:image"]');e||(e=document.createElement("meta"),e.setAttribute("property","og:image"),document.head.appendChild(e)),e.content=r.seo.ogImage}}}}catch(s){console.error("Error loading CMS content:",s),i(s.message)}finally{n(!1)}})()},[]),r)return(0,yn.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)(il,{className:"w-12 h-12 text-purple-400 animate-spin mx-auto mb-4"}),(0,yn.jsx)("p",{className:"text-lg text-white",children:"Loading content..."})]})});if(s)return(0,yn.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,yn.jsx)(Rs,{className:"w-8 h-8 text-red-400"})}),(0,yn.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Content Loading Error"}),(0,yn.jsx)("p",{className:"text-gray-300 mb-4",children:"Unable to load page content from CMS"}),(0,yn.jsx)("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition-colors",children:"Retry"})]})});const o={hero:(null===e||void 0===e?void 0:e.hero)||{title:"Cataloro",subtitle:"The Future of Online Marketplace",description:"Experience next-generation commerce with our ultra-modern platform featuring intelligent matching, real-time communication, and seamless transactions.",primaryButtonText:"Start Trading Now",primaryButtonLink:"/login",secondaryButtonText:"Explore Features",secondaryButtonLink:"/browse",backgroundImage:"https://images.unsplash.com/photo-1559136555-9303baea8ebd?w=1920&h=1080&fit=crop&crop=center",heroImage:"https://images.unsplash.com/photo-1551434678-e076c223a692?w=800&h=600&fit=crop&crop=center",showHeroImage:!0,heroImagePosition:"right",showVideo:!1,videoUrl:"https://player.vimeo.com/video/123456789"},stats:(null===e||void 0===e?void 0:e.stats)||[{label:"Active Users",value:"25K+",icon:"users",color:"blue"},{label:"Products Listed",value:"150K+",icon:"package",color:"green"},{label:"Successful Deals",value:"75K+",icon:"trending",color:"purple"},{label:"User Satisfaction",value:"4.9\u2605",icon:"star",color:"yellow"}],features:(null===e||void 0===e?void 0:e.features)||{title:"Advanced Platform Features",description:"Discover the comprehensive suite of tools that make Cataloro the most advanced marketplace platform.",backgroundImage:"https://images.unsplash.com/photo-1551434678-e076c223a692?w=1920&h=1080&fit=crop&crop=center",categories:[]},testimonials:(null===e||void 0===e?void 0:e.testimonials)||{enabled:!0,title:"What Our Users Say",description:"Join thousands of satisfied users who trust Cataloro for their marketplace needs.",backgroundImage:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=1920&h=1080&fit=crop&crop=center",items:[]},about:(null===e||void 0===e?void 0:e.about)||{enabled:!0,title:"About Cataloro",subtitle:"Revolutionizing Digital Commerce",description:"Founded with the vision to transform online trading, we combine cutting-edge technology with user-centric design to create the ultimate marketplace experience.",image:"https://images.unsplash.com/photo-1497366216548-37526070297c?w=800&h=600&fit=crop&crop=center",features:["AI-Powered Matching","Real-time Communication","Advanced Security","Global Reach"]},team:(null===e||void 0===e?void 0:e.team)||{enabled:!0,title:"Meet Our Team",description:"Passionate experts dedicated to revolutionizing digital commerce.",backgroundImage:"https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=1920&h=1080&fit=crop&crop=center",members:[]},cta:(null===e||void 0===e?void 0:e.cta)||{title:"Ready to Transform Your Trading?",description:"Join thousands of users experiencing the future of online commerce.",primaryButtonText:"Start Your Journey",primaryButtonLink:"/login",secondaryButtonText:"Explore Platform",secondaryButtonLink:"/browse",backgroundImage:"https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=1920&h=1080&fit=crop&crop=center"}};return(0,yn.jsxs)("div",{className:"min-h-screen",children:[(0,yn.jsxs)("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[(0,yn.jsx)("div",{className:"absolute inset-0 bg-cover bg-center bg-fixed",style:{backgroundImage:"url(".concat(o.hero.backgroundImage,")"),filter:"brightness(0.4)"}}),(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-black/70 via-purple-900/50 to-black/70"}),(0,yn.jsx)("div",{className:"absolute inset-0",children:[...Array(20)].map((e,t)=>(0,yn.jsx)("div",{className:"absolute w-2 h-2 bg-white/20 rounded-full animate-pulse",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%"),animationDelay:"".concat(5*Math.random(),"s"),animationDuration:"".concat(3+4*Math.random(),"s")}},t))}),(0,yn.jsxs)("div",{className:"relative z-10 max-w-7xl mx-auto px-4",children:[(0,yn.jsxs)("div",{className:"grid lg:grid-cols-2 gap-12 items-center min-h-[80vh]",children:[(0,yn.jsx)("div",{className:"".concat("left"===o.hero.heroImagePosition?"lg:order-2":"lg:order-1"," text-center lg:text-left"),children:(0,yn.jsxs)("div",{className:"mb-8",children:[(0,yn.jsxs)("div",{className:"inline-flex items-center space-x-2 bg-white/10 backdrop-blur-md rounded-full px-6 py-3 mb-6",children:[(0,yn.jsx)(Ql,{className:"w-5 h-5 text-yellow-400"}),(0,yn.jsx)("span",{className:"text-white font-medium",children:"The Future is Here"})]}),(0,yn.jsx)("h1",{className:"text-5xl md:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-purple-200 to-pink-200 mb-6 leading-tight",children:o.hero.title}),(0,yn.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-purple-200 mb-8",children:o.hero.subtitle}),(0,yn.jsx)("p",{className:"text-lg md:text-xl text-gray-300 mb-12 leading-relaxed max-w-2xl mx-auto lg:mx-0",children:o.hero.description}),(0,yn.jsxs)("div",{className:"flex flex-col sm:flex-row gap-6 justify-center lg:justify-start",children:[(0,yn.jsxs)(Le,{to:o.hero.primaryButtonLink,className:"group relative px-10 py-5 rounded-2xl bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold text-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-300 transform hover:scale-105 shadow-2xl hover:shadow-purple-500/25",children:[(0,yn.jsx)("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-r from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,yn.jsxs)("div",{className:"relative flex items-center justify-center space-x-3",children:[(0,yn.jsx)("span",{children:o.hero.primaryButtonText}),(0,yn.jsx)(vl,{className:"w-6 h-6 group-hover:translate-x-1 transition-transform duration-300"})]})]}),(0,yn.jsx)(Le,{to:o.hero.secondaryButtonLink,className:"group px-10 py-5 rounded-2xl bg-white/10 backdrop-blur-md border border-white/20 text-white font-bold text-lg hover:bg-white/20 transition-all duration-300 transform hover:scale-105",children:(0,yn.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,yn.jsx)(Di,{className:"w-6 h-6"}),(0,yn.jsx)("span",{children:o.hero.secondaryButtonText})]})})]})]})}),o.hero.showHeroImage&&o.hero.heroImage&&(0,yn.jsx)("div",{className:"".concat("left"===o.hero.heroImagePosition?"lg:order-1":"lg:order-2"," relative"),children:(0,yn.jsxs)("div",{className:"relative group",children:[(0,yn.jsx)("div",{className:"absolute -inset-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-3xl blur-2xl opacity-20 group-hover:opacity-30 transition-opacity duration-500"}),(0,yn.jsxs)("div",{className:"relative bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 shadow-2xl",children:[(0,yn.jsx)("img",{src:o.hero.heroImage,alt:"Hero",className:"w-full h-auto max-h-96 object-contain rounded-2xl transform group-hover:scale-105 transition-transform duration-500"}),(0,yn.jsx)("div",{className:"absolute -top-6 -right-6 w-12 h-12 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-2xl flex items-center justify-center shadow-xl animate-bounce",children:(0,yn.jsx)(tc,{className:"w-6 h-6 text-white"})}),(0,yn.jsx)("div",{className:"absolute -bottom-4 -left-4 w-16 h-16 bg-gradient-to-r from-green-400 to-blue-500 rounded-2xl flex items-center justify-center shadow-xl",children:(0,yn.jsx)(mi,{className:"w-8 h-8 text-white"})}),(0,yn.jsx)("div",{className:"absolute top-1/2 -right-8 w-10 h-10 bg-gradient-to-r from-pink-400 to-purple-500 rounded-full flex items-center justify-center shadow-lg animate-pulse",children:(0,yn.jsx)(Gs,{className:"w-5 h-5 text-white"})})]})]})})]}),(0,yn.jsx)("div",{className:"flex justify-center mt-16",children:(0,yn.jsx)("div",{className:"animate-bounce",children:(0,yn.jsx)("div",{className:"w-6 h-10 border-2 border-white/30 rounded-full flex justify-center",children:(0,yn.jsx)("div",{className:"w-1 h-3 bg-white rounded-full mt-2 animate-pulse"})})})})]})]}),(0,yn.jsxs)("section",{className:"relative py-20 bg-white overflow-hidden",children:[(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-50 to-white"}),(0,yn.jsx)("div",{className:"relative z-10 max-w-7xl mx-auto px-4",children:(0,yn.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-8",children:o.stats.map((e,t)=>{const r=nc[e.icon]||Gs,n=ac[e.color]||"from-purple-500 to-pink-600";return(0,yn.jsxs)("div",{className:"group text-center",children:[(0,yn.jsx)("div",{className:"relative mb-6",children:(0,yn.jsx)("div",{className:"w-20 h-20 mx-auto rounded-2xl bg-gradient-to-br ".concat(n," flex items-center justify-center shadow-lg group-hover:shadow-xl transition-all duration-500 transform group-hover:scale-110 group-hover:-rotate-6"),children:(0,yn.jsx)(r,{className:"w-10 h-10 text-white"})})}),(0,yn.jsx)("div",{className:"text-4xl font-black text-gray-900 mb-2 group-hover:text-purple-600 transition-colors duration-300",children:e.value}),(0,yn.jsx)("div",{className:"text-lg font-semibold text-gray-600 group-hover:text-gray-900 transition-colors duration-300",children:e.label})]},t)})})})]}),o.about.enabled&&(0,yn.jsx)("section",{className:"py-20 bg-gradient-to-br from-slate-900 to-purple-900",children:(0,yn.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,yn.jsxs)("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[(0,yn.jsxs)("div",{className:"space-y-8",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("div",{className:"inline-flex items-center space-x-2 bg-purple-500/20 rounded-full px-4 py-2 mb-6",children:[(0,yn.jsx)(pi,{className:"w-5 h-5 text-purple-400"}),(0,yn.jsx)("span",{className:"text-purple-300 font-medium",children:"About Us"})]}),(0,yn.jsx)("h2",{className:"text-5xl font-black text-white mb-6",children:o.about.title}),(0,yn.jsx)("h3",{className:"text-2xl font-bold text-purple-300 mb-8",children:o.about.subtitle}),(0,yn.jsx)("p",{className:"text-xl text-gray-300 leading-relaxed mb-8",children:o.about.description})]}),(0,yn.jsx)("div",{className:"grid grid-cols-2 gap-6",children:o.about.features.map((e,t)=>(0,yn.jsxs)("div",{className:"flex items-center space-x-3 p-4 rounded-xl bg-white/5 backdrop-blur-sm",children:[(0,yn.jsx)(Qi,{className:"w-6 h-6 text-green-400 flex-shrink-0"}),(0,yn.jsx)("span",{className:"text-white font-medium",children:e})]},t))})]}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsxs)("div",{className:"relative overflow-hidden rounded-3xl shadow-2xl transform rotate-3 hover:rotate-0 transition-transform duration-500",children:[(0,yn.jsx)("img",{src:o.about.image,alt:"About Cataloro",className:"w-full h-96 object-cover"}),(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-purple-900/50 to-transparent"})]}),(0,yn.jsx)("div",{className:"absolute -top-6 -right-6 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-2xl p-4 shadow-xl",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"text-2xl font-black text-white",children:"4.9\u2605"}),(0,yn.jsx)("div",{className:"text-sm text-white font-medium",children:"Rating"})]})})]})]})})}),(0,yn.jsxs)("section",{className:"relative py-24 overflow-hidden",children:[(0,yn.jsx)("div",{className:"absolute inset-0 bg-cover bg-center bg-fixed",style:{backgroundImage:"url(".concat(o.features.backgroundImage,")"),filter:"brightness(0.1)"}}),(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-black/80 via-purple-900/70 to-black/80"}),(0,yn.jsxs)("div",{className:"relative z-10 max-w-7xl mx-auto px-4",children:[(0,yn.jsxs)("div",{className:"text-center mb-16",children:[(0,yn.jsx)("h2",{className:"text-5xl font-black text-white mb-8",children:o.features.title}),(0,yn.jsx)("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:o.features.description})]}),o.features.categories&&o.features.categories.length>0&&(0,yn.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:o.features.categories.slice(0,6).map((e,t)=>{const r=nc[e.icon]||Ps,n=ac[e.color]||"from-purple-500 to-pink-600";return(0,yn.jsx)("div",{className:"group",children:(0,yn.jsxs)("div",{className:"bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 hover:bg-white/20 transition-all duration-500 transform hover:scale-105 hover:-translate-y-2",children:[(0,yn.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br ".concat(n," flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300"),children:(0,yn.jsx)(r,{className:"w-8 h-8 text-white"})}),(0,yn.jsx)("h3",{className:"text-2xl font-bold text-white mb-4",children:e.name}),(0,yn.jsx)("p",{className:"text-gray-300 mb-6",children:e.description}),e.features&&e.features.slice(0,3).map((e,t)=>(0,yn.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,yn.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full"}),(0,yn.jsx)("span",{className:"text-gray-300 text-sm",children:e})]},t))]})},t)})})]})]}),o.testimonials.enabled&&o.testimonials.items&&o.testimonials.items.length>0&&(0,yn.jsx)("section",{className:"relative py-24 bg-gradient-to-br from-white to-gray-100",children:(0,yn.jsxs)("div",{className:"max-w-7xl mx-auto px-4",children:[(0,yn.jsxs)("div",{className:"text-center mb-16",children:[(0,yn.jsx)("h2",{className:"text-5xl font-black text-gray-900 mb-8",children:o.testimonials.title}),(0,yn.jsx)("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:o.testimonials.description})]}),(0,yn.jsx)("div",{className:"grid md:grid-cols-3 gap-8",children:o.testimonials.items.slice(0,3).map((e,t)=>(0,yn.jsx)("div",{className:"group",children:(0,yn.jsxs)("div",{className:"bg-white rounded-3xl p-8 shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:scale-105 border-l-4 border-purple-500",children:[(0,yn.jsx)("div",{className:"mb-6",children:(0,yn.jsx)(rc,{className:"w-12 h-12 text-purple-500 opacity-50"})}),(0,yn.jsxs)("p",{className:"text-gray-700 text-lg mb-8 italic",children:['"',e.content,'"']}),(0,yn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yn.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-white font-bold text-lg",children:e.name.charAt(0)})}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("div",{className:"font-bold text-gray-900",children:e.name}),(0,yn.jsx)("div",{className:"text-gray-600",children:e.role}),(0,yn.jsx)("div",{className:"flex items-center mt-1",children:[...Array(5)].map((t,r)=>(0,yn.jsx)(Gs,{className:"w-4 h-4 ".concat(r<e.rating?"text-yellow-400 fill-current":"text-gray-300")},r))})]})]})]})},t))})]})}),(0,yn.jsxs)("section",{className:"relative py-24 overflow-hidden",children:[(0,yn.jsx)("div",{className:"absolute inset-0 bg-cover bg-center bg-fixed",style:{backgroundImage:"url(".concat(o.cta.backgroundImage,")"),filter:"brightness(0.3)"}}),(0,yn.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-900/90 via-pink-900/70 to-purple-900/90"}),(0,yn.jsxs)("div",{className:"relative z-10 max-w-4xl mx-auto px-4 text-center",children:[(0,yn.jsx)("h2",{className:"text-6xl font-black text-white mb-8",children:o.cta.title}),(0,yn.jsx)("p",{className:"text-2xl text-gray-300 mb-12 leading-relaxed",children:o.cta.description}),(0,yn.jsxs)("div",{className:"flex flex-col sm:flex-row gap-6 justify-center",children:[(0,yn.jsxs)(Le,{to:o.cta.primaryButtonLink,className:"group relative px-12 py-6 rounded-2xl bg-gradient-to-r from-white to-gray-100 text-gray-900 font-bold text-xl hover:from-gray-100 hover:to-white transition-all duration-300 transform hover:scale-105 shadow-2xl",children:[(0,yn.jsx)("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-r from-purple-500/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,yn.jsxs)("div",{className:"relative flex items-center justify-center space-x-3",children:[(0,yn.jsx)("span",{children:o.cta.primaryButtonText}),(0,yn.jsx)(vl,{className:"w-6 h-6 group-hover:translate-x-1 transition-transform duration-300"})]})]}),(0,yn.jsx)(Le,{to:o.cta.secondaryButtonLink,className:"group px-12 py-6 rounded-2xl bg-white/10 backdrop-blur-md border-2 border-white/30 text-white font-bold text-xl hover:bg-white/20 transition-all duration-300 transform hover:scale-105",children:(0,yn.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,yn.jsx)(Us,{className:"w-6 h-6"}),(0,yn.jsx)("span",{children:o.cta.secondaryButtonText})]})})]})]})]})]})};function ic(e){let{tendersOverview:t,tendersLoading:r,selectedListing:n,setSelectedListing:a,acceptingTender:s,rejectingTender:i,handleAcceptTender:o,handleRejectTender:l,totalTenders:c,totalHighestBids:d}=e;return r?(0,yn.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading your selling data..."})]})}):(0,yn.jsx)("div",{className:"space-y-8",children:(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Tender Management"}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:(0,yn.jsx)(ii,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Listings"}),(0,yn.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.length})]})]})}),(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:(0,yn.jsx)(zs,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Tenders"}),(0,yn.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c})]})]})}),(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:(0,yn.jsx)(Es,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Bid Value"}),(0,yn.jsxs)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["\u20ac",d.toFixed(2)]})]})]})})]}),0===t.length?(0,yn.jsxs)("div",{className:"text-center py-8 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[(0,yn.jsx)("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,yn.jsx)(Es,{className:"w-6 h-6 text-gray-400"})}),(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Active Tenders"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"You don't have any active listings receiving tender offers."})]}):(0,yn.jsx)("div",{className:"space-y-4",children:t.map(e=>{var t;return(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[(0,yn.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,yn.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,yn.jsx)("img",{src:(null===(t=e.listing.images)||void 0===t?void 0:t[0])||"/api/placeholder/400/300",alt:e.listing.title,className:"w-20 h-20 object-cover rounded-lg"}),(0,yn.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:e.listing.title}),(0,yn.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Starting Price: \u20ac",e.listing.price.toFixed(2)]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,yn.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",children:[(0,yn.jsx)(ii,{className:"w-3 h-3 mr-1"}),e.tender_count," tender",1!==e.tender_count?"s":""]}),e.highest_offer>0&&(0,yn.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",children:[(0,yn.jsx)(zs,{className:"w-3 h-3 mr-1"}),"Highest: \u20ac",e.highest_offer.toFixed(2)]})]})]}),(0,yn.jsxs)("button",{onClick:()=>a(n===e.listing.id?null:e.listing.id),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors flex items-center space-x-2",children:[(0,yn.jsx)(ti,{className:"w-4 h-4"}),(0,yn.jsxs)("span",{children:[n===e.listing.id?"Hide":"View"," Tenders"]})]})]})}),n===e.listing.id&&(0,yn.jsx)("div",{className:"p-6",children:0===e.tenders.length?(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-center py-4",children:"No active tenders for this listing."}):(0,yn.jsx)("div",{className:"space-y-4",children:e.tenders.map((t,r)=>(0,yn.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yn.jsxs)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold text-white ".concat(0===r?"bg-yellow-500":"bg-gray-400"),children:["#",r+1]}),(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("p",{className:"font-semibold text-gray-900 dark:text-white",children:["\u20ac",t.offer_amount.toFixed(2)]}),(0,yn.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["by ",t.buyer.full_name||t.buyer.username]}),(0,yn.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:[(0,yn.jsx)(Js,{className:"w-3 h-3 inline mr-1"}),new Date(t.created_at).toLocaleDateString()," at ",new Date(t.created_at).toLocaleTimeString()]})]})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("button",{onClick:()=>o(t.id,e.listing.title,t.offer_amount),disabled:s===t.id,className:"px-3 py-2 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white rounded-lg font-medium transition-colors flex items-center space-x-2",children:s===t.id?(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,yn.jsx)("span",{children:"Accepting..."})]}):(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)(Qi,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Accept"})]})}),(0,yn.jsx)("button",{onClick:()=>l(t.id,e.listing.title,t.offer_amount),disabled:i===t.id,className:"px-3 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-lg font-medium transition-colors flex items-center space-x-2",children:i===t.id?(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,yn.jsx)("span",{children:"Rejecting..."})]}):(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsx)($o,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Reject"})]})})]})]},t.id))})})]},e.listing.id)})})]})})}function oc(e){let{myTenders:t,myTendersLoading:r,fetchMyTenders:n}=e;const{user:a}=Cn();if(r)return(0,yn.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading your tender offers..."})]})});const s=e=>{switch(e){case"active":return(0,yn.jsx)(Js,{className:"w-5 h-5 text-yellow-500"});case"accepted":return(0,yn.jsx)(Qi,{className:"w-5 h-5 text-green-500"});case"rejected":return(0,yn.jsx)($o,{className:"w-5 h-5 text-red-500"});default:return(0,yn.jsx)($i,{className:"w-5 h-5 text-gray-500"})}},i=e=>{switch(e){case"active":return"Pending";case"accepted":return"Accepted";case"rejected":return"Rejected";default:return"Unknown"}},o=e=>{switch(e){case"active":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"accepted":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300"}},l=t.filter(e=>"active"===e.status),c=t.filter(e=>"accepted"===e.status),d=(t.filter(e=>"rejected"===e.status),t.reduce((e,t)=>e+t.offer_amount,0));return(0,yn.jsxs)("div",{className:"space-y-8",children:[(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:(0,yn.jsx)(Es,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Tenders"}),(0,yn.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.length})]})]})}),(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:(0,yn.jsx)(Js,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active"}),(0,yn.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l.length})]})]})}),(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:(0,yn.jsx)(Qi,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Accepted"}),(0,yn.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.length})]})]})}),(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:(0,yn.jsx)(zs,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Value"}),(0,yn.jsxs)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["\u20ac",d.toFixed(2)]})]})]})})]}),0===t.length?(0,yn.jsxs)("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[(0,yn.jsx)("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,yn.jsx)(Es,{className:"w-8 h-8 text-gray-400"})}),(0,yn.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Tender Offers"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"You haven't submitted any tender offers yet."}),(0,yn.jsx)(Le,{to:"/browse",className:"inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Browse Listings"})]}):(0,yn.jsx)("div",{className:"space-y-4",children:t.map(e=>{var t;return(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:(0,yn.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,yn.jsx)("div",{className:"w-20 h-20 flex-shrink-0",children:(0,yn.jsx)("img",{src:(null===(t=e.listing.images)||void 0===t?void 0:t[0])||"/api/placeholder/400/300",alt:e.listing.title,className:"w-full h-full object-cover rounded-lg"})}),(0,yn.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,yn.jsxs)("div",{className:"flex items-start justify-between",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:e.listing.title}),(0,yn.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Starting Price: \u20ac",e.listing.price.toFixed(2)]}),e.seller&&(0,yn.jsxs)("div",{className:"mt-2 flex items-center space-x-2",children:[(0,yn.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Seller:"}),(0,yn.jsxs)("div",{className:"flex items-center space-x-1",children:[e.seller.is_business&&(0,yn.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",children:"Business"}),(0,yn.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.seller.business_name||e.seller.full_name||e.seller.username})]})]})]}),(0,yn.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(o(e.status)),children:[s(e.status),(0,yn.jsx)("span",{className:"ml-1",children:i(e.status)})]})]}),(0,yn.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Your Offer"}),(0,yn.jsxs)("p",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:["\u20ac",e.offer_amount.toFixed(2)]})]}),(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Submitted"}),(0,yn.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:new Date(e.created_at).toLocaleDateString()})]})]}),"accepted"===e.status&&(0,yn.jsx)("div",{className:"flex items-center space-x-2",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("p",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"Congratulations!"}),(0,yn.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Your tender was accepted"})]})}),"active"===e.status&&(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("p",{className:"text-sm text-yellow-600 dark:text-yellow-400 font-medium",children:"Waiting for response"}),(0,yn.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Seller will review your offer"})]}),"rejected"===e.status&&(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400 font-medium",children:"Not selected"}),(0,yn.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Better luck next time"})]})]})]})]})},e.id)})})]})}function lc(e){var t;let{listing:r,onDelete:n}=e;const[s,i]=(0,a.useState)(!1);return(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow",children:[(0,yn.jsxs)("div",{className:"relative h-48 w-full overflow-hidden rounded-t-xl",children:[(0,yn.jsx)("img",{src:(null===(t=r.images)||void 0===t?void 0:t[0])||"/api/placeholder/400/300",alt:r.title,className:"w-full h-full object-cover"}),(0,yn.jsx)("div",{className:"absolute top-3 right-3",children:(0,yn.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold shadow-lg ".concat((e=>{switch(e){case"active":return"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300";case"sold":return"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300";case"closed":return"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300";case"draft":return"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300";default:return"bg-gray-100 dark:bg-gray-700/50 text-gray-800 dark:text-gray-300"}})(r.status||(r.is_draft?"draft":"active"))),children:(r.status||(r.is_draft?"DRAFT":"ACTIVE")).toUpperCase()})})]}),(0,yn.jsxs)("div",{className:"p-6",children:[(0,yn.jsxs)("div",{className:"mb-4",children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white line-clamp-2 mb-2 min-h-[3.5rem]",children:r.title}),(0,yn.jsxs)("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:["\u20ac",r.price.toFixed(2)]})]}),(0,yn.jsx)("div",{className:"mb-6",children:(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-3 min-h-[4rem]",children:r.description})}),(0,yn.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 mb-4",children:[(0,yn.jsx)("span",{className:"truncate",children:r.category||"No category"}),(0,yn.jsx)("span",{className:"ml-2 whitespace-nowrap",children:new Date(r.created_at).toLocaleDateString()})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,yn.jsx)("div",{className:"flex items-center space-x-2",children:(0,yn.jsxs)("button",{onClick:()=>window.location.href="/edit-listing/".concat(r.id),className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg font-medium transition-colors",title:"Edit Listing",children:[(0,yn.jsx)(Xs,{className:"w-4 h-4 mr-1.5"}),"Edit"]})}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)("button",{onClick:()=>i(!s),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",title:"More options",children:(0,yn.jsx)(tl,{className:"w-4 h-4"})}),s&&(0,yn.jsxs)("div",{className:"absolute bottom-full right-0 mb-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl z-50 min-w-[140px]",children:[(0,yn.jsxs)("button",{onClick:()=>{window.location.href="/edit-listing/".concat(r.id),i(!1)},className:"w-full px-4 py-3 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2 rounded-t-lg",children:[(0,yn.jsx)(Xs,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Edit Listing"})]}),(0,yn.jsxs)("button",{onClick:()=>{n(r.id),i(!1)},className:"w-full px-4 py-3 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center space-x-2 rounded-b-lg",children:[(0,yn.jsx)(ei,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Delete Listing"})]})]})]})]})]})]})}function cc(e){let{listings:t,allListings:r,listingsLoading:n,activeFilter:a,handleTileClick:s,handleCreateListing:i,handleDeleteListing:o}=e;return n?(0,yn.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading your listings..."})]})}):(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yn.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"My Listings"}),(0,yn.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage your product listings and track their performance"})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,yn.jsx)("button",{onClick:()=>s("all"),className:"cataloro-card-glass text-left transition-all duration-200 hover:scale-105 ".concat("all"===a?"ring-2 ring-blue-500 bg-blue-50/20 dark:bg-blue-900/20":""),children:(0,yn.jsxs)("div",{className:"p-6 text-center",children:[(0,yn.jsx)("div",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:r.length}),(0,yn.jsx)("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wide",children:"Total Listings"})]})}),(0,yn.jsx)("button",{onClick:()=>s("active"),className:"cataloro-card-glass text-left transition-all duration-200 hover:scale-105 ".concat("active"===a?"ring-2 ring-green-500 bg-green-50/20 dark:bg-green-900/20":""),children:(0,yn.jsxs)("div",{className:"p-6 text-center",children:[(0,yn.jsx)("div",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:r.filter(e=>"active"===e.status).length}),(0,yn.jsx)("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wide",children:"Active"})]})}),(0,yn.jsx)("button",{onClick:()=>s("closed"),className:"cataloro-card-glass text-left transition-all duration-200 hover:scale-105 ".concat("closed"===a?"ring-2 ring-red-500 bg-red-50/20 dark:bg-red-900/20":""),children:(0,yn.jsxs)("div",{className:"p-6 text-center",children:[(0,yn.jsx)("div",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-red-600 to-pink-600 bg-clip-text text-transparent",children:r.filter(e=>"sold"===e.status||"closed"===e.status).length}),(0,yn.jsx)("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wide",children:"Closed"}),(0,yn.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Sold & completed"})]})}),(0,yn.jsx)("button",{onClick:()=>s("drafts"),className:"cataloro-card-glass text-left transition-all duration-200 hover:scale-105 ".concat("drafts"===a?"ring-2 ring-orange-500 bg-orange-50/20 dark:bg-orange-900/20":""),children:(0,yn.jsxs)("div",{className:"p-6 text-center",children:[(0,yn.jsx)("div",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-orange-600 to-yellow-600 bg-clip-text text-transparent",children:r.filter(e=>"draft"===e.status||e.is_draft).length}),(0,yn.jsx)("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 uppercase tracking-wide",children:"Drafts"}),(0,yn.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Finish & publish later"})]})})]}),"all"!==a&&(0,yn.jsxs)("div",{className:"flex items-center justify-between bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[(0,yn.jsxs)("span",{className:"text-blue-800 dark:text-blue-300 font-medium",children:["Showing ",a," listings (",t.length," items)"]}),(0,yn.jsx)("button",{onClick:()=>s("all"),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm font-medium",children:"Show All"})]}),0===t.length?(0,yn.jsx)("div",{className:"text-center py-12",children:(0,yn.jsxs)("div",{className:"cataloro-card-glass p-12",children:[(0,yn.jsx)("div",{className:"w-24 h-24 bg-gradient-to-r from-blue-600/20 to-purple-600/20 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,yn.jsx)(_s,{className:"w-12 h-12 text-gray-600 dark:text-gray-300"})}),(0,yn.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-3",children:"No listings yet"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-8 max-w-md mx-auto",children:"Create your first listing to start selling on our modern marketplace"}),(0,yn.jsx)("button",{onClick:i,className:"cataloro-button-primary",children:"Create Your First Listing"})]})}):(0,yn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:t.map(e=>(0,yn.jsx)(lc,{listing:e,onDelete:o},e.id))})]})}const dc=function(){const{user:e}=Cn(),{showToast:t}=zn(),r=re(),[n]=De(),[s,i]=(0,a.useState)("sell"),[o,l]=(0,a.useState)([]),[c,d]=(0,a.useState)(!0),[u,h]=(0,a.useState)(null),[m,f]=(0,a.useState)(null),[p,g]=(0,a.useState)(null),x=n.get("filter"),[y,b]=(0,a.useState)([]),[v,w]=(0,a.useState)(!0),[j,k]=(0,a.useState)(x||"all"),[N,_]=(0,a.useState)([]),[S,E]=(0,a.useState)(!0);(0,a.useEffect)(()=>{e&&(A(),O(),C())},[e]),(0,a.useEffect)(()=>{if("sell"===s){const e=new URLSearchParams(window.location.search);"all"!==j?e.set("filter",j):e.delete("filter");const t="".concat(window.location.pathname).concat(e.toString()?"?"+e.toString():"");window.history.replaceState({},"",t)}},[j,s]),(0,a.useEffect)(()=>{const e=n.get("filter");e&&e!==j&&k(e)},[n]);const A=async()=>{if(e)try{d(!0);const r=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/tenders/seller/").concat(e.id,"/overview"));if(r.ok){const e=await r.json();l(e)}else t("Failed to load tender overview","error")}catch(r){console.error("Failed to fetch tenders overview:",r),t("Error loading tender data","error")}finally{d(!1)}},C=async()=>{if(e)try{E(!0);const r=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/tenders/buyer/").concat(e.id));if(r.ok){const e=await r.json();_(e)}else t("Failed to load your tenders","error")}catch(r){console.error("Failed to fetch my tenders:",r),t("Error loading tender data","error")}finally{E(!1)}},O=async()=>{if(null!==e&&void 0!==e&&e.id)try{w(!0);const t=await Vn.getMyListings(e.id);b(t)}catch(r){t("Failed to load your listings","error"),console.error("Failed to fetch listings:",r)}finally{w(!1)}},T=()=>{r("/create-listing")};if(!e)return(0,yn.jsxs)("div",{className:"text-center py-12",children:[(0,yn.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Please Login"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"You need to be logged in to manage tenders and listings."})]});const P=o.reduce((e,t)=>e+t.tender_count,0),L=o.reduce((e,t)=>e+(t.highest_offer||0),0),M=(()=>{switch(j){case"active":return y.filter(e=>"active"===e.status);case"drafts":return y.filter(e=>"draft"===e.status||e.is_draft);case"closed":return y.filter(e=>"sold"===e.status||"closed"===e.status);default:return y}})();return(0,yn.jsxs)("div",{className:"space-y-8",children:[(0,yn.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Management Center"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Manage your tenders and listings"})]}),(0,yn.jsx)("div",{className:"mt-4 lg:mt-0 flex items-center space-x-3",children:"sell"===s?(0,yn.jsxs)("button",{onClick:A,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[(0,yn.jsx)(Xi,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Refresh Tenders"})]}):"buy"===s?(0,yn.jsxs)("button",{onClick:C,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[(0,yn.jsx)(Xi,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Refresh"})]}):"listings"===s?(0,yn.jsxs)("button",{onClick:T,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[(0,yn.jsx)(_s,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Create New Listing"})]}):null})]}),(0,yn.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,yn.jsxs)("nav",{className:"flex space-x-8",children:[(0,yn.jsx)("button",{onClick:()=>i("sell"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors ".concat("sell"===s?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)(Ps,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Sell"})]})}),(0,yn.jsx)("button",{onClick:()=>i("buy"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors ".concat("buy"===s?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)(Es,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Buy"})]})}),(0,yn.jsx)("button",{onClick:()=>i("listings"),className:"py-4 px-1 border-b-2 font-medium text-sm transition-colors ".concat("listings"===s?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)(Ni,{className:"w-4 h-4"}),(0,yn.jsx)("span",{children:"Listings"})]})})]})}),"sell"===s&&(0,yn.jsx)(ic,{tendersOverview:o,tendersLoading:c,selectedListing:u,setSelectedListing:h,acceptingTender:m,rejectingTender:p,handleAcceptTender:async(r,n,a)=>{if(!e)return;if(window.confirm("Accept tender offer of \u20ac".concat(a.toFixed(2),' for "').concat(n,'"?\n\nThis will:\n- Accept this tender\n- Reject all other tenders for this listing\n- Mark the listing as SOLD\n- Send notifications to all bidders\n- Create a message thread with the winning bidder')))try{f(r);const n=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/tenders/").concat(r,"/accept"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({seller_id:e.id})});if(n.ok)t("Tender offer of \u20ac".concat(a.toFixed(2)," accepted!"),"success"),A();else{const e=await n.json();t(e.detail||"Failed to accept tender","error")}}catch(s){console.error("Error accepting tender:",s),t("Error accepting tender. Please try again.","error")}finally{f(null)}},handleRejectTender:async(r,n,a)=>{if(!e)return;if(window.confirm("Reject tender offer of \u20ac".concat(a.toFixed(2),' for "').concat(n,'"?\n\nThis will send a rejection notification to the bidder.')))try{g(r);const n=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/tenders/").concat(r,"/reject"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({seller_id:e.id})});if(n.ok)t("Tender offer rejected","info"),A();else{const e=await n.json();t(e.detail||"Failed to reject tender","error")}}catch(s){console.error("Error rejecting tender:",s),t("Error rejecting tender. Please try again.","error")}finally{g(null)}},totalTenders:P,totalHighestBids:L}),"buy"===s&&(0,yn.jsx)(oc,{myTenders:N,myTendersLoading:S,fetchMyTenders:C}),"listings"===s&&(0,yn.jsx)(cc,{listings:M,allListings:y,listingsLoading:v,activeFilter:j,handleTileClick:e=>{k(e)},handleCreateListing:T,handleDeleteListing:async e=>{if(window.confirm("Are you sure you want to delete this listing?"))try{await Vn.deleteListing(e),b(y.filter(t=>t.id!==e)),t("Listing deleted successfully","success")}catch(r){console.error("Error deleting listing:",r),t("Failed to delete listing","error")}}})]})},uc=ks("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function hc(e){let{items:t,baskets:r,searchTerm:n,setSearchTerm:a,assignmentFilter:s,setAssignmentFilter:i,onAssignToBasket:o,onUnassignFromBasket:l,onCreateBasket:c,loading:d}=e;return(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,yn.jsx)("div",{className:"flex-1 max-w-md",children:(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)(No,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,yn.jsx)("input",{type:"text",placeholder:"Search bought items...",value:n,onChange:e=>a(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,yn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)(ji,{className:"w-4 h-4 text-gray-500"}),(0,yn.jsxs)("select",{value:s,onChange:e=>i(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,yn.jsx)("option",{value:"all",children:"All Items"}),(0,yn.jsx)("option",{value:"assigned",children:"Assigned"}),(0,yn.jsx)("option",{value:"not-assigned",children:"Not Assigned"})]})]}),(0,yn.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.length," items found"]})]})]}),d?(0,yn.jsxs)("div",{className:"text-center py-8",children:[(0,yn.jsx)(Xi,{className:"w-6 h-6 animate-spin mx-auto text-gray-400"}),(0,yn.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Loading bought items..."})]}):t.length>0?(0,yn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,yn.jsx)(fc,{item:e,baskets:r,onAssignToBasket:o,onUnassignFromBasket:l,onCreateBasket:c},e.id))}):(0,yn.jsxs)("div",{className:"text-center py-12",children:[(0,yn.jsx)(Ms,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,yn.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No bought items"}),(0,yn.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Items you purchase will appear here."})]})]})}function mc(e){let{baskets:t,onCreateBasket:r,onEditBasket:n,onDeleteBasket:a,onExportBasket:s,onUnassignFromBasket:i,onReassignToBasket:o,calculateTotals:l,loading:c,exportingBaskets:d}=e;return(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Your Baskets"}),(0,yn.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Organize your purchased items into baskets"})]}),(0,yn.jsxs)("button",{onClick:r,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[(0,yn.jsx)(_s,{className:"w-4 h-4 mr-2"}),"Create Basket"]})]}),c?(0,yn.jsxs)("div",{className:"text-center py-8",children:[(0,yn.jsx)(Xi,{className:"w-6 h-6 animate-spin mx-auto text-gray-400"}),(0,yn.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Loading baskets..."})]}):t.length>0?(0,yn.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.map(e=>(0,yn.jsx)(pc,{basket:e,totals:l(e),onEdit:()=>n(e),onDelete:()=>a(e.id),onExport:()=>s(e,l(e)),onUnassignFromBasket:i,onReassignToBasket:o,allBaskets:t,isExporting:d[e.id]||!1},e.id))}):(0,yn.jsxs)("div",{className:"text-center py-12",children:[(0,yn.jsx)(Ei,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,yn.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No baskets created"}),(0,yn.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Create your first basket to organize items."}),(0,yn.jsxs)("button",{onClick:r,className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[(0,yn.jsx)(_s,{className:"w-4 h-4 mr-2"}),"Create First Basket"]})]})]})}function fc(e){var t;let{item:r,baskets:n,onAssignToBasket:s,onUnassignFromBasket:i,onCreateBasket:o}=e;const[l,c]=(0,a.useState)(!1);return(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-lg shadow border border-gray-200 dark:border-gray-600 relative",children:[r.image&&(0,yn.jsx)("div",{className:"aspect-w-16 aspect-h-9 overflow-hidden rounded-t-lg",children:(0,yn.jsx)("img",{src:r.image,alt:r.title,className:"w-full h-48 object-cover"})}),r.basket_id&&(0,yn.jsx)("div",{className:"absolute top-4 right-4 z-10",children:(0,yn.jsxs)("span",{className:"inline-flex items-center px-4 py-2 rounded-full text-sm font-bold bg-green-600 text-white shadow-lg",children:[(0,yn.jsx)(Ei,{className:"w-4 h-4 mr-2"}),"ASSIGNED"]})}),(0,yn.jsxs)("div",{className:"p-4",children:[(0,yn.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,yn.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:r.title})}),(0,yn.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,yn.jsxs)("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[(0,yn.jsx)(Es,{className:"w-3 h-3 mr-1"}),"\u20ac",(null===(t=r.price)||void 0===t?void 0:t.toFixed(2))||"0.00"]}),(0,yn.jsxs)("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[(0,yn.jsx)(Ts,{className:"w-3 h-3 mr-1"}),r.seller_name||"Unknown Seller"]}),(0,yn.jsxs)("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[(0,yn.jsx)($s,{className:"w-3 h-3 mr-1"}),new Date(r.purchased_at).toLocaleDateString()]}),r.basket_id&&(0,yn.jsxs)("div",{className:"flex items-center text-xs text-green-600 dark:text-green-400",children:[(0,yn.jsx)(Ei,{className:"w-3 h-3 mr-1"}),"Assigned to basket"]})]}),(0,yn.jsxs)("div",{className:"relative z-50",children:[r.basket_id?(0,yn.jsx)("button",{onClick:()=>{window.confirm("Unassign this item from the basket? This will allow you to reassign it with updated catalyst values.")&&i(r.id)},className:"w-full inline-flex items-center justify-center px-3 py-2 border rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all border-red-300 text-red-700 bg-red-50 hover:bg-red-100 focus:ring-red-500 dark:border-red-600 dark:text-red-400 dark:bg-red-900 dark:hover:bg-red-800",children:"Unassign"}):(0,yn.jsxs)("button",{onClick:()=>c(!l),className:"w-full inline-flex items-center justify-center px-3 py-2 border rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all border-blue-300 text-blue-700 bg-blue-50 hover:bg-blue-100 focus:ring-blue-500 dark:border-blue-600 dark:text-blue-400 dark:bg-blue-900 dark:hover:bg-blue-800",children:["Assign to Basket",(0,yn.jsx)(tl,{className:"w-4 h-4 ml-2"})]}),l&&!r.basket_id&&(0,yn.jsx)("div",{className:"absolute left-0 right-0 mt-2 bg-white dark:bg-gray-700 rounded-md shadow-lg border border-gray-200 dark:border-gray-600 z-[100]",children:(0,yn.jsxs)("div",{className:"py-1",children:[n.length>0?n.map(e=>(0,yn.jsxs)("button",{onClick:()=>{s(r.id,e.id),c(!1)},className:"block w-full px-4 py-2 text-sm text-left text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[(0,yn.jsx)(Ei,{className:"w-4 h-4 inline mr-2"}),e.name]},e.id)):(0,yn.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500 dark:text-gray-400",children:"No baskets available"}),n.length>0&&(0,yn.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-600 my-1"}),(0,yn.jsxs)("button",{onClick:()=>{o(),c(!1)},className:"block w-full px-4 py-2 text-sm text-left text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[(0,yn.jsx)(_s,{className:"w-4 h-4 inline mr-2"}),"Create New Basket"]})]})})]})]})]})}function pc(e){var t;let{basket:r,totals:n,onEdit:s,onDelete:i,onExport:o,onUnassignFromBasket:l,onReassignToBasket:c,allBaskets:d,isExporting:u}=e;const[h,m]=(0,a.useState)(null);return(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-700 rounded-lg shadow border border-gray-200 dark:border-gray-600",children:(0,yn.jsxs)("div",{className:"p-6",children:[(0,yn.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:r.name}),r.description&&(0,yn.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:r.description})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("button",{onClick:o,disabled:u,className:"p-2 transition-colors ".concat(u?"text-green-600 dark:text-green-400 cursor-not-allowed":"text-gray-400 hover:text-green-600 dark:hover:text-green-400"),title:u?"Exporting PDF...":"Export basket as PDF",children:u?(0,yn.jsx)(uc,{className:"w-4 h-4 animate-spin"}):(0,yn.jsx)(Qs,{className:"w-4 h-4"})}),(0,yn.jsx)("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,yn.jsx)(Hl,{className:"w-4 h-4"})}),(0,yn.jsx)("button",{onClick:i,className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400",children:(0,yn.jsx)(ei,{className:"w-4 h-4"})})]})]}),(0,yn.jsx)("div",{className:"mb-4",children:(0,yn.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:[(null===(t=r.items)||void 0===t?void 0:t.length)||0," items"]})}),(0,yn.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[(0,yn.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Summary"}),(0,yn.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("dt",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Value Paid"}),(0,yn.jsxs)("dd",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["\u20ac",n.valuePaid.toFixed(2)]})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("dt",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Pt g"}),(0,yn.jsx)("dd",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n.ptG.toFixed(4)})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("dt",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Pd g"}),(0,yn.jsx)("dd",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n.pdG.toFixed(4)})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("dt",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Rh g"}),(0,yn.jsx)("dd",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n.rhG.toFixed(4)})]})]})]}),r.items&&r.items.length>0&&(0,yn.jsxs)("div",{className:"mt-4",children:[(0,yn.jsx)("h5",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-2",children:"Items in Basket"}),(0,yn.jsxs)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[r.items.map((e,t)=>{var n;return(0,yn.jsxs)("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-3",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,yn.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white truncate flex-1 mr-2",children:e.title}),(0,yn.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["\u20ac",(null===(n=e.price)||void 0===n?void 0:n.toFixed(2))||"0.00"]})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2 relative",children:[(0,yn.jsx)("button",{onClick:()=>{window.confirm('Unassign "'.concat(e.title,'" from this basket?'))&&l(e.id)},className:"px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 dark:bg-red-900/50 dark:text-red-400 dark:hover:bg-red-900",children:"Unassign"}),(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)("button",{onClick:()=>m(h===e.id?null:e.id),className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 dark:bg-blue-900/50 dark:text-blue-400 dark:hover:bg-blue-900",children:"Reassign"}),h===e.id&&(0,yn.jsx)("div",{className:"absolute left-0 top-full mt-1 bg-white dark:bg-gray-700 rounded-md shadow-lg border border-gray-200 dark:border-gray-600 z-50 min-w-32",children:(0,yn.jsx)("div",{className:"py-1",children:d.filter(e=>e.id!==r.id).length>0?d.filter(e=>e.id!==r.id).map(t=>(0,yn.jsxs)("button",{onClick:()=>{c(e.id,r.id,t.id),m(null)},className:"block w-full px-3 py-2 text-sm text-left text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[(0,yn.jsx)(Ei,{className:"w-3 h-3 inline mr-2"}),t.name]},t.id)):(0,yn.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:"No other baskets"})})})]})]})]},t)}),r.items.length>5&&(0,yn.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"Showing first 5 items"})]})]})]})})}function gc(e){let{title:t,form:r,setForm:n,onSave:a,onClose:s}=e;return(0,yn.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,yn.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800",children:(0,yn.jsxs)("div",{className:"mt-3",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white text-center mb-4",children:t}),(0,yn.jsxs)("div",{className:"space-y-4",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Basket Name"}),(0,yn.jsx)("input",{type:"text",value:r.name,onChange:e=>n((0,Ie.A)((0,Ie.A)({},r),{},{name:e.target.value})),placeholder:"Enter basket name...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description (Optional)"}),(0,yn.jsx)("textarea",{value:r.description,onChange:e=>n((0,Ie.A)((0,Ie.A)({},r),{},{description:e.target.value})),placeholder:"Enter description...",rows:"3",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-end space-x-3 mt-6",children:[(0,yn.jsx)("button",{onClick:s,className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-400 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),(0,yn.jsx)("button",{onClick:a,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Save"})]})]})})})}const xc=function(){const{user:e}=Cn(),{showToast:t}=zn(),{permissions:r}=no(),[n,s]=(0,a.useState)("bought-items"),[i,o]=(0,a.useState)([]),[l,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(null),[h,m]=(0,a.useState)(!1),[f,p]=(0,a.useState)(""),[g,x]=(0,a.useState)("all"),[y,b]=(0,a.useState)(!1),[v,w]=(0,a.useState)(!1),[j,k]=(0,a.useState)({name:"",description:""}),[N,_]=(0,a.useState)({}),S=async()=>{if(null!==e&&void 0!==e&&e.id)try{m(!0);const t=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/user/bought-items/").concat(e.id),{headers:{"Content-Type":"application/json"}});if(t.ok){const e=await t.json();o(e)}else console.error("Failed to load bought items"),o([])}catch(t){console.error("Error loading bought items:",t),o([])}finally{m(!1)}},E=async()=>{if(null!==e&&void 0!==e&&e.id)try{m(!0);const t=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/user/baskets/").concat(e.id),{headers:{"Content-Type":"application/json"}});if(t.ok){const e=await t.json();c(e)}else console.error("Failed to load baskets"),c([])}catch(t){console.error("Error loading baskets:",t),c([])}finally{m(!1)}},A=async e=>{try{const r=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/user/bought-items/").concat(e,"/unassign"),{method:"PUT",headers:{"Content-Type":"application/json"}});if(r.ok)t("Item unassigned from basket successfully","success"),o(t=>t.map(t=>t.id===e?(0,Ie.A)((0,Ie.A)({},t),{},{basket_id:null}):t)),S(),E();else{const e=await r.text();console.error("Unassign failed:",e),t("Failed to unassign item from basket","error")}}catch(r){console.error("Error unassigning item:",r),t("Error unassigning item from basket","error")}};(0,a.useEffect)(()=>{S(),E()},[null===e||void 0===e?void 0:e.id]);const C=i.filter(e=>{var t,r;const n=(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(f.toLowerCase()))||(null===(r=e.seller_name)||void 0===r?void 0:r.toLowerCase().includes(f.toLowerCase())),a="all"===g||"assigned"===g&&e.basket_id||"not-assigned"===g&&!e.basket_id;return n&&a});return r.ui.showBuyingFeatures||"Admin"===(null===e||void 0===e?void 0:e.user_role)||"Admin-Manager"===(null===e||void 0===e?void 0:e.user_role)?(0,yn.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,yn.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,yn.jsx)("div",{className:"mb-8",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,yn.jsx)(As,{className:"w-8 h-8 mr-3 text-blue-600"}),"Inventory"]}),(0,yn.jsx)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Manage your purchased items and organize them into baskets"})]}),(0,yn.jsx)("div",{className:"flex items-center space-x-4",children:(0,yn.jsxs)("button",{onClick:()=>{S(),E()},disabled:h,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[(0,yn.jsx)(Xi,{className:"w-4 h-4 mr-2 ".concat(h?"animate-spin":"")}),"Refresh"]})})]})}),(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow mb-6",children:[(0,yn.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,yn.jsxs)("nav",{className:"-mb-px flex space-x-8 px-6",children:[(0,yn.jsxs)("button",{onClick:()=>s("bought-items"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("bought-items"===n?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:[(0,yn.jsx)(Ms,{className:"w-4 h-4 inline mr-2"}),"Bought Items"]}),(0,yn.jsxs)("button",{onClick:()=>s("baskets"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("baskets"===n?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:[(0,yn.jsx)(Ei,{className:"w-4 h-4 inline mr-2"}),"Baskets"]})]})}),(0,yn.jsxs)("div",{className:"p-6",children:["bought-items"===n&&(0,yn.jsx)(hc,{items:C,baskets:l,searchTerm:f,setSearchTerm:p,assignmentFilter:g,setAssignmentFilter:x,onAssignToBasket:async(e,r)=>{try{const n=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/user/bought-items/").concat(e,"/assign"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({basket_id:r})});if(n.ok)t("Item assigned to basket successfully","success"),o(t=>t.map(t=>t.id===e?(0,Ie.A)((0,Ie.A)({},t),{},{basket_id:r}):t)),S(),E();else{const e=await n.text();console.error("Assignment failed:",e),t("Failed to assign item to basket","error")}}catch(n){console.error("Error assigning item:",n),t("Error assigning item to basket","error")}},onUnassignFromBasket:A,onCreateBasket:()=>b(!0),loading:h}),"baskets"===n&&(0,yn.jsx)(mc,{baskets:l,onCreateBasket:()=>b(!0),onEditBasket:e=>{u(e),k({name:e.name,description:e.description||""}),w(!0)},onDeleteBasket:async e=>{if(window.confirm("Are you sure you want to delete this basket? All items will be unassigned."))try{(await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/user/baskets/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok?(t("Basket deleted successfully","success"),E(),S()):t("Failed to delete basket","error")}catch(r){console.error("Error deleting basket:",r),t("Error deleting basket","error")}},onExportBasket:async(r,n)=>{_(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[r.id]:!0}));try{t("Generating PDF export...","info");const a={basketId:r.id,basketName:r.name,basketDescription:r.description,totals:n,items:r.items||[],userId:e.id,exportDate:(new Date).toISOString()},s=await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/user/export-basket-pdf"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(a)});if(!s.ok)throw new Error("Export failed: ".concat(s.statusText));const i=await s.blob(),o=window.URL.createObjectURL(i),l=document.createElement("a");l.href=o;const c=(new Date).toISOString().slice(0,19).replace(/:/g,"-"),d="cataloro-basket-".concat(r.name.replace(/[^a-zA-Z0-9]/g,"_"),"-").concat(c,".pdf");l.download=d,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(o),t("Basket PDF exported successfully!","success")}catch(a){console.error("Export error:",a),t("Export failed: ".concat(a.message),"error")}finally{_(e=>(0,Ie.A)((0,Ie.A)({},e),{},{[r.id]:!1}))}},onUnassignFromBasket:A,onReassignToBasket:async(e,r,n)=>{try{if(!(await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/user/bought-items/").concat(e,"/unassign"),{method:"PUT",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to unassign item");if(!(await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/user/bought-items/").concat(e,"/assign"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({basket_id:n})})).ok)throw new Error("Failed to assign item to new basket");t("Item reassigned to basket successfully","success"),S(),E()}catch(a){console.error("Error reassigning item:",a),t("Error reassigning item to basket","error")}},calculateTotals:e=>{const t=e.items||[];return{valuePaid:t.reduce((e,t)=>e+(t.price||0),0),ptG:t.reduce((e,t)=>t.pt_g&&t.pt_g>0?e+t.pt_g:e+(t.weight||0)*(t.pt_ppm||0)/1e3*(t.renumeration_pt||0),0),pdG:t.reduce((e,t)=>t.pd_g&&t.pd_g>0?e+t.pd_g:e+(t.weight||0)*(t.pd_ppm||0)/1e3*(t.renumeration_pd||0),0),rhG:t.reduce((e,t)=>t.rh_g&&t.rh_g>0?e+t.rh_g:e+(t.weight||0)*(t.rh_ppm||0)/1e3*(t.renumeration_rh||0),0)}},loading:h,exportingBaskets:N})]})]}),y&&(0,yn.jsx)(gc,{title:"Create New Basket",form:j,setForm:k,onSave:async()=>{if(j.name.trim())try{(await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/user/baskets"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e.id,name:j.name.trim(),description:j.description.trim()})})).ok?(t("Basket created successfully","success"),b(!1),k({name:"",description:""}),E()):t("Failed to create basket","error")}catch(r){console.error("Error creating basket:",r),t("Error creating basket","error")}else t("Basket name is required","error")},onClose:()=>{b(!1),k({name:"",description:""})}}),v&&(0,yn.jsx)(gc,{title:"Edit Basket",form:j,setForm:k,onSave:async()=>{if(j.name.trim()&&d)try{(await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/user/baskets/").concat(d.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:j.name.trim(),description:j.description.trim()})})).ok?(t("Basket updated successfully","success"),w(!1),u(null),k({name:"",description:""}),E()):t("Failed to update basket","error")}catch(e){console.error("Error updating basket:",e),t("Error updating basket","error")}else t("Basket name is required","error")},onClose:()=>{w(!1),u(null),k({name:"",description:""})}})]})}):(0,yn.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)(Ms,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,yn.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"Access Denied"}),(0,yn.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"You don't have permission to access buy management."})]})})},yc=e=>{let{title:t="Dashboard",description:r="Advanced dashboard features coming soon"}=e;return(0,yn.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:(0,yn.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,yn.jsxs)("div",{className:"mb-8",children:[(0,yn.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:t}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:r})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:(0,yn.jsx)(ii,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Users"}),(0,yn.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"N/A"})]})]})}),(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:(0,yn.jsx)(Es,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Revenue"}),(0,yn.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"N/A"})]})]})}),(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:(0,yn.jsx)(fi,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Activity"}),(0,yn.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"N/A"})]})]})}),(0,yn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:(0,yn.jsx)(qs,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Analytics"}),(0,yn.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"N/A"})]})]})})]}),(0,yn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-8 shadow-sm text-center",children:[(0,yn.jsx)(qs,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,yn.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Advanced Features"}),(0,yn.jsx)("p",{className:"text-gray-600 dark:text-gray-400 max-w-md mx-auto",children:"Advanced dashboard features including analytics, performance monitoring, and security insights will be available in future updates."}),(0,yn.jsx)("div",{className:"mt-6",children:(0,yn.jsx)("span",{className:"inline-flex items-center px-4 py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 rounded-lg text-sm font-medium",children:"Coming Soon"})})]})]})})},bc=()=>{const[e,t]=(0,a.useState)(null),[r,n]=(0,a.useState)(null),[s,i]=(0,a.useState)(null),[o,l]=(0,a.useState)(!0),[c,d]=(0,a.useState)("performance");(0,a.useEffect)(()=>{u();const e=setInterval(u,12e4);return()=>clearInterval(e)},[]);const u=async()=>{try{const e="https://market-refactor-1.preview.emergentagent.com",[r,a,s]=await Promise.all([fetch("".concat(e,"/api/admin/performance")),fetch("".concat(e,"/api/admin/monitoring/dashboard")),fetch("".concat(e,"/api/admin/system/health"))]),o=await r.json(),l=await a.json(),c=await s.json();t(o),n(l),i(c)}catch(e){console.error("Failed to fetch performance data:",e)}finally{l(!1)}};if(o)return(0,yn.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),(0,yn.jsx)("p",{className:"text-gray-600 mt-4",children:"Loading Performance Dashboard..."})]})});const h=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"healthy":case"secure":case"optimized":case"enabled":return"text-green-600 bg-green-100";case"warning":case"medium_risk":case"degraded":return"text-yellow-600 bg-yellow-100";case"critical":case"high_risk":case"error":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return(0,yn.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,yn.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,yn.jsxs)("div",{className:"mb-8",children:[(0,yn.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Performance & Monitoring Dashboard"}),(0,yn.jsx)("p",{className:"text-gray-600 mt-2",children:"System performance optimization and real-time monitoring"})]}),(0,yn.jsx)("div",{className:"mb-6",children:(0,yn.jsx)("nav",{className:"flex space-x-8","aria-label":"Tabs",children:[{id:"performance",name:"Performance",icon:"\u26a1"},{id:"monitoring",name:"Monitoring",icon:"\ud83d\udcca"}].map(e=>(0,yn.jsxs)("button",{onClick:()=>d(e.id),className:"".concat(c===e.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2"),children:[(0,yn.jsx)("span",{children:e.icon}),(0,yn.jsx)("span",{children:e.name})]},e.id))})}),"performance"===c&&(()=>{var t,r,n,a,s,i,o;return(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,yn.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Database Status"}),(0,yn.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:null!==e&&void 0!==e&&null!==(t=e.optimizations)&&void 0!==t&&null!==(r=t.database_indexes)&&void 0!==r&&r.includes("\u2705")?"Optimized":"Basic"}),(0,yn.jsx)("p",{className:"text-xs text-green-600",children:null!==e&&void 0!==e&&null!==(n=e.database)&&void 0!==n&&n.index_size?"".concat((e.database.index_size/1024/1024).toFixed(1),"MB indexes"):"80+ indexes created"})]}),(0,yn.jsx)("div",{className:"text-2xl",children:"\ud83d\uddc3\ufe0f"})]})}),(0,yn.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Cache Status"}),(0,yn.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"healthy"===(null===e||void 0===e||null===(a=e.cache)||void 0===a?void 0:a.status)?"Active":"Fallback"}),(0,yn.jsxs)("p",{className:"text-xs text-blue-600",children:[(null===e||void 0===e||null===(s=e.cache)||void 0===s?void 0:s.total_keys)||0," keys cached"]})]}),(0,yn.jsx)("div",{className:"text-2xl",children:"\ud83d\udcbe"})]})}),(0,yn.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Search Engine"}),(0,yn.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"enabled"===(null===e||void 0===e||null===(i=e.search)||void 0===i?void 0:i.status)?"Active":"Fallback"}),(0,yn.jsx)("p",{className:"text-xs text-purple-600",children:"Database search ready"})]}),(0,yn.jsx)("div",{className:"text-2xl",children:"\ud83d\udd0d"})]})}),(0,yn.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Analytics"}),(0,yn.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:null!==e&&void 0!==e&&null!==(o=e.analytics)&&void 0!==o&&o.service_enabled?"Active":"Disabled"}),(0,yn.jsx)("p",{className:"text-xs text-orange-600",children:"BI & Forecasting enabled"})]}),(0,yn.jsx)("div",{className:"text-2xl",children:"\ud83d\udcca"})]})})]}),(0,yn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Performance Optimizations"}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,yn.jsxs)("div",{className:"space-y-4",children:[(0,yn.jsx)("h4",{className:"font-medium text-gray-700",children:"Database Optimizations"}),(null===e||void 0===e?void 0:e.optimizations)&&Object.entries(e.optimizations).map(e=>{let[t,r]=e;return(0,yn.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,yn.jsx)("span",{className:"text-sm font-medium text-gray-700 capitalize",children:t.replace(/_/g," ")}),(0,yn.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat(r.includes("\u2705")?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:r.includes("\u2705")?"Implemented":"Basic"})]},t)})]}),(0,yn.jsxs)("div",{className:"space-y-4",children:[(0,yn.jsx)("h4",{className:"font-medium text-gray-700",children:"Scalability Features"}),(null===e||void 0===e?void 0:e.scalability)&&Object.entries(e.scalability).map(e=>{let[t,r]=e;return(0,yn.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[(0,yn.jsx)("span",{className:"text-sm font-medium text-gray-700 capitalize",children:t.replace(/_/g," ")}),(0,yn.jsx)("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded",children:r})]},t)})]})]})]}),(0,yn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Database Collections Status"}),(0,yn.jsx)("div",{className:"overflow-x-auto",children:(0,yn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,yn.jsx)("thead",{className:"bg-gray-50",children:(0,yn.jsxs)("tr",{children:[(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Collection"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Documents"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Indexes"}),(0,yn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,yn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:(null===e||void 0===e?void 0:e.collections)&&Object.entries(e.collections).map(e=>{let[t,r]=e;return(0,yn.jsxs)("tr",{children:[(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.document_count||0}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.index_count||0}),(0,yn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,yn.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Optimized"})})]},t)})})]})})]})]})})(),"monitoring"===c&&(()=>{var e,t,n,a,i,o,l,c,d,u,m,f,p,g,x,y,b,v,w,j,k,N,_,S,E;return(0,yn.jsxs)("div",{className:"space-y-6",children:[(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,yn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"System Health"}),(0,yn.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(h(null===s||void 0===s?void 0:s.overall_status)),children:(null===s||void 0===s?void 0:s.overall_status)||"unknown"})]}),(0,yn.jsx)("div",{className:"space-y-2",children:(null===s||void 0===s?void 0:s.components)&&Object.entries(s.components).map(e=>{let[t,r]=e;return(0,yn.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,yn.jsx)("span",{className:"text-gray-600 capitalize",children:t}),(0,yn.jsx)("span",{className:"px-2 py-1 text-xs rounded ".concat(h(r.status)),children:r.status})]},t)})})]}),(0,yn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Performance Metrics"}),(0,yn.jsxs)("div",{className:"space-y-3",children:[(0,yn.jsx)("div",{children:(0,yn.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,yn.jsx)("span",{className:"text-gray-600",children:"Uptime"}),(0,yn.jsx)("span",{className:"font-medium",children:(null===r||void 0===r||null===(e=r.uptime)||void 0===e?void 0:e.uptime_formatted)||"0m"})]})}),(0,yn.jsx)("div",{children:(0,yn.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,yn.jsx)("span",{className:"text-gray-600",children:"Avg Response Time"}),(0,yn.jsxs)("span",{className:"font-medium",children:[(null===r||void 0===r||null===(t=r.performance_metrics)||void 0===t||null===(n=t.request_metrics)||void 0===n?void 0:n.avg_response_time_ms)||0,"ms"]})]})}),(0,yn.jsx)("div",{children:(0,yn.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,yn.jsx)("span",{className:"text-gray-600",children:"Total Requests"}),(0,yn.jsx)("span",{className:"font-medium",children:(null===r||void 0===r||null===(a=r.performance_metrics)||void 0===a||null===(i=a.request_metrics)||void 0===i?void 0:i.total_requests)||0})]})}),(0,yn.jsx)("div",{children:(0,yn.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,yn.jsx)("span",{className:"text-gray-600",children:"Error Rate"}),(0,yn.jsxs)("span",{className:"font-medium",children:[(100*(null===r||void 0===r||null===(o=r.performance_metrics)||void 0===o||null===(l=o.error_metrics)||void 0===l?void 0:l.recent_error_rate)||0).toFixed(2),"%"]})]})})]})]}),(0,yn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"System Resources"}),(0,yn.jsx)("div",{className:"space-y-3",children:(null===r||void 0===r||null===(c=r.performance_metrics)||void 0===c?void 0:c.system_metrics)&&(0,yn.jsxs)(yn.Fragment,{children:[(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,yn.jsx)("span",{className:"text-gray-600",children:"CPU Usage"}),(0,yn.jsxs)("span",{className:"font-medium",children:[(null===(d=r.performance_metrics.system_metrics.cpu)||void 0===d||null===(u=d.percent)||void 0===u?void 0:u.toFixed(1))||0,"%"]})]}),(0,yn.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,yn.jsx)("div",{className:"h-2 rounded-full ".concat(((null===(m=r.performance_metrics.system_metrics.cpu)||void 0===m?void 0:m.percent)||0)>80?"bg-red-500":((null===(f=r.performance_metrics.system_metrics.cpu)||void 0===f?void 0:f.percent)||0)>60?"bg-yellow-500":"bg-green-500"),style:{width:"".concat((null===(p=r.performance_metrics.system_metrics.cpu)||void 0===p?void 0:p.percent)||0,"%")}})})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,yn.jsx)("span",{className:"text-gray-600",children:"Memory Usage"}),(0,yn.jsxs)("span",{className:"font-medium",children:[(null===(g=r.performance_metrics.system_metrics.memory)||void 0===g||null===(x=g.percent)||void 0===x?void 0:x.toFixed(1))||0,"%"]})]}),(0,yn.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,yn.jsx)("div",{className:"h-2 rounded-full ".concat(((null===(y=r.performance_metrics.system_metrics.memory)||void 0===y?void 0:y.percent)||0)>85?"bg-red-500":((null===(b=r.performance_metrics.system_metrics.memory)||void 0===b?void 0:b.percent)||0)>70?"bg-yellow-500":"bg-green-500"),style:{width:"".concat((null===(v=r.performance_metrics.system_metrics.memory)||void 0===v?void 0:v.percent)||0,"%")}})})]}),(0,yn.jsxs)("div",{children:[(0,yn.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,yn.jsx)("span",{className:"text-gray-600",children:"Disk Usage"}),(0,yn.jsxs)("span",{className:"font-medium",children:[(null===(w=r.performance_metrics.system_metrics.disk)||void 0===w||null===(j=w.percent)||void 0===j?void 0:j.toFixed(1))||0,"%"]})]}),(0,yn.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,yn.jsx)("div",{className:"h-2 rounded-full ".concat(((null===(k=r.performance_metrics.system_metrics.disk)||void 0===k?void 0:k.percent)||0)>90?"bg-red-500":((null===(N=r.performance_metrics.system_metrics.disk)||void 0===N?void 0:N.percent)||0)>75?"bg-yellow-500":"bg-green-500"),style:{width:"".concat((null===(_=r.performance_metrics.system_metrics.disk)||void 0===_?void 0:_.percent)||0,"%")}})})]})]})})]})]}),(0,yn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recent Alerts"}),(0,yn.jsx)("div",{className:"space-y-3",children:(null===r||void 0===r||null===(S=r.recent_alerts)||void 0===S?void 0:S.length)>0?r.recent_alerts.map((e,t)=>(0,yn.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,yn.jsxs)("div",{children:[(0,yn.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,yn.jsx)("p",{className:"text-xs text-gray-600",children:e.description})]}),(0,yn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,yn.jsx)("span",{className:"px-2 py-1 text-xs rounded ".concat(h(e.severity)),children:e.severity}),(0,yn.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleTimeString()})]})]},t)):(0,yn.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,yn.jsx)("div",{className:"text-4xl mb-2",children:"\u2705"}),(0,yn.jsx)("p",{children:"No recent alerts - System running smoothly"})]})})]}),(0,yn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Monitoring Recommendations"}),(0,yn.jsx)("div",{className:"space-y-3",children:(null===r||void 0===r||null===(E=r.monitoring_recommendations)||void 0===E?void 0:E.map((e,t)=>(0,yn.jsxs)("div",{className:"border-l-4 border-green-500 pl-4 py-2",children:[(0,yn.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),(0,yn.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),(0,yn.jsxs)("span",{className:"text-xs px-2 py-1 rounded mt-1 inline-block ".concat("high"===e.priority?"bg-red-100 text-red-800":"medium"===e.priority?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:[e.priority," priority"]})]},t)))||[]})]})]})})(),(0,yn.jsx)("div",{className:"mt-8 text-center",children:(0,yn.jsx)("button",{onClick:u,className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Refresh System Status"})})]})})};var vc=r(3536);const wc=e=>{let{listing:t,getSimilarListings:r}=e;const[n,s]=(0,a.useState)([]),[i,o]=(0,a.useState)(!1);return(0,yn.jsx)("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,yn.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,yn.jsx)("div",{className:"flex-shrink-0 w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-gray-500 text-xs",children:"IMG"})}),(0,yn.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,yn.jsxs)("div",{className:"flex items-start justify-between",children:[(0,yn.jsxs)("div",{className:"flex-1",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 truncate",children:t.title}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:t.description}),(0,yn.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[(0,yn.jsx)("span",{className:"capitalize",children:t.category}),(0,yn.jsx)("span",{className:"capitalize",children:t.condition}),t.seller&&(0,yn.jsxs)("span",{children:[t.seller.username," (",t.seller.is_business?"Business":"Private",")"]})]})]}),(0,yn.jsxs)("div",{className:"flex-shrink-0 text-right",children:[(0,yn.jsxs)("div",{className:"text-xl font-bold text-gray-900",children:["\u20ac",t.price]}),(0,yn.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:new Date(t.created_at).toLocaleDateString()})]})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,yn.jsx)("button",{onClick:async()=>{if(!i){const e=await r(t.id);s(e)}o(!i)},className:"text-sm text-blue-600 hover:text-blue-700",children:i?"Hide Similar":"Show Similar Items"}),(0,yn.jsxs)("div",{className:"flex space-x-2",children:[(0,yn.jsx)("button",{className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"View Details"}),(0,yn.jsx)("button",{className:"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 transition-colors",children:"Contact Seller"})]})]}),i&&n.length>0&&(0,yn.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[(0,yn.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Similar Items"}),(0,yn.jsx)("div",{className:"space-y-2",children:n.map(e=>(0,yn.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,yn.jsx)("span",{className:"text-gray-700 truncate flex-1 mr-2",children:e.title}),(0,yn.jsxs)("span",{className:"font-medium text-gray-900",children:["\u20ac",e.price]})]},e.id))})]})]})]})})},jc=()=>{const[e,t]=(0,a.useState)(""),[r,n]=(0,a.useState)([]),[s,i]=(0,a.useState)([]),[o,l]=(0,a.useState)([]),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),[m,f]=(0,a.useState)({category:"",price_min:"",price_max:"",condition:"",seller_type:"",sort_by:"relevance"}),[p,g]=(0,a.useState)(1),[x,y]=(0,a.useState)(0);(0,a.useEffect)(()=>{v()},[]),(0,a.useEffect)(()=>{e.trim()?(w(),b(e)):(n([]),i([]),h(!1))},[e,m,p]);const b=(0,a.useCallback)((0,vc.debounce)(async e=>{if(!(e.length<2))try{const t="https://market-refactor-1.preview.emergentagent.com",r=await fetch("".concat(t,"/api/marketplace/search/suggestions?q=").concat(encodeURIComponent(e),"&limit=5")),n=await r.json();i(n.suggestions||[]),h(!0)}catch(t){console.error("Failed to fetch suggestions:",t)}},300),[]),v=async()=>{try{const e="https://market-refactor-1.preview.emergentagent.com",t=await fetch("".concat(e,"/api/marketplace/search/trending?limit=10")),r=await t.json();l(r.trending||[])}catch(e){console.error("Failed to fetch trending searches:",e)}},w=async()=>{if(e.trim()||Object.values(m).some(e=>e)){d(!0);try{const t="https://market-refactor-1.preview.emergentagent.com",r=new URLSearchParams((0,Ie.A)({q:e,page:p.toString(),limit:20..toString()},Object.fromEntries(Object.entries(m).filter(e=>{let[t,r]=e;return r})))),a=await fetch("".concat(t,"/api/marketplace/search?").concat(r)),s=await a.json();n(s.results||[]),y(s.total||0),h(!1)}catch(t){console.error("Search failed:",t),n([])}finally{d(!1)}}},j=(e,t)=>{f(r=>(0,Ie.A)((0,Ie.A)({},r),{},{[e]:t})),g(1)},k=async e=>{try{const t="https://market-refactor-1.preview.emergentagent.com",r=await fetch("".concat(t,"/api/marketplace/listings/").concat(e,"/similar?limit=3"));return(await r.json()).similar_listings||[]}catch(t){return console.error("Failed to fetch similar listings:",t),[]}},N=Math.ceil(x/20);return(0,yn.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,yn.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,yn.jsxs)("div",{className:"mb-8",children:[(0,yn.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Advanced Search"}),(0,yn.jsx)("p",{className:"text-gray-600 mt-2",children:"Enhanced search with intelligent suggestions and advanced filtering"})]}),(0,yn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,yn.jsxs)("div",{className:"relative mb-6",children:[(0,yn.jsxs)("div",{className:"relative",children:[(0,yn.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Search for catalysts, vehicles, parts...",className:"w-full px-4 py-3 pl-10 pr-4 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,yn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,yn.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,yn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),u&&s.length>0&&(0,yn.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg",children:s.map((e,r)=>(0,yn.jsx)("button",{onClick:()=>(e=>{t(e),h(!1),g(1)})(e),className:"w-full px-4 py-2 text-left hover:bg-gray-100 first:rounded-t-lg last:rounded-b-lg",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("svg",{className:"h-4 w-4 text-gray-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,yn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e]})},r))})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-4",children:[(0,yn.jsxs)("select",{value:m.category,onChange:e=>j("category",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,yn.jsx)("option",{value:"",children:"All Categories"}),(0,yn.jsx)("option",{value:"automotive",children:"Automotive"}),(0,yn.jsx)("option",{value:"industrial",children:"Industrial"}),(0,yn.jsx)("option",{value:"marine",children:"Marine"}),(0,yn.jsx)("option",{value:"motorcycle",children:"Motorcycle"})]}),(0,yn.jsx)("input",{type:"number",value:m.price_min,onChange:e=>j("price_min",e.target.value),placeholder:"Min Price (\u20ac)",className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,yn.jsx)("input",{type:"number",value:m.price_max,onChange:e=>j("price_max",e.target.value),placeholder:"Max Price (\u20ac)",className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,yn.jsxs)("select",{value:m.condition,onChange:e=>j("condition",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,yn.jsx)("option",{value:"",children:"Any Condition"}),(0,yn.jsx)("option",{value:"new",children:"New"}),(0,yn.jsx)("option",{value:"used",children:"Used"}),(0,yn.jsx)("option",{value:"refurbished",children:"Refurbished"})]}),(0,yn.jsxs)("select",{value:m.seller_type,onChange:e=>j("seller_type",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,yn.jsx)("option",{value:"",children:"Any Seller"}),(0,yn.jsx)("option",{value:"Business",children:"Business"}),(0,yn.jsx)("option",{value:"Private",children:"Private"})]}),(0,yn.jsxs)("select",{value:m.sort_by,onChange:e=>j("sort_by",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,yn.jsx)("option",{value:"relevance",children:"Relevance"}),(0,yn.jsx)("option",{value:"price_low",children:"Price: Low to High"}),(0,yn.jsx)("option",{value:"price_high",children:"Price: High to Low"}),(0,yn.jsx)("option",{value:"newest",children:"Newest First"}),(0,yn.jsx)("option",{value:"oldest",children:"Oldest First"})]})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsx)("button",{onClick:()=>{f({category:"",price_min:"",price_max:"",condition:"",seller_type:"",sort_by:"relevance"}),g(1)},className:"text-sm text-blue-600 hover:text-blue-700",children:"Clear all filters"}),(0,yn.jsxs)("div",{className:"text-sm text-gray-600",children:[x," results found"]})]})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,yn.jsxs)("div",{className:"lg:col-span-1",children:[(0,yn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Trending Searches"}),(0,yn.jsx)("div",{className:"space-y-2",children:o.map((e,r)=>(0,yn.jsx)("button",{onClick:()=>(e=>{t(e.query),g(1)})(e),className:"w-full text-left px-3 py-2 text-sm bg-gray-50 hover:bg-gray-100 rounded-md transition-colors",children:(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsx)("span",{children:e.query}),(0,yn.jsx)("span",{className:"text-xs text-gray-500",children:e.count})]})},r))})]}),(0,yn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Search Tips"}),(0,yn.jsxs)("div",{className:"space-y-3 text-sm text-gray-600",children:[(0,yn.jsxs)("div",{className:"flex items-start",children:[(0,yn.jsx)("div",{className:"flex-shrink-0 w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3"}),(0,yn.jsx)("div",{children:'Use specific terms like "BMW catalyst" or "Ford exhaust"'})]}),(0,yn.jsxs)("div",{className:"flex items-start",children:[(0,yn.jsx)("div",{className:"flex-shrink-0 w-2 h-2 bg-green-500 rounded-full mt-2 mr-3"}),(0,yn.jsx)("div",{children:"Filter by price range to find items in your budget"})]}),(0,yn.jsxs)("div",{className:"flex items-start",children:[(0,yn.jsx)("div",{className:"flex-shrink-0 w-2 h-2 bg-purple-500 rounded-full mt-2 mr-3"}),(0,yn.jsx)("div",{children:"Sort by newest to see recent listings first"})]}),(0,yn.jsxs)("div",{className:"flex items-start",children:[(0,yn.jsx)("div",{className:"flex-shrink-0 w-2 h-2 bg-orange-500 rounded-full mt-2 mr-3"}),(0,yn.jsx)("div",{children:"Use category filters to narrow down results"})]})]})]})]}),(0,yn.jsx)("div",{className:"lg:col-span-3",children:(0,yn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[c?(0,yn.jsxs)("div",{className:"text-center py-12",children:[(0,yn.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,yn.jsx)("p",{className:"text-gray-600 mt-4",children:"Searching..."})]}):0===r.length?(0,yn.jsxs)("div",{className:"text-center py-12",children:[(0,yn.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udd0d"}),(0,yn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No results found"}),(0,yn.jsx)("p",{className:"text-gray-600",children:"Try adjusting your search terms or filters"})]}):(0,yn.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,yn.jsx)(wc,{listing:e,getSimilarListings:k},e.id))}),N>1&&(0,yn.jsxs)("div",{className:"mt-8 flex items-center justify-between",children:[(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("button",{onClick:()=>g(e=>Math.max(e-1,1)),disabled:1===p,className:"px-3 py-2 text-sm bg-white border border-gray-300 rounded-l-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,yn.jsxs)("span",{className:"px-4 py-2 text-sm bg-gray-50 border-t border-b border-gray-300",children:["Page ",p," of ",N]}),(0,yn.jsx)("button",{onClick:()=>g(e=>Math.min(e+1,N)),disabled:p===N,className:"px-3 py-2 text-sm bg-white border border-gray-300 rounded-r-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),(0,yn.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",20*(p-1)+1,"-",Math.min(20*p,x)," of ",x," results"]})]})]})})]})]})})},kc=()=>{const[e,t]=(0,a.useState)("overview"),[r,n]=(0,a.useState)(null),[s,i]=(0,a.useState)(!0);(0,a.useEffect)(()=>{o()},[]);const o=async()=>{try{const e="https://market-refactor-1.preview.emergentagent.com",[t,r,a]=await Promise.all([fetch("".concat(e,"/api/admin/performance")),fetch("".concat(e,"/api/admin/analytics/kpis")),fetch("".concat(e,"/api/admin/security/dashboard"))]),s=await t.json(),i=await r.json(),o=await a.json();n({performance:s,analytics:i,security:o.security_metrics})}catch(e){console.error("Failed to fetch quick stats:",e)}finally{i(!1)}};return(0,yn.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,yn.jsx)("div",{className:"bg-white shadow",children:(0,yn.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,yn.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,yn.jsxs)("div",{className:"flex items-center space-x-8",children:[(0,yn.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Admin Dashboard Hub"}),(0,yn.jsxs)("nav",{className:"flex space-x-6",children:[(0,yn.jsx)("button",{onClick:()=>t("overview"),className:"text-sm font-medium ".concat("overview"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"," pb-4"),children:"\ud83c\udfe0 Overview"}),(0,yn.jsx)("button",{onClick:()=>t("analytics"),className:"text-sm font-medium ".concat("analytics"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"," pb-4"),children:"\ud83d\udcca Analytics"}),(0,yn.jsx)("button",{onClick:()=>t("performance"),className:"text-sm font-medium ".concat("performance"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"," pb-4"),children:"\u26a1 Performance"}),(0,yn.jsx)("button",{onClick:()=>t("security"),className:"text-sm font-medium ".concat("security"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"," pb-4"),children:"\ud83d\udee1\ufe0f Security"}),(0,yn.jsx)("button",{onClick:()=>t("search"),className:"text-sm font-medium ".concat("search"===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"," pb-4"),children:"\ud83d\udd0d Search"})]})]}),(0,yn.jsx)(Le,{to:"/admin",className:"text-sm text-gray-600 hover:text-gray-900",children:"\u2190 Back to Admin Panel"})]})})}),(0,yn.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["overview"===e&&(()=>{var e,n,a;return(0,yn.jsxs)("div",{className:"space-y-8",children:[(0,yn.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg p-8 text-white",children:[(0,yn.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Welcome to Cataloro Admin Hub"}),(0,yn.jsx)("p",{className:"text-blue-100 text-lg",children:"Complete business intelligence and system management dashboard"}),(0,yn.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-4 gap-4 text-center",children:[(0,yn.jsxs)("div",{className:"bg-white/10 rounded-lg p-4",children:[(0,yn.jsx)("div",{className:"text-2xl font-bold",children:"Phase 1"}),(0,yn.jsx)("div",{className:"text-sm",children:"Database Optimization"})]}),(0,yn.jsxs)("div",{className:"bg-white/10 rounded-lg p-4",children:[(0,yn.jsx)("div",{className:"text-2xl font-bold",children:"Phase 2"}),(0,yn.jsx)("div",{className:"text-sm",children:"Advanced Search"})]}),(0,yn.jsxs)("div",{className:"bg-white/10 rounded-lg p-4",children:[(0,yn.jsx)("div",{className:"text-2xl font-bold",children:"Phase 3"}),(0,yn.jsx)("div",{className:"text-sm",children:"Security & Monitoring"})]}),(0,yn.jsxs)("div",{className:"bg-white/10 rounded-lg p-4",children:[(0,yn.jsx)("div",{className:"text-2xl font-bold",children:"Phase 4"}),(0,yn.jsx)("div",{className:"text-sm",children:"Business Intelligence"})]})]})]}),!s&&r&&(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,yn.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"flex-shrink-0",children:(0,yn.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-white text-sm font-bold",children:"\u26a1"})})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Database Status"}),(0,yn.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"Optimized"}),(0,yn.jsx)("p",{className:"text-xs text-green-600",children:"80+ indexes active"})]})]})}),(0,yn.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"flex-shrink-0",children:(0,yn.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-white text-sm font-bold",children:"\ud83d\udcca"})})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),(0,yn.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===(e=r.analytics)||void 0===e||null===(n=e.business_metrics)||void 0===n?void 0:n.total_users)||0}),(0,yn.jsx)("p",{className:"text-xs text-blue-600",children:"Analytics active"})]})]})}),(0,yn.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"flex-shrink-0",children:(0,yn.jsx)("div",{className:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-white text-sm font-bold",children:"\ud83d\udee1\ufe0f"})})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Security Status"}),(0,yn.jsx)("p",{className:"text-2xl font-bold text-gray-900 capitalize",children:(null===(a=r.security)||void 0===a?void 0:a.security_status)||"Unknown"}),(0,yn.jsx)("p",{className:"text-xs text-red-600",children:"Protection active"})]})]})}),(0,yn.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("div",{className:"flex-shrink-0",children:(0,yn.jsx)("div",{className:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-white text-sm font-bold",children:"\ud83d\udd0d"})})}),(0,yn.jsxs)("div",{className:"ml-4",children:[(0,yn.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Search Engine"}),(0,yn.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"Enhanced"}),(0,yn.jsx)("p",{className:"text-xs text-purple-600",children:"AI-powered search"})]})]})})]}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,yn.jsx)("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>t("analytics"),children:(0,yn.jsxs)("div",{className:"p-6",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,yn.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-2xl",children:"\ud83d\udcca"})}),(0,yn.jsx)("span",{className:"text-sm text-blue-600 font-medium",children:"Phase 4"})]}),(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Business Intelligence"}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Comprehensive analytics, KPIs, forecasting, and business reports with predictive insights."}),(0,yn.jsxs)("div",{className:"space-y-2 text-xs text-gray-500",children:[(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"User Analytics & Engagement"]}),(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Revenue Forecasting"]}),(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Marketplace Performance"]})]})]})}),(0,yn.jsx)("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>t("performance"),children:(0,yn.jsxs)("div",{className:"p-6",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,yn.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-2xl",children:"\u26a1"})}),(0,yn.jsx)("span",{className:"text-sm text-green-600 font-medium",children:"Phase 1 & 3"})]}),(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Performance & Monitoring"}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Database optimization status, system monitoring, and real-time performance metrics."}),(0,yn.jsxs)("div",{className:"space-y-2 text-xs text-gray-500",children:[(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Database Optimization (80+ indexes)"]}),(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"System Health Monitoring"]}),(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("span",{className:"w-2 h-2 bg-orange-500 rounded-full mr-2"}),"Performance Metrics"]})]})]})}),(0,yn.jsx)("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>t("security"),children:(0,yn.jsxs)("div",{className:"p-6",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,yn.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-2xl",children:"\ud83d\udee1\ufe0f"})}),(0,yn.jsx)("span",{className:"text-sm text-red-600 font-medium",children:"Phase 3"})]}),(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Security & Compliance"}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Security monitoring, audit logs, threat detection, and compliance management."}),(0,yn.jsxs)("div",{className:"space-y-2 text-xs text-gray-500",children:[(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full mr-2"}),"Rate Limiting & Protection"]}),(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("span",{className:"w-2 h-2 bg-yellow-500 rounded-full mr-2"}),"Audit Logging"]}),(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("span",{className:"w-2 h-2 bg-orange-500 rounded-full mr-2"}),"Security Alerts"]})]})]})}),(0,yn.jsx)("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>t("search"),children:(0,yn.jsxs)("div",{className:"p-6",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,yn.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-2xl",children:"\ud83d\udd0d"})}),(0,yn.jsx)("span",{className:"text-sm text-purple-600 font-medium",children:"Phase 2"})]}),(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Advanced Search & Discovery"}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"AI-powered search with suggestions, trending queries, and intelligent recommendations."}),(0,yn.jsxs)("div",{className:"space-y-2 text-xs text-gray-500",children:[(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Smart Search Suggestions"]}),(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Advanced Filtering"]}),(0,yn.jsxs)("div",{className:"flex items-center",children:[(0,yn.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Similar Items Discovery"]})]})]})}),(0,yn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,yn.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-2xl",children:"\ud83c\udfd7\ufe0f"})}),(0,yn.jsx)("span",{className:"text-sm text-gray-600 font-medium",children:"All Phases"})]}),(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"System Architecture"}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Complete scalability implementation ready for 10,000+ users."}),(0,yn.jsxs)("div",{className:"space-y-2 text-xs text-gray-500",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsx)("span",{children:"Database Optimization"}),(0,yn.jsx)("span",{className:"text-green-600",children:"\u2705 Complete"})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsx)("span",{children:"Advanced Search"}),(0,yn.jsx)("span",{className:"text-green-600",children:"\u2705 Complete"})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsx)("span",{children:"Security & Monitoring"}),(0,yn.jsx)("span",{className:"text-green-600",children:"\u2705 Complete"})]}),(0,yn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,yn.jsx)("span",{children:"Business Intelligence"}),(0,yn.jsx)("span",{className:"text-green-600",children:"\u2705 Complete"})]})]})]}),(0,yn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,yn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,yn.jsx)("div",{className:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center",children:(0,yn.jsx)("span",{className:"text-2xl",children:"\u2699\ufe0f"})}),(0,yn.jsx)("span",{className:"text-sm text-indigo-600 font-medium",children:"Actions"})]}),(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Quick Actions"}),(0,yn.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Common administrative tasks and system management."}),(0,yn.jsxs)("div",{className:"space-y-2",children:[(0,yn.jsx)("button",{className:"w-full text-left px-3 py-2 text-sm bg-gray-50 hover:bg-gray-100 rounded-md transition-colors",children:"\ud83d\udcca Generate Business Report"}),(0,yn.jsx)("button",{onClick:o,className:"w-full text-left px-3 py-2 text-sm bg-gray-50 hover:bg-gray-100 rounded-md transition-colors",children:"\ud83d\udd04 Refresh System Status"}),(0,yn.jsx)(Le,{to:"/admin",className:"w-full block text-left px-3 py-2 text-sm bg-gray-50 hover:bg-gray-100 rounded-md transition-colors",children:"\ud83d\udc65 Manage Users & Listings"})]})]})]}),(0,yn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,yn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Scalability Implementation Highlights"}),(0,yn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,yn.jsx)("span",{className:"text-2xl",children:"\ud83d\uddc3\ufe0f"})}),(0,yn.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Database Optimization"}),(0,yn.jsx)("p",{className:"text-sm text-gray-600",children:"80+ indexes, query optimization, 50-90% faster performance"})]}),(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,yn.jsx)("span",{className:"text-2xl",children:"\ud83d\udd0d"})}),(0,yn.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Advanced Search"}),(0,yn.jsx)("p",{className:"text-sm text-gray-600",children:"AI-powered search, suggestions, recommendations, trending"})]}),(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,yn.jsx)("span",{className:"text-2xl",children:"\ud83d\udee1\ufe0f"})}),(0,yn.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Security & Monitoring"}),(0,yn.jsx)("p",{className:"text-sm text-gray-600",children:"Rate limiting, audit logs, real-time monitoring, alerts"})]}),(0,yn.jsxs)("div",{className:"text-center",children:[(0,yn.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,yn.jsx)("span",{className:"text-2xl",children:"\ud83d\udcca"})}),(0,yn.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Business Intelligence"}),(0,yn.jsx)("p",{className:"text-sm text-gray-600",children:"Analytics, forecasting, KPIs, automated reporting"})]})]})]})]})})(),"analytics"===e&&(0,yn.jsx)(yc,{title:"Analytics Dashboard",description:"Advanced analytics features coming soon"}),"performance"===e&&(0,yn.jsx)(bc,{}),"security"===e&&(0,yn.jsx)(yc,{title:"Security Dashboard",description:"Advanced security monitoring features coming soon"}),"search"===e&&(0,yn.jsx)(jc,{})]})]})};const Nc=new class{constructor(){this.intervalId=null,this.isRunning=!1,this.checkInterval=6e4,this.processedExpirations=new Set}start(){this.isRunning?console.log("\ud83d\udd04 Ads expiration service already running"):(console.log("\ud83d\ude80 Starting global ads expiration service"),this.isRunning=!0,this.checkExpirations(),this.intervalId=setInterval(()=>{this.checkExpirations()},this.checkInterval))}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.isRunning=!1,console.log("\ud83d\uded1 Stopped global ads expiration service")}async checkExpirations(){try{const e=JSON.parse(localStorage.getItem("cataloro_site_config")||"{}"),t=e.adsManager||{};console.log("\ud83d\udd0d Checking ad expirations...");for(const[r,n]of Object.entries(t))if(n.active&&n.expirationDate){const t=(0,Eo.isAdExpired)(n),a="".concat(r,"_").concat(n.expirationDate);t&&!this.processedExpirations.has(a)&&(console.log("\u23f0 Ad ".concat(r," has expired - executing events")),this.processedExpirations.add(a),await this.executeExpirationEvents(r,n,e))}}catch(e){console.error("\u274c Error checking ad expirations:",e)}}async executeExpirationEvents(e,t,r){const n=t.expirationEvents||[];console.log("\ud83d\udd14 Executing expiration events for ".concat(e,":"),n);for(const s of n)try{await this.executeEvent(s,e,t,r)}catch(a){console.error("\u274c Error executing expiration event ".concat(s," for ").concat(e,":"),a)}}async executeEvent(e,t,r,n){switch(e){case"notify":await this.executeNotifyEvent(t,r);break;case"deactivate":this.executeDeactivateEvent(t,r,n);break;case"reset":this.executeResetEvent(t,r,n);break;default:console.warn("\u2753 Unknown expiration event: ".concat(e))}}async executeNotifyEvent(e,t){console.log("\ud83d\udce7 Sending notifications for expired ad: ".concat(e));const r=t.notificationMethods||["notificationCenter"];if(r.includes("notificationCenter")){const r=t.notificationUsers||[];if(console.log("\ud83d\udd14 Sending notification center alerts to ".concat(r.length," users")),r.length>0){const a=r.map(async r=>{try{const n=t.description||e,a=this.getPageLocationName(e);return(await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/user/").concat(r.id,"/notifications"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"\u23f0 Advertisement Expired",message:'"'.concat(n,'" on ').concat(a," has expired and been processed according to your settings"),type:"warning"})})).ok?(console.log("\u2705 Expiration notification sent to user ".concat(r.email," (").concat(r.id,")")),{success:!0,user:r.email}):(console.error("\u274c Failed to send expiration notification to user ".concat(r.email)),{success:!1,user:r.email,error:"HTTP Error"})}catch(n){return console.error("\u274c Error sending expiration notification to user ".concat(r.email,":"),n),{success:!1,user:r.email,error:n.message}}});try{const e=(await Promise.all(a)).filter(e=>e.success).length;console.log("\ud83d\udcca Expiration notifications: ".concat(e,"/").concat(r.length," sent successfully"))}catch(n){console.error("\u274c Error in batch expiration notification sending:",n)}}}r.includes("email")&&console.log("\ud83d\udce7 Email notifications would be sent here"),r.includes("browserPush")&&console.log("\ud83d\udd14 Browser push notifications would be sent here")}executeDeactivateEvent(e,t,r){console.log("\ud83d\udd04 Deactivating expired ad: ".concat(e)),r.adsManager[e].active=!1,localStorage.setItem("cataloro_site_config",JSON.stringify(r)),window.dispatchEvent(new CustomEvent("adsConfigUpdated",{detail:r.adsManager})),console.log("\u2705 Ad ".concat(e," has been deactivated"))}executeResetEvent(e,t,r){console.log("\ud83d\udd04 Auto-resetting duration for ad: ".concat(e));const n=(new Date).toISOString(),a=t.runtime,s=this.calculateExpirationDate(n,a);r.adsManager[e].startDate=n,r.adsManager[e].expirationDate=s,r.adsManager[e].active=!0,localStorage.setItem("cataloro_site_config",JSON.stringify(r));const i="".concat(e,"_").concat(t.expirationDate);this.processedExpirations.delete(i),this.sendRestartNotifications(e,r.adsManager[e],a,s),window.dispatchEvent(new CustomEvent("adsConfigUpdated",{detail:r.adsManager})),console.log("\u2705 Ad ".concat(e," has been automatically reset until ").concat(new Date(s).toLocaleString()))}async sendRestartNotifications(e,t,r,n){const a=t.notificationUsers||[];if((t.notificationMethods||[]).includes("notificationCenter")&&a.length>0){console.log("\ud83d\udd04 Sending ad restart notifications to ".concat(a.length," users (auto-reset)"));const i=a.map(async a=>{try{const s=t.description||e,i=this.getPageLocationName(e);return(await fetch("".concat("https://market-refactor-1.preview.emergentagent.com","/api/user/").concat(a.id,"/notifications"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"\ud83d\udd04 Advertisement Restarted",message:'"'.concat(s,'" on ').concat(i," has automatically restarted with a new ").concat(r," duration until ").concat(new Date(n).toLocaleString("de-DE",{timeZone:"Europe/Berlin"})),type:"info"})})).ok?(console.log("\u2705 Ad restart notification sent to user ".concat(a.email," (").concat(a.id,")")),{success:!0,user:a.email}):(console.error("\u274c Failed to send ad restart notification to user ".concat(a.email)),{success:!1,user:a.email,error:"HTTP Error"})}catch(s){return console.error("\u274c Error sending ad restart notification to user ".concat(a.email,":"),s),{success:!1,user:a.email,error:s.message}}});try{const e=(await Promise.all(i)).filter(e=>e.success).length;console.log("\ud83d\udcca Ad restart notifications: ".concat(e,"/").concat(a.length," sent successfully"))}catch(s){console.error("\u274c Error in batch restart notification sending:",s)}}}calculateExpirationDate(e,t){const r=new Date(e),n=new Date(r);if(t.startsWith("custom_")){const e=t.match(/custom_(\d+)d_(\d+)h_(\d+)m/);if(e){const t=parseInt(e[1])||0,r=parseInt(e[2])||0,a=parseInt(e[3])||0;return n.setDate(n.getDate()+t),n.setHours(n.getHours()+r),n.setMinutes(n.getMinutes()+a),n.toISOString()}}if(t.includes("days")||t.includes("hours")||t.includes("minutes")){const e=t.match(/(\d+)\s*days?/),r=t.match(/(\d+)\s*hours?/),a=t.match(/(\d+)\s*minutes?/),s=e?parseInt(e[1]):0,i=r?parseInt(r[1]):0,o=a?parseInt(a[1]):0;return n.setDate(n.getDate()+s),n.setHours(n.getHours()+i),n.setMinutes(n.getMinutes()+o),n.toISOString()}const[a,s]=t.split(" "),i=parseInt(a);switch(null===s||void 0===s?void 0:s.toLowerCase()){case"minute":case"minutes":return new Date(r.getTime()+60*i*1e3).toISOString();case"hour":case"hours":return new Date(r.getTime()+60*i*60*1e3).toISOString();case"day":case"days":return new Date(r.getTime()+24*i*60*60*1e3).toISOString();case"week":case"weeks":return new Date(r.getTime()+7*i*24*60*60*1e3).toISOString();case"month":case"months":const e=new Date(r);return e.setMonth(e.getMonth()+i),e.toISOString();default:console.warn("Unknown runtime format: ".concat(t,", defaulting to 1 month"));const n=new Date(r);return n.setMonth(n.getMonth()+1),n.toISOString()}}cleanupProcessedExpirations(){console.log("\ud83e\uddf9 Cleaning up old expiration records")}getPageLocationName(e){return{browsePageAd:"Browse Page",favoriteAd:"Favorites Page",messengerAd:"Messages Page",footerAd:"Footer"}[e]||e}};const _c=function(){const[e,t]=(0,a.useState)(!1);(0,a.useEffect)(()=>{const e=()=>{const e=window.innerWidth,r=navigator.userAgent,n=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(r),a=e<1024,s="true"===new URLSearchParams(window.location.search).get("mobile"),i=a||n||e<=768||s;console.log("\ud83d\udd0d Mobile detection: width=".concat(e,", userAgent=").concat(n,", forceMobile=").concat(s,", shouldUseMobile=").concat(i)),t(i)};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",()=>{setTimeout(e,100)}),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[]),(0,a.useEffect)(()=>{(0,Eo.loadAndApplyAdsConfiguration)(),Nc.start();const e=document.getElementById("app-loader");return e&&setTimeout(()=>{e.style.display="none"},500),()=>{Nc.stop()}},[]);const r=e?ko:yo,n=e?Io:Do;return(0,yn.jsx)("div",{className:"App",children:(0,yn.jsx)(An,{children:(0,yn.jsx)(qn,{children:(0,yn.jsx)($n,{children:(0,yn.jsx)(vs,{children:(0,yn.jsx)(Oe,{children:(0,yn.jsxs)(ke,{children:[(0,yn.jsx)(we,{path:fn.LOGIN,element:(0,yn.jsx)(Zl,{})}),(0,yn.jsx)(we,{path:fn.REGISTER,element:(0,yn.jsx)(Xl,{})}),(0,yn.jsx)(we,{path:"/info",element:(0,yn.jsx)(sc,{})}),(0,yn.jsxs)(we,{path:"/",element:(0,yn.jsx)(r,{}),children:[(0,yn.jsx)(we,{index:!0,element:(0,yn.jsx)(be,{to:fn.BROWSE,replace:!0})}),(0,yn.jsx)(we,{path:fn.BROWSE,element:(0,yn.jsx)(n,{})}),(0,yn.jsx)(we,{path:"product/:productId",element:e?(0,yn.jsx)(Wo,{}):(0,yn.jsx)(Vo,{})}),(0,yn.jsx)(we,{path:"listing/:id",element:e?(0,yn.jsx)(Wo,{}):(0,yn.jsx)(Vo,{})}),(0,yn.jsx)(we,{path:"search",element:(0,yn.jsx)(n,{})}),(0,yn.jsx)(we,{path:"trending",element:(0,yn.jsx)(n,{})}),(0,yn.jsx)(we,{path:"create-listing",element:(0,yn.jsx)(sl,{})}),(0,yn.jsx)(we,{path:"edit-listing/:id",element:(0,yn.jsx)(ol,{})}),(0,yn.jsx)(we,{path:"pending-sales",element:(0,yn.jsx)(cl,{})}),(0,yn.jsx)(we,{path:"view-all-requests",element:(0,yn.jsx)(hl,{})}),(0,yn.jsx)(we,{path:fn.MY_LISTINGS,element:(0,yn.jsx)(nl,{})}),(0,yn.jsx)(we,{path:"mobile-my-listings",element:(0,yn.jsx)(Yo,{})}),(0,yn.jsx)(we,{path:"mobile-tenders",element:(0,yn.jsx)(el,{})}),(0,yn.jsx)(we,{path:"messages",element:(0,yn.jsx)(Jl,{})}),(0,yn.jsx)(we,{path:fn.TENDERS.substring(1),element:(0,yn.jsx)(dc,{})}),(0,yn.jsx)(we,{path:"buy-management",element:(0,yn.jsx)(xc,{})}),(0,yn.jsx)(we,{path:"analytics",element:(0,yn.jsx)(Ul,{})}),(0,yn.jsx)(we,{path:"performance",element:(0,yn.jsx)(Ul,{})}),(0,yn.jsx)(we,{path:fn.ADMIN_PANEL,element:(0,yn.jsx)(Ul,{})}),(0,yn.jsx)(we,{path:"admin/analytics",element:(0,yn.jsx)(Ul,{})}),(0,yn.jsx)(we,{path:"admin/users",element:(0,yn.jsx)(Ul,{})}),(0,yn.jsx)(we,{path:"admin/dashboard",element:(0,yn.jsx)(kc,{})}),(0,yn.jsx)(we,{path:"admin/performance",element:(0,yn.jsx)(bc,{})}),(0,yn.jsx)(we,{path:fn.FAVORITES,element:(0,yn.jsx)(zl,{})}),(0,yn.jsx)(we,{path:fn.NOTIFICATIONS,element:(0,yn.jsx)(Vl,{})}),(0,yn.jsx)(we,{path:fn.PROFILE,element:(0,yn.jsx)(Wl,{})}),(0,yn.jsx)(we,{path:"profile/:userId",element:(0,yn.jsx)(Kl,{})}),(0,yn.jsx)(we,{path:"settings",element:(0,yn.jsx)(Wl,{})})]}),(0,yn.jsx)(we,{path:"*",element:(0,yn.jsx)(be,{to:fn.BROWSE,replace:!0})})]})})})})})})})},Sc=document.getElementById("root");(0,i.H)(Sc).render((0,yn.jsx)(a.StrictMode,{children:(0,yn.jsx)(_c,{})}));var Ec;Ec&&Ec instanceof Function&&r.e(453).then(r.bind(r,6453)).then(e=>{let{getCLS:t,getFID:r,getFCP:n,getLCP:a,getTTFB:s}=e;t(Ec),r(Ec),n(Ec),a(Ec),s(Ec)})})()})();
//# sourceMappingURL=main.51f9b418.js.map